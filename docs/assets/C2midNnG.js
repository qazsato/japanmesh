const __vite__fileDeps=["./CxnJsYUO.js","./IconCSS.Z2BAHt_z.css","./Bu0oJ3T-.js","./error-404.CjGVuf6H.css","./Bs6Gzgir.js","./error-500.DFBAsgKS.css"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
var BE=Object.defineProperty;var FE=(e,n,s)=>n in e?BE(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s;var Fa=(e,n,s)=>FE(e,typeof n!="symbol"?n+"":n,s);/**
* @vue/shared v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Cg(e,n){const s=new Set(e.split(","));return u=>s.has(u)}const Gi={},tc=[],Yn=()=>{},VE=()=>!1,hh=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Ag=e=>e.startsWith("onUpdate:"),wr=Object.assign,kg=(e,n)=>{const s=e.indexOf(n);s>-1&&e.splice(s,1)},NE=Object.prototype.hasOwnProperty,hi=(e,n)=>NE.call(e,n),$t=Array.isArray,ic=e=>Af(e)==="[object Map]",gx=e=>Af(e)==="[object Set]",qt=e=>typeof e=="function",ir=e=>typeof e=="string",el=e=>typeof e=="symbol",ji=e=>e!==null&&typeof e=="object",Mg=e=>(ji(e)||qt(e))&&qt(e.then)&&qt(e.catch),yx=Object.prototype.toString,Af=e=>yx.call(e),$E=e=>Af(e).slice(8,-1),_x=e=>Af(e)==="[object Object]",Lg=e=>ir(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,rc=Cg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),kf=e=>{const n=Object.create(null);return s=>n[s]||(n[s]=e(s))},jE=/-(\w)/g,Oo=kf(e=>e.replace(jE,(n,s)=>s?s.toUpperCase():"")),UE=/\B([A-Z])/g,_c=kf(e=>e.replace(UE,"-$1").toLowerCase()),Mf=kf(e=>e.charAt(0).toUpperCase()+e.slice(1)),lm=kf(e=>e?`on${Mf(e)}`:""),ta=(e,n)=>!Object.is(e,n),cm=(e,...n)=>{for(let s=0;s<e.length;s++)e[s](...n)},vx=(e,n,s,u=!1)=>{Object.defineProperty(e,n,{configurable:!0,enumerable:!1,writable:u,value:s})},qE=e=>{const n=parseFloat(e);return isNaN(n)?e:n},xx=e=>{const n=ir(e)?Number(e):NaN;return isNaN(n)?e:n};let m0;const bx=()=>m0||(m0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ia(e){if($t(e)){const n={};for(let s=0;s<e.length;s++){const u=e[s],h=ir(u)?WE(u):ia(u);if(h)for(const g in h)n[g]=h[g]}return n}else if(ir(e)||ji(e))return e}const HE=/;(?![^(]*\))/g,GE=/:([^]+)/,ZE=/\/\*[^]*?\*\//g;function WE(e){const n={};return e.replace(ZE,"").split(HE).forEach(s=>{if(s){const u=s.split(GE);u.length>1&&(n[u[0].trim()]=u[1].trim())}}),n}function Mt(e){let n="";if(ir(e))n=e;else if($t(e))for(let s=0;s<e.length;s++){const u=Mt(e[s]);u&&(n+=u+" ")}else if(ji(e))for(const s in e)e[s]&&(n+=s+" ");return n.trim()}function zm(e){if(!e)return null;let{class:n,style:s}=e;return n&&!ir(n)&&(e.class=Mt(n)),s&&(e.style=ia(s)),e}const KE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",XE=Cg(KE);function wx(e){return!!e||e===""}const Ur=e=>ir(e)?e:e==null?"":$t(e)||ji(e)&&(e.toString===yx||!qt(e.toString))?JSON.stringify(e,Ex,2):String(e),Ex=(e,n)=>n&&n.__v_isRef?Ex(e,n.value):ic(n)?{[`Map(${n.size})`]:[...n.entries()].reduce((s,[u,h],g)=>(s[um(u,g)+" =>"]=h,s),{})}:gx(n)?{[`Set(${n.size})`]:[...n.values()].map(s=>um(s))}:el(n)?um(n):ji(n)&&!$t(n)&&!_x(n)?String(n):n,um=(e,n="")=>{var s;return el(e)?`Symbol(${(s=e.description)!=null?s:n})`:e};/**
* @vue/reactivity v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Dn;class Sx{constructor(n=!1){this.detached=n,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Dn,!n&&Dn&&(this.index=(Dn.scopes||(Dn.scopes=[])).push(this)-1)}get active(){return this._active}run(n){if(this._active){const s=Dn;try{return Dn=this,n()}finally{Dn=s}}}on(){Dn=this}off(){Dn=this.parent}stop(n){if(this._active){let s,u;for(s=0,u=this.effects.length;s<u;s++)this.effects[s].stop();for(s=0,u=this.cleanups.length;s<u;s++)this.cleanups[s]();if(this.scopes)for(s=0,u=this.scopes.length;s<u;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!n){const h=this.parent.scopes.pop();h&&h!==this&&(this.parent.scopes[this.index]=h,h.index=this.index)}this.parent=void 0,this._active=!1}}}function JE(e){return new Sx(e)}function YE(e,n=Dn){n&&n.active&&n.effects.push(e)}function Pg(){return Dn}function Tx(e){Dn&&Dn.cleanups.push(e)}let Za;class zg{constructor(n,s,u,h){this.fn=n,this.trigger=s,this.scheduler=u,this.active=!0,this.deps=[],this._dirtyLevel=5,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,YE(this,h)}get dirty(){if(this._dirtyLevel===2)return!1;if(this._dirtyLevel===3||this._dirtyLevel===4){this._dirtyLevel=1,na();for(let n=0;n<this._depsLength;n++){const s=this.deps[n];if(s.computed){if(s.computed.effect._dirtyLevel===2)return!0;if(QE(s.computed),this._dirtyLevel>=5)break}}this._dirtyLevel===1&&(this._dirtyLevel=0),oa()}return this._dirtyLevel>=5}set dirty(n){this._dirtyLevel=n?5:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let n=Qs,s=Za;try{return Qs=!0,Za=this,this._runnings++,g0(this),this.fn()}finally{y0(this),this._runnings--,Za=s,Qs=n}}stop(){this.active&&(g0(this),y0(this),this.onStop&&this.onStop(),this.active=!1)}}function QE(e){return e.value}function g0(e){e._trackId++,e._depsLength=0}function y0(e){if(e.deps.length>e._depsLength){for(let n=e._depsLength;n<e.deps.length;n++)Ix(e.deps[n],e);e.deps.length=e._depsLength}}function Ix(e,n){const s=e.get(n);s!==void 0&&n._trackId!==s&&(e.delete(n),e.size===0&&e.cleanup())}let Qs=!0,Dm=0;const Cx=[];function na(){Cx.push(Qs),Qs=!1}function oa(){const e=Cx.pop();Qs=e===void 0?!0:e}function Dg(){Dm++}function Rg(){for(Dm--;!Dm&&Rm.length;)Rm.shift()()}function Ax(e,n,s){if(n.get(e)!==e._trackId){n.set(e,e._trackId);const u=e.deps[e._depsLength];u!==n?(u&&Ix(u,e),e.deps[e._depsLength++]=n):e._depsLength++}}const Rm=[];function kx(e,n,s){Dg();for(const u of e.keys()){if(!e.computed&&u.computed&&e.get(u)===u._trackId&&u._runnings>0){u._dirtyLevel=2;continue}let h;u._dirtyLevel<n&&(h??(h=e.get(u)===u._trackId))&&(u._shouldSchedule||(u._shouldSchedule=u._dirtyLevel===0),u.computed&&u._dirtyLevel===2&&(u._shouldSchedule=!0),u._dirtyLevel=n),u._shouldSchedule&&(h??(h=e.get(u)===u._trackId))&&(u.trigger(),(!u._runnings||u.allowRecurse)&&u._dirtyLevel!==3&&(u._shouldSchedule=!1,u.scheduler&&Rm.push(u.scheduler)))}Rg()}const Mx=(e,n)=>{const s=new Map;return s.cleanup=e,s.computed=n,s},nf=new WeakMap,Wa=Symbol(""),Om=Symbol("");function Sn(e,n,s){if(Qs&&Za){let u=nf.get(e);u||nf.set(e,u=new Map);let h=u.get(s);h||u.set(s,h=Mx(()=>u.delete(s))),Ax(Za,h)}}function ds(e,n,s,u,h,g){const m=nf.get(e);if(!m)return;let c=[];if(n==="clear")c=[...m.values()];else if(s==="length"&&$t(e)){const T=Number(u);m.forEach((M,k)=>{(k==="length"||!el(k)&&k>=T)&&c.push(M)})}else switch(s!==void 0&&c.push(m.get(s)),n){case"add":$t(e)?Lg(s)&&c.push(m.get("length")):(c.push(m.get(Wa)),ic(e)&&c.push(m.get(Om)));break;case"delete":$t(e)||(c.push(m.get(Wa)),ic(e)&&c.push(m.get(Om)));break;case"set":ic(e)&&c.push(m.get(Wa));break}Dg();for(const T of c)T&&kx(T,5);Rg()}function eS(e,n){const s=nf.get(e);return s&&s.get(n)}const tS=Cg("__proto__,__v_isRef,__isVue"),Lx=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(el)),_0=iS();function iS(){const e={};return["includes","indexOf","lastIndexOf"].forEach(n=>{e[n]=function(...s){const u=Vt(this);for(let g=0,m=this.length;g<m;g++)Sn(u,"get",g+"");const h=u[n](...s);return h===-1||h===!1?u[n](...s.map(Vt)):h}}),["push","pop","shift","unshift","splice"].forEach(n=>{e[n]=function(...s){na(),Dg();const u=Vt(this)[n].apply(this,s);return Rg(),oa(),u}}),e}function rS(e){el(e)||(e=String(e));const n=Vt(this);return Sn(n,"has",e),n.hasOwnProperty(e)}class Px{constructor(n=!1,s=!1){this._isReadonly=n,this._isShallow=s}get(n,s,u){const h=this._isReadonly,g=this._isShallow;if(s==="__v_isReactive")return!h;if(s==="__v_isReadonly")return h;if(s==="__v_isShallow")return g;if(s==="__v_raw")return u===(h?g?gS:Ox:g?Rx:Dx).get(n)||Object.getPrototypeOf(n)===Object.getPrototypeOf(u)?n:void 0;const m=$t(n);if(!h){if(m&&hi(_0,s))return Reflect.get(_0,s,u);if(s==="hasOwnProperty")return rS}const c=Reflect.get(n,s,u);return(el(s)?Lx.has(s):tS(s))||(h||Sn(n,"get",s),g)?c:fr(c)?m&&Lg(s)?c:c.value:ji(c)?h?Fg(c):Bo(c):c}}class zx extends Px{constructor(n=!1){super(!1,n)}set(n,s,u,h){let g=n[s];if(!this._isShallow){const T=cc(g);if(!of(u)&&!cc(u)&&(g=Vt(g),u=Vt(u)),!$t(n)&&fr(g)&&!fr(u))return T?!1:(g.value=u,!0)}const m=$t(n)&&Lg(s)?Number(s)<n.length:hi(n,s),c=Reflect.set(n,s,u,h);return n===Vt(h)&&(m?ta(u,g)&&ds(n,"set",s,u):ds(n,"add",s,u)),c}deleteProperty(n,s){const u=hi(n,s);n[s];const h=Reflect.deleteProperty(n,s);return h&&u&&ds(n,"delete",s,void 0),h}has(n,s){const u=Reflect.has(n,s);return(!el(s)||!Lx.has(s))&&Sn(n,"has",s),u}ownKeys(n){return Sn(n,"iterate",$t(n)?"length":Wa),Reflect.ownKeys(n)}}class nS extends Px{constructor(n=!1){super(!0,n)}set(n,s){return!0}deleteProperty(n,s){return!0}}const oS=new zx,sS=new nS,aS=new zx(!0);const Og=e=>e,Lf=e=>Reflect.getPrototypeOf(e);function Ad(e,n,s=!1,u=!1){e=e.__v_raw;const h=Vt(e),g=Vt(n);s||(ta(n,g)&&Sn(h,"get",n),Sn(h,"get",g));const{has:m}=Lf(h),c=u?Og:s?Ng:th;if(m.call(h,n))return c(e.get(n));if(m.call(h,g))return c(e.get(g));e!==h&&e.get(n)}function kd(e,n=!1){const s=this.__v_raw,u=Vt(s),h=Vt(e);return n||(ta(e,h)&&Sn(u,"has",e),Sn(u,"has",h)),e===h?s.has(e):s.has(e)||s.has(h)}function Md(e,n=!1){return e=e.__v_raw,!n&&Sn(Vt(e),"iterate",Wa),Reflect.get(e,"size",e)}function v0(e){e=Vt(e);const n=Vt(this);return Lf(n).has.call(n,e)||(n.add(e),ds(n,"add",e,e)),this}function x0(e,n){n=Vt(n);const s=Vt(this),{has:u,get:h}=Lf(s);let g=u.call(s,e);g||(e=Vt(e),g=u.call(s,e));const m=h.call(s,e);return s.set(e,n),g?ta(n,m)&&ds(s,"set",e,n):ds(s,"add",e,n),this}function b0(e){const n=Vt(this),{has:s,get:u}=Lf(n);let h=s.call(n,e);h||(e=Vt(e),h=s.call(n,e)),u&&u.call(n,e);const g=n.delete(e);return h&&ds(n,"delete",e,void 0),g}function w0(){const e=Vt(this),n=e.size!==0,s=e.clear();return n&&ds(e,"clear",void 0,void 0),s}function Ld(e,n){return function(u,h){const g=this,m=g.__v_raw,c=Vt(m),T=n?Og:e?Ng:th;return!e&&Sn(c,"iterate",Wa),m.forEach((M,k)=>u.call(h,T(M),T(k),g))}}function Pd(e,n,s){return function(...u){const h=this.__v_raw,g=Vt(h),m=ic(g),c=e==="entries"||e===Symbol.iterator&&m,T=e==="keys"&&m,M=h[e](...u),k=s?Og:n?Ng:th;return!n&&Sn(g,"iterate",T?Om:Wa),{next(){const{value:A,done:L}=M.next();return L?{value:A,done:L}:{value:c?[k(A[0]),k(A[1])]:k(A),done:L}},[Symbol.iterator](){return this}}}}function js(e){return function(...n){return e==="delete"?!1:e==="clear"?void 0:this}}function lS(){const e={get(g){return Ad(this,g)},get size(){return Md(this)},has:kd,add:v0,set:x0,delete:b0,clear:w0,forEach:Ld(!1,!1)},n={get(g){return Ad(this,g,!1,!0)},get size(){return Md(this)},has:kd,add:v0,set:x0,delete:b0,clear:w0,forEach:Ld(!1,!0)},s={get(g){return Ad(this,g,!0)},get size(){return Md(this,!0)},has(g){return kd.call(this,g,!0)},add:js("add"),set:js("set"),delete:js("delete"),clear:js("clear"),forEach:Ld(!0,!1)},u={get(g){return Ad(this,g,!0,!0)},get size(){return Md(this,!0)},has(g){return kd.call(this,g,!0)},add:js("add"),set:js("set"),delete:js("delete"),clear:js("clear"),forEach:Ld(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(g=>{e[g]=Pd(g,!1,!1),s[g]=Pd(g,!0,!1),n[g]=Pd(g,!1,!0),u[g]=Pd(g,!0,!0)}),[e,s,n,u]}const[cS,uS,hS,dS]=lS();function Bg(e,n){const s=n?e?dS:hS:e?uS:cS;return(u,h,g)=>h==="__v_isReactive"?!e:h==="__v_isReadonly"?e:h==="__v_raw"?u:Reflect.get(hi(s,h)&&h in u?s:u,h,g)}const fS={get:Bg(!1,!1)},pS={get:Bg(!1,!0)},mS={get:Bg(!0,!1)};const Dx=new WeakMap,Rx=new WeakMap,Ox=new WeakMap,gS=new WeakMap;function yS(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function _S(e){return e.__v_skip||!Object.isExtensible(e)?0:yS($E(e))}function Bo(e){return cc(e)?e:Vg(e,!1,oS,fS,Dx)}function ec(e){return Vg(e,!1,aS,pS,Rx)}function Fg(e){return Vg(e,!0,sS,mS,Ox)}function Vg(e,n,s,u,h){if(!ji(e)||e.__v_raw&&!(n&&e.__v_isReactive))return e;const g=h.get(e);if(g)return g;const m=_S(e);if(m===0)return e;const c=new Proxy(e,m===2?u:s);return h.set(e,c),c}function Uu(e){return cc(e)?Uu(e.__v_raw):!!(e&&e.__v_isReactive)}function cc(e){return!!(e&&e.__v_isReadonly)}function of(e){return!!(e&&e.__v_isShallow)}function Bx(e){return e?!!e.__v_raw:!1}function Vt(e){const n=e&&e.__v_raw;return n?Vt(n):e}function vS(e){return Object.isExtensible(e)&&vx(e,"__v_skip",!0),e}const th=e=>ji(e)?Bo(e):e,Ng=e=>ji(e)?Fg(e):e;class Fx{constructor(n,s,u,h){this.getter=n,this._setter=s,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new zg(()=>n(this._value),()=>qu(this,this.effect._dirtyLevel===3?3:4)),this.effect.computed=this,this.effect.active=this._cacheable=!h,this.__v_isReadonly=u}get value(){const n=Vt(this);return(!n._cacheable||n.effect.dirty)&&ta(n._value,n._value=n.effect.run())&&qu(n,5),Vx(n),n.effect._dirtyLevel>=2&&qu(n,3),n._value}set value(n){this._setter(n)}get _dirty(){return this.effect.dirty}set _dirty(n){this.effect.dirty=n}}function xS(e,n,s=!1){let u,h;const g=qt(e);return g?(u=e,h=Yn):(u=e.get,h=e.set),new Fx(u,h,g||!h,s)}function Vx(e){var n;Qs&&Za&&(e=Vt(e),Ax(Za,(n=e.dep)!=null?n:e.dep=Mx(()=>e.dep=void 0,e instanceof Fx?e:void 0)))}function qu(e,n=5,s,u){e=Vt(e);const h=e.dep;h&&kx(h,n)}function fr(e){return!!(e&&e.__v_isRef===!0)}function kt(e){return Nx(e,!1)}function uc(e){return Nx(e,!0)}function Nx(e,n){return fr(e)?e:new bS(e,n)}class bS{constructor(n,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?n:Vt(n),this._value=s?n:th(n)}get value(){return Vx(this),this._value}set value(n){const s=this.__v_isShallow||of(n)||cc(n);n=s?n:Vt(n),ta(n,this._rawValue)&&(this._rawValue,this._rawValue=n,this._value=s?n:th(n),qu(this,5))}}function E0(e){qu(e,5)}function ni(e){return fr(e)?e.value:e}function hm(e){return qt(e)?e():ni(e)}const wS={get:(e,n,s)=>ni(Reflect.get(e,n,s)),set:(e,n,s,u)=>{const h=e[n];return fr(h)&&!fr(s)?(h.value=s,!0):Reflect.set(e,n,s,u)}};function $x(e){return Uu(e)?e:new Proxy(e,wS)}class ES{constructor(n,s,u){this._object=n,this._key=s,this._defaultValue=u,this.__v_isRef=!0}get value(){const n=this._object[this._key];return n===void 0?this._defaultValue:n}set value(n){this._object[this._key]=n}get dep(){return eS(Vt(this._object),this._key)}}class SS{constructor(n){this._getter=n,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function eo(e,n,s){return fr(e)?e:qt(e)?new SS(e):ji(e)&&arguments.length>1?TS(e,n,s):kt(e)}function TS(e,n,s){const u=e[n];return fr(u)?u:new ES(e,n,s)}/**
* @vue/runtime-core v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ea(e,n,s,u){try{return u?e(...u):e()}catch(h){vc(h,n,s)}}function to(e,n,s,u){if(qt(e)){const h=ea(e,n,s,u);return h&&Mg(h)&&h.catch(g=>{vc(g,n,s)}),h}if($t(e)){const h=[];for(let g=0;g<e.length;g++)h.push(to(e[g],n,s,u));return h}}function vc(e,n,s,u=!0){const h=n?n.vnode:null;if(n){let g=n.parent;const m=n.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;g;){const M=g.ec;if(M){for(let k=0;k<M.length;k++)if(M[k](e,m,c)===!1)return}g=g.parent}const T=n.appContext.config.errorHandler;if(T){na(),ea(T,null,10,[e,m,c]),oa();return}}IS(e,s,h,u)}function IS(e,n,s,u=!0){console.error(e)}let ih=!1,Bm=!1;const an=[];let zo=0;const nc=[];let Ks=null,qa=0;const jx=Promise.resolve();let $g=null;function qr(e){const n=$g||jx;return e?n.then(this?e.bind(this):e):n}function CS(e){let n=zo+1,s=an.length;for(;n<s;){const u=n+s>>>1,h=an[u],g=rh(h);g<e||g===e&&h.pre?n=u+1:s=u}return n}function Pf(e){(!an.length||!an.includes(e,ih&&e.allowRecurse?zo+1:zo))&&(e.id==null?an.push(e):an.splice(CS(e.id),0,e),Ux())}function Ux(){!ih&&!Bm&&(Bm=!0,$g=jx.then(qx))}function AS(e){const n=an.indexOf(e);n>zo&&an.splice(n,1)}function Fm(e){$t(e)?nc.push(...e):(!Ks||!Ks.includes(e,e.allowRecurse?qa+1:qa))&&nc.push(e),Ux()}function S0(e,n,s=ih?zo+1:0){for(;s<an.length;s++){const u=an[s];if(u&&u.pre){if(e&&u.id!==e.uid)continue;an.splice(s,1),s--,u()}}}function sf(e){if(nc.length){const n=[...new Set(nc)].sort((s,u)=>rh(s)-rh(u));if(nc.length=0,Ks){Ks.push(...n);return}for(Ks=n,qa=0;qa<Ks.length;qa++){const s=Ks[qa];s.active!==!1&&s()}Ks=null,qa=0}}const rh=e=>e.id==null?1/0:e.id,kS=(e,n)=>{const s=rh(e)-rh(n);if(s===0){if(e.pre&&!n.pre)return-1;if(n.pre&&!e.pre)return 1}return s};function qx(e){Bm=!1,ih=!0,an.sort(kS);try{for(zo=0;zo<an.length;zo++){const n=an[zo];n&&n.active!==!1&&ea(n,null,14)}}finally{zo=0,an.length=0,sf(),ih=!1,$g=null,(an.length||nc.length)&&qx()}}function MS(e,n,...s){if(e.isUnmounted)return;const u=e.vnode.props||Gi;let h=s;const g=n.startsWith("update:"),m=g&&n.slice(7);if(m&&m in u){const k=`${m==="modelValue"?"model":m}Modifiers`,{number:A,trim:L}=u[k]||Gi;L&&(h=s.map(H=>ir(H)?H.trim():H)),A&&(h=s.map(qE))}let c,T=u[c=lm(n)]||u[c=lm(Oo(n))];!T&&g&&(T=u[c=lm(_c(n))]),T&&to(T,e,6,h);const M=u[c+"Once"];if(M){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,to(M,e,6,h)}}function Hx(e,n,s=!1){const u=n.emitsCache,h=u.get(e);if(h!==void 0)return h;const g=e.emits;let m={},c=!1;if(!qt(e)){const T=M=>{const k=Hx(M,n,!0);k&&(c=!0,wr(m,k))};!s&&n.mixins.length&&n.mixins.forEach(T),e.extends&&T(e.extends),e.mixins&&e.mixins.forEach(T)}return!g&&!c?(ji(e)&&u.set(e,null),null):($t(g)?g.forEach(T=>m[T]=null):wr(m,g),ji(e)&&u.set(e,m),m)}function zf(e,n){return!e||!hh(n)?!1:(n=n.slice(2).replace(/Once$/,""),hi(e,n[0].toLowerCase()+n.slice(1))||hi(e,_c(n))||hi(e,n))}let Ir=null,Df=null;function af(e){const n=Ir;return Ir=e,Df=e&&e.type.__scopeId||null,n}function Gx(e){Df=e}function Zx(){Df=null}function xr(e,n=Ir,s){if(!n||e._n)return e;const u=(...h)=>{u._d&&$0(-1);const g=af(n);let m;try{m=e(...h)}finally{af(g),u._d&&$0(1)}return m};return u._n=!0,u._c=!0,u._d=!0,u}function dm(e){const{type:n,vnode:s,proxy:u,withProxy:h,propsOptions:[g],slots:m,attrs:c,emit:T,render:M,renderCache:k,props:A,data:L,setupState:H,ctx:X,inheritAttrs:W}=e,se=af(e);let Te,ye;try{if(s.shapeFlag&4){const oe=h||u,ee=oe;Te=Jn(M.call(ee,oe,k,A,H,L,X)),ye=c}else{const oe=n;Te=Jn(oe.length>1?oe(A,{attrs:c,slots:m,emit:T}):oe(A,null)),ye=n.props?c:PS(c)}}catch(oe){Wu.length=0,vc(oe,e,1),Te=ei(Hr)}let j=Te;if(ye&&W!==!1){const oe=Object.keys(ye),{shapeFlag:ee}=j;oe.length&&ee&7&&(g&&oe.some(Ag)&&(ye=zS(ye,g)),j=Fo(j,ye,!1,!0))}return s.dirs&&(j=Fo(j,null,!1,!0),j.dirs=j.dirs?j.dirs.concat(s.dirs):s.dirs),s.transition&&(j.transition=s.transition),Te=j,af(se),Te}function LS(e,n=!0){let s;for(let u=0;u<e.length;u++){const h=e[u];if(sh(h)){if(h.type!==Hr||h.children==="v-if"){if(s)return;s=h}}else return}return s}const PS=e=>{let n;for(const s in e)(s==="class"||s==="style"||hh(s))&&((n||(n={}))[s]=e[s]);return n},zS=(e,n)=>{const s={};for(const u in e)(!Ag(u)||!(u.slice(9)in n))&&(s[u]=e[u]);return s};function DS(e,n,s){const{props:u,children:h,component:g}=e,{props:m,children:c,patchFlag:T}=n,M=g.emitsOptions;if(n.dirs||n.transition)return!0;if(s&&T>=0){if(T&1024)return!0;if(T&16)return u?T0(u,m,M):!!m;if(T&8){const k=n.dynamicProps;for(let A=0;A<k.length;A++){const L=k[A];if(m[L]!==u[L]&&!zf(M,L))return!0}}}else return(h||c)&&(!c||!c.$stable)?!0:u===m?!1:u?m?T0(u,m,M):!0:!!m;return!1}function T0(e,n,s){const u=Object.keys(n);if(u.length!==Object.keys(e).length)return!0;for(let h=0;h<u.length;h++){const g=u[h];if(n[g]!==e[g]&&!zf(s,g))return!0}return!1}function jg({vnode:e,parent:n},s){for(;n;){const u=n.subTree;if(u.suspense&&u.suspense.activeBranch===e&&(u.el=e.el),u===e)(e=n.vnode).el=s,n=n.parent;else break}}const Wx="components";function Vm(e,n){return Xx(Wx,e,!0,n)||e}const Kx=Symbol.for("v-ndc");function hs(e){return ir(e)?Xx(Wx,e,!1)||e:e||Kx}function Xx(e,n,s=!0,u=!1){const h=Ir||Tr;if(h){const g=h.type;{const c=FT(g,!1);if(c&&(c===n||c===Oo(n)||c===Mf(Oo(n))))return g}const m=I0(h[e]||g[e],n)||I0(h.appContext[e],n);return!m&&u?g:m}}function I0(e,n){return e&&(e[n]||e[Oo(n)]||e[Mf(Oo(n))])}const RS=e=>e.__isSuspense;let Nm=0;const OS={name:"Suspense",__isSuspense:!0,process(e,n,s,u,h,g,m,c,T,M){if(e==null)FS(n,s,u,h,g,m,c,T,M);else{if(g&&g.deps>0&&!e.suspense.isInFallback){n.suspense=e.suspense,n.suspense.vnode=n,n.el=e.el;return}VS(e,n,s,u,h,m,c,T,M)}},hydrate:NS,create:Ug,normalize:$S},BS=OS;function nh(e,n){const s=e.props&&e.props[n];qt(s)&&s()}function FS(e,n,s,u,h,g,m,c,T){const{p:M,o:{createElement:k}}=T,A=k("div"),L=e.suspense=Ug(e,h,u,n,A,s,g,m,c,T);M(null,L.pendingBranch=e.ssContent,A,null,u,L,g,m),L.deps>0?(nh(e,"onPending"),nh(e,"onFallback"),M(null,e.ssFallback,n,s,u,null,g,m),oc(L,e.ssFallback)):L.resolve(!1,!0)}function VS(e,n,s,u,h,g,m,c,{p:T,um:M,o:{createElement:k}}){const A=n.suspense=e.suspense;A.vnode=n,n.el=e.el;const L=n.ssContent,H=n.ssFallback,{activeBranch:X,pendingBranch:W,isInFallback:se,isHydrating:Te}=A;if(W)A.pendingBranch=L,Do(L,W)?(T(W,L,A.hiddenContainer,null,h,A,g,m,c),A.deps<=0?A.resolve():se&&(Te||(T(X,H,s,u,h,null,g,m,c),oc(A,H)))):(A.pendingId=Nm++,Te?(A.isHydrating=!1,A.activeBranch=W):M(W,h,A),A.deps=0,A.effects.length=0,A.hiddenContainer=k("div"),se?(T(null,L,A.hiddenContainer,null,h,A,g,m,c),A.deps<=0?A.resolve():(T(X,H,s,u,h,null,g,m,c),oc(A,H))):X&&Do(L,X)?(T(X,L,s,u,h,A,g,m,c),A.resolve(!0)):(T(null,L,A.hiddenContainer,null,h,A,g,m,c),A.deps<=0&&A.resolve()));else if(X&&Do(L,X))T(X,L,s,u,h,A,g,m,c),oc(A,L);else if(nh(n,"onPending"),A.pendingBranch=L,L.shapeFlag&512?A.pendingId=L.component.suspenseId:A.pendingId=Nm++,T(null,L,A.hiddenContainer,null,h,A,g,m,c),A.deps<=0)A.resolve();else{const{timeout:ye,pendingId:j}=A;ye>0?setTimeout(()=>{A.pendingId===j&&A.fallback(H)},ye):ye===0&&A.fallback(H)}}function Ug(e,n,s,u,h,g,m,c,T,M,k=!1){const{p:A,m:L,um:H,n:X,o:{parentNode:W,remove:se}}=M;let Te;const ye=jS(e);ye&&n&&n.pendingBranch&&(Te=n.pendingId,n.deps++);const j=e.props?xx(e.props.timeout):void 0,oe=g,ee={vnode:e,parent:n,parentComponent:s,namespace:m,container:u,hiddenContainer:h,deps:0,pendingId:Nm++,timeout:typeof j=="number"?j:-1,activeBranch:null,pendingBranch:null,isInFallback:!k,isHydrating:k,isUnmounted:!1,effects:[],resolve(ne=!1,Ie=!1){const{vnode:Ee,activeBranch:Me,pendingBranch:pe,pendingId:Ae,effects:Le,parentComponent:Oe,container:Ge}=ee;let rt=!1;ee.isHydrating?ee.isHydrating=!1:ne||(rt=Me&&pe.transition&&pe.transition.mode==="out-in",rt&&(Me.transition.afterLeave=()=>{Ae===ee.pendingId&&(L(pe,Ge,g===oe?X(Me):g,0),Fm(Le))}),Me&&(W(Me.el)!==ee.hiddenContainer&&(g=X(Me)),H(Me,Oe,ee,!0)),rt||L(pe,Ge,g,0)),oc(ee,pe),ee.pendingBranch=null,ee.isInFallback=!1;let Ke=ee.parent,dt=!1;for(;Ke;){if(Ke.pendingBranch){Ke.effects.push(...Le),dt=!0;break}Ke=Ke.parent}!dt&&!rt&&Fm(Le),ee.effects=[],ye&&n&&n.pendingBranch&&Te===n.pendingId&&(n.deps--,n.deps===0&&!Ie&&n.resolve()),nh(Ee,"onResolve")},fallback(ne){if(!ee.pendingBranch)return;const{vnode:Ie,activeBranch:Ee,parentComponent:Me,container:pe,namespace:Ae}=ee;nh(Ie,"onFallback");const Le=X(Ee),Oe=()=>{ee.isInFallback&&(A(null,ne,pe,Le,Me,null,Ae,c,T),oc(ee,ne))},Ge=ne.transition&&ne.transition.mode==="out-in";Ge&&(Ee.transition.afterLeave=Oe),ee.isInFallback=!0,H(Ee,Me,null,!0),Ge||Oe()},move(ne,Ie,Ee){ee.activeBranch&&L(ee.activeBranch,ne,Ie,Ee),ee.container=ne},next(){return ee.activeBranch&&X(ee.activeBranch)},registerDep(ne,Ie,Ee){const Me=!!ee.pendingBranch;Me&&ee.deps++;const pe=ne.vnode.el;ne.asyncDep.catch(Ae=>{vc(Ae,ne,0)}).then(Ae=>{if(ne.isUnmounted||ee.isUnmounted||ee.pendingId!==ne.suspenseId)return;ne.asyncResolved=!0;const{vnode:Le}=ne;Km(ne,Ae,!1),pe&&(Le.el=pe);const Oe=!pe&&ne.subTree.el;Ie(ne,Le,W(pe||ne.subTree.el),pe?null:X(ne.subTree),ee,m,Ee),Oe&&se(Oe),jg(ne,Le.el),Me&&--ee.deps===0&&ee.resolve()})},unmount(ne,Ie){ee.isUnmounted=!0,ee.activeBranch&&H(ee.activeBranch,s,ne,Ie),ee.pendingBranch&&H(ee.pendingBranch,s,ne,Ie)}};return ee}function NS(e,n,s,u,h,g,m,c,T){const M=n.suspense=Ug(n,u,s,e.parentNode,document.createElement("div"),null,h,g,m,c,!0),k=T(e,M.pendingBranch=n.ssContent,s,M,g,m);return M.deps===0&&M.resolve(!1,!0),k}function $S(e){const{shapeFlag:n,children:s}=e,u=n&32;e.ssContent=C0(u?s.default:s),e.ssFallback=u?C0(s.fallback):ei(Hr)}function C0(e){let n;if(qt(e)){const s=dc&&e._c;s&&(e._d=!1,_t()),e=e(),s&&(e._d=!0,n=Qn,Eb())}return $t(e)&&(e=LS(e)),e=Jn(e),n&&!e.dynamicChildren&&(e.dynamicChildren=n.filter(s=>s!==e)),e}function Jx(e,n){n&&n.pendingBranch?$t(e)?n.effects.push(...e):n.effects.push(e):Fm(e)}function oc(e,n){e.activeBranch=n;const{vnode:s,parentComponent:u}=e;let h=n.el;for(;!h&&n.component;)n=n.component.subTree,h=n.el;s.el=h,u&&u.subTree===s&&(u.vnode.el=h,jg(u,h))}function jS(e){const n=e.props&&e.props.suspensible;return n!=null&&n!==!1}function Rf(e,n,s=Tr,u=!1){if(s){const h=s[e]||(s[e]=[]),g=n.__weh||(n.__weh=(...m)=>{na();const c=Xa(s),T=to(n,s,e,m);return c(),oa(),T});return u?h.unshift(g):h.push(g),g}}const gs=e=>(n,s=Tr)=>{(!fh||e==="sp")&&Rf(e,(...u)=>n(...u),s)},US=gs("bm"),Wr=gs("m"),qS=gs("bu"),HS=gs("u"),Of=gs("bum"),sa=gs("um"),GS=gs("sp"),ZS=gs("rtg"),WS=gs("rtc");function Yx(e,n=Tr){Rf("ec",e,n)}function KS(e,n){if(Ir===null)return e;const s=Ff(Ir),u=e.dirs||(e.dirs=[]);for(let h=0;h<n.length;h++){let[g,m,c,T=Gi]=n[h];g&&(qt(g)&&(g={mounted:g,updated:g}),g.deep&&Ys(m),u.push({dir:g,instance:s,value:m,oldValue:void 0,arg:c,modifiers:T}))}return e}function Po(e,n,s,u){const h=e.dirs,g=n&&n.dirs;for(let m=0;m<h.length;m++){const c=h[m];g&&(c.oldValue=g[m].value);let T=c.dir[u];T&&(na(),to(T,s,8,[e.el,c,e,n]),oa())}}function oh(e,n,s,u){let h;const g=s;if($t(e)||ir(e)){h=new Array(e.length);for(let m=0,c=e.length;m<c;m++)h[m]=n(e[m],m,void 0,g)}else if(typeof e=="number"){h=new Array(e);for(let m=0;m<e;m++)h[m]=n(m+1,m,void 0,g)}else if(ji(e))if(e[Symbol.iterator])h=Array.from(e,(m,c)=>n(m,c,void 0,g));else{const m=Object.keys(e);h=new Array(m.length);for(let c=0,T=m.length;c<T;c++){const M=m[c];h[c]=n(e[M],M,c,g)}}else h=[];return h}function XS(e,n){for(let s=0;s<n.length;s++){const u=n[s];if($t(u))for(let h=0;h<u.length;h++)e[u[h].name]=u[h].fn;else u&&(e[u.name]=u.key?(...h)=>{const g=u.fn(...h);return g&&(g.key=u.key),g}:u.fn)}return e}/*! #__NO_SIDE_EFFECTS__ */function Ri(e,n){return qt(e)?wr({name:e.name},n,{setup:e}):e}const sc=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function lf(e){qt(e)&&(e={loader:e});const{loader:n,loadingComponent:s,errorComponent:u,delay:h=200,timeout:g,suspensible:m=!0,onError:c}=e;let T=null,M,k=0;const A=()=>(k++,T=null,L()),L=()=>{let H;return T||(H=T=n().catch(X=>{if(X=X instanceof Error?X:new Error(String(X)),c)return new Promise((W,se)=>{c(X,()=>W(A()),()=>se(X),k+1)});throw X}).then(X=>H!==T&&T?T:(X&&(X.__esModule||X[Symbol.toStringTag]==="Module")&&(X=X.default),M=X,X)))};return Ri({name:"AsyncComponentWrapper",__asyncLoader:L,get __asyncResolved(){return M},setup(){const H=Tr;if(M)return()=>fm(M,H);const X=ye=>{T=null,vc(ye,H,13,!u)};if(m&&H.suspense||fh)return L().then(ye=>()=>fm(ye,H)).catch(ye=>(X(ye),()=>u?ei(u,{error:ye}):null));const W=kt(!1),se=kt(),Te=kt(!!h);return h&&setTimeout(()=>{Te.value=!1},h),g!=null&&setTimeout(()=>{if(!W.value&&!se.value){const ye=new Error(`Async component timed out after ${g}ms.`);X(ye),se.value=ye}},g),L().then(()=>{W.value=!0,H.parent&&dh(H.parent.vnode)&&(H.parent.effect.dirty=!0,Pf(H.parent.update))}).catch(ye=>{X(ye),se.value=ye}),()=>{if(W.value&&M)return fm(M,H);if(se.value&&u)return ei(u,{error:se.value});if(s&&!Te.value)return ei(s)}}})}function fm(e,n){const{ref:s,props:u,children:h,ce:g}=n.vnode,m=ei(e,u,h);return m.ref=s,m.ce=g,delete n.vnode.ce,m}function sr(e,n,s={},u,h){if(Ir.isCE||Ir.parent&&sc(Ir.parent)&&Ir.parent.isCE)return n!=="default"&&(s.name=n),ei("slot",s,u&&u());let g=e[n];g&&g._c&&(g._d=!1),_t();const m=g&&Qx(g(s)),c=li(ar,{key:s.key||m&&m.key||`_${n}`},m||(u?u():[]),m&&e._===1?64:-2);return!h&&c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),g&&g._c&&(g._d=!0),c}function Qx(e){return e.some(n=>sh(n)?!(n.type===Hr||n.type===ar&&!Qx(n.children)):!0)?e:null}const $m=e=>e?Ib(e)?Ff(e):$m(e.parent):null,Hu=wr(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>$m(e.parent),$root:e=>$m(e.root),$emit:e=>e.emit,$options:e=>qg(e),$forceUpdate:e=>e.f||(e.f=()=>{e.effect.dirty=!0,Pf(e.update)}),$nextTick:e=>e.n||(e.n=qr.bind(e.proxy)),$watch:e=>wT.bind(e)}),pm=(e,n)=>e!==Gi&&!e.__isScriptSetup&&hi(e,n),JS={get({_:e},n){if(n==="__v_skip")return!0;const{ctx:s,setupState:u,data:h,props:g,accessCache:m,type:c,appContext:T}=e;let M;if(n[0]!=="$"){const H=m[n];if(H!==void 0)switch(H){case 1:return u[n];case 2:return h[n];case 4:return s[n];case 3:return g[n]}else{if(pm(u,n))return m[n]=1,u[n];if(h!==Gi&&hi(h,n))return m[n]=2,h[n];if((M=e.propsOptions[0])&&hi(M,n))return m[n]=3,g[n];if(s!==Gi&&hi(s,n))return m[n]=4,s[n];jm&&(m[n]=0)}}const k=Hu[n];let A,L;if(k)return n==="$attrs"&&Sn(e.attrs,"get",""),k(e);if((A=c.__cssModules)&&(A=A[n]))return A;if(s!==Gi&&hi(s,n))return m[n]=4,s[n];if(L=T.config.globalProperties,hi(L,n))return L[n]},set({_:e},n,s){const{data:u,setupState:h,ctx:g}=e;return pm(h,n)?(h[n]=s,!0):u!==Gi&&hi(u,n)?(u[n]=s,!0):hi(e.props,n)||n[0]==="$"&&n.slice(1)in e?!1:(g[n]=s,!0)},has({_:{data:e,setupState:n,accessCache:s,ctx:u,appContext:h,propsOptions:g}},m){let c;return!!s[m]||e!==Gi&&hi(e,m)||pm(n,m)||(c=g[0])&&hi(c,m)||hi(u,m)||hi(Hu,m)||hi(h.config.globalProperties,m)},defineProperty(e,n,s){return s.get!=null?e._.accessCache[n]=0:hi(s,"value")&&this.set(e,n,s.value,null),Reflect.defineProperty(e,n,s)}};function YS(){return QS().attrs}function QS(){const e=la();return e.setupContext||(e.setupContext=Ab(e))}function A0(e){return $t(e)?e.reduce((n,s)=>(n[s]=null,n),{}):e}function eT(e){const n=la();let s=e();return Wm(),Mg(s)&&(s=s.catch(u=>{throw Xa(n),u})),[s,()=>Xa(n)]}let jm=!0;function tT(e){const n=qg(e),s=e.proxy,u=e.ctx;jm=!1,n.beforeCreate&&k0(n.beforeCreate,e,"bc");const{data:h,computed:g,methods:m,watch:c,provide:T,inject:M,created:k,beforeMount:A,mounted:L,beforeUpdate:H,updated:X,activated:W,deactivated:se,beforeDestroy:Te,beforeUnmount:ye,destroyed:j,unmounted:oe,render:ee,renderTracked:ne,renderTriggered:Ie,errorCaptured:Ee,serverPrefetch:Me,expose:pe,inheritAttrs:Ae,components:Le,directives:Oe,filters:Ge}=n;if(M&&iT(M,u,null),m)for(const dt in m){const nt=m[dt];qt(nt)&&(u[dt]=nt.bind(s))}if(h){const dt=h.call(s,s);ji(dt)&&(e.data=Bo(dt))}if(jm=!0,g)for(const dt in g){const nt=g[dt],ti=qt(nt)?nt.bind(s,s):qt(nt.get)?nt.get.bind(s,s):Yn,Ut=!qt(nt)&&qt(nt.set)?nt.set.bind(s):Yn,Nt=Ve({get:ti,set:Ut});Object.defineProperty(u,dt,{enumerable:!0,configurable:!0,get:()=>Nt.value,set:jt=>Nt.value=jt})}if(c)for(const dt in c)eb(c[dt],u,s,dt);if(T){const dt=qt(T)?T.call(s):T;Reflect.ownKeys(dt).forEach(nt=>{aa(nt,dt[nt])})}k&&k0(k,e,"c");function Ke(dt,nt){$t(nt)?nt.forEach(ti=>dt(ti.bind(s))):nt&&dt(nt.bind(s))}if(Ke(US,A),Ke(Wr,L),Ke(qS,H),Ke(HS,X),Ke(mb,W),Ke(gb,se),Ke(Yx,Ee),Ke(WS,ne),Ke(ZS,Ie),Ke(Of,ye),Ke(sa,oe),Ke(GS,Me),$t(pe))if(pe.length){const dt=e.exposed||(e.exposed={});pe.forEach(nt=>{Object.defineProperty(dt,nt,{get:()=>s[nt],set:ti=>s[nt]=ti})})}else e.exposed||(e.exposed={});ee&&e.render===Yn&&(e.render=ee),Ae!=null&&(e.inheritAttrs=Ae),Le&&(e.components=Le),Oe&&(e.directives=Oe)}function iT(e,n,s=Yn){$t(e)&&(e=Um(e));for(const u in e){const h=e[u];let g;ji(h)?"default"in h?g=Zr(h.from||u,h.default,!0):g=Zr(h.from||u):g=Zr(h),fr(g)?Object.defineProperty(n,u,{enumerable:!0,configurable:!0,get:()=>g.value,set:m=>g.value=m}):n[u]=g}}function k0(e,n,s){to($t(e)?e.map(u=>u.bind(n.proxy)):e.bind(n.proxy),n,s)}function eb(e,n,s,u){const h=u.includes(".")?pb(s,u):()=>s[u];if(ir(e)){const g=n[e];qt(g)&&Zi(h,g)}else if(qt(e))Zi(h,e.bind(s));else if(ji(e))if($t(e))e.forEach(g=>eb(g,n,s,u));else{const g=qt(e.handler)?e.handler.bind(s):n[e.handler];qt(g)&&Zi(h,g,e)}}function qg(e){const n=e.type,{mixins:s,extends:u}=n,{mixins:h,optionsCache:g,config:{optionMergeStrategies:m}}=e.appContext,c=g.get(n);let T;return c?T=c:!h.length&&!s&&!u?T=n:(T={},h.length&&h.forEach(M=>cf(T,M,m,!0)),cf(T,n,m)),ji(n)&&g.set(n,T),T}function cf(e,n,s,u=!1){const{mixins:h,extends:g}=n;g&&cf(e,g,s,!0),h&&h.forEach(m=>cf(e,m,s,!0));for(const m in n)if(!(u&&m==="expose")){const c=rT[m]||s&&s[m];e[m]=c?c(e[m],n[m]):n[m]}return e}const rT={data:M0,props:L0,emits:L0,methods:ju,computed:ju,beforeCreate:yn,created:yn,beforeMount:yn,mounted:yn,beforeUpdate:yn,updated:yn,beforeDestroy:yn,beforeUnmount:yn,destroyed:yn,unmounted:yn,activated:yn,deactivated:yn,errorCaptured:yn,serverPrefetch:yn,components:ju,directives:ju,watch:oT,provide:M0,inject:nT};function M0(e,n){return n?e?function(){return wr(qt(e)?e.call(this,this):e,qt(n)?n.call(this,this):n)}:n:e}function nT(e,n){return ju(Um(e),Um(n))}function Um(e){if($t(e)){const n={};for(let s=0;s<e.length;s++)n[e[s]]=e[s];return n}return e}function yn(e,n){return e?[...new Set([].concat(e,n))]:n}function ju(e,n){return e?wr(Object.create(null),e,n):n}function L0(e,n){return e?$t(e)&&$t(n)?[...new Set([...e,...n])]:wr(Object.create(null),A0(e),A0(n??{})):n}function oT(e,n){if(!e)return n;if(!n)return e;const s=wr(Object.create(null),e);for(const u in n)s[u]=yn(e[u],n[u]);return s}function tb(){return{app:null,config:{isNativeTag:VE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sT=0;function aT(e,n){return function(u,h=null){qt(u)||(u=wr({},u)),h!=null&&!ji(h)&&(h=null);const g=tb(),m=new WeakSet;let c=!1;const T=g.app={_uid:sT++,_component:u,_props:h,_container:null,_context:g,_instance:null,version:kb,get config(){return g.config},set config(M){},use(M,...k){return m.has(M)||(M&&qt(M.install)?(m.add(M),M.install(T,...k)):qt(M)&&(m.add(M),M(T,...k))),T},mixin(M){return g.mixins.includes(M)||g.mixins.push(M),T},component(M,k){return k?(g.components[M]=k,T):g.components[M]},directive(M,k){return k?(g.directives[M]=k,T):g.directives[M]},mount(M,k,A){if(!c){const L=ei(u,h);return L.appContext=g,A===!0?A="svg":A===!1&&(A=void 0),k&&n?n(L,M):e(L,M,A),c=!0,T._container=M,M.__vue_app__=T,Ff(L.component)}},unmount(){c&&(e(null,T._container),delete T._container.__vue_app__)},provide(M,k){return g.provides[M]=k,T},runWithContext(M){const k=ac;ac=T;try{return M()}finally{ac=k}}};return T}}let ac=null;function aa(e,n){if(Tr){let s=Tr.provides;const u=Tr.parent&&Tr.parent.provides;u===s&&(s=Tr.provides=Object.create(u)),s[e]=n}}function Zr(e,n,s=!1){const u=Tr||Ir;if(u||ac){const h=u?u.parent==null?u.vnode.appContext&&u.vnode.appContext.provides:u.parent.provides:ac._context.provides;if(h&&e in h)return h[e];if(arguments.length>1)return s&&qt(n)?n.call(u&&u.proxy):n}}function ib(){return!!(Tr||Ir||ac)}const rb={},nb=()=>Object.create(rb),ob=e=>Object.getPrototypeOf(e)===rb;function lT(e,n,s,u=!1){const h={},g=nb();e.propsDefaults=Object.create(null),sb(e,n,h,g);for(const m in e.propsOptions[0])m in h||(h[m]=void 0);s?e.props=u?h:ec(h):e.type.props?e.props=h:e.props=g,e.attrs=g}function cT(e,n,s,u){const{props:h,attrs:g,vnode:{patchFlag:m}}=e,c=Vt(h),[T]=e.propsOptions;let M=!1;if((u||m>0)&&!(m&16)){if(m&8){const k=e.vnode.dynamicProps;for(let A=0;A<k.length;A++){let L=k[A];if(zf(e.emitsOptions,L))continue;const H=n[L];if(T)if(hi(g,L))H!==g[L]&&(g[L]=H,M=!0);else{const X=Oo(L);h[X]=qm(T,c,X,H,e,!1)}else H!==g[L]&&(g[L]=H,M=!0)}}}else{sb(e,n,h,g)&&(M=!0);let k;for(const A in c)(!n||!hi(n,A)&&((k=_c(A))===A||!hi(n,k)))&&(T?s&&(s[A]!==void 0||s[k]!==void 0)&&(h[A]=qm(T,c,A,void 0,e,!0)):delete h[A]);if(g!==c)for(const A in g)(!n||!hi(n,A))&&(delete g[A],M=!0)}M&&ds(e.attrs,"set","")}function sb(e,n,s,u){const[h,g]=e.propsOptions;let m=!1,c;if(n)for(let T in n){if(rc(T))continue;const M=n[T];let k;h&&hi(h,k=Oo(T))?!g||!g.includes(k)?s[k]=M:(c||(c={}))[k]=M:zf(e.emitsOptions,T)||(!(T in u)||M!==u[T])&&(u[T]=M,m=!0)}if(g){const T=Vt(s),M=c||Gi;for(let k=0;k<g.length;k++){const A=g[k];s[A]=qm(h,T,A,M[A],e,!hi(M,A))}}return m}function qm(e,n,s,u,h,g){const m=e[s];if(m!=null){const c=hi(m,"default");if(c&&u===void 0){const T=m.default;if(m.type!==Function&&!m.skipFactory&&qt(T)){const{propsDefaults:M}=h;if(s in M)u=M[s];else{const k=Xa(h);u=M[s]=T.call(null,n),k()}}else u=T}m[0]&&(g&&!c?u=!1:m[1]&&(u===""||u===_c(s))&&(u=!0))}return u}function ab(e,n,s=!1){const u=n.propsCache,h=u.get(e);if(h)return h;const g=e.props,m={},c=[];let T=!1;if(!qt(e)){const k=A=>{T=!0;const[L,H]=ab(A,n,!0);wr(m,L),H&&c.push(...H)};!s&&n.mixins.length&&n.mixins.forEach(k),e.extends&&k(e.extends),e.mixins&&e.mixins.forEach(k)}if(!g&&!T)return ji(e)&&u.set(e,tc),tc;if($t(g))for(let k=0;k<g.length;k++){const A=Oo(g[k]);P0(A)&&(m[A]=Gi)}else if(g)for(const k in g){const A=Oo(k);if(P0(A)){const L=g[k],H=m[A]=$t(L)||qt(L)?{type:L}:wr({},L);if(H){const X=R0(Boolean,H.type),W=R0(String,H.type);H[0]=X>-1,H[1]=W<0||X<W,(X>-1||hi(H,"default"))&&c.push(A)}}}const M=[m,c];return ji(e)&&u.set(e,M),M}function P0(e){return e[0]!=="$"&&!rc(e)}function z0(e){return e===null?"null":typeof e=="function"?e.name||"":typeof e=="object"&&e.constructor&&e.constructor.name||""}function D0(e,n){return z0(e)===z0(n)}function R0(e,n){return $t(n)?n.findIndex(s=>D0(s,e)):qt(n)&&D0(n,e)?0:-1}const lb=e=>e[0]==="_"||e==="$stable",Hg=e=>$t(e)?e.map(Jn):[Jn(e)],uT=(e,n,s)=>{if(n._n)return n;const u=xr((...h)=>Hg(n(...h)),s);return u._c=!1,u},cb=(e,n,s)=>{const u=e._ctx;for(const h in e){if(lb(h))continue;const g=e[h];if(qt(g))n[h]=uT(h,g,u);else if(g!=null){const m=Hg(g);n[h]=()=>m}}},ub=(e,n)=>{const s=Hg(n);e.slots.default=()=>s},hT=(e,n)=>{const s=e.slots=nb();if(e.vnode.shapeFlag&32){const u=n._;u?(wr(s,n),vx(s,"_",u,!0)):cb(n,s)}else n&&ub(e,n)},dT=(e,n,s)=>{const{vnode:u,slots:h}=e;let g=!0,m=Gi;if(u.shapeFlag&32){const c=n._;c?s&&c===1?g=!1:(wr(h,n),!s&&c===1&&delete h._):(g=!n.$stable,cb(n,h)),m=n}else n&&(ub(e,n),m={default:1});if(g)for(const c in h)!lb(c)&&m[c]==null&&delete h[c]};function uf(e,n,s,u,h=!1){if($t(e)){e.forEach((L,H)=>uf(L,n&&($t(n)?n[H]:n),s,u,h));return}if(sc(u)&&!h)return;const g=u.shapeFlag&4?Ff(u.component):u.el,m=h?null:g,{i:c,r:T}=e,M=n&&n.r,k=c.refs===Gi?c.refs={}:c.refs,A=c.setupState;if(M!=null&&M!==T&&(ir(M)?(k[M]=null,hi(A,M)&&(A[M]=null)):fr(M)&&(M.value=null)),qt(T))ea(T,c,12,[m,k]);else{const L=ir(T),H=fr(T);if(L||H){const X=()=>{if(e.f){const W=L?hi(A,T)?A[T]:k[T]:T.value;h?$t(W)&&kg(W,g):$t(W)?W.includes(g)||W.push(g):L?(k[T]=[g],hi(A,T)&&(A[T]=k[T])):(T.value=[g],e.k&&(k[e.k]=T.value))}else L?(k[T]=m,hi(A,T)&&(A[T]=m)):H&&(T.value=m,e.k&&(k[e.k]=m))};m?(X.id=-1,En(X,s)):X()}}}let O0=!1;const Jl=()=>{O0||(console.error("Hydration completed but contains mismatches."),O0=!0)},fT=e=>e.namespaceURI.includes("svg")&&e.tagName!=="foreignObject",pT=e=>e.namespaceURI.includes("MathML"),zd=e=>{if(fT(e))return"svg";if(pT(e))return"mathml"},Dd=e=>e.nodeType===8;function mT(e){const{mt:n,p:s,o:{patchProp:u,createText:h,nextSibling:g,parentNode:m,remove:c,insert:T,createComment:M}}=e,k=(j,oe)=>{if(!oe.hasChildNodes()){s(null,j,oe),sf(),oe._vnode=j;return}A(oe.firstChild,j,null,null,null),sf(),oe._vnode=j},A=(j,oe,ee,ne,Ie,Ee=!1)=>{Ee=Ee||!!oe.dynamicChildren;const Me=Dd(j)&&j.data==="[",pe=()=>W(j,oe,ee,ne,Ie,Me),{type:Ae,ref:Le,shapeFlag:Oe,patchFlag:Ge}=oe;let rt=j.nodeType;oe.el=j,Ge===-2&&(Ee=!1,oe.dynamicChildren=null);let Ke=null;switch(Ae){case hc:rt!==3?oe.children===""?(T(oe.el=h(""),m(j),j),Ke=j):Ke=pe():(j.data!==oe.children&&(Jl(),j.data=oe.children),Ke=g(j));break;case Hr:ye(j)?(Ke=g(j),Te(oe.el=j.content.firstChild,j,ee)):rt!==8||Me?Ke=pe():Ke=g(j);break;case Zu:if(Me&&(j=g(j),rt=j.nodeType),rt===1||rt===3){Ke=j;const dt=!oe.children.length;for(let nt=0;nt<oe.staticCount;nt++)dt&&(oe.children+=Ke.nodeType===1?Ke.outerHTML:Ke.data),nt===oe.staticCount-1&&(oe.anchor=Ke),Ke=g(Ke);return Me?g(Ke):Ke}else pe();break;case ar:Me?Ke=X(j,oe,ee,ne,Ie,Ee):Ke=pe();break;default:if(Oe&1)(rt!==1||oe.type.toLowerCase()!==j.tagName.toLowerCase())&&!ye(j)?Ke=pe():Ke=L(j,oe,ee,ne,Ie,Ee);else if(Oe&6){oe.slotScopeIds=Ie;const dt=m(j);if(Me?Ke=se(j):Dd(j)&&j.data==="teleport start"?Ke=se(j,j.data,"teleport end"):Ke=g(j),n(oe,dt,null,ee,ne,zd(dt),Ee),sc(oe)){let nt;Me?(nt=ei(ar),nt.anchor=Ke?Ke.previousSibling:dt.lastChild):nt=j.nodeType===3?go(""):ei("div"),nt.el=j,oe.component.subTree=nt}}else Oe&64?rt!==8?Ke=pe():Ke=oe.type.hydrate(j,oe,ee,ne,Ie,Ee,e,H):Oe&128&&(Ke=oe.type.hydrate(j,oe,ee,ne,zd(m(j)),Ie,Ee,e,A))}return Le!=null&&uf(Le,null,ne,oe),Ke},L=(j,oe,ee,ne,Ie,Ee)=>{Ee=Ee||!!oe.dynamicChildren;const{type:Me,props:pe,patchFlag:Ae,shapeFlag:Le,dirs:Oe,transition:Ge}=oe,rt=Me==="input"||Me==="option";if(rt||Ae!==-1){Oe&&Po(oe,null,ee,"created");let Ke=!1;if(ye(j)){Ke=db(ne,Ge)&&ee&&ee.vnode.props&&ee.vnode.props.appear;const nt=j.content.firstChild;Ke&&Ge.beforeEnter(nt),Te(nt,j,ee),oe.el=j=nt}if(Le&16&&!(pe&&(pe.innerHTML||pe.textContent))){let nt=H(j.firstChild,oe,j,ee,ne,Ie,Ee);for(;nt;){Jl();const ti=nt;nt=nt.nextSibling,c(ti)}}else Le&8&&j.textContent!==oe.children&&(Jl(),j.textContent=oe.children);if(pe)if(rt||!Ee||Ae&48)for(const nt in pe)(rt&&(nt.endsWith("value")||nt==="indeterminate")||hh(nt)&&!rc(nt)||nt[0]===".")&&u(j,nt,null,pe[nt],void 0,void 0,ee);else pe.onClick&&u(j,"onClick",null,pe.onClick,void 0,void 0,ee);let dt;(dt=pe&&pe.onVnodeBeforeMount)&&Xn(dt,ee,oe),Oe&&Po(oe,null,ee,"beforeMount"),((dt=pe&&pe.onVnodeMounted)||Oe||Ke)&&Jx(()=>{dt&&Xn(dt,ee,oe),Ke&&Ge.enter(j),Oe&&Po(oe,null,ee,"mounted")},ne)}return j.nextSibling},H=(j,oe,ee,ne,Ie,Ee,Me)=>{Me=Me||!!oe.dynamicChildren;const pe=oe.children,Ae=pe.length;for(let Le=0;Le<Ae;Le++){const Oe=Me?pe[Le]:pe[Le]=Jn(pe[Le]);j?j=A(j,Oe,ne,Ie,Ee,Me):Oe.type===hc&&!Oe.children?T(Oe.el=h(""),ee):(Jl(),s(null,Oe,ee,null,ne,Ie,zd(ee),Ee))}return j},X=(j,oe,ee,ne,Ie,Ee)=>{const{slotScopeIds:Me}=oe;Me&&(Ie=Ie?Ie.concat(Me):Me);const pe=m(j),Ae=H(g(j),oe,pe,ee,ne,Ie,Ee);return Ae&&Dd(Ae)&&Ae.data==="]"?g(oe.anchor=Ae):(Jl(),T(oe.anchor=M("]"),pe,Ae),Ae)},W=(j,oe,ee,ne,Ie,Ee)=>{if(Jl(),oe.el=null,Ee){const Ae=se(j);for(;;){const Le=g(j);if(Le&&Le!==Ae)c(Le);else break}}const Me=g(j),pe=m(j);return c(j),s(null,oe,pe,Me,ee,ne,zd(pe),Ie),Me},se=(j,oe="[",ee="]")=>{let ne=0;for(;j;)if(j=g(j),j&&Dd(j)&&(j.data===oe&&ne++,j.data===ee)){if(ne===0)return g(j);ne--}return j},Te=(j,oe,ee)=>{const ne=oe.parentNode;ne&&ne.replaceChild(j,oe);let Ie=ee;for(;Ie;)Ie.vnode.el===oe&&(Ie.vnode.el=Ie.subTree.el=j),Ie=Ie.parent},ye=j=>j.nodeType===1&&j.tagName.toLowerCase()==="template";return[k,A]}const En=Jx;function gT(e){return hb(e)}function yT(e){return hb(e,mT)}function hb(e,n){const s=bx();s.__VUE__=!0;const{insert:u,remove:h,patchProp:g,createElement:m,createText:c,createComment:T,setText:M,setElementText:k,parentNode:A,nextSibling:L,setScopeId:H=Yn,insertStaticContent:X}=e,W=(ue,ge,Be,le=null,He=null,tt=null,Ze=void 0,je=null,Qe=!!ge.dynamicChildren)=>{if(ue===ge)return;ue&&!Do(ue,ge)&&(le=Pi(ue),jt(ue,He,tt,!0),ue=null),ge.patchFlag===-2&&(Qe=!1,ge.dynamicChildren=null);const{type:We,ref:pt,shapeFlag:Tt}=ge;switch(We){case hc:se(ue,ge,Be,le);break;case Hr:Te(ue,ge,Be,le);break;case Zu:ue==null&&ye(ge,Be,le,Ze);break;case ar:Le(ue,ge,Be,le,He,tt,Ze,je,Qe);break;default:Tt&1?ee(ue,ge,Be,le,He,tt,Ze,je,Qe):Tt&6?Oe(ue,ge,Be,le,He,tt,Ze,je,Qe):(Tt&64||Tt&128)&&We.process(ue,ge,Be,le,He,tt,Ze,je,Qe,pr)}pt!=null&&He&&uf(pt,ue&&ue.ref,tt,ge||ue,!ge)},se=(ue,ge,Be,le)=>{if(ue==null)u(ge.el=c(ge.children),Be,le);else{const He=ge.el=ue.el;ge.children!==ue.children&&M(He,ge.children)}},Te=(ue,ge,Be,le)=>{ue==null?u(ge.el=T(ge.children||""),Be,le):ge.el=ue.el},ye=(ue,ge,Be,le)=>{[ue.el,ue.anchor]=X(ue.children,ge,Be,le,ue.el,ue.anchor)},j=({el:ue,anchor:ge},Be,le)=>{let He;for(;ue&&ue!==ge;)He=L(ue),u(ue,Be,le),ue=He;u(ge,Be,le)},oe=({el:ue,anchor:ge})=>{let Be;for(;ue&&ue!==ge;)Be=L(ue),h(ue),ue=Be;h(ge)},ee=(ue,ge,Be,le,He,tt,Ze,je,Qe)=>{ge.type==="svg"?Ze="svg":ge.type==="math"&&(Ze="mathml"),ue==null?ne(ge,Be,le,He,tt,Ze,je,Qe):Me(ue,ge,He,tt,Ze,je,Qe)},ne=(ue,ge,Be,le,He,tt,Ze,je)=>{let Qe,We;const{props:pt,shapeFlag:Tt,transition:xt,dirs:Lt}=ue;if(Qe=ue.el=m(ue.type,tt,pt&&pt.is,pt),Tt&8?k(Qe,ue.children):Tt&16&&Ee(ue.children,Qe,null,le,He,mm(ue,tt),Ze,je),Lt&&Po(ue,null,le,"created"),Ie(Qe,ue,ue.scopeId,Ze,le),pt){for(const $e in pt)$e!=="value"&&!rc($e)&&g(Qe,$e,null,pt[$e],tt,ue.children,le,He,fi);"value"in pt&&g(Qe,"value",null,pt.value,tt),(We=pt.onVnodeBeforeMount)&&Xn(We,le,ue)}Lt&&Po(ue,null,le,"beforeMount");const Ht=db(He,xt);Ht&&xt.beforeEnter(Qe),u(Qe,ge,Be),((We=pt&&pt.onVnodeMounted)||Ht||Lt)&&En(()=>{We&&Xn(We,le,ue),Ht&&xt.enter(Qe),Lt&&Po(ue,null,le,"mounted")},He)},Ie=(ue,ge,Be,le,He)=>{if(Be&&H(ue,Be),le)for(let tt=0;tt<le.length;tt++)H(ue,le[tt]);if(He){let tt=He.subTree;if(ge===tt){const Ze=He.vnode;Ie(ue,Ze,Ze.scopeId,Ze.slotScopeIds,He.parent)}}},Ee=(ue,ge,Be,le,He,tt,Ze,je,Qe=0)=>{for(let We=Qe;We<ue.length;We++){const pt=ue[We]=je?Js(ue[We]):Jn(ue[We]);W(null,pt,ge,Be,le,He,tt,Ze,je)}},Me=(ue,ge,Be,le,He,tt,Ze)=>{const je=ge.el=ue.el;let{patchFlag:Qe,dynamicChildren:We,dirs:pt}=ge;Qe|=ue.patchFlag&16;const Tt=ue.props||Gi,xt=ge.props||Gi;let Lt;if(Be&&Va(Be,!1),(Lt=xt.onVnodeBeforeUpdate)&&Xn(Lt,Be,ge,ue),pt&&Po(ge,ue,Be,"beforeUpdate"),Be&&Va(Be,!0),We?pe(ue.dynamicChildren,We,je,Be,le,mm(ge,He),tt):Ze||nt(ue,ge,je,null,Be,le,mm(ge,He),tt,!1),Qe>0){if(Qe&16)Ae(je,ge,Tt,xt,Be,le,He);else if(Qe&2&&Tt.class!==xt.class&&g(je,"class",null,xt.class,He),Qe&4&&g(je,"style",Tt.style,xt.style,He),Qe&8){const Ht=ge.dynamicProps;for(let $e=0;$e<Ht.length;$e++){const Gt=Ht[$e],ai=Tt[Gt],mr=xt[Gt];(mr!==ai||Gt==="value")&&g(je,Gt,ai,mr,He,ue.children,Be,le,fi)}}Qe&1&&ue.children!==ge.children&&k(je,ge.children)}else!Ze&&We==null&&Ae(je,ge,Tt,xt,Be,le,He);((Lt=xt.onVnodeUpdated)||pt)&&En(()=>{Lt&&Xn(Lt,Be,ge,ue),pt&&Po(ge,ue,Be,"updated")},le)},pe=(ue,ge,Be,le,He,tt,Ze)=>{for(let je=0;je<ge.length;je++){const Qe=ue[je],We=ge[je],pt=Qe.el&&(Qe.type===ar||!Do(Qe,We)||Qe.shapeFlag&70)?A(Qe.el):Be;W(Qe,We,pt,null,le,He,tt,Ze,!0)}},Ae=(ue,ge,Be,le,He,tt,Ze)=>{if(Be!==le){if(Be!==Gi)for(const je in Be)!rc(je)&&!(je in le)&&g(ue,je,Be[je],null,Ze,ge.children,He,tt,fi);for(const je in le){if(rc(je))continue;const Qe=le[je],We=Be[je];Qe!==We&&je!=="value"&&g(ue,je,We,Qe,Ze,ge.children,He,tt,fi)}"value"in le&&g(ue,"value",Be.value,le.value,Ze)}},Le=(ue,ge,Be,le,He,tt,Ze,je,Qe)=>{const We=ge.el=ue?ue.el:c(""),pt=ge.anchor=ue?ue.anchor:c("");let{patchFlag:Tt,dynamicChildren:xt,slotScopeIds:Lt}=ge;Lt&&(je=je?je.concat(Lt):Lt),ue==null?(u(We,Be,le),u(pt,Be,le),Ee(ge.children||[],Be,pt,He,tt,Ze,je,Qe)):Tt>0&&Tt&64&&xt&&ue.dynamicChildren?(pe(ue.dynamicChildren,xt,Be,He,tt,Ze,je),(ge.key!=null||He&&ge===He.subTree)&&Gg(ue,ge,!0)):nt(ue,ge,Be,pt,He,tt,Ze,je,Qe)},Oe=(ue,ge,Be,le,He,tt,Ze,je,Qe)=>{ge.slotScopeIds=je,ue==null?ge.shapeFlag&512?He.ctx.activate(ge,Be,le,Ze,Qe):Ge(ge,Be,le,He,tt,Ze,Qe):rt(ue,ge,Qe)},Ge=(ue,ge,Be,le,He,tt,Ze)=>{const je=ue.component=DT(ue,le,He);if(dh(ue)&&(je.ctx.renderer=pr),RT(je),je.asyncDep){if(He&&He.registerDep(je,Ke,Ze),!ue.el){const Qe=je.subTree=ei(Hr);Te(null,Qe,ge,Be)}}else Ke(je,ue,ge,Be,He,tt,Ze)},rt=(ue,ge,Be)=>{const le=ge.component=ue.component;if(DS(ue,ge,Be))if(le.asyncDep&&!le.asyncResolved){dt(le,ge,Be);return}else le.next=ge,AS(le.update),le.effect.dirty=!0,le.update();else ge.el=ue.el,le.vnode=ge},Ke=(ue,ge,Be,le,He,tt,Ze)=>{const je=()=>{if(ue.isMounted){let{next:pt,bu:Tt,u:xt,parent:Lt,vnode:Ht}=ue;{const Kr=fb(ue);if(Kr){pt&&(pt.el=Ht.el,dt(ue,pt,Ze)),Kr.asyncDep.then(()=>{ue.isUnmounted||je()});return}}let $e=pt,Gt;Va(ue,!1),pt?(pt.el=Ht.el,dt(ue,pt,Ze)):pt=Ht,Tt&&cm(Tt),(Gt=pt.props&&pt.props.onVnodeBeforeUpdate)&&Xn(Gt,Lt,pt,Ht),Va(ue,!0);const ai=dm(ue),mr=ue.subTree;ue.subTree=ai,W(mr,ai,A(mr.el),Pi(mr),ue,He,tt),pt.el=ai.el,$e===null&&jg(ue,ai.el),xt&&En(xt,He),(Gt=pt.props&&pt.props.onVnodeUpdated)&&En(()=>Xn(Gt,Lt,pt,Ht),He)}else{let pt;const{el:Tt,props:xt}=ge,{bm:Lt,m:Ht,parent:$e}=ue,Gt=sc(ge);if(Va(ue,!1),Lt&&cm(Lt),!Gt&&(pt=xt&&xt.onVnodeBeforeMount)&&Xn(pt,$e,ge),Va(ue,!0),Tt&&lr){const ai=()=>{ue.subTree=dm(ue),lr(Tt,ue.subTree,ue,He,null)};Gt?ge.type.__asyncLoader().then(()=>!ue.isUnmounted&&ai()):ai()}else{const ai=ue.subTree=dm(ue);W(null,ai,Be,le,ue,He,tt),ge.el=ai.el}if(Ht&&En(Ht,He),!Gt&&(pt=xt&&xt.onVnodeMounted)){const ai=ge;En(()=>Xn(pt,$e,ai),He)}(ge.shapeFlag&256||$e&&sc($e.vnode)&&$e.vnode.shapeFlag&256)&&ue.a&&En(ue.a,He),ue.isMounted=!0,ge=Be=le=null}},Qe=ue.effect=new zg(je,Yn,()=>Pf(We),ue.scope),We=ue.update=()=>{Qe.dirty&&Qe.run()};We.id=ue.uid,Va(ue,!0),We()},dt=(ue,ge,Be)=>{ge.component=ue;const le=ue.vnode.props;ue.vnode=ge,ue.next=null,cT(ue,ge.props,le,Be),dT(ue,ge.children,Be),na(),S0(ue),oa()},nt=(ue,ge,Be,le,He,tt,Ze,je,Qe=!1)=>{const We=ue&&ue.children,pt=ue?ue.shapeFlag:0,Tt=ge.children,{patchFlag:xt,shapeFlag:Lt}=ge;if(xt>0){if(xt&128){Ut(We,Tt,Be,le,He,tt,Ze,je,Qe);return}else if(xt&256){ti(We,Tt,Be,le,He,tt,Ze,je,Qe);return}}Lt&8?(pt&16&&fi(We,He,tt),Tt!==We&&k(Be,Tt)):pt&16?Lt&16?Ut(We,Tt,Be,le,He,tt,Ze,je,Qe):fi(We,He,tt,!0):(pt&8&&k(Be,""),Lt&16&&Ee(Tt,Be,le,He,tt,Ze,je,Qe))},ti=(ue,ge,Be,le,He,tt,Ze,je,Qe)=>{ue=ue||tc,ge=ge||tc;const We=ue.length,pt=ge.length,Tt=Math.min(We,pt);let xt;for(xt=0;xt<Tt;xt++){const Lt=ge[xt]=Qe?Js(ge[xt]):Jn(ge[xt]);W(ue[xt],Lt,Be,null,He,tt,Ze,je,Qe)}We>pt?fi(ue,He,tt,!0,!1,Tt):Ee(ge,Be,le,He,tt,Ze,je,Qe,Tt)},Ut=(ue,ge,Be,le,He,tt,Ze,je,Qe)=>{let We=0;const pt=ge.length;let Tt=ue.length-1,xt=pt-1;for(;We<=Tt&&We<=xt;){const Lt=ue[We],Ht=ge[We]=Qe?Js(ge[We]):Jn(ge[We]);if(Do(Lt,Ht))W(Lt,Ht,Be,null,He,tt,Ze,je,Qe);else break;We++}for(;We<=Tt&&We<=xt;){const Lt=ue[Tt],Ht=ge[xt]=Qe?Js(ge[xt]):Jn(ge[xt]);if(Do(Lt,Ht))W(Lt,Ht,Be,null,He,tt,Ze,je,Qe);else break;Tt--,xt--}if(We>Tt){if(We<=xt){const Lt=xt+1,Ht=Lt<pt?ge[Lt].el:le;for(;We<=xt;)W(null,ge[We]=Qe?Js(ge[We]):Jn(ge[We]),Be,Ht,He,tt,Ze,je,Qe),We++}}else if(We>xt)for(;We<=Tt;)jt(ue[We],He,tt,!0),We++;else{const Lt=We,Ht=We,$e=new Map;for(We=Ht;We<=xt;We++){const pi=ge[We]=Qe?Js(ge[We]):Jn(ge[We]);pi.key!=null&&$e.set(pi.key,We)}let Gt,ai=0;const mr=xt-Ht+1;let Kr=!1,Ye=0;const Bt=new Array(mr);for(We=0;We<mr;We++)Bt[We]=0;for(We=Lt;We<=Tt;We++){const pi=ue[We];if(ai>=mr){jt(pi,He,tt,!0);continue}let Ti;if(pi.key!=null)Ti=$e.get(pi.key);else for(Gt=Ht;Gt<=xt;Gt++)if(Bt[Gt-Ht]===0&&Do(pi,ge[Gt])){Ti=Gt;break}Ti===void 0?jt(pi,He,tt,!0):(Bt[Ti-Ht]=We+1,Ti>=Ye?Ye=Ti:Kr=!0,W(pi,ge[Ti],Be,null,He,tt,Ze,je,Qe),ai++)}const Dt=Kr?_T(Bt):tc;for(Gt=Dt.length-1,We=mr-1;We>=0;We--){const pi=Ht+We,Ti=ge[pi],Ft=pi+1<pt?ge[pi+1].el:le;Bt[We]===0?W(null,Ti,Be,Ft,He,tt,Ze,je,Qe):Kr&&(Gt<0||We!==Dt[Gt]?Nt(Ti,Be,Ft,2):Gt--)}}},Nt=(ue,ge,Be,le,He=null)=>{const{el:tt,type:Ze,transition:je,children:Qe,shapeFlag:We}=ue;if(We&6){Nt(ue.component.subTree,ge,Be,le);return}if(We&128){ue.suspense.move(ge,Be,le);return}if(We&64){Ze.move(ue,ge,Be,pr);return}if(Ze===ar){u(tt,ge,Be);for(let Tt=0;Tt<Qe.length;Tt++)Nt(Qe[Tt],ge,Be,le);u(ue.anchor,ge,Be);return}if(Ze===Zu){j(ue,ge,Be);return}if(le!==2&&We&1&&je)if(le===0)je.beforeEnter(tt),u(tt,ge,Be),En(()=>je.enter(tt),He);else{const{leave:Tt,delayLeave:xt,afterLeave:Lt}=je,Ht=()=>u(tt,ge,Be),$e=()=>{Tt(tt,()=>{Ht(),Lt&&Lt()})};xt?xt(tt,Ht,$e):$e()}else u(tt,ge,Be)},jt=(ue,ge,Be,le=!1,He=!1)=>{const{type:tt,props:Ze,ref:je,children:Qe,dynamicChildren:We,shapeFlag:pt,patchFlag:Tt,dirs:xt,memoIndex:Lt}=ue;if(je!=null&&uf(je,null,Be,ue,!0),Lt!=null&&(ge.renderCache[Lt]=void 0),pt&256){ge.ctx.deactivate(ue);return}const Ht=pt&1&&xt,$e=!sc(ue);let Gt;if($e&&(Gt=Ze&&Ze.onVnodeBeforeUnmount)&&Xn(Gt,ge,ue),pt&6)Oi(ue.component,Be,le);else{if(pt&128){ue.suspense.unmount(Be,le);return}Ht&&Po(ue,null,ge,"beforeUnmount"),pt&64?ue.type.remove(ue,ge,Be,He,pr,le):We&&(tt!==ar||Tt>0&&Tt&64)?fi(We,ge,Be,!1,!0):(tt===ar&&Tt&384||!He&&pt&16)&&fi(Qe,ge,Be),le&&Si(ue)}($e&&(Gt=Ze&&Ze.onVnodeUnmounted)||Ht)&&En(()=>{Gt&&Xn(Gt,ge,ue),Ht&&Po(ue,null,ge,"unmounted")},Be)},Si=ue=>{const{type:ge,el:Be,anchor:le,transition:He}=ue;if(ge===ar){Qi(Be,le);return}if(ge===Zu){oe(ue);return}const tt=()=>{h(Be),He&&!He.persisted&&He.afterLeave&&He.afterLeave()};if(ue.shapeFlag&1&&He&&!He.persisted){const{leave:Ze,delayLeave:je}=He,Qe=()=>Ze(Be,tt);je?je(ue.el,tt,Qe):Qe()}else tt()},Qi=(ue,ge)=>{let Be;for(;ue!==ge;)Be=L(ue),h(ue),ue=Be;h(ge)},Oi=(ue,ge,Be)=>{const{bum:le,scope:He,update:tt,subTree:Ze,um:je,m:Qe,a:We}=ue;B0(Qe),B0(We),le&&cm(le),He.stop(),tt&&(tt.active=!1,jt(Ze,ue,ge,Be)),je&&En(je,ge),En(()=>{ue.isUnmounted=!0},ge),ge&&ge.pendingBranch&&!ge.isUnmounted&&ue.asyncDep&&!ue.asyncResolved&&ue.suspenseId===ge.pendingId&&(ge.deps--,ge.deps===0&&ge.resolve())},fi=(ue,ge,Be,le=!1,He=!1,tt=0)=>{for(let Ze=tt;Ze<ue.length;Ze++)jt(ue[Ze],ge,Be,le,He)},Pi=ue=>ue.shapeFlag&6?Pi(ue.component.subTree):ue.shapeFlag&128?ue.suspense.next():L(ue.anchor||ue.el);let Bi=!1;const Br=(ue,ge,Be)=>{ue==null?ge._vnode&&jt(ge._vnode,null,null,!0):W(ge._vnode||null,ue,ge,null,null,null,Be),Bi||(Bi=!0,S0(),sf(),Bi=!1),ge._vnode=ue},pr={p:W,um:jt,m:Nt,r:Si,mt:Ge,mc:Ee,pc:nt,pbc:pe,n:Pi,o:e};let Fr,lr;return n&&([Fr,lr]=n(pr)),{render:Br,hydrate:Fr,createApp:aT(Br,Fr)}}function mm({type:e,props:n},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&n&&n.encoding&&n.encoding.includes("html")?void 0:s}function Va({effect:e,update:n},s){e.allowRecurse=n.allowRecurse=s}function db(e,n){return(!e||e&&!e.pendingBranch)&&n&&!n.persisted}function Gg(e,n,s=!1){const u=e.children,h=n.children;if($t(u)&&$t(h))for(let g=0;g<u.length;g++){const m=u[g];let c=h[g];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=h[g]=Js(h[g]),c.el=m.el),!s&&c.patchFlag!==-2&&Gg(m,c)),c.type===hc&&(c.el=m.el)}}function _T(e){const n=e.slice(),s=[0];let u,h,g,m,c;const T=e.length;for(u=0;u<T;u++){const M=e[u];if(M!==0){if(h=s[s.length-1],e[h]<M){n[u]=h,s.push(u);continue}for(g=0,m=s.length-1;g<m;)c=g+m>>1,e[s[c]]<M?g=c+1:m=c;M<e[s[g]]&&(g>0&&(n[u]=s[g-1]),s[g]=u)}}for(g=s.length,m=s[g-1];g-- >0;)s[g]=m,m=n[m];return s}function fb(e){const n=e.subTree.component;if(n)return n.asyncDep&&!n.asyncResolved?n:fb(n)}function B0(e){if(e)for(let n=0;n<e.length;n++)e[n].active=!1}const vT=Symbol.for("v-scx"),xT=()=>Zr(vT);function Vn(e,n){return Bf(e,null,n)}function bT(e,n){return Bf(e,null,{flush:"post"})}const Rd={};function Zi(e,n,s){return Bf(e,n,s)}function Bf(e,n,{immediate:s,deep:u,flush:h,once:g,onTrack:m,onTrigger:c}=Gi){if(n&&g){const ne=n;n=(...Ie)=>{ne(...Ie),ee()}}const T=Tr,M=ne=>u===!0?ne:Ys(ne,u===!1?1:void 0);let k,A=!1,L=!1;if(fr(e)?(k=()=>e.value,A=of(e)):Uu(e)?(k=()=>M(e),A=!0):$t(e)?(L=!0,A=e.some(ne=>Uu(ne)||of(ne)),k=()=>e.map(ne=>{if(fr(ne))return ne.value;if(Uu(ne))return M(ne);if(qt(ne))return ea(ne,T,2)})):qt(e)?n?k=()=>ea(e,T,2):k=()=>(H&&H(),to(e,T,3,[X])):k=Yn,n&&u){const ne=k;k=()=>Ys(ne())}let H,X=ne=>{H=j.onStop=()=>{ea(ne,T,4),H=j.onStop=void 0}},W;if(fh)if(X=Yn,n?s&&to(n,T,3,[k(),L?[]:void 0,X]):k(),h==="sync"){const ne=xT();W=ne.__watcherHandles||(ne.__watcherHandles=[])}else return Yn;let se=L?new Array(e.length).fill(Rd):Rd;const Te=()=>{if(!(!j.active||!j.dirty))if(n){const ne=j.run();(u||A||(L?ne.some((Ie,Ee)=>ta(Ie,se[Ee])):ta(ne,se)))&&(H&&H(),to(n,T,3,[ne,se===Rd?void 0:L&&se[0]===Rd?[]:se,X]),se=ne)}else j.run()};Te.allowRecurse=!!n;let ye;h==="sync"?ye=Te:h==="post"?ye=()=>En(Te,T&&T.suspense):(Te.pre=!0,T&&(Te.id=T.uid),ye=()=>Pf(Te));const j=new zg(k,Yn,ye),oe=Pg(),ee=()=>{j.stop(),oe&&kg(oe.effects,j)};return n?s?Te():se=j.run():h==="post"?En(j.run.bind(j),T&&T.suspense):j.run(),W&&W.push(ee),ee}function wT(e,n,s){const u=this.proxy,h=ir(e)?e.includes(".")?pb(u,e):()=>u[e]:e.bind(u,u);let g;qt(n)?g=n:(g=n.handler,s=n);const m=Xa(this),c=Bf(h,g.bind(u),s);return m(),c}function pb(e,n){const s=n.split(".");return()=>{let u=e;for(let h=0;h<s.length&&u;h++)u=u[s[h]];return u}}function Ys(e,n=1/0,s){if(n<=0||!ji(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),n--,fr(e))Ys(e.value,n,s);else if($t(e))for(let u=0;u<e.length;u++)Ys(e[u],n,s);else if(gx(e)||ic(e))e.forEach(u=>{Ys(u,n,s)});else if(_x(e)){for(const u in e)Ys(e[u],n,s);for(const u of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,u)&&Ys(e[u],n,s)}return e}const dh=e=>e.type.__isKeepAlive;function mb(e,n){yb(e,"a",n)}function gb(e,n){yb(e,"da",n)}function yb(e,n,s=Tr){const u=e.__wdc||(e.__wdc=()=>{let h=s;for(;h;){if(h.isDeactivated)return;h=h.parent}return e()});if(Rf(n,u,s),s){let h=s.parent;for(;h&&h.parent;)dh(h.parent.vnode)&&ET(u,n,s,h),h=h.parent}}function ET(e,n,s,u){const h=Rf(n,e,u,!0);sa(()=>{kg(u[n],h)},s)}const Xs=Symbol("_leaveCb"),Od=Symbol("_enterCb");function ST(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Wr(()=>{e.isMounted=!0}),Of(()=>{e.isUnmounting=!0}),e}const Wn=[Function,Array],_b={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Wn,onEnter:Wn,onAfterEnter:Wn,onEnterCancelled:Wn,onBeforeLeave:Wn,onLeave:Wn,onAfterLeave:Wn,onLeaveCancelled:Wn,onBeforeAppear:Wn,onAppear:Wn,onAfterAppear:Wn,onAppearCancelled:Wn},vb=e=>{const n=e.subTree;return n.component?vb(n.component):n},TT={name:"BaseTransition",props:_b,setup(e,{slots:n}){const s=la(),u=ST();return()=>{const h=n.default&&bb(n.default(),!0);if(!h||!h.length)return;let g=h[0];if(h.length>1){for(const L of h)if(L.type!==Hr){g=L;break}}const m=Vt(e),{mode:c}=m;if(u.isLeaving)return gm(g);const T=F0(g);if(!T)return gm(g);let M=Hm(T,m,u,s,L=>M=L);hf(T,M);const k=s.subTree,A=k&&F0(k);if(A&&A.type!==Hr&&!Do(T,A)&&vb(s).type!==Hr){const L=Hm(A,m,u,s);if(hf(A,L),c==="out-in"&&T.type!==Hr)return u.isLeaving=!0,L.afterLeave=()=>{u.isLeaving=!1,s.update.active!==!1&&(s.effect.dirty=!0,s.update())},gm(g);c==="in-out"&&T.type!==Hr&&(L.delayLeave=(H,X,W)=>{const se=xb(u,A);se[String(A.key)]=A,H[Xs]=()=>{X(),H[Xs]=void 0,delete M.delayedLeave},M.delayedLeave=W})}return g}}},IT=TT;function xb(e,n){const{leavingVNodes:s}=e;let u=s.get(n.type);return u||(u=Object.create(null),s.set(n.type,u)),u}function Hm(e,n,s,u,h){const{appear:g,mode:m,persisted:c=!1,onBeforeEnter:T,onEnter:M,onAfterEnter:k,onEnterCancelled:A,onBeforeLeave:L,onLeave:H,onAfterLeave:X,onLeaveCancelled:W,onBeforeAppear:se,onAppear:Te,onAfterAppear:ye,onAppearCancelled:j}=n,oe=String(e.key),ee=xb(s,e),ne=(Me,pe)=>{Me&&to(Me,u,9,pe)},Ie=(Me,pe)=>{const Ae=pe[1];ne(Me,pe),$t(Me)?Me.every(Le=>Le.length<=1)&&Ae():Me.length<=1&&Ae()},Ee={mode:m,persisted:c,beforeEnter(Me){let pe=T;if(!s.isMounted)if(g)pe=se||T;else return;Me[Xs]&&Me[Xs](!0);const Ae=ee[oe];Ae&&Do(e,Ae)&&Ae.el[Xs]&&Ae.el[Xs](),ne(pe,[Me])},enter(Me){let pe=M,Ae=k,Le=A;if(!s.isMounted)if(g)pe=Te||M,Ae=ye||k,Le=j||A;else return;let Oe=!1;const Ge=Me[Od]=rt=>{Oe||(Oe=!0,rt?ne(Le,[Me]):ne(Ae,[Me]),Ee.delayedLeave&&Ee.delayedLeave(),Me[Od]=void 0)};pe?Ie(pe,[Me,Ge]):Ge()},leave(Me,pe){const Ae=String(e.key);if(Me[Od]&&Me[Od](!0),s.isUnmounting)return pe();ne(L,[Me]);let Le=!1;const Oe=Me[Xs]=Ge=>{Le||(Le=!0,pe(),Ge?ne(W,[Me]):ne(X,[Me]),Me[Xs]=void 0,ee[Ae]===e&&delete ee[Ae])};ee[Ae]=e,H?Ie(H,[Me,Oe]):Oe()},clone(Me){const pe=Hm(Me,n,s,u,h);return h&&h(pe),pe}};return Ee}function gm(e){if(dh(e))return e=Fo(e),e.children=null,e}function F0(e){if(!dh(e))return e;const{shapeFlag:n,children:s}=e;if(s){if(n&16)return s[0];if(n&32&&qt(s.default))return s.default()}}function hf(e,n){e.shapeFlag&6&&e.component?hf(e.component.subTree,n):e.shapeFlag&128?(e.ssContent.transition=n.clone(e.ssContent),e.ssFallback.transition=n.clone(e.ssFallback)):e.transition=n}function bb(e,n=!1,s){let u=[],h=0;for(let g=0;g<e.length;g++){let m=e[g];const c=s==null?m.key:String(s)+String(m.key!=null?m.key:g);m.type===ar?(m.patchFlag&128&&h++,u=u.concat(bb(m.children,n,c))):(n||m.type!==Hr)&&u.push(c!=null?Fo(m,{key:c}):m)}if(h>1)for(let g=0;g<u.length;g++)u[g].patchFlag=-2;return u}const CT=e=>e.__isTeleport,Gu=e=>e&&(e.disabled||e.disabled===""),V0=e=>typeof SVGElement<"u"&&e instanceof SVGElement,N0=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Gm=(e,n)=>{const s=e&&e.to;return ir(s)?n?n(s):null:s},AT={name:"Teleport",__isTeleport:!0,process(e,n,s,u,h,g,m,c,T,M){const{mc:k,pc:A,pbc:L,o:{insert:H,querySelector:X,createText:W,createComment:se}}=M,Te=Gu(n.props);let{shapeFlag:ye,children:j,dynamicChildren:oe}=n;if(e==null){const ee=n.el=W(""),ne=n.anchor=W("");H(ee,s,u),H(ne,s,u);const Ie=n.target=Gm(n.props,X),Ee=n.targetAnchor=W("");Ie&&(H(Ee,Ie),m==="svg"||V0(Ie)?m="svg":(m==="mathml"||N0(Ie))&&(m="mathml"));const Me=(pe,Ae)=>{ye&16&&k(j,pe,Ae,h,g,m,c,T)};Te?Me(s,ne):Ie&&Me(Ie,Ee)}else{n.el=e.el;const ee=n.anchor=e.anchor,ne=n.target=e.target,Ie=n.targetAnchor=e.targetAnchor,Ee=Gu(e.props),Me=Ee?s:ne,pe=Ee?ee:Ie;if(m==="svg"||V0(ne)?m="svg":(m==="mathml"||N0(ne))&&(m="mathml"),oe?(L(e.dynamicChildren,oe,Me,h,g,m,c),Gg(e,n,!0)):T||A(e,n,Me,pe,h,g,m,c,!1),Te)Ee?n.props&&e.props&&n.props.to!==e.props.to&&(n.props.to=e.props.to):Bd(n,s,ee,M,1);else if((n.props&&n.props.to)!==(e.props&&e.props.to)){const Ae=n.target=Gm(n.props,X);Ae&&Bd(n,Ae,null,M,0)}else Ee&&Bd(n,ne,Ie,M,1)}wb(n)},remove(e,n,s,u,{um:h,o:{remove:g}},m){const{shapeFlag:c,children:T,anchor:M,targetAnchor:k,target:A,props:L}=e;if(A&&g(k),m&&g(M),c&16){const H=m||!Gu(L);for(let X=0;X<T.length;X++){const W=T[X];h(W,n,s,H,!!W.dynamicChildren)}}},move:Bd,hydrate:kT};function Bd(e,n,s,{o:{insert:u},m:h},g=2){g===0&&u(e.targetAnchor,n,s);const{el:m,anchor:c,shapeFlag:T,children:M,props:k}=e,A=g===2;if(A&&u(m,n,s),(!A||Gu(k))&&T&16)for(let L=0;L<M.length;L++)h(M[L],n,s,2);A&&u(c,n,s)}function kT(e,n,s,u,h,g,{o:{nextSibling:m,parentNode:c,querySelector:T}},M){const k=n.target=Gm(n.props,T);if(k){const A=k._lpa||k.firstChild;if(n.shapeFlag&16)if(Gu(n.props))n.anchor=M(m(e),n,c(e),s,u,h,g),n.targetAnchor=A;else{n.anchor=m(e);let L=A;for(;L;)if(L=m(L),L&&L.nodeType===8&&L.data==="teleport anchor"){n.targetAnchor=L,k._lpa=n.targetAnchor&&m(n.targetAnchor);break}M(A,n,k,s,u,h,g)}wb(n)}return n.anchor&&m(n.anchor)}const MT=AT;function wb(e){const n=e.ctx;if(n&&n.ut){let s=e.children[0].el;for(;s&&s!==e.targetAnchor;)s.nodeType===1&&s.setAttribute("data-v-owner",n.uid),s=s.nextSibling;n.ut()}}const ar=Symbol.for("v-fgt"),hc=Symbol.for("v-txt"),Hr=Symbol.for("v-cmt"),Zu=Symbol.for("v-stc"),Wu=[];let Qn=null;function _t(e=!1){Wu.push(Qn=e?null:[])}function Eb(){Wu.pop(),Qn=Wu[Wu.length-1]||null}let dc=1;function $0(e){dc+=e}function Sb(e){return e.dynamicChildren=dc>0?Qn||tc:null,Eb(),dc>0&&Qn&&Qn.push(e),e}function ri(e,n,s,u,h,g){return Sb($i(e,n,s,u,h,g,!0))}function li(e,n,s,u,h){return Sb(ei(e,n,s,u,h,!0))}function sh(e){return e?e.__v_isVNode===!0:!1}function Do(e,n){return e.type===n.type&&e.key===n.key}const Tb=({key:e})=>e??null,Gd=({ref:e,ref_key:n,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?ir(e)||fr(e)||qt(e)?{i:Ir,r:e,k:n,f:!!s}:e:null);function $i(e,n=null,s=null,u=0,h=null,g=e===ar?0:1,m=!1,c=!1){const T={__v_isVNode:!0,__v_skip:!0,type:e,props:n,key:n&&Tb(n),ref:n&&Gd(n),scopeId:Df,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:u,dynamicProps:h,dynamicChildren:null,appContext:null,ctx:Ir};return c?(Zg(T,s),g&128&&e.normalize(T)):s&&(T.shapeFlag|=ir(s)?8:16),dc>0&&!m&&Qn&&(T.patchFlag>0||g&6)&&T.patchFlag!==32&&Qn.push(T),T}const ei=LT;function LT(e,n=null,s=null,u=0,h=null,g=!1){if((!e||e===Kx)&&(e=Hr),sh(e)){const c=Fo(e,n,!0);return s&&Zg(c,s),dc>0&&!g&&Qn&&(c.shapeFlag&6?Qn[Qn.indexOf(e)]=c:Qn.push(c)),c.patchFlag=-2,c}if(VT(e)&&(e=e.__vccOpts),n){n=df(n);let{class:c,style:T}=n;c&&!ir(c)&&(n.class=Mt(c)),ji(T)&&(Bx(T)&&!$t(T)&&(T=wr({},T)),n.style=ia(T))}const m=ir(e)?1:RS(e)?128:CT(e)?64:ji(e)?4:qt(e)?2:0;return $i(e,n,s,u,h,m,g,!0)}function df(e){return e?Bx(e)||ob(e)?wr({},e):e:null}function Fo(e,n,s=!1,u=!1){const{props:h,ref:g,patchFlag:m,children:c,transition:T}=e,M=n?br(h||{},n):h,k={__v_isVNode:!0,__v_skip:!0,type:e.type,props:M,key:M&&Tb(M),ref:n&&n.ref?s&&g?$t(g)?g.concat(Gd(n)):[g,Gd(n)]:Gd(n):g,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:c,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:n&&e.type!==ar?m===-1?16:m|16:m,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:T,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Fo(e.ssContent),ssFallback:e.ssFallback&&Fo(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return T&&u&&hf(k,T.clone(k)),k}function go(e=" ",n=0){return ei(hc,null,e,n)}function Li(e="",n=!1){return n?(_t(),li(Hr,null,e)):ei(Hr,null,e)}function Jn(e){return e==null||typeof e=="boolean"?ei(Hr):$t(e)?ei(ar,null,e.slice()):typeof e=="object"?Js(e):ei(hc,null,String(e))}function Js(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Fo(e)}function Zg(e,n){let s=0;const{shapeFlag:u}=e;if(n==null)n=null;else if($t(n))s=16;else if(typeof n=="object")if(u&65){const h=n.default;h&&(h._c&&(h._d=!1),Zg(e,h()),h._c&&(h._d=!0));return}else{s=32;const h=n._;!h&&!ob(n)?n._ctx=Ir:h===3&&Ir&&(Ir.slots._===1?n._=1:(n._=2,e.patchFlag|=1024))}else qt(n)?(n={default:n,_ctx:Ir},s=32):(n=String(n),u&64?(s=16,n=[go(n)]):s=8);e.children=n,e.shapeFlag|=s}function br(...e){const n={};for(let s=0;s<e.length;s++){const u=e[s];for(const h in u)if(h==="class")n.class!==u.class&&(n.class=Mt([n.class,u.class]));else if(h==="style")n.style=ia([n.style,u.style]);else if(hh(h)){const g=n[h],m=u[h];m&&g!==m&&!($t(g)&&g.includes(m))&&(n[h]=g?[].concat(g,m):m)}else h!==""&&(n[h]=u[h])}return n}function Xn(e,n,s,u=null){to(e,n,7,[s,u])}const PT=tb();let zT=0;function DT(e,n,s){const u=e.type,h=(n?n.appContext:e.appContext)||PT,g={uid:zT++,vnode:e,type:u,parent:n,appContext:h,root:null,next:null,subTree:null,effect:null,update:null,scope:new Sx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:n?n.provides:Object.create(h.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ab(u,h),emitsOptions:Hx(u,h),emit:null,emitted:null,propsDefaults:Gi,inheritAttrs:u.inheritAttrs,ctx:Gi,data:Gi,props:Gi,attrs:Gi,slots:Gi,refs:Gi,setupState:Gi,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return g.ctx={_:g},g.root=n?n.root:g,g.emit=MS.bind(null,g),e.ce&&e.ce(g),g}let Tr=null;const la=()=>Tr||Ir;let ff,Zm;{const e=bx(),n=(s,u)=>{let h;return(h=e[s])||(h=e[s]=[]),h.push(u),g=>{h.length>1?h.forEach(m=>m(g)):h[0](g)}};ff=n("__VUE_INSTANCE_SETTERS__",s=>Tr=s),Zm=n("__VUE_SSR_SETTERS__",s=>fh=s)}const Xa=e=>{const n=Tr;return ff(e),e.scope.on(),()=>{e.scope.off(),ff(n)}},Wm=()=>{Tr&&Tr.scope.off(),ff(null)};function Ib(e){return e.vnode.shapeFlag&4}let fh=!1;function RT(e,n=!1){n&&Zm(n);const{props:s,children:u}=e.vnode,h=Ib(e);lT(e,s,h,n),hT(e,u);const g=h?OT(e,n):void 0;return n&&Zm(!1),g}function OT(e,n){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,JS);const{setup:u}=s;if(u){const h=e.setupContext=u.length>1?Ab(e):null,g=Xa(e);na();const m=ea(u,e,0,[e.props,h]);if(oa(),g(),Mg(m)){if(m.then(Wm,Wm),n)return m.then(c=>{Km(e,c,n)}).catch(c=>{vc(c,e,0)});e.asyncDep=m}else Km(e,m,n)}else Cb(e,n)}function Km(e,n,s){qt(n)?e.type.__ssrInlineRender?e.ssrRender=n:e.render=n:ji(n)&&(e.setupState=$x(n)),Cb(e,s)}let j0;function Cb(e,n,s){const u=e.type;if(!e.render){if(!n&&j0&&!u.render){const h=u.template||qg(e).template;if(h){const{isCustomElement:g,compilerOptions:m}=e.appContext.config,{delimiters:c,compilerOptions:T}=u,M=wr(wr({isCustomElement:g,delimiters:c},m),T);u.render=j0(h,M)}}e.render=u.render||Yn}{const h=Xa(e);na();try{tT(e)}finally{oa(),h()}}}const BT={get(e,n){return Sn(e,"get",""),e[n]}};function Ab(e){const n=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,BT),slots:e.slots,emit:e.emit,expose:n}}function Ff(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy($x(vS(e.exposed)),{get(n,s){if(s in n)return n[s];if(s in Hu)return Hu[s](e)},has(n,s){return s in n||s in Hu}})):e.proxy}function FT(e,n=!0){return qt(e)?e.displayName||e.name:e.name||n&&e.__name}function VT(e){return qt(e)&&"__vccOpts"in e}const Ve=(e,n)=>xS(e,n,fh);function Nn(e,n,s){const u=arguments.length;return u===2?ji(n)&&!$t(n)?sh(n)?ei(e,null,[n]):ei(e,n):ei(e,null,n):(u>3?s=Array.prototype.slice.call(arguments,2):u===3&&sh(s)&&(s=[s]),ei(e,n,s))}const kb="3.4.29";/**
* @vue/runtime-dom v3.4.29
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const NT="http://www.w3.org/2000/svg",$T="http://www.w3.org/1998/Math/MathML",us=typeof document<"u"?document:null,U0=us&&us.createElement("template"),jT={insert:(e,n,s)=>{n.insertBefore(e,s||null)},remove:e=>{const n=e.parentNode;n&&n.removeChild(e)},createElement:(e,n,s,u)=>{const h=n==="svg"?us.createElementNS(NT,e):n==="mathml"?us.createElementNS($T,e):s?us.createElement(e,{is:s}):us.createElement(e);return e==="select"&&u&&u.multiple!=null&&h.setAttribute("multiple",u.multiple),h},createText:e=>us.createTextNode(e),createComment:e=>us.createComment(e),setText:(e,n)=>{e.nodeValue=n},setElementText:(e,n)=>{e.textContent=n},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>us.querySelector(e),setScopeId(e,n){e.setAttribute(n,"")},insertStaticContent(e,n,s,u,h,g){const m=s?s.previousSibling:n.lastChild;if(h&&(h===g||h.nextSibling))for(;n.insertBefore(h.cloneNode(!0),s),!(h===g||!(h=h.nextSibling)););else{U0.innerHTML=u==="svg"?`<svg>${e}</svg>`:u==="mathml"?`<math>${e}</math>`:e;const c=U0.content;if(u==="svg"||u==="mathml"){const T=c.firstChild;for(;T.firstChild;)c.appendChild(T.firstChild);c.removeChild(T)}n.insertBefore(c,s)}return[m?m.nextSibling:n.firstChild,s?s.previousSibling:n.lastChild]}},Us="transition",Lu="animation",ah=Symbol("_vtc"),Vf=(e,{slots:n})=>Nn(IT,UT(e),n);Vf.displayName="Transition";const Mb={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Vf.props=wr({},_b,Mb);const Na=(e,n=[])=>{$t(e)?e.forEach(s=>s(...n)):e&&e(...n)},q0=e=>e?$t(e)?e.some(n=>n.length>1):e.length>1:!1;function UT(e){const n={};for(const Le in e)Le in Mb||(n[Le]=e[Le]);if(e.css===!1)return n;const{name:s="v",type:u,duration:h,enterFromClass:g=`${s}-enter-from`,enterActiveClass:m=`${s}-enter-active`,enterToClass:c=`${s}-enter-to`,appearFromClass:T=g,appearActiveClass:M=m,appearToClass:k=c,leaveFromClass:A=`${s}-leave-from`,leaveActiveClass:L=`${s}-leave-active`,leaveToClass:H=`${s}-leave-to`}=e,X=qT(h),W=X&&X[0],se=X&&X[1],{onBeforeEnter:Te,onEnter:ye,onEnterCancelled:j,onLeave:oe,onLeaveCancelled:ee,onBeforeAppear:ne=Te,onAppear:Ie=ye,onAppearCancelled:Ee=j}=n,Me=(Le,Oe,Ge)=>{$a(Le,Oe?k:c),$a(Le,Oe?M:m),Ge&&Ge()},pe=(Le,Oe)=>{Le._isLeaving=!1,$a(Le,A),$a(Le,H),$a(Le,L),Oe&&Oe()},Ae=Le=>(Oe,Ge)=>{const rt=Le?Ie:ye,Ke=()=>Me(Oe,Le,Ge);Na(rt,[Oe,Ke]),H0(()=>{$a(Oe,Le?T:g),qs(Oe,Le?k:c),q0(rt)||G0(Oe,u,W,Ke)})};return wr(n,{onBeforeEnter(Le){Na(Te,[Le]),qs(Le,g),qs(Le,m)},onBeforeAppear(Le){Na(ne,[Le]),qs(Le,T),qs(Le,M)},onEnter:Ae(!1),onAppear:Ae(!0),onLeave(Le,Oe){Le._isLeaving=!0;const Ge=()=>pe(Le,Oe);qs(Le,A),qs(Le,L),ZT(),H0(()=>{Le._isLeaving&&($a(Le,A),qs(Le,H),q0(oe)||G0(Le,u,se,Ge))}),Na(oe,[Le,Ge])},onEnterCancelled(Le){Me(Le,!1),Na(j,[Le])},onAppearCancelled(Le){Me(Le,!0),Na(Ee,[Le])},onLeaveCancelled(Le){pe(Le),Na(ee,[Le])}})}function qT(e){if(e==null)return null;if(ji(e))return[ym(e.enter),ym(e.leave)];{const n=ym(e);return[n,n]}}function ym(e){return xx(e)}function qs(e,n){n.split(/\s+/).forEach(s=>s&&e.classList.add(s)),(e[ah]||(e[ah]=new Set)).add(n)}function $a(e,n){n.split(/\s+/).forEach(u=>u&&e.classList.remove(u));const s=e[ah];s&&(s.delete(n),s.size||(e[ah]=void 0))}function H0(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let HT=0;function G0(e,n,s,u){const h=e._endId=++HT,g=()=>{h===e._endId&&u()};if(s)return setTimeout(g,s);const{type:m,timeout:c,propCount:T}=GT(e,n);if(!m)return u();const M=m+"end";let k=0;const A=()=>{e.removeEventListener(M,L),g()},L=H=>{H.target===e&&++k>=T&&A()};setTimeout(()=>{k<T&&A()},c+1),e.addEventListener(M,L)}function GT(e,n){const s=window.getComputedStyle(e),u=X=>(s[X]||"").split(", "),h=u(`${Us}Delay`),g=u(`${Us}Duration`),m=Z0(h,g),c=u(`${Lu}Delay`),T=u(`${Lu}Duration`),M=Z0(c,T);let k=null,A=0,L=0;n===Us?m>0&&(k=Us,A=m,L=g.length):n===Lu?M>0&&(k=Lu,A=M,L=T.length):(A=Math.max(m,M),k=A>0?m>M?Us:Lu:null,L=k?k===Us?g.length:T.length:0);const H=k===Us&&/\b(transform|all)(,|$)/.test(u(`${Us}Property`).toString());return{type:k,timeout:A,propCount:L,hasTransform:H}}function Z0(e,n){for(;e.length<n.length;)e=e.concat(e);return Math.max(...n.map((s,u)=>W0(s)+W0(e[u])))}function W0(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function ZT(){return document.body.offsetHeight}function WT(e,n,s){const u=e[ah];u&&(n=(n?[n,...u]:[...u]).join(" ")),n==null?e.removeAttribute("class"):s?e.setAttribute("class",n):e.className=n}const pf=Symbol("_vod"),Lb=Symbol("_vsh"),KT={beforeMount(e,{value:n},{transition:s}){e[pf]=e.style.display==="none"?"":e.style.display,s&&n?s.beforeEnter(e):Pu(e,n)},mounted(e,{value:n},{transition:s}){s&&n&&s.enter(e)},updated(e,{value:n,oldValue:s},{transition:u}){!n!=!s&&(u?n?(u.beforeEnter(e),Pu(e,!0),u.enter(e)):u.leave(e,()=>{Pu(e,!1)}):Pu(e,n))},beforeUnmount(e,{value:n}){Pu(e,n)}};function Pu(e,n){e.style.display=n?e[pf]:"none",e[Lb]=!n}const Pb=Symbol("");function YD(e){const n=la();if(!n)return;const s=n.ut=(h=e(n.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${n.uid}"]`)).forEach(g=>Jm(g,h))},u=()=>{const h=e(n.proxy);Xm(n.subTree,h),s(h)};Wr(()=>{bT(u);const h=new MutationObserver(u);h.observe(n.subTree.el.parentNode,{childList:!0}),sa(()=>h.disconnect())})}function Xm(e,n){if(e.shapeFlag&128){const s=e.suspense;e=s.activeBranch,s.pendingBranch&&!s.isHydrating&&s.effects.push(()=>{Xm(s.activeBranch,n)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)Jm(e.el,n);else if(e.type===ar)e.children.forEach(s=>Xm(s,n));else if(e.type===Zu){let{el:s,anchor:u}=e;for(;s&&(Jm(s,n),s!==u);)s=s.nextSibling}}function Jm(e,n){if(e.nodeType===1){const s=e.style;let u="";for(const h in n)s.setProperty(`--${h}`,n[h]),u+=`--${h}: ${n[h]};`;s[Pb]=u}}const XT=/(^|;)\s*display\s*:/;function JT(e,n,s){const u=e.style,h=ir(s);let g=!1;if(s&&!h){if(n)if(ir(n))for(const m of n.split(";")){const c=m.slice(0,m.indexOf(":")).trim();s[c]==null&&Zd(u,c,"")}else for(const m in n)s[m]==null&&Zd(u,m,"");for(const m in s)m==="display"&&(g=!0),Zd(u,m,s[m])}else if(h){if(n!==s){const m=u[Pb];m&&(s+=";"+m),u.cssText=s,g=XT.test(s)}}else n&&e.removeAttribute("style");pf in e&&(e[pf]=g?u.display:"",e[Lb]&&(u.display="none"))}const K0=/\s*!important$/;function Zd(e,n,s){if($t(s))s.forEach(u=>Zd(e,n,u));else if(s==null&&(s=""),n.startsWith("--"))e.setProperty(n,s);else{const u=YT(e,n);K0.test(s)?e.setProperty(_c(u),s.replace(K0,""),"important"):e[u]=s}}const X0=["Webkit","Moz","ms"],_m={};function YT(e,n){const s=_m[n];if(s)return s;let u=Oo(n);if(u!=="filter"&&u in e)return _m[n]=u;u=Mf(u);for(let h=0;h<X0.length;h++){const g=X0[h]+u;if(g in e)return _m[n]=g}return n}const J0="http://www.w3.org/1999/xlink";function Y0(e,n,s,u,h,g=XE(n)){u&&n.startsWith("xlink:")?s==null?e.removeAttributeNS(J0,n.slice(6,n.length)):e.setAttributeNS(J0,n,s):s==null||g&&!wx(s)?e.removeAttribute(n):e.setAttribute(n,g?"":String(s))}function QT(e,n,s,u,h,g,m){if(n==="innerHTML"||n==="textContent"){u&&m(u,h,g),e[n]=s??"";return}const c=e.tagName;if(n==="value"&&c!=="PROGRESS"&&!c.includes("-")){const M=c==="OPTION"?e.getAttribute("value")||"":e.value,k=s==null?"":String(s);(M!==k||!("_value"in e))&&(e.value=k),s==null&&e.removeAttribute(n),e._value=s;return}let T=!1;if(s===""||s==null){const M=typeof e[n];M==="boolean"?s=wx(s):s==null&&M==="string"?(s="",T=!0):M==="number"&&(s=0,T=!0)}try{e[n]=s}catch{}T&&e.removeAttribute(n)}function eI(e,n,s,u){e.addEventListener(n,s,u)}function tI(e,n,s,u){e.removeEventListener(n,s,u)}const Q0=Symbol("_vei");function iI(e,n,s,u,h=null){const g=e[Q0]||(e[Q0]={}),m=g[n];if(u&&m)m.value=u;else{const[c,T]=rI(n);if(u){const M=g[n]=sI(u,h);eI(e,c,M,T)}else m&&(tI(e,c,m,T),g[n]=void 0)}}const ev=/(?:Once|Passive|Capture)$/;function rI(e){let n;if(ev.test(e)){n={};let u;for(;u=e.match(ev);)e=e.slice(0,e.length-u[0].length),n[u[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):_c(e.slice(2)),n]}let vm=0;const nI=Promise.resolve(),oI=()=>vm||(nI.then(()=>vm=0),vm=Date.now());function sI(e,n){const s=u=>{if(!u._vts)u._vts=Date.now();else if(u._vts<=s.attached)return;to(aI(u,s.value),n,5,[u])};return s.value=e,s.attached=oI(),s}function aI(e,n){if($t(n)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},n.map(u=>h=>!h._stopped&&u&&u(h))}else return n}const tv=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,lI=(e,n,s,u,h,g,m,c,T)=>{const M=h==="svg";n==="class"?WT(e,u,M):n==="style"?JT(e,s,u):hh(n)?Ag(n)||iI(e,n,s,u,m):(n[0]==="."?(n=n.slice(1),!0):n[0]==="^"?(n=n.slice(1),!1):cI(e,n,u,M))?(QT(e,n,u,g,m,c,T),(n==="value"||n==="checked"||n==="selected")&&Y0(e,n,u,M,m,n!=="value")):(n==="true-value"?e._trueValue=u:n==="false-value"&&(e._falseValue=u),Y0(e,n,u,M))};function cI(e,n,s,u){if(u)return!!(n==="innerHTML"||n==="textContent"||n in e&&tv(n)&&qt(s));if(n==="spellcheck"||n==="draggable"||n==="translate"||n==="form"||n==="list"&&e.tagName==="INPUT"||n==="type"&&e.tagName==="TEXTAREA")return!1;if(n==="width"||n==="height"){const h=e.tagName;if(h==="IMG"||h==="VIDEO"||h==="CANVAS"||h==="SOURCE")return!1}return tv(n)&&ir(s)?!1:n in e}const uI=["ctrl","shift","alt","meta"],hI={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,n)=>uI.some(s=>e[`${s}Key`]&&!n.includes(s))},xm=(e,n)=>{const s=e._withMods||(e._withMods={}),u=n.join(".");return s[u]||(s[u]=(h,...g)=>{for(let m=0;m<n.length;m++){const c=hI[n[m]];if(c&&c(h,n))return}return e(h,...g)})},zb=wr({patchProp:lI},jT);let Ku,iv=!1;function dI(){return Ku||(Ku=gT(zb))}function fI(){return Ku=iv?Ku:yT(zb),iv=!0,Ku}const pI=(...e)=>{const n=dI().createApp(...e),{mount:s}=n;return n.mount=u=>{const h=Rb(u);if(!h)return;const g=n._component;!qt(g)&&!g.render&&!g.template&&(g.template=h.innerHTML),h.innerHTML="";const m=s(h,!1,Db(h));return h instanceof Element&&(h.removeAttribute("v-cloak"),h.setAttribute("data-v-app","")),m},n},mI=(...e)=>{const n=fI().createApp(...e),{mount:s}=n;return n.mount=u=>{const h=Rb(u);if(h)return s(h,!0,Db(h))},n};function Db(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Rb(e){return ir(e)?document.querySelector(e):e}const gI=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,yI=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,_I=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function vI(e,n){if(e==="__proto__"||e==="constructor"&&n&&typeof n=="object"&&"prototype"in n){xI(e);return}return n}function xI(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}function mf(e,n={}){if(typeof e!="string")return e;const s=e.trim();if(e[0]==='"'&&e.endsWith('"')&&!e.includes("\\"))return s.slice(1,-1);if(s.length<=9){const u=s.toLowerCase();if(u==="true")return!0;if(u==="false")return!1;if(u==="undefined")return;if(u==="null")return null;if(u==="nan")return Number.NaN;if(u==="infinity")return Number.POSITIVE_INFINITY;if(u==="-infinity")return Number.NEGATIVE_INFINITY}if(!_I.test(e)){if(n.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(gI.test(e)||yI.test(e)){if(n.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,vI)}return JSON.parse(e)}catch(u){if(n.strict)throw u;return e}}const bI=/#/g,wI=/&/g,EI=/\//g,SI=/=/g,Wg=/\+/g,TI=/%5e/gi,II=/%60/gi,CI=/%7c/gi,AI=/%20/gi;function kI(e){return encodeURI(""+e).replace(CI,"|")}function Ym(e){return kI(typeof e=="string"?e:JSON.stringify(e)).replace(Wg,"%2B").replace(AI,"+").replace(bI,"%23").replace(wI,"%26").replace(II,"`").replace(TI,"^").replace(EI,"%2F")}function bm(e){return Ym(e).replace(SI,"%3D")}function gf(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function MI(e){return gf(e.replace(Wg," "))}function LI(e){return gf(e.replace(Wg," "))}function Kg(e=""){const n={};e[0]==="?"&&(e=e.slice(1));for(const s of e.split("&")){const u=s.match(/([^=]+)=?(.*)/)||[];if(u.length<2)continue;const h=MI(u[1]);if(h==="__proto__"||h==="constructor")continue;const g=LI(u[2]||"");n[h]===void 0?n[h]=g:Array.isArray(n[h])?n[h].push(g):n[h]=[n[h],g]}return n}function PI(e,n){return(typeof n=="number"||typeof n=="boolean")&&(n=String(n)),n?Array.isArray(n)?n.map(s=>`${bm(e)}=${Ym(s)}`).join("&"):`${bm(e)}=${Ym(n)}`:bm(e)}function Ob(e){return Object.keys(e).filter(n=>e[n]!==void 0).map(n=>PI(n,e[n])).filter(Boolean).join("&")}const zI=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,DI=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,RI=/^([/\\]\s*){2,}[^/\\]/,OI=/^[\s\0]*(blob|data|javascript|vbscript):$/i,BI=/\/$|\/\?|\/#/,FI=/^\.?\//;function ca(e,n={}){return typeof n=="boolean"&&(n={acceptRelative:n}),n.strict?zI.test(e):DI.test(e)||(n.acceptRelative?RI.test(e):!1)}function VI(e){return!!e&&OI.test(e)}function Qm(e="",n){return n?BI.test(e):e.endsWith("/")}function Nf(e="",n){if(!n)return(Qm(e)?e.slice(0,-1):e)||"/";if(!Qm(e,!0))return e||"/";let s=e,u="";const h=e.indexOf("#");h>=0&&(s=e.slice(0,h),u=e.slice(h));const[g,...m]=s.split("?");return((g.endsWith("/")?g.slice(0,-1):g)||"/")+(m.length>0?`?${m.join("?")}`:"")+u}function yf(e="",n){if(!n)return e.endsWith("/")?e:e+"/";if(Qm(e,!0))return e||"/";let s=e,u="";const h=e.indexOf("#");if(h>=0&&(s=e.slice(0,h),u=e.slice(h),!s))return u;const[g,...m]=s.split("?");return g+"/"+(m.length>0?`?${m.join("?")}`:"")+u}function NI(e=""){return e.startsWith("/")}function rv(e=""){return NI(e)?e:"/"+e}function $I(e,n){if(Bb(n)||ca(e))return e;const s=Nf(n);return e.startsWith(s)?e:ph(s,e)}function jI(e,n){if(Bb(n))return e;const s=Nf(n);if(!e.startsWith(s))return e;const u=e.slice(s.length);return u[0]==="/"?u:"/"+u}function Xg(e,n){const s=HI(e),u={...Kg(s.search),...n};return s.search=Ob(u),Nb(s)}function Bb(e){return!e||e==="/"}function UI(e){return e&&e!=="/"}function ph(e,...n){let s=e||"";for(const u of n.filter(h=>UI(h)))if(s){const h=u.replace(FI,"");s=yf(s)+h}else s=u;return s}function Fb(...e){var m,c,T,M;const n=/\/(?!\/)/,s=e.filter(Boolean),u=[];let h=0;for(const k of s)if(!(!k||k==="/")){for(const[A,L]of k.split(n).entries())if(!(!L||L===".")){if(L===".."){if(u.length===1&&ca(u[0]))continue;u.pop(),h--;continue}if(A===1&&((m=u[u.length-1])!=null&&m.endsWith(":/"))){u[u.length-1]+="/"+L;continue}u.push(L),h++}}let g=u.join("/");return h>=0?(c=s[0])!=null&&c.startsWith("/")&&!g.startsWith("/")?g="/"+g:(T=s[0])!=null&&T.startsWith("./")&&!g.startsWith("./")&&(g="./"+g):g="../".repeat(-1*h)+g,(M=s[s.length-1])!=null&&M.endsWith("/")&&!g.endsWith("/")&&(g+="/"),g}function qI(e,n,s={}){return s.trailingSlash||(e=yf(e),n=yf(n)),s.leadingSlash||(e=rv(e),n=rv(n)),s.encoding||(e=gf(e),n=gf(n)),e===n}const Vb=Symbol.for("ufo:protocolRelative");function HI(e="",n){const s=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,A,L=""]=s;return{protocol:A.toLowerCase(),pathname:L,href:A+L,auth:"",host:"",search:"",hash:""}}if(!ca(e,{acceptRelative:!0}))return nv(e);const[,u="",h,g=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[],[,m="",c=""]=g.match(/([^#/?]*)(.*)?/)||[],{pathname:T,search:M,hash:k}=nv(c.replace(/\/(?=[A-Za-z]:)/,""));return{protocol:u.toLowerCase(),auth:h?h.slice(0,Math.max(0,h.length-1)):"",host:m,pathname:T,search:M,hash:k,[Vb]:!u}}function nv(e=""){const[n="",s="",u=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:n,search:s,hash:u}}function Nb(e){const n=e.pathname||"",s=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",u=e.hash||"",h=e.auth?e.auth+"@":"",g=e.host||"";return(e.protocol||e[Vb]?(e.protocol||"")+"//":"")+h+g+n+s+u}class GI extends Error{constructor(n,s){super(n,s),this.name="FetchError",s!=null&&s.cause&&!this.cause&&(this.cause=s.cause)}}function ZI(e){var T,M,k,A,L;const n=((T=e.error)==null?void 0:T.message)||((M=e.error)==null?void 0:M.toString())||"",s=((k=e.request)==null?void 0:k.method)||((A=e.options)==null?void 0:A.method)||"GET",u=((L=e.request)==null?void 0:L.url)||String(e.request)||"/",h=`[${s}] ${JSON.stringify(u)}`,g=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",m=`${h}: ${g}${n?` ${n}`:""}`,c=new GI(m,e.error?{cause:e.error}:void 0);for(const H of["request","options","response"])Object.defineProperty(c,H,{get(){return e[H]}});for(const[H,X]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(c,H,{get(){return e.response&&e.response[X]}});return c}const WI=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function ov(e="GET"){return WI.has(e.toUpperCase())}function KI(e){if(e===void 0)return!1;const n=typeof e;return n==="string"||n==="number"||n==="boolean"||n===null?!0:n!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}const XI=new Set(["image/svg","application/xml","application/xhtml","application/html"]),JI=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function YI(e=""){if(!e)return"json";const n=e.split(";").shift()||"";return JI.test(n)?"json":XI.has(n)||n.startsWith("text/")?"text":"blob"}function QI(e,n,s=globalThis.Headers){const u={...n,...e};if(n!=null&&n.params&&(e!=null&&e.params)&&(u.params={...n==null?void 0:n.params,...e==null?void 0:e.params}),n!=null&&n.query&&(e!=null&&e.query)&&(u.query={...n==null?void 0:n.query,...e==null?void 0:e.query}),n!=null&&n.headers&&(e!=null&&e.headers)){u.headers=new s((n==null?void 0:n.headers)||{});for(const[h,g]of new s((e==null?void 0:e.headers)||{}))u.headers.set(h,g)}return u}const eC=new Set([408,409,425,429,500,502,503,504]),tC=new Set([101,204,205,304]);function $b(e={}){const{fetch:n=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:u=globalThis.AbortController}=e;async function h(c){const T=c.error&&c.error.name==="AbortError"&&!c.options.timeout||!1;if(c.options.retry!==!1&&!T){let k;typeof c.options.retry=="number"?k=c.options.retry:k=ov(c.options.method)?0:1;const A=c.response&&c.response.status||500;if(k>0&&(Array.isArray(c.options.retryStatusCodes)?c.options.retryStatusCodes.includes(A):eC.has(A))){const L=c.options.retryDelay||0;return L>0&&await new Promise(H=>setTimeout(H,L)),g(c.request,{...c.options,retry:k-1})}}const M=ZI(c);throw Error.captureStackTrace&&Error.captureStackTrace(M,g),M}const g=async function(T,M={}){var H;const k={request:T,options:QI(M,e.defaults,s),response:void 0,error:void 0};k.options.method=(H=k.options.method)==null?void 0:H.toUpperCase(),k.options.onRequest&&await k.options.onRequest(k),typeof k.request=="string"&&(k.options.baseURL&&(k.request=$I(k.request,k.options.baseURL)),(k.options.query||k.options.params)&&(k.request=Xg(k.request,{...k.options.params,...k.options.query}))),k.options.body&&ov(k.options.method)&&(KI(k.options.body)?(k.options.body=typeof k.options.body=="string"?k.options.body:JSON.stringify(k.options.body),k.options.headers=new s(k.options.headers||{}),k.options.headers.has("content-type")||k.options.headers.set("content-type","application/json"),k.options.headers.has("accept")||k.options.headers.set("accept","application/json")):("pipeTo"in k.options.body&&typeof k.options.body.pipeTo=="function"||typeof k.options.body.pipe=="function")&&("duplex"in k.options||(k.options.duplex="half")));let A;if(!k.options.signal&&k.options.timeout){const X=new u;A=setTimeout(()=>X.abort(),k.options.timeout),k.options.signal=X.signal}try{k.response=await n(k.request,k.options)}catch(X){return k.error=X,k.options.onRequestError&&await k.options.onRequestError(k),await h(k)}finally{A&&clearTimeout(A)}if(k.response.body&&!tC.has(k.response.status)&&k.options.method!=="HEAD"){const X=(k.options.parseResponse?"json":k.options.responseType)||YI(k.response.headers.get("content-type")||"");switch(X){case"json":{const W=await k.response.text(),se=k.options.parseResponse||mf;k.response._data=se(W);break}case"stream":{k.response._data=k.response.body;break}default:k.response._data=await k.response[X]()}}return k.options.onResponse&&await k.options.onResponse(k),!k.options.ignoreResponseError&&k.response.status>=400&&k.response.status<600?(k.options.onResponseError&&await k.options.onResponseError(k),await h(k)):k.response},m=async function(T,M){return(await g(T,M))._data};return m.raw=g,m.native=(...c)=>n(...c),m.create=(c={})=>$b({...e,defaults:{...e.defaults,...c}}),m}const Jg=function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")}(),iC=Jg.fetch||(()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!"))),rC=Jg.Headers,nC=Jg.AbortController,oC=$b({fetch:iC,Headers:rC,AbortController:nC}),sC=oC,aC=()=>{var e;return((e=window==null?void 0:window.__NUXT__)==null?void 0:e.config)||{}},_f=aC().app,lC=()=>_f.baseURL,cC=()=>_f.buildAssetsDir,Yg=(...e)=>Fb(jb(),cC(),...e),jb=(...e)=>{const n=_f.cdnURL||_f.baseURL;return e.length?Fb(n,...e):n};globalThis.__buildAssetsURL=Yg,globalThis.__publicAssetsURL=jb;globalThis.$fetch||(globalThis.$fetch=sC.create({baseURL:lC()}));function eg(e,n={},s){for(const u in e){const h=e[u],g=s?`${s}:${u}`:u;typeof h=="object"&&h!==null?eg(h,n,g):typeof h=="function"&&(n[g]=h)}return n}const uC={run:e=>e()},hC=()=>uC,Ub=typeof console.createTask<"u"?console.createTask:hC;function dC(e,n){const s=n.shift(),u=Ub(s);return e.reduce((h,g)=>h.then(()=>u.run(()=>g(...n))),Promise.resolve())}function fC(e,n){const s=n.shift(),u=Ub(s);return Promise.all(e.map(h=>u.run(()=>h(...n))))}function wm(e,n){for(const s of[...e])s(n)}class pC{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(n,s,u={}){if(!n||typeof s!="function")return()=>{};const h=n;let g;for(;this._deprecatedHooks[n];)g=this._deprecatedHooks[n],n=g.to;if(g&&!u.allowDeprecated){let m=g.message;m||(m=`${h} hook has been deprecated`+(g.to?`, please use ${g.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(m)||(console.warn(m),this._deprecatedMessages.add(m))}if(!s.name)try{Object.defineProperty(s,"name",{get:()=>"_"+n.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[n]=this._hooks[n]||[],this._hooks[n].push(s),()=>{s&&(this.removeHook(n,s),s=void 0)}}hookOnce(n,s){let u,h=(...g)=>(typeof u=="function"&&u(),u=void 0,h=void 0,s(...g));return u=this.hook(n,h),u}removeHook(n,s){if(this._hooks[n]){const u=this._hooks[n].indexOf(s);u!==-1&&this._hooks[n].splice(u,1),this._hooks[n].length===0&&delete this._hooks[n]}}deprecateHook(n,s){this._deprecatedHooks[n]=typeof s=="string"?{to:s}:s;const u=this._hooks[n]||[];delete this._hooks[n];for(const h of u)this.hook(n,h)}deprecateHooks(n){Object.assign(this._deprecatedHooks,n);for(const s in n)this.deprecateHook(s,n[s])}addHooks(n){const s=eg(n),u=Object.keys(s).map(h=>this.hook(h,s[h]));return()=>{for(const h of u.splice(0,u.length))h()}}removeHooks(n){const s=eg(n);for(const u in s)this.removeHook(u,s[u])}removeAllHooks(){for(const n in this._hooks)delete this._hooks[n]}callHook(n,...s){return s.unshift(n),this.callHookWith(dC,n,...s)}callHookParallel(n,...s){return s.unshift(n),this.callHookWith(fC,n,...s)}callHookWith(n,s,...u){const h=this._before||this._after?{name:s,args:u,context:{}}:void 0;this._before&&wm(this._before,h);const g=n(s in this._hooks?[...this._hooks[s]]:[],u);return g instanceof Promise?g.finally(()=>{this._after&&h&&wm(this._after,h)}):(this._after&&h&&wm(this._after,h),g)}beforeEach(n){return this._before=this._before||[],this._before.push(n),()=>{if(this._before!==void 0){const s=this._before.indexOf(n);s!==-1&&this._before.splice(s,1)}}}afterEach(n){return this._after=this._after||[],this._after.push(n),()=>{if(this._after!==void 0){const s=this._after.indexOf(n);s!==-1&&this._after.splice(s,1)}}}}function qb(){return new pC}function mC(e={}){let n,s=!1;const u=m=>{if(n&&n!==m)throw new Error("Context conflict")};let h;if(e.asyncContext){const m=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;m?h=new m:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const g=()=>{if(h&&n===void 0){const m=h.getStore();if(m!==void 0)return m}return n};return{use:()=>{const m=g();if(m===void 0)throw new Error("Context is not available");return m},tryUse:()=>g(),set:(m,c)=>{c||u(m),n=m,s=!0},unset:()=>{n=void 0,s=!1},call:(m,c)=>{u(m),n=m;try{return h?h.run(m,c):c()}finally{s||(n=void 0)}},async callAsync(m,c){n=m;const T=()=>{n=m},M=()=>n===m?T:void 0;tg.add(M);try{const k=h?h.run(m,c):c();return s||(n=void 0),await k}finally{tg.delete(M)}}}}function gC(e={}){const n={};return{get(s,u={}){return n[s]||(n[s]=mC({...e,...u})),n[s],n[s]}}}const vf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:typeof window<"u"?window:{},sv="__unctx__",yC=vf[sv]||(vf[sv]=gC()),_C=(e,n={})=>yC.get(e,n),av="__unctx_async_handlers__",tg=vf[av]||(vf[av]=new Set);function Hb(e){const n=[];for(const h of tg){const g=h();g&&n.push(g)}const s=()=>{for(const h of n)h()};let u=e();return u&&typeof u=="object"&&"catch"in u&&(u=u.catch(h=>{throw s(),h})),[u,s]}const vC={componentName:"NuxtLink"},xC=null,bC="#__nuxt",Gb="nuxt-app",lv=36e5;function Zb(e=Gb){return _C(e,{asyncContext:!1})}const wC="__nuxt_plugin";function EC(e){let n=0;const s={_name:Gb,_scope:JE(),provide:void 0,globalName:"nuxt",versions:{get nuxt(){return"3.12.2"},get vue(){return s.vueApp.version}},payload:ec({data:ec({}),state:Bo({}),once:new Set,_errors:ec({})}),static:{data:{}},runWithContext(h){return s._scope.active&&!Pg()?s._scope.run(()=>cv(s,h)):cv(s,h)},isHydrating:!0,deferHydration(){if(!s.isHydrating)return()=>{};n++;let h=!1;return()=>{if(!h&&(h=!0,n--,n===0))return s.isHydrating=!1,s.callHook("app:suspense:resolve")}},_asyncDataPromises:{},_asyncData:ec({}),_payloadRevivers:{},...e};if(window.__NUXT__)for(const h in window.__NUXT__)switch(h){case"data":case"state":case"_errors":Object.assign(s.payload[h],window.__NUXT__[h]);break;default:s.payload[h]=window.__NUXT__[h]}s.hooks=qb(),s.hook=s.hooks.hook,s.callHook=s.hooks.callHook,s.provide=(h,g)=>{const m="$"+h;Fd(s,m,g),Fd(s.vueApp.config.globalProperties,m,g)},Fd(s.vueApp,"$nuxt",s),Fd(s.vueApp.config.globalProperties,"$nuxt",s);{window.addEventListener("nuxt.preloadError",g=>{s.callHook("app:chunkError",{error:g.payload})}),window.useNuxtApp=window.useNuxtApp||Yi;const h=s.hook("app:error",(...g)=>{console.error("[nuxt] error caught during app initialization",...g)});s.hook("app:mounted",h)}const u=s.payload.config;return s.provide("config",u),s}function SC(e,n){n.hooks&&e.hooks.addHooks(n.hooks)}async function TC(e,n){if(typeof n=="function"){const{provide:s}=await e.runWithContext(()=>n(e))||{};if(s&&typeof s=="object")for(const u in s)e.provide(u,s[u])}}async function IC(e,n){const s=[],u=[],h=[],g=[];let m=0;async function c(T){var k;const M=((k=T.dependsOn)==null?void 0:k.filter(A=>n.some(L=>L._name===A)&&!s.includes(A)))??[];if(M.length>0)u.push([new Set(M),T]);else{const A=TC(e,T).then(async()=>{T._name&&(s.push(T._name),await Promise.all(u.map(async([L,H])=>{L.has(T._name)&&(L.delete(T._name),L.size===0&&(m++,await c(H)))})))});T.parallel?h.push(A.catch(L=>g.push(L))):await A}}for(const T of n)SC(e,T);for(const T of n)await c(T);if(await Promise.all(h),m)for(let T=0;T<m;T++)await Promise.all(h);if(g.length)throw g[0]}function vo(e){if(typeof e=="function")return e;const n=e._name||e.name;return delete e.name,Object.assign(e.setup||(()=>{}),e,{[wC]:!0,_name:n})}function cv(e,n,s){const u=()=>n();return Zb(e._name).set(e),e.vueApp.runWithContext(u)}function CC(e){var s;let n;return ib()&&(n=(s=la())==null?void 0:s.appContext.app.$nuxt),n=n||Zb(e).tryUse(),n||null}function Yi(e){const n=CC(e);if(!n)throw new Error("[nuxt] instance unavailable");return n}function fc(e){return Yi().$config}function Fd(e,n,s){Object.defineProperty(e,n,{get:()=>s})}const uv=Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0});function hv(e,n){n?n={...uv,...n}:n=uv;const s=Wb(n);return s.dispatch(e),s.toString()}const AC=Object.freeze(["prototype","__proto__","constructor"]);function Wb(e){let n="",s=new Map;const u=h=>{n+=h};return{toString(){return n},getContext(){return s},dispatch(h){return e.replacer&&(h=e.replacer(h)),this[h===null?"null":typeof h](h)},object(h){if(h&&typeof h.toJSON=="function")return this.object(h.toJSON());const g=Object.prototype.toString.call(h);let m="";const c=g.length;c<10?m="unknown:["+g+"]":m=g.slice(8,c-1),m=m.toLowerCase();let T=null;if((T=s.get(h))===void 0)s.set(h,s.size);else return this.dispatch("[CIRCULAR:"+T+"]");if(typeof Buffer<"u"&&Buffer.isBuffer&&Buffer.isBuffer(h))return u("buffer:"),u(h.toString("utf8"));if(m!=="object"&&m!=="function"&&m!=="asyncfunction")this[m]?this[m](h):e.ignoreUnknown||this.unkown(h,m);else{let M=Object.keys(h);e.unorderedObjects&&(M=M.sort());let k=[];e.respectType!==!1&&!dv(h)&&(k=AC),e.excludeKeys&&(M=M.filter(L=>!e.excludeKeys(L)),k=k.filter(L=>!e.excludeKeys(L))),u("object:"+(M.length+k.length)+":");const A=L=>{this.dispatch(L),u(":"),e.excludeValues||this.dispatch(h[L]),u(",")};for(const L of M)A(L);for(const L of k)A(L)}},array(h,g){if(g=g===void 0?e.unorderedArrays!==!1:g,u("array:"+h.length+":"),!g||h.length<=1){for(const T of h)this.dispatch(T);return}const m=new Map,c=h.map(T=>{const M=Wb(e);M.dispatch(T);for(const[k,A]of M.getContext())m.set(k,A);return M.toString()});return s=m,c.sort(),this.array(c,!1)},date(h){return u("date:"+h.toJSON())},symbol(h){return u("symbol:"+h.toString())},unkown(h,g){if(u(g),!!h&&(u(":"),h&&typeof h.entries=="function"))return this.array(Array.from(h.entries()),!0)},error(h){return u("error:"+h.toString())},boolean(h){return u("bool:"+h)},string(h){u("string:"+h.length+":"),u(h)},function(h){u("fn:"),dv(h)?this.dispatch("[native]"):this.dispatch(h.toString()),e.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(h.name)),e.respectFunctionProperties&&this.object(h)},number(h){return u("number:"+h)},xml(h){return u("xml:"+h.toString())},null(){return u("Null")},undefined(){return u("Undefined")},regexp(h){return u("regex:"+h.toString())},uint8array(h){return u("uint8array:"),this.dispatch(Array.prototype.slice.call(h))},uint8clampedarray(h){return u("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(h))},int8array(h){return u("int8array:"),this.dispatch(Array.prototype.slice.call(h))},uint16array(h){return u("uint16array:"),this.dispatch(Array.prototype.slice.call(h))},int16array(h){return u("int16array:"),this.dispatch(Array.prototype.slice.call(h))},uint32array(h){return u("uint32array:"),this.dispatch(Array.prototype.slice.call(h))},int32array(h){return u("int32array:"),this.dispatch(Array.prototype.slice.call(h))},float32array(h){return u("float32array:"),this.dispatch(Array.prototype.slice.call(h))},float64array(h){return u("float64array:"),this.dispatch(Array.prototype.slice.call(h))},arraybuffer(h){return u("arraybuffer:"),this.dispatch(new Uint8Array(h))},url(h){return u("url:"+h.toString())},map(h){u("map:");const g=[...h];return this.array(g,e.unorderedSets!==!1)},set(h){u("set:");const g=[...h];return this.array(g,e.unorderedSets!==!1)},file(h){return u("file:"),this.dispatch([h.name,h.size,h.type,h.lastModfied])},blob(){if(e.ignoreUnknown)return u("[blob]");throw new Error(`Hashing Blob objects is currently not supported
Use "options.replacer" or "options.ignoreUnknown"
`)},domwindow(){return u("domwindow")},bigint(h){return u("bigint:"+h.toString())},process(){return u("process")},timer(){return u("timer")},pipe(){return u("pipe")},tcp(){return u("tcp")},udp(){return u("udp")},tty(){return u("tty")},statwatcher(){return u("statwatcher")},securecontext(){return u("securecontext")},connection(){return u("connection")},zlib(){return u("zlib")},context(){return u("context")},nodescript(){return u("nodescript")},httpparser(){return u("httpparser")},dataview(){return u("dataview")},signal(){return u("signal")},fsevent(){return u("fsevent")},tlswrap(){return u("tlswrap")}}}const Kb="[native code] }",kC=Kb.length;function dv(e){return typeof e!="function"?!1:Function.prototype.toString.call(e).slice(-kC)===Kb}function MC(e,n,s={}){return e===n||hv(e,s)===hv(n,s)}function LC(e,n){return{ctx:{table:e},matchAll:s=>Jb(s,e)}}function Xb(e){const n={};for(const s in e)n[s]=s==="dynamic"?new Map(Object.entries(e[s]).map(([u,h])=>[u,Xb(h)])):new Map(Object.entries(e[s]));return n}function PC(e){return LC(Xb(e))}function Jb(e,n,s){e.endsWith("/")&&(e=e.slice(0,-1)||"/");const u=[];for(const[g,m]of fv(n.wildcard))(e===g||e.startsWith(g+"/"))&&u.push(m);for(const[g,m]of fv(n.dynamic))if(e.startsWith(g+"/")){const c="/"+e.slice(g.length).split("/").splice(2).join("/");u.push(...Jb(c,m))}const h=n.static.get(e);return h&&u.push(h),u.filter(Boolean)}function fv(e){return[...e.entries()].sort((n,s)=>n[0].length-s[0].length)}function Em(e){if(e===null||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);return n!==null&&n!==Object.prototype&&Object.getPrototypeOf(n)!==null||Symbol.iterator in e?!1:Symbol.toStringTag in e?Object.prototype.toString.call(e)==="[object Module]":!0}function ig(e,n,s=".",u){if(!Em(n))return ig(e,{},s,u);const h=Object.assign({},n);for(const g in e){if(g==="__proto__"||g==="constructor")continue;const m=e[g];m!=null&&(u&&u(h,g,m,s)||(Array.isArray(m)&&Array.isArray(h[g])?h[g]=[...m,...h[g]]:Em(m)&&Em(h[g])?h[g]=ig(m,h[g],(s?`${s}.`:"")+g.toString(),u):h[g]=m))}return h}function Qg(e){return(...n)=>n.reduce((s,u)=>ig(s,u,"",e),{})}const $f=Qg(),zC=Qg((e,n,s)=>{if(e[n]!==void 0&&typeof s=="function")return e[n]=s(e[n]),!0});function DC(e,n){try{return n in e}catch{return!1}}var RC=Object.defineProperty,OC=(e,n,s)=>n in e?RC(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,Ua=(e,n,s)=>(OC(e,typeof n!="symbol"?n+"":n,s),s);class rg extends Error{constructor(n,s={}){super(n,s),Ua(this,"statusCode",500),Ua(this,"fatal",!1),Ua(this,"unhandled",!1),Ua(this,"statusMessage"),Ua(this,"data"),Ua(this,"cause"),s.cause&&!this.cause&&(this.cause=s.cause)}toJSON(){const n={message:this.message,statusCode:ng(this.statusCode,500)};return this.statusMessage&&(n.statusMessage=Yb(this.statusMessage)),this.data!==void 0&&(n.data=this.data),n}}Ua(rg,"__h3_error__",!0);function BC(e){if(typeof e=="string")return new rg(e);if(FC(e))return e;const n=new rg(e.message??e.statusMessage??"",{cause:e.cause||e});if(DC(e,"stack"))try{Object.defineProperty(n,"stack",{get(){return e.stack}})}catch{try{n.stack=e.stack}catch{}}if(e.data&&(n.data=e.data),e.statusCode?n.statusCode=ng(e.statusCode,n.statusCode):e.status&&(n.statusCode=ng(e.status,n.statusCode)),e.statusMessage?n.statusMessage=e.statusMessage:e.statusText&&(n.statusMessage=e.statusText),n.statusMessage){const s=n.statusMessage;Yb(n.statusMessage)!==s&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return e.fatal!==void 0&&(n.fatal=e.fatal),e.unhandled!==void 0&&(n.unhandled=e.unhandled),n}function FC(e){var n;return((n=e==null?void 0:e.constructor)==null?void 0:n.__h3_error__)===!0}const VC=/[^\u0009\u0020-\u007E]/g;function Yb(e=""){return e.replace(VC,"")}function ng(e,n=200){return!e||(typeof e=="string"&&(e=Number.parseInt(e,10)),e<100||e>999)?n:e}const Qb=Symbol("route"),Vo=()=>{var e;return(e=Yi())==null?void 0:e.$router},ey=()=>ib()?Zr(Qb,Yi()._route):Yi()._route;const NC=()=>{try{if(Yi()._processingMiddleware)return!0}catch{return!1}return!1},e1=(e,n)=>{e||(e="/");const s=typeof e=="string"?e:Xg(e.path||"/",e.query||{})+(e.hash||"");if(n!=null&&n.open){const{target:c="_blank",windowFeatures:T={}}=n.open,M=Object.entries(T).filter(([k,A])=>A!==void 0).map(([k,A])=>`${k.toLowerCase()}=${A}`).join(", ");return open(s,c,M),Promise.resolve()}const u=(n==null?void 0:n.external)||ca(s,{acceptRelative:!0});if(u){if(!(n!=null&&n.external))throw new Error("Navigating to an external URL is not allowed by default. Use `navigateTo(url, { external: true })`.");const{protocol:c}=new URL(s,window.location.href);if(c&&VI(c))throw new Error(`Cannot navigate to a URL with '${c}' protocol.`)}const h=NC();if(!u&&h)return e;const g=Vo(),m=Yi();return u?(m._scope.stop(),n!=null&&n.replace?location.replace(s):location.href=s,h?m.isHydrating?new Promise(()=>{}):!1:Promise.resolve()):n!=null&&n.replace?g.replace(e):g.push(e)},t1="__nuxt_error",ty=()=>eo(Yi().payload,"error"),$C=e=>{const n=iy(e);try{const s=Yi(),u=ty();s.hooks.callHook("app:error",n),u.value=u.value||n}catch{throw n}return n},jC=async(e={})=>{const n=Yi(),s=ty();n.callHook("app:error:cleared",e),e.redirect&&await Vo().replace(e.redirect),s.value=xC},UC=e=>!!e&&typeof e=="object"&&t1 in e,iy=e=>{const n=BC(e);return Object.defineProperty(n,t1,{value:!0,configurable:!1,writable:!1}),n},qC=-1,HC=-2,GC=-3,ZC=-4,WC=-5,KC=-6;function XC(e,n){return JC(JSON.parse(e),n)}function JC(e,n){if(typeof e=="number")return h(e,!0);if(!Array.isArray(e)||e.length===0)throw new Error("Invalid input");const s=e,u=Array(s.length);function h(g,m=!1){if(g===qC)return;if(g===GC)return NaN;if(g===ZC)return 1/0;if(g===WC)return-1/0;if(g===KC)return-0;if(m)throw new Error("Invalid input");if(g in u)return u[g];const c=s[g];if(!c||typeof c!="object")u[g]=c;else if(Array.isArray(c))if(typeof c[0]=="string"){const T=c[0],M=n==null?void 0:n[T];if(M)return u[g]=M(h(c[1]));switch(T){case"Date":u[g]=new Date(c[1]);break;case"Set":const k=new Set;u[g]=k;for(let H=1;H<c.length;H+=1)k.add(h(c[H]));break;case"Map":const A=new Map;u[g]=A;for(let H=1;H<c.length;H+=2)A.set(h(c[H]),h(c[H+1]));break;case"RegExp":u[g]=new RegExp(c[1],c[2]);break;case"Object":u[g]=Object(c[1]);break;case"BigInt":u[g]=BigInt(c[1]);break;case"null":const L=Object.create(null);u[g]=L;for(let H=1;H<c.length;H+=2)L[c[H]]=h(c[H+1]);break;default:throw new Error(`Unknown type ${T}`)}}else{const T=new Array(c.length);u[g]=T;for(let M=0;M<c.length;M+=1){const k=c[M];k!==HC&&(T[M]=h(k))}}else{const T={};u[g]=T;for(const M in c){const k=c[M];T[M]=h(k)}}return u[g]}return h(0)}function YC(e){return Array.isArray(e)?e:[e]}const QC=["title","titleTemplate","script","style","noscript"],Wd=["base","meta","link","style","script","noscript"],eA=["title","titleTemplate","templateParams","base","htmlAttrs","bodyAttrs","meta","link","style","script","noscript"],tA=["base","title","titleTemplate","bodyAttrs","htmlAttrs","templateParams"],i1=["tagPosition","tagPriority","tagDuplicateStrategy","children","innerHTML","textContent","processTemplateParams"],iA=typeof window<"u";function ry(e){let n=9;for(let s=0;s<e.length;)n=Math.imul(n^e.charCodeAt(s++),9**9);return((n^n>>>9)+65536).toString(16).substring(1,8).toLowerCase()}function pv(e){return e._h||ry(e._d?e._d:`${e.tag}:${e.textContent||e.innerHTML||""}:${Object.entries(e.props).map(([n,s])=>`${n}:${String(s)}`).join(",")}`)}function r1(e,n){const{props:s,tag:u}=e;if(tA.includes(u))return u;if(u==="link"&&s.rel==="canonical")return"canonical";if(s.charset)return"charset";const h=["id"];u==="meta"&&h.push("name","property","http-equiv");for(const g of h)if(typeof s[g]<"u"){const m=String(s[g]);return`${u}:${g}:${m}`}return!1}function mv(e,n){return e==null?n||null:typeof e=="function"?e(n):e}async function rA(e,n,s){const u={tag:e,props:await n1(typeof n=="object"&&typeof n!="function"&&!(n instanceof Promise)?{...n}:{[["script","noscript","style"].includes(e)?"innerHTML":"textContent"]:n},["templateParams","titleTemplate"].includes(e))};return i1.forEach(h=>{const g=typeof u.props[h]<"u"?u.props[h]:s[h];typeof g<"u"&&((!["innerHTML","textContent","children"].includes(h)||QC.includes(u.tag))&&(u[h==="children"?"innerHTML":h]=g),delete u.props[h])}),u.props.body&&(u.tagPosition="bodyClose",delete u.props.body),u.tag==="script"&&typeof u.innerHTML=="object"&&(u.innerHTML=JSON.stringify(u.innerHTML),u.props.type=u.props.type||"application/json"),Array.isArray(u.props.content)?u.props.content.map(h=>({...u,props:{...u.props,content:h}})):u}function nA(e,n){var u;const s=e==="class"?" ":";";return typeof n=="object"&&!Array.isArray(n)&&(n=Object.entries(n).filter(([,h])=>h).map(([h,g])=>e==="style"?`${h}:${g}`:h)),(u=String(Array.isArray(n)?n.join(s):n))==null?void 0:u.split(s).filter(h=>h.trim()).filter(Boolean).join(s)}async function n1(e,n){for(const s of Object.keys(e)){if(["class","style"].includes(s)){e[s]=nA(s,e[s]);continue}if(e[s]instanceof Promise&&(e[s]=await e[s]),!n&&!i1.includes(s)){const u=String(e[s]),h=s.startsWith("data-");u==="true"||u===""?e[s]=h?"true":!0:e[s]||(h&&u==="false"?e[s]="false":delete e[s])}}return e}const oA=10;async function sA(e){const n=[];return Object.entries(e.resolvedInput).filter(([s,u])=>typeof u<"u"&&eA.includes(s)).forEach(([s,u])=>{const h=YC(u);n.push(...h.map(g=>rA(s,g,e)).flat())}),(await Promise.all(n)).flat().filter(Boolean).map((s,u)=>(s._e=e._i,e.mode&&(s._m=e.mode),s._p=(e._i<<oA)+u,s))}const gv={base:-10,title:10},yv={critical:-80,high:-10,low:20};function xf(e){let n=100;const s=e.tagPriority;return typeof s=="number"?s:(e.tag==="meta"?(e.props["http-equiv"]==="content-security-policy"&&(n=-30),e.props.charset&&(n=-20),e.props.name==="viewport"&&(n=-15)):e.tag==="link"&&e.props.rel==="preconnect"?n=20:e.tag in gv&&(n=gv[e.tag]),typeof s=="string"&&s in yv?n+yv[s]:n)}const aA=[{prefix:"before:",offset:-1},{prefix:"after:",offset:1}],_v=["onload","onerror","onabort","onprogress","onloadstart"],Hs="%separator";function Kd(e,n,s){if(typeof e!="string"||!e.includes("%"))return e;function u(m){let c;return["s","pageTitle"].includes(m)?c=n.pageTitle:m.includes(".")?c=m.split(".").reduce((T,M)=>T&&T[M]||void 0,n):c=n[m],typeof c<"u"?(c||"").replace(/"/g,'\\"'):!1}let h=e;try{h=decodeURI(e)}catch{}return(h.match(/%(\w+\.+\w+)|%(\w+)/g)||[]).sort().reverse().forEach(m=>{const c=u(m.slice(1));typeof c=="string"&&(e=e.replace(new RegExp(`\\${m}(\\W|$)`,"g"),(T,M)=>`${c}${M}`).trim())}),e.includes(Hs)&&(e.endsWith(Hs)&&(e=e.slice(0,-Hs.length).trim()),e.startsWith(Hs)&&(e=e.slice(Hs.length).trim()),e=e.replace(new RegExp(`\\${Hs}\\s*\\${Hs}`,"g"),Hs),e=Kd(e,{separator:s},s)),e}async function o1(e,n={}){var k;const s=n.document||e.resolvedOptions.document;if(!s||!e.dirty)return;const u={shouldRender:!0,tags:[]};if(await e.hooks.callHook("dom:beforeRender",u),!u.shouldRender)return;const h=(await e.resolveTags()).map(A=>({tag:A,id:Wd.includes(A.tag)?pv(A):A.tag,shouldRender:!0}));let g=e._dom;if(!g){g={elMap:{htmlAttrs:s.documentElement,bodyAttrs:s.body}};for(const A of["body","head"]){const L=(k=s[A])==null?void 0:k.children,H=[];for(const X of[...L].filter(W=>Wd.includes(W.tagName.toLowerCase()))){const W={tag:X.tagName.toLowerCase(),props:await n1(X.getAttributeNames().reduce((ye,j)=>({...ye,[j]:X.getAttribute(j)}),{})),innerHTML:X.innerHTML};let se=1,Te=r1(W);for(;Te&&H.find(ye=>ye._d===Te);)Te=`${Te}:${se++}`;W._d=Te||void 0,H.push(W),g.elMap[X.getAttribute("data-hid")||pv(W)]=X}}}g.pendingSideEffects={...g.sideEffects||{}},g.sideEffects={};function m(A,L,H){const X=`${A}:${L}`;g.sideEffects[X]=H,delete g.pendingSideEffects[X]}function c({id:A,$el:L,tag:H}){const X=H.tag.endsWith("Attrs");g.elMap[A]=L,X||(["textContent","innerHTML"].forEach(W=>{H[W]&&H[W]!==L[W]&&(L[W]=H[W])}),m(A,"el",()=>{var W;(W=g.elMap[A])==null||W.remove(),delete g.elMap[A]}));for(const[W,se]of Object.entries(H._eventHandlers||{}))L.getAttribute(`data-${W}`)!==""&&((H.tag==="bodyAttrs"?s.defaultView:L).addEventListener(W.replace("on",""),se.bind(L)),L.setAttribute(`data-${W}`,""));Object.entries(H.props).forEach(([W,se])=>{const Te=`attr:${W}`;if(W==="class")for(const ye of(se||"").split(" ").filter(Boolean))X&&m(A,`${Te}:${ye}`,()=>L.classList.remove(ye)),!L.classList.contains(ye)&&L.classList.add(ye);else if(W==="style")for(const ye of(se||"").split(";").filter(Boolean)){const[j,...oe]=ye.split(":").map(ee=>ee.trim());m(A,`${Te}:${ye}:${j}`,()=>{L.style.removeProperty(j)}),L.style.setProperty(j,oe.join(":"))}else L.getAttribute(W)!==se&&L.setAttribute(W,se===!0?"":String(se)),X&&m(A,Te,()=>L.removeAttribute(W))})}const T=[],M={bodyClose:void 0,bodyOpen:void 0,head:void 0};for(const A of h){const{tag:L,shouldRender:H,id:X}=A;if(H){if(L.tag==="title"){s.title=L.textContent;continue}A.$el=A.$el||g.elMap[X],A.$el?c(A):Wd.includes(L.tag)&&T.push(A)}}for(const A of T){const L=A.tag.tagPosition||"head";A.$el=s.createElement(A.tag.tag),c(A),M[L]=M[L]||s.createDocumentFragment(),M[L].appendChild(A.$el)}for(const A of h)await e.hooks.callHook("dom:renderTag",A,s,m);M.head&&s.head.appendChild(M.head),M.bodyOpen&&s.body.insertBefore(M.bodyOpen,s.body.firstChild),M.bodyClose&&s.body.appendChild(M.bodyClose),Object.values(g.pendingSideEffects).forEach(A=>A()),e._dom=g,e.dirty=!1,await e.hooks.callHook("dom:rendered",{renders:h})}async function lA(e,n={}){const s=n.delayFn||(u=>setTimeout(u,10));return e._domUpdatePromise=e._domUpdatePromise||new Promise(u=>s(async()=>{await o1(e,n),delete e._domUpdatePromise,u()}))}function cA(e){return n=>{var u,h;const s=((h=(u=n.resolvedOptions.document)==null?void 0:u.head.querySelector('script[id="unhead:payload"]'))==null?void 0:h.innerHTML)||!1;return s&&n.push(JSON.parse(s)),{mode:"client",hooks:{"entries:updated":function(g){lA(g,e)}}}}}const uA=["templateParams","htmlAttrs","bodyAttrs"],hA={hooks:{"tag:normalise":function({tag:e}){["hid","vmid","key"].forEach(u=>{e.props[u]&&(e.key=e.props[u],delete e.props[u])});const s=r1(e)||(e.key?`${e.tag}:${e.key}`:!1);s&&(e._d=s)},"tags:resolve":function(e){const n={};e.tags.forEach(u=>{const h=(u.key?`${u.tag}:${u.key}`:u._d)||u._p,g=n[h];if(g){let c=u==null?void 0:u.tagDuplicateStrategy;if(!c&&uA.includes(u.tag)&&(c="merge"),c==="merge"){const T=g.props;["class","style"].forEach(M=>{T[M]&&(u.props[M]?(M==="style"&&!T[M].endsWith(";")&&(T[M]+=";"),u.props[M]=`${T[M]} ${u.props[M]}`):u.props[M]=T[M])}),n[h].props={...T,...u.props};return}else if(u._e===g._e){g._duped=g._duped||[],u._d=`${g._d}:${g._duped.length+1}`,g._duped.push(u);return}else if(xf(u)>xf(g))return}const m=Object.keys(u.props).length+(u.innerHTML?1:0)+(u.textContent?1:0);if(Wd.includes(u.tag)&&m===0){delete n[h];return}n[h]=u});const s=[];Object.values(n).forEach(u=>{const h=u._duped;delete u._duped,s.push(u),h&&s.push(...h)}),e.tags=s,e.tags=e.tags.filter(u=>!(u.tag==="meta"&&(u.props.name||u.props.property)&&!u.props.content))}}},dA={mode:"server",hooks:{"tags:resolve":function(e){const n={};e.tags.filter(s=>["titleTemplate","templateParams","title"].includes(s.tag)&&s._m==="server").forEach(s=>{n[s.tag]=s.tag.startsWith("title")?s.textContent:s.props}),Object.keys(n).length&&e.tags.push({tag:"script",innerHTML:JSON.stringify(n),props:{id:"unhead:payload",type:"application/json"}})}}},fA=["script","link","bodyAttrs"],pA=e=>({hooks:{"tags:resolve":function(n){for(const s of n.tags.filter(u=>fA.includes(u.tag)))Object.entries(s.props).forEach(([u,h])=>{u.startsWith("on")&&typeof h=="function"&&(e.ssr&&_v.includes(u)?s.props[u]=`this.dataset.${u}fired = true`:delete s.props[u],s._eventHandlers=s._eventHandlers||{},s._eventHandlers[u]=h)}),e.ssr&&s._eventHandlers&&(s.props.src||s.props.href)&&(s.key=s.key||ry(s.props.src||s.props.href))},"dom:renderTag":function({$el:n,tag:s}){var u,h;for(const g of Object.keys((n==null?void 0:n.dataset)||{}).filter(m=>_v.some(c=>`${c}fired`===m))){const m=g.replace("fired","");(h=(u=s._eventHandlers)==null?void 0:u[m])==null||h.call(n,new Event(m.replace("on","")))}}}}),mA=["link","style","script","noscript"],gA={hooks:{"tag:normalise":({tag:e})=>{e.key&&mA.includes(e.tag)&&(e.props["data-hid"]=e._h=ry(e.key))}}},yA={hooks:{"tags:resolve":e=>{const n=s=>{var u;return(u=e.tags.find(h=>h._d===s))==null?void 0:u._p};for(const{prefix:s,offset:u}of aA)for(const h of e.tags.filter(g=>typeof g.tagPriority=="string"&&g.tagPriority.startsWith(s))){const g=n(h.tagPriority.replace(s,""));typeof g<"u"&&(h._p=g+u)}e.tags.sort((s,u)=>s._p-u._p).sort((s,u)=>xf(s)-xf(u))}}},_A={meta:"content",link:"href",htmlAttrs:"lang"},vA=e=>({hooks:{"tags:resolve":n=>{var c;const{tags:s}=n,u=(c=s.find(T=>T.tag==="title"))==null?void 0:c.textContent,h=s.findIndex(T=>T.tag==="templateParams"),g=h!==-1?s[h].props:{},m=g.separator||"|";delete g.separator,g.pageTitle=Kd(g.pageTitle||u||"",g,m);for(const T of s.filter(M=>M.processTemplateParams!==!1)){const M=_A[T.tag];M&&typeof T.props[M]=="string"?T.props[M]=Kd(T.props[M],g,m):(T.processTemplateParams===!0||["titleTemplate","title"].includes(T.tag))&&["innerHTML","textContent"].forEach(k=>{typeof T[k]=="string"&&(T[k]=Kd(T[k],g,m))})}e._templateParams=g,e._separator=m,n.tags=s.filter(T=>T.tag!=="templateParams")}}}),xA={hooks:{"tags:resolve":e=>{const{tags:n}=e;let s=n.findIndex(h=>h.tag==="titleTemplate");const u=n.findIndex(h=>h.tag==="title");if(u!==-1&&s!==-1){const h=mv(n[s].textContent,n[u].textContent);h!==null?n[u].textContent=h||n[u].textContent:delete n[u]}else if(s!==-1){const h=mv(n[s].textContent);h!==null&&(n[s].textContent=h,n[s].tag="title",s=-1)}s!==-1&&delete n[s],e.tags=n.filter(Boolean)}}},bA={hooks:{"tags:afterResolve":function(e){for(const n of e.tags)typeof n.innerHTML=="string"&&(n.innerHTML&&["application/ld+json","application/json"].includes(n.props.type)?n.innerHTML=n.innerHTML.replace(/</g,"\\u003C"):n.innerHTML=n.innerHTML.replace(new RegExp(`</${n.tag}`,"g"),`<\\/${n.tag}`))}}};let s1;function wA(e={}){const n=EA(e);return n.use(cA()),s1=n}function vv(e,n){return!e||e==="server"&&n||e==="client"&&!n}function EA(e={}){const n=qb();n.addHooks(e.hooks||{}),e.document=e.document||(iA?document:void 0);const s=!e.document,u=()=>{c.dirty=!0,n.callHook("entries:updated",c)};let h=0,g=[];const m=[],c={plugins:m,dirty:!1,resolvedOptions:e,hooks:n,headEntries(){return g},use(T){const M=typeof T=="function"?T(c):T;(!M.key||!m.some(k=>k.key===M.key))&&(m.push(M),vv(M.mode,s)&&n.addHooks(M.hooks||{}))},push(T,M){M==null||delete M.head;const k={_i:h++,input:T,...M};return vv(k.mode,s)&&(g.push(k),u()),{dispose(){g=g.filter(A=>A._i!==k._i),n.callHook("entries:updated",c),u()},patch(A){g=g.map(L=>(L._i===k._i&&(L.input=k.input=A),L)),u()}}},async resolveTags(){const T={tags:[],entries:[...g]};await n.callHook("entries:resolve",T);for(const M of T.entries){const k=M.resolvedInput||M.input;if(M.resolvedInput=await(M.transform?M.transform(k):k),M.resolvedInput)for(const A of await sA(M)){const L={tag:A,entry:M,resolvedOptions:c.resolvedOptions};await n.callHook("tag:normalise",L),T.tags.push(L.tag)}}return await n.callHook("tags:beforeResolve",T),await n.callHook("tags:resolve",T),await n.callHook("tags:afterResolve",T),T.tags},ssr:s};return[hA,dA,pA,gA,yA,vA,xA,bA,...(e==null?void 0:e.plugins)||[]].forEach(T=>c.use(T)),c.hooks.callHook("init",c),c}function SA(){return s1}const TA=kb.startsWith("3");function IA(e){return typeof e=="function"?e():ni(e)}function bf(e,n=""){if(e instanceof Promise)return e;const s=IA(e);return!e||!s?s:Array.isArray(s)?s.map(u=>bf(u,n)):typeof s=="object"?Object.fromEntries(Object.entries(s).map(([u,h])=>u==="titleTemplate"||u.startsWith("on")?[u,ni(h)]:[u,bf(h,u)])):s}const CA={hooks:{"entries:resolve":function(e){for(const n of e.entries)n.resolvedInput=bf(n.input)}}},a1="usehead";function AA(e){return{install(s){TA&&(s.config.globalProperties.$unhead=e,s.config.globalProperties.$head=e,s.provide(a1,e))}}.install}function kA(e={}){e.domDelayFn=e.domDelayFn||(s=>qr(()=>setTimeout(()=>s(),0)));const n=wA(e);return n.use(CA),n.install=AA(n),n}const og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},sg="__unhead_injection_handler__";function MA(e){og[sg]=e}function LA(){if(sg in og)return og[sg]();const e=Zr(a1);return e||SA()}function PA(e,n={}){const s=n.head||LA();if(s)return s.ssr?s.push(e,n):zA(s,e,n)}function zA(e,n,s={}){const u=kt(!1),h=kt({});Vn(()=>{h.value=u.value?{}:bf(n)});const g=e.push(h.value,s);return Zi(h,c=>{g.patch(c)}),la()&&(Of(()=>{g.dispose()}),gb(()=>{u.value=!0}),mb(()=>{u.value=!1})),g}let Xd,Jd;function DA(){return Xd=$fetch(Yg(`builds/meta/${fc().app.buildId}.json`),{responseType:"json"}),Xd.then(e=>{Jd=PC(e.matcher)}).catch(e=>{console.error("[nuxt] Error fetching app manifest.",e)}),Xd}function jf(){return Xd||DA()}async function ny(e){if(await jf(),!Jd)return console.error("[nuxt] Error creating app manifest matcher.",Jd),{};try{return $f({},...Jd.matchAll(e).reverse())}catch(n){return console.error("[nuxt] Error matching route rules.",n),{}}}async function xv(e,n={}){const s=await OA(e,n),u=Yi(),h=u._payloadCache=u._payloadCache||{};return s in h||(h[s]=c1(e).then(g=>g?l1(s).then(m=>m||(delete h[s],null)):(h[s]=null,null))),h[s]}const RA="_payload.json";async function OA(e,n={}){const s=new URL(e,"http://localhost");if(s.host!=="localhost"||ca(s.pathname,{acceptRelative:!0}))throw new Error("Payload URL must not include hostname: "+e);const u=fc(),h=n.hash||(n.fresh?Date.now():u.app.buildId),g=u.app.cdnURL,m=g&&await c1(e)?g:u.app.baseURL;return ph(m,s.pathname,RA+(h?`?${h}`:""))}async function l1(e){const n=fetch(e).then(s=>s.text().then(u1));try{return await n}catch(s){console.warn("[nuxt] Cannot load payload ",e,s)}return null}async function c1(e=ey().path){if(e=Nf(e),(await jf()).prerendered.includes(e))return!0;const s=await ny(e);return!!s.prerender&&!s.redirect}let Vd=null;async function BA(){if(Vd)return Vd;const e=document.getElementById("__NUXT_DATA__");if(!e)return{};const n=await u1(e.textContent||""),s=e.dataset.src?await l1(e.dataset.src):void 0;return Vd={...n,...s,...window.__NUXT__},Vd}async function u1(e){return await XC(e,Yi()._payloadRevivers)}function FA(e,n){Yi()._payloadRevivers[e]=n}const bv={NuxtError:e=>iy(e),EmptyShallowRef:e=>uc(e==="_"?void 0:e==="0n"?BigInt(0):mf(e)),EmptyRef:e=>kt(e==="_"?void 0:e==="0n"?BigInt(0):mf(e)),ShallowRef:e=>uc(e),ShallowReactive:e=>ec(e),Ref:e=>kt(e),Reactive:e=>Bo(e)},VA=vo({name:"nuxt:revive-payload:client",order:-30,async setup(e){let n,s;for(const u in bv)FA(u,bv[u]);Object.assign(e.payload,([n,s]=Hb(()=>e.runWithContext(BA)),n=await n,s(),n)),window.__NUXT__=e.payload}}),NA=[],$A=vo({name:"nuxt:head",enforce:"pre",setup(e){const n=kA({plugins:NA});MA(()=>Yi().vueApp._context.provides.usehead),e.vueApp.use(n);{let s=!0;const u=async()=>{s=!1,await o1(n)};n.hooks.hook("dom:beforeRender",h=>{h.shouldRender=!s}),e.hooks.hook("page:start",()=>{s=!0}),e.hooks.hook("page:finish",()=>{e.isHydrating||u()}),e.hooks.hook("app:error",u),e.hooks.hook("app:suspense:resolve",u)}}}),jA=async e=>{let n,s;const u=([n,s]=Hb(()=>ny(e.path)),n=await n,s(),n);if(u.redirect)return ca(u.redirect,{acceptRelative:!0})?(window.location.href=u.redirect,!1):u.redirect},UA=[jA];function Sm(e){typeof e=="object"&&(e=Nb({pathname:e.path||"",search:Ob(e.query||{}),hash:e.hash||""}));const n=new URL(e.toString(),window.location.href);return{path:n.pathname,fullPath:e,query:Kg(n.search),hash:n.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:e}}const qA=vo({name:"nuxt:router",enforce:"pre",setup(e){const n=jI(window.location.pathname,fc().app.baseURL)+window.location.search+window.location.hash,s=[],u={"navigate:before":[],"resolve:before":[],"navigate:after":[],error:[]},h=(A,L)=>(u[A].push(L),()=>u[A].splice(u[A].indexOf(L),1)),g=fc().app.baseURL,m=Bo(Sm(n));async function c(A,L){try{const H=Sm(A);for(const X of u["navigate:before"]){const W=await X(H,m);if(W===!1||W instanceof Error)return;if(typeof W=="string"&&W.length)return c(W,!0)}for(const X of u["resolve:before"])await X(H,m);Object.assign(m,H),window.history[L?"replaceState":"pushState"]({},"",ph(g,H.fullPath)),e.isHydrating||await e.runWithContext(jC);for(const X of u["navigate:after"])await X(H,m)}catch(H){for(const X of u.error)await X(H)}}const M={currentRoute:Ve(()=>m),isReady:()=>Promise.resolve(),options:{},install:()=>Promise.resolve(),push:A=>c(A,!1),replace:A=>c(A,!0),back:()=>window.history.go(-1),go:A=>window.history.go(A),forward:()=>window.history.go(1),beforeResolve:A=>h("resolve:before",A),beforeEach:A=>h("navigate:before",A),afterEach:A=>h("navigate:after",A),onError:A=>h("error",A),resolve:Sm,addRoute:(A,L)=>{s.push(L)},getRoutes:()=>s,hasRoute:A=>s.some(L=>L.name===A),removeRoute:A=>{const L=s.findIndex(H=>H.name===A);L!==-1&&s.splice(L,1)}};e.vueApp.component("RouterLink",Ri({functional:!0,props:{to:{type:String,required:!0},custom:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:String},setup:(A,{slots:L})=>{const H=()=>c(A.to,A.replace);return()=>{var W;const X=M.resolve(A.to);return A.custom?(W=L.default)==null?void 0:W.call(L,{href:A.to,navigate:H,route:X}):Nn("a",{href:A.to,onClick:se=>(se.preventDefault(),H())},L)}}})),window.addEventListener("popstate",A=>{const L=A.target.location;M.replace(L.href.replace(L.origin,""))}),e._route=m,e._middleware=e._middleware||{global:[],named:{}};const k=e.payload.state._layout;return e.hooks.hookOnce("app:created",async()=>{M.beforeEach(async(A,L)=>{A.meta=Bo(A.meta||{}),e.isHydrating&&k&&!cc(A.meta.layout)&&(A.meta.layout=k),e._processingMiddleware=!0;{const H=new Set([...UA,...e._middleware.global]);{const X=await e.runWithContext(()=>ny(A.path));if(X.appMiddleware)for(const W in X.appMiddleware){const se=e._middleware.named[W];if(!se)return;X.appMiddleware[W]?H.add(se):H.delete(se)}}for(const X of H){const W=await e.runWithContext(()=>X(A,L));if(W!==!0&&(W||W===!1))return W}}}),M.afterEach(()=>{delete e._processingMiddleware}),await M.replace(n),qI(m.fullPath,n)||await e.runWithContext(()=>e1(m.fullPath))}),{provide:{route:m,router:M}}}}),ag=globalThis.requestIdleCallback||(e=>{const n=Date.now(),s={didTimeout:!1,timeRemaining:()=>Math.max(0,50-(Date.now()-n))};return setTimeout(()=>{e(s)},1)}),HA=globalThis.cancelIdleCallback||(e=>{clearTimeout(e)}),oy=e=>{const n=Yi();n.isHydrating?n.hooks.hookOnce("app:suspense:resolve",()=>{ag(()=>e())}):ag(()=>e())},GA=vo({name:"nuxt:payload",setup(e){Vo().beforeResolve(async(n,s)=>{if(n.path===s.path)return;const u=await xv(n.path);u&&Object.assign(e.static.data,u.data)}),oy(()=>{var n;e.hooks.hook("link:prefetch",async s=>{const{hostname:u}=new URL(s,window.location.href);u===window.location.hostname&&await xv(s)}),((n=navigator.connection)==null?void 0:n.effectiveType)!=="slow-2g"&&setTimeout(jf,1e3)})}}),ZA=vo(e=>{let n;async function s(){const u=await jf();n&&clearTimeout(n),n=setTimeout(s,lv);try{const h=await $fetch(Yg("builds/latest.json")+`?${Date.now()}`);h.id!==u.id&&e.hooks.callHook("app:manifest:update",h)}catch{}}oy(()=>{n=setTimeout(s,lv)})}),WA="modulepreload",KA=function(e,n){return e[0]==="."?new URL(e,n).href:e},wv={},XA=function(n,s,u){let h=Promise.resolve();if(s&&s.length>0){const g=document.getElementsByTagName("link"),m=document.querySelector("meta[property=csp-nonce]"),c=(m==null?void 0:m.nonce)||(m==null?void 0:m.getAttribute("nonce"));h=Promise.all(s.map(T=>{if(T=KA(T,u),T in wv)return;wv[T]=!0;const M=T.endsWith(".css"),k=M?'[rel="stylesheet"]':"";if(!!u)for(let H=g.length-1;H>=0;H--){const X=g[H];if(X.href===T&&(!M||X.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${T}"]${k}`))return;const L=document.createElement("link");if(L.rel=M?"stylesheet":WA,M||(L.as="script",L.crossOrigin=""),L.href=T,c&&L.setAttribute("nonce",c),document.head.appendChild(L),M)return new Promise((H,X)=>{L.addEventListener("load",H),L.addEventListener("error",()=>X(new Error(`Unable to preload CSS for ${T}`)))})}))}return h.then(()=>n()).catch(g=>{const m=new Event("vite:preloadError",{cancelable:!0});if(m.payload=g,window.dispatchEvent(m),!m.defaultPrevented)throw g})},wf=(...e)=>XA(...e).catch(n=>{const s=new Event("nuxt.preloadError");throw s.payload=n,window.dispatchEvent(s),n}),JA=lf(()=>wf(()=>Promise.resolve().then(()=>nP),void 0,import.meta.url).then(e=>e.default||e.default||e)),YA=lf(()=>wf(()=>import("./CxnJsYUO.js"),__vite__mapDeps([0,1]),import.meta.url).then(e=>e.default||e.default||e)),QA=[["Icon",JA],["IconCSS",YA]],ek=vo({name:"nuxt:global-components",setup(e){for(const[n,s]of QA)e.vueApp.component(n,s),e.vueApp.component("Lazy"+n,s)}});function lg(e){return Pg()?(Tx(e),!0):!1}function Ef(e){return typeof e=="function"?e():ni(e)}const cg=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ev=()=>+Date.now(),ug=()=>{};function tk(e,n){function s(...u){return new Promise((h,g)=>{Promise.resolve(e(()=>n.apply(this,u),{fn:n,thisArg:this,args:u})).then(h).catch(g)})}return s}function ik(e,n={}){let s,u,h=ug;const g=c=>{clearTimeout(c),h(),h=ug};return c=>{const T=Ef(e),M=Ef(n.maxWait);return s&&g(s),T<=0||M!==void 0&&M<=0?(u&&(g(u),u=null),Promise.resolve(c())):new Promise((k,A)=>{h=n.rejectOnCancel?A:k,M&&!u&&(u=setTimeout(()=>{s&&g(s),u=null,k(c())},M)),s=setTimeout(()=>{u&&g(u),u=null,k(c())},T)})}}function h1(e,n=200,s={}){return tk(ik(n,s),e)}function rk(e,n=1e3,s={}){const{immediate:u=!0,immediateCallback:h=!1}=s;let g=null;const m=kt(!1);function c(){g&&(clearInterval(g),g=null)}function T(){m.value=!1,c()}function M(){const k=Ef(n);k<=0||(m.value=!0,h&&e(),c(),g=setInterval(e,k))}if(u&&cg&&M(),fr(n)||typeof n=="function"){const k=Zi(n,()=>{m.value&&cg&&M()});lg(k)}return lg(T),{isActive:m,pause:T,resume:M}}function nk(e,n,s){let u;fr(s)?u={evaluating:s}:u=s||{};const{lazy:h=!1,evaluating:g=void 0,shallow:m=!0,onError:c=ug}=u,T=kt(!h),M=m?uc(n):kt(n);let k=0;return Vn(async A=>{if(!T.value)return;k++;const L=k;let H=!1;g&&Promise.resolve().then(()=>{g.value=!0});try{const X=await e(W=>{A(()=>{g&&(g.value=!1),H||W()})});L===k&&(M.value=X)}catch(X){c(X)}finally{g&&L===k&&(g.value=!1),H=!0}}),h?Ve(()=>(T.value=!0,M.value)):M}function Sv(e){var n;const s=Ef(e);return(n=s==null?void 0:s.$el)!=null?n:s}const ok=cg?window:void 0;function sk(e,n={}){const{immediate:s=!0,fpsLimit:u=void 0,window:h=ok}=n,g=kt(!1),m=u?1e3/u:null;let c=0,T=null;function M(L){if(!g.value||!h)return;c||(c=L);const H=L-c;if(m&&H<m){T=h.requestAnimationFrame(M);return}c=L,e({delta:H,timestamp:L}),T=h.requestAnimationFrame(M)}function k(){!g.value&&h&&(g.value=!0,c=0,T=h.requestAnimationFrame(M))}function A(){g.value=!1,T!=null&&h&&(h.cancelAnimationFrame(T),T=null)}return s&&k(),lg(A),{isActive:Fg(g),pause:A,resume:k}}function ak(e={}){const{controls:n=!1,offset:s=0,immediate:u=!0,interval:h="requestAnimationFrame",callback:g}=e,m=kt(Ev()+s),c=()=>m.value=Ev()+s,T=g?()=>{c(),g(m.value)}:c,M=h==="requestAnimationFrame"?sk(T,{immediate:u}):rk(T,h,{immediate:u});return n?{timestamp:m,...M}:m}const lk=Symbol("nuxt-ui.slideover"),ck=vo(e=>{const n=uc({component:"div",props:{}});e.vueApp.provide(lk,n)}),uk=Symbol("nuxt-ui.modal"),hk=vo(e=>{const n=uc({component:"div",props:{}});e.vueApp.provide(uk,n)}),dk={ui:{primary:"red",gray:"neutral",icons:{dynamic:!0},notifications:{position:"top-0 bottom-auto"}}},fk={nuxt:{},ui:{primary:"green",gray:"cool",colors:["red","orange","amber","yellow","lime","green","emerald","teal","cyan","sky","blue","indigo","violet","purple","fuchsia","pink","rose","primary"],strategy:"merge"}},Di=zC(dk,fk);function Uf(){const e=Yi();return e._appConfig||(e._appConfig=Bo(Di)),e._appConfig}const sy="-";function pk(e){const n=gk(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:u}=e;function h(m){const c=m.split(sy);return c[0]===""&&c.length!==1&&c.shift(),d1(c,n)||mk(m)}function g(m,c){const T=s[m]||[];return c&&u[m]?[...T,...u[m]]:T}return{getClassGroupId:h,getConflictingClassGroupIds:g}}function d1(e,n){var m;if(e.length===0)return n.classGroupId;const s=e[0],u=n.nextPart.get(s),h=u?d1(e.slice(1),u):void 0;if(h)return h;if(n.validators.length===0)return;const g=e.join(sy);return(m=n.validators.find(({validator:c})=>c(g)))==null?void 0:m.classGroupId}const Tv=/^\[(.+)\]$/;function mk(e){if(Tv.test(e)){const n=Tv.exec(e)[1],s=n==null?void 0:n.substring(0,n.indexOf(":"));if(s)return"arbitrary.."+s}}function gk(e){const{theme:n,prefix:s}=e,u={nextPart:new Map,validators:[]};return _k(Object.entries(e.classGroups),s).forEach(([g,m])=>{hg(m,u,g,n)}),u}function hg(e,n,s,u){e.forEach(h=>{if(typeof h=="string"){const g=h===""?n:Iv(n,h);g.classGroupId=s;return}if(typeof h=="function"){if(yk(h)){hg(h(u),n,s,u);return}n.validators.push({validator:h,classGroupId:s});return}Object.entries(h).forEach(([g,m])=>{hg(m,Iv(n,g),s,u)})})}function Iv(e,n){let s=e;return n.split(sy).forEach(u=>{s.nextPart.has(u)||s.nextPart.set(u,{nextPart:new Map,validators:[]}),s=s.nextPart.get(u)}),s}function yk(e){return e.isThemeGetter}function _k(e,n){return n?e.map(([s,u])=>{const h=u.map(g=>typeof g=="string"?n+g:typeof g=="object"?Object.fromEntries(Object.entries(g).map(([m,c])=>[n+m,c])):g);return[s,h]}):e}function vk(e){if(e<1)return{get:()=>{},set:()=>{}};let n=0,s=new Map,u=new Map;function h(g,m){s.set(g,m),n++,n>e&&(n=0,u=s,s=new Map)}return{get(g){let m=s.get(g);if(m!==void 0)return m;if((m=u.get(g))!==void 0)return h(g,m),m},set(g,m){s.has(g)?s.set(g,m):h(g,m)}}}const f1="!";function xk(e){const n=e.separator,s=n.length===1,u=n[0],h=n.length;return function(m){const c=[];let T=0,M=0,k;for(let W=0;W<m.length;W++){let se=m[W];if(T===0){if(se===u&&(s||m.slice(W,W+h)===n)){c.push(m.slice(M,W)),M=W+h;continue}if(se==="/"){k=W;continue}}se==="["?T++:se==="]"&&T--}const A=c.length===0?m:m.substring(M),L=A.startsWith(f1),H=L?A.substring(1):A,X=k&&k>M?k-M:void 0;return{modifiers:c,hasImportantModifier:L,baseClassName:H,maybePostfixModifierPosition:X}}}function bk(e){if(e.length<=1)return e;const n=[];let s=[];return e.forEach(u=>{u[0]==="["?(n.push(...s.sort(),u),s=[]):s.push(u)}),n.push(...s.sort()),n}function wk(e){return{cache:vk(e.cacheSize),splitModifiers:xk(e),...pk(e)}}const Ek=/\s+/;function Sk(e,n){const{splitModifiers:s,getClassGroupId:u,getConflictingClassGroupIds:h}=n,g=new Set;return e.trim().split(Ek).map(m=>{const{modifiers:c,hasImportantModifier:T,baseClassName:M,maybePostfixModifierPosition:k}=s(m);let A=u(k?M.substring(0,k):M),L=!!k;if(!A){if(!k)return{isTailwindClass:!1,originalClassName:m};if(A=u(M),!A)return{isTailwindClass:!1,originalClassName:m};L=!1}const H=bk(c).join(":");return{isTailwindClass:!0,modifierId:T?H+f1:H,classGroupId:A,originalClassName:m,hasPostfixModifier:L}}).reverse().filter(m=>{if(!m.isTailwindClass)return!0;const{modifierId:c,classGroupId:T,hasPostfixModifier:M}=m,k=c+T;return g.has(k)?!1:(g.add(k),h(T,M).forEach(A=>g.add(c+A)),!0)}).reverse().map(m=>m.originalClassName).join(" ")}function tr(){let e=0,n,s,u="";for(;e<arguments.length;)(n=arguments[e++])&&(s=p1(n))&&(u&&(u+=" "),u+=s);return u}function p1(e){if(typeof e=="string")return e;let n,s="";for(let u=0;u<e.length;u++)e[u]&&(n=p1(e[u]))&&(s&&(s+=" "),s+=n);return s}function dg(e,...n){let s,u,h,g=m;function m(T){const M=n.reduce((k,A)=>A(k),e());return s=wk(M),u=s.cache.get,h=s.cache.set,g=c,c(T)}function c(T){const M=u(T);if(M)return M;const k=Sk(T,s);return h(T,k),k}return function(){return g(tr.apply(null,arguments))}}function Hi(e){const n=s=>s[e]||[];return n.isThemeGetter=!0,n}const m1=/^\[(?:([a-z-]+):)?(.+)\]$/i,Tk=/^\d+\/\d+$/,Ik=new Set(["px","full","screen"]),Ck=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Ak=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kk=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Mk=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Lk=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function os(e){return Ga(e)||Ik.has(e)||Tk.test(e)}function Gs(e){return xc(e,"length",Vk)}function Ga(e){return!!e&&!Number.isNaN(Number(e))}function Nd(e){return xc(e,"number",Ga)}function zu(e){return!!e&&Number.isInteger(Number(e))}function Pk(e){return e.endsWith("%")&&Ga(e.slice(0,-1))}function Qt(e){return m1.test(e)}function Zs(e){return Ck.test(e)}const zk=new Set(["length","size","percentage"]);function Dk(e){return xc(e,zk,g1)}function Rk(e){return xc(e,"position",g1)}const Ok=new Set(["image","url"]);function Bk(e){return xc(e,Ok,$k)}function Fk(e){return xc(e,"",Nk)}function Du(){return!0}function xc(e,n,s){const u=m1.exec(e);return u?u[1]?typeof n=="string"?u[1]===n:n.has(u[1]):s(u[2]):!1}function Vk(e){return Ak.test(e)&&!kk.test(e)}function g1(){return!1}function Nk(e){return Mk.test(e)}function $k(e){return Lk.test(e)}function fg(){const e=Hi("colors"),n=Hi("spacing"),s=Hi("blur"),u=Hi("brightness"),h=Hi("borderColor"),g=Hi("borderRadius"),m=Hi("borderSpacing"),c=Hi("borderWidth"),T=Hi("contrast"),M=Hi("grayscale"),k=Hi("hueRotate"),A=Hi("invert"),L=Hi("gap"),H=Hi("gradientColorStops"),X=Hi("gradientColorStopPositions"),W=Hi("inset"),se=Hi("margin"),Te=Hi("opacity"),ye=Hi("padding"),j=Hi("saturate"),oe=Hi("scale"),ee=Hi("sepia"),ne=Hi("skew"),Ie=Hi("space"),Ee=Hi("translate"),Me=()=>["auto","contain","none"],pe=()=>["auto","hidden","clip","visible","scroll"],Ae=()=>["auto",Qt,n],Le=()=>[Qt,n],Oe=()=>["",os,Gs],Ge=()=>["auto",Ga,Qt],rt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ke=()=>["solid","dashed","dotted","double","none"],dt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],nt=()=>["start","end","center","between","around","evenly","stretch"],ti=()=>["","0",Qt],Ut=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Nt=()=>[Ga,Nd],jt=()=>[Ga,Qt];return{cacheSize:500,separator:":",theme:{colors:[Du],spacing:[os,Gs],blur:["none","",Zs,Qt],brightness:Nt(),borderColor:[e],borderRadius:["none","","full",Zs,Qt],borderSpacing:Le(),borderWidth:Oe(),contrast:Nt(),grayscale:ti(),hueRotate:jt(),invert:ti(),gap:Le(),gradientColorStops:[e],gradientColorStopPositions:[Pk,Gs],inset:Ae(),margin:Ae(),opacity:Nt(),padding:Le(),saturate:Nt(),scale:Nt(),sepia:ti(),skew:jt(),space:Le(),translate:Le()},classGroups:{aspect:[{aspect:["auto","square","video",Qt]}],container:["container"],columns:[{columns:[Zs]}],"break-after":[{"break-after":Ut()}],"break-before":[{"break-before":Ut()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...rt(),Qt]}],overflow:[{overflow:pe()}],"overflow-x":[{"overflow-x":pe()}],"overflow-y":[{"overflow-y":pe()}],overscroll:[{overscroll:Me()}],"overscroll-x":[{"overscroll-x":Me()}],"overscroll-y":[{"overscroll-y":Me()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[W]}],"inset-x":[{"inset-x":[W]}],"inset-y":[{"inset-y":[W]}],start:[{start:[W]}],end:[{end:[W]}],top:[{top:[W]}],right:[{right:[W]}],bottom:[{bottom:[W]}],left:[{left:[W]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",zu,Qt]}],basis:[{basis:Ae()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Qt]}],grow:[{grow:ti()}],shrink:[{shrink:ti()}],order:[{order:["first","last","none",zu,Qt]}],"grid-cols":[{"grid-cols":[Du]}],"col-start-end":[{col:["auto",{span:["full",zu,Qt]},Qt]}],"col-start":[{"col-start":Ge()}],"col-end":[{"col-end":Ge()}],"grid-rows":[{"grid-rows":[Du]}],"row-start-end":[{row:["auto",{span:[zu,Qt]},Qt]}],"row-start":[{"row-start":Ge()}],"row-end":[{"row-end":Ge()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Qt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Qt]}],gap:[{gap:[L]}],"gap-x":[{"gap-x":[L]}],"gap-y":[{"gap-y":[L]}],"justify-content":[{justify:["normal",...nt()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...nt(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...nt(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[ye]}],px:[{px:[ye]}],py:[{py:[ye]}],ps:[{ps:[ye]}],pe:[{pe:[ye]}],pt:[{pt:[ye]}],pr:[{pr:[ye]}],pb:[{pb:[ye]}],pl:[{pl:[ye]}],m:[{m:[se]}],mx:[{mx:[se]}],my:[{my:[se]}],ms:[{ms:[se]}],me:[{me:[se]}],mt:[{mt:[se]}],mr:[{mr:[se]}],mb:[{mb:[se]}],ml:[{ml:[se]}],"space-x":[{"space-x":[Ie]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Ie]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Qt,n]}],"min-w":[{"min-w":[Qt,n,"min","max","fit"]}],"max-w":[{"max-w":[Qt,n,"none","full","min","max","fit","prose",{screen:[Zs]},Zs]}],h:[{h:[Qt,n,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Qt,n,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Qt,n,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Qt,n,"auto","min","max","fit"]}],"font-size":[{text:["base",Zs,Gs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Nd]}],"font-family":[{font:[Du]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Qt]}],"line-clamp":[{"line-clamp":["none",Ga,Nd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",os,Qt]}],"list-image":[{"list-image":["none",Qt]}],"list-style-type":[{list:["none","disc","decimal",Qt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[Te]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[Te]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ke(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",os,Gs]}],"underline-offset":[{"underline-offset":["auto",os,Qt]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Le()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Qt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Qt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Te]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...rt(),Rk]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Dk]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Bk]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[X]}],"gradient-via-pos":[{via:[X]}],"gradient-to-pos":[{to:[X]}],"gradient-from":[{from:[H]}],"gradient-via":[{via:[H]}],"gradient-to":[{to:[H]}],rounded:[{rounded:[g]}],"rounded-s":[{"rounded-s":[g]}],"rounded-e":[{"rounded-e":[g]}],"rounded-t":[{"rounded-t":[g]}],"rounded-r":[{"rounded-r":[g]}],"rounded-b":[{"rounded-b":[g]}],"rounded-l":[{"rounded-l":[g]}],"rounded-ss":[{"rounded-ss":[g]}],"rounded-se":[{"rounded-se":[g]}],"rounded-ee":[{"rounded-ee":[g]}],"rounded-es":[{"rounded-es":[g]}],"rounded-tl":[{"rounded-tl":[g]}],"rounded-tr":[{"rounded-tr":[g]}],"rounded-br":[{"rounded-br":[g]}],"rounded-bl":[{"rounded-bl":[g]}],"border-w":[{border:[c]}],"border-w-x":[{"border-x":[c]}],"border-w-y":[{"border-y":[c]}],"border-w-s":[{"border-s":[c]}],"border-w-e":[{"border-e":[c]}],"border-w-t":[{"border-t":[c]}],"border-w-r":[{"border-r":[c]}],"border-w-b":[{"border-b":[c]}],"border-w-l":[{"border-l":[c]}],"border-opacity":[{"border-opacity":[Te]}],"border-style":[{border:[...Ke(),"hidden"]}],"divide-x":[{"divide-x":[c]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[c]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Te]}],"divide-style":[{divide:Ke()}],"border-color":[{border:[h]}],"border-color-x":[{"border-x":[h]}],"border-color-y":[{"border-y":[h]}],"border-color-t":[{"border-t":[h]}],"border-color-r":[{"border-r":[h]}],"border-color-b":[{"border-b":[h]}],"border-color-l":[{"border-l":[h]}],"divide-color":[{divide:[h]}],"outline-style":[{outline:["",...Ke()]}],"outline-offset":[{"outline-offset":[os,Qt]}],"outline-w":[{outline:[os,Gs]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Oe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[Te]}],"ring-offset-w":[{"ring-offset":[os,Gs]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Zs,Fk]}],"shadow-color":[{shadow:[Du]}],opacity:[{opacity:[Te]}],"mix-blend":[{"mix-blend":[...dt(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":dt()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[u]}],contrast:[{contrast:[T]}],"drop-shadow":[{"drop-shadow":["","none",Zs,Qt]}],grayscale:[{grayscale:[M]}],"hue-rotate":[{"hue-rotate":[k]}],invert:[{invert:[A]}],saturate:[{saturate:[j]}],sepia:[{sepia:[ee]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[u]}],"backdrop-contrast":[{"backdrop-contrast":[T]}],"backdrop-grayscale":[{"backdrop-grayscale":[M]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[k]}],"backdrop-invert":[{"backdrop-invert":[A]}],"backdrop-opacity":[{"backdrop-opacity":[Te]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[ee]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[m]}],"border-spacing-x":[{"border-spacing-x":[m]}],"border-spacing-y":[{"border-spacing-y":[m]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Qt]}],duration:[{duration:jt()}],ease:[{ease:["linear","in","out","in-out",Qt]}],delay:[{delay:jt()}],animate:[{animate:["none","spin","ping","pulse","bounce",Qt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[oe]}],"scale-x":[{"scale-x":[oe]}],"scale-y":[{"scale-y":[oe]}],rotate:[{rotate:[zu,Qt]}],"translate-x":[{"translate-x":[Ee]}],"translate-y":[{"translate-y":[Ee]}],"skew-x":[{"skew-x":[ne]}],"skew-y":[{"skew-y":[ne]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Qt]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Qt]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Le()}],"scroll-mx":[{"scroll-mx":Le()}],"scroll-my":[{"scroll-my":Le()}],"scroll-ms":[{"scroll-ms":Le()}],"scroll-me":[{"scroll-me":Le()}],"scroll-mt":[{"scroll-mt":Le()}],"scroll-mr":[{"scroll-mr":Le()}],"scroll-mb":[{"scroll-mb":Le()}],"scroll-ml":[{"scroll-ml":Le()}],"scroll-p":[{"scroll-p":Le()}],"scroll-px":[{"scroll-px":Le()}],"scroll-py":[{"scroll-py":Le()}],"scroll-ps":[{"scroll-ps":Le()}],"scroll-pe":[{"scroll-pe":Le()}],"scroll-pt":[{"scroll-pt":Le()}],"scroll-pr":[{"scroll-pr":Le()}],"scroll-pb":[{"scroll-pb":Le()}],"scroll-pl":[{"scroll-pl":Le()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Qt]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[os,Gs,Nd]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}function jk(e,{cacheSize:n,prefix:s,separator:u,extend:h={},override:g={}}){Yd(e,"cacheSize",n),Yd(e,"prefix",s),Yd(e,"separator",u);for(const m in g)Uk(e[m],g[m]);for(const m in h)qk(e[m],h[m]);return e}function Yd(e,n,s){s!==void 0&&(e[n]=s)}function Uk(e,n){if(n)for(const s in n)Yd(e,s,n[s])}function qk(e,n){if(n)for(const s in n){const u=n[s];u!==void 0&&(e[s]=(e[s]||[]).concat(u))}}function Hk(e,...n){return typeof e=="function"?dg(fg,e,...n):dg(()=>jk(fg(),e),...n)}const fs=dg(fg);function Gk(e,n){const s={...e};for(const u of n)delete s[u];return s}function y1(e,n,s){typeof n=="string"&&(n=n.split(".").map(h=>{const g=Number(h);return isNaN(g)?h:g}));let u=e;for(const h of n){if(u==null)return s;u=u[h]}return u!==void 0?u:s}const ay={to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1}},Zk=e=>Object.keys(ay).reduce((s,u)=>(e[u]!==void 0&&(s[u]=e[u]),s),{}),Wk=Hk({extend:{classGroups:{icons:[e=>/^i-/.test(e)]}}}),Kk=Qg((e,n,s,u)=>{if(u==="default"||u.startsWith("default.")||u==="popper"||u.startsWith("popper.")||u.endsWith("avatar")&&n==="size"||u.endsWith("chip")&&n==="size"||u.endsWith("badge")&&n==="size"||n==="color"||n==="variant")return!1;if(typeof e[n]=="string"&&typeof s=="string"&&e[n]&&s)return e[n]=Wk(e[n],s),!0});function ys(e,...n){return e==="override"?$f({},...n):Kk({},...n)}function Cv(e){const n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(n,function(u,h,g,m){return h+h+g+g+m+m});const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return s?`${parseInt(s[1],16)} ${parseInt(s[2],16)} ${parseInt(s[3],16)}`:null}function Xk(e){const n=parseFloat(e);return isNaN(n)?e:n}const Jk="inherit",Yk="currentColor",Qk="transparent",eM="#000",tM="#fff",iM={50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},rM={50:"rgb(var(--color-gray-50) / <alpha-value>)",100:"rgb(var(--color-gray-100) / <alpha-value>)",200:"rgb(var(--color-gray-200) / <alpha-value>)",300:"rgb(var(--color-gray-300) / <alpha-value>)",400:"rgb(var(--color-gray-400) / <alpha-value>)",500:"rgb(var(--color-gray-500) / <alpha-value>)",600:"rgb(var(--color-gray-600) / <alpha-value>)",700:"rgb(var(--color-gray-700) / <alpha-value>)",800:"rgb(var(--color-gray-800) / <alpha-value>)",900:"rgb(var(--color-gray-900) / <alpha-value>)",950:"rgb(var(--color-gray-950) / <alpha-value>)"},nM={50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},oM={50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},sM={50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},aM={50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},lM={50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},cM={50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},uM={50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},hM={50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},dM={50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},fM={50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},pM={50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},mM={50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},gM={50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},yM={50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},_M={50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},vM={50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},xM={50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},bM={50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},wM={50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},EM={50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},SM={50:"rgb(var(--color-primary-50) / <alpha-value>)",100:"rgb(var(--color-primary-100) / <alpha-value>)",200:"rgb(var(--color-primary-200) / <alpha-value>)",300:"rgb(var(--color-primary-300) / <alpha-value>)",400:"rgb(var(--color-primary-400) / <alpha-value>)",500:"rgb(var(--color-primary-500) / <alpha-value>)",600:"rgb(var(--color-primary-600) / <alpha-value>)",700:"rgb(var(--color-primary-700) / <alpha-value>)",800:"rgb(var(--color-primary-800) / <alpha-value>)",900:"rgb(var(--color-primary-900) / <alpha-value>)",950:"rgb(var(--color-primary-950) / <alpha-value>)",DEFAULT:"rgb(var(--color-primary-DEFAULT) / <alpha-value>)"},TM={50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},$d={inherit:Jk,current:Yk,transparent:Qk,black:eM,white:tM,slate:iM,gray:rM,zinc:nM,neutral:oM,stone:sM,red:aM,orange:lM,amber:cM,yellow:uM,lime:hM,green:dM,emerald:fM,teal:pM,cyan:mM,sky:gM,blue:yM,indigo:_M,violet:vM,purple:xM,fuchsia:bM,pink:wM,rose:EM,primary:SM,cool:TM},IM=vo(()=>{const e=Uf(),n=Yi(),s=Ve(()=>{const h=$d[e.ui.primary],g=$d[e.ui.gray];return h||console.warn(`[@nuxt/ui] Primary color '${e.ui.primary}' not found in Tailwind config`),g||console.warn(`[@nuxt/ui] Gray color '${e.ui.gray}' not found in Tailwind config`),`:root {
${Object.entries(h||$d.green).map(([m,c])=>`--color-primary-${m}: ${Cv(c)};`).join(`
`)}
--color-primary-DEFAULT: var(--color-primary-500);

${Object.entries(g||$d.cool).map(([m,c])=>`--color-gray-${m}: ${Cv(c)};`).join(`
`)}
}

.dark {
  --color-primary-DEFAULT: var(--color-primary-400);
}
`}),u={style:[{innerHTML:()=>s.value,tagPriority:-2,id:"nuxt-ui-colors"}]};if(n.isHydrating&&!n.payload.serverRendered){const h=document.createElement("style");h.innerHTML=s.value,h.setAttribute("data-nuxt-ui-colors",""),document.head.appendChild(h),u.script=[{innerHTML:"document.head.removeChild(document.querySelector('[data-nuxt-ui-colors]'))"}]}PA(u)}),CM="$s";function mh(...e){const n=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(n);const[s,u]=e;if(!s||typeof s!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+s);if(u!==void 0&&typeof u!="function")throw new Error("[nuxt] [useState] init must be a function: "+u);const h=CM+s,g=Yi(),m=eo(g.payload.state,h);if(m.value===void 0&&u){const c=u();if(fr(c))return g.payload.state[h]=c,c;m.value=c}return m}const AM="__NUXT_COLOR_MODE__",kM="nuxt-color-mode",ss=window[AM]||{},MM=vo(e=>{const n=mh("color-mode",()=>Bo({preference:ss.preference,value:ss.value,unknown:!1,forced:!1})).value;Vo().afterEach(h=>{const g=h.meta.colorMode;g&&g!=="system"?(n.value=g,n.forced=!0):(g==="system"&&console.warn("You cannot force the colorMode to system at the page level."),n.forced=!1,n.value=n.preference==="system"?ss.getColorScheme():n.preference)});let s;function u(){s||!window.matchMedia||(s=window.matchMedia("(prefers-color-scheme: dark)"),s.addEventListener("change",()=>{!n.forced&&n.preference==="system"&&(n.value=ss.getColorScheme())}))}Zi(()=>n.preference,h=>{var g;n.forced||(h==="system"?(n.value=ss.getColorScheme(),u()):n.value=h,(g=window.localStorage)==null||g.setItem(kM,h))},{immediate:!0}),Zi(()=>n.value,(h,g)=>{ss.removeColorScheme(g),ss.addColorScheme(h)}),n.preference==="system"&&u(),e.hook("app:mounted",()=>{n.unknown&&(n.preference=ss.preference,n.value=ss.value,n.unknown=!1)}),e.provide("colorMode",n)});function LM(e={}){const n=e.path||window.location.pathname;let s={};try{s=mf(sessionStorage.getItem("nuxt:reload")||"{}")}catch{}if(e.force||(s==null?void 0:s.path)!==n||(s==null?void 0:s.expires)<Date.now()){try{sessionStorage.setItem("nuxt:reload",JSON.stringify({path:n,expires:Date.now()+(e.ttl??1e4)}))}catch{}if(e.persistState)try{sessionStorage.setItem("nuxt:reload:state",JSON.stringify({state:Yi().payload.state}))}catch{}window.location.pathname!==n?window.location.href=n:window.location.reload()}}const PM=vo({name:"nuxt:chunk-reload",setup(e){const n=Vo(),s=fc(),u=new Set;n.beforeEach(()=>{u.clear()}),e.hook("app:chunkError",({error:g})=>{u.add(g)});function h(g){const c="href"in g&&g.href[0]==="#"?s.app.baseURL+g.href:ph(s.app.baseURL,g.fullPath);LM({path:c,persistState:!0})}e.hook("app:manifest:update",()=>{n.beforeResolve(h)}),n.onError((g,m)=>{u.has(g)&&h(m)})}}),zM=[VA,$A,qA,GA,ZA,ek,ck,hk,IM,MM,PM];async function _1(e,n=Vo()){const{path:s,matched:u}=n.resolve(e);if(!u.length||(n._routePreloaded||(n._routePreloaded=new Set),n._routePreloaded.has(s)))return;const h=n._preloadPromises=n._preloadPromises||[];if(h.length>4)return Promise.all(h).then(()=>_1(e,n));n._routePreloaded.add(s);const g=u.map(m=>{var c;return(c=m.components)==null?void 0:c.default}).filter(m=>typeof m=="function");for(const m of g){const c=Promise.resolve(m()).catch(()=>{}).finally(()=>h.splice(h.indexOf(c)));h.push(c)}await Promise.all(h)}const DM=(...e)=>e.find(n=>n!==void 0);function RM(e){const n=e.componentName||"NuxtLink";function s(h,g){if(!h||e.trailingSlash!=="append"&&e.trailingSlash!=="remove")return h;if(typeof h=="string")return Av(h,e.trailingSlash);const m="path"in h&&h.path!==void 0?h.path:g(h).path;return{...h,name:void 0,path:Av(m,e.trailingSlash)}}function u(h){const g=Vo(),m=fc(),c=Ve(()=>!!h.target&&h.target!=="_self"),T=Ve(()=>{const W=h.to||h.href||"";return typeof W=="string"&&ca(W,{acceptRelative:!0})}),M=Vm("RouterLink"),k=M&&typeof M!="string"?M.useLink:void 0,A=Ve(()=>{if(h.external)return!0;const W=h.to||h.href||"";return typeof W=="object"?!1:W===""||T.value}),L=Ve(()=>{const W=h.to||h.href||"";return A.value?W:s(W,g.resolve)}),H=A.value||k==null?void 0:k({...h,to:L}),X=Ve(()=>{var W;if(!L.value||T.value)return L.value;if(A.value){const se=typeof L.value=="object"?kv(L.value):L.value;return s(se,g.resolve)}return typeof L.value=="object"?((W=g.resolve(L.value))==null?void 0:W.href)??null:s(ph(m.app.baseURL,L.value),g.resolve)});return{to:L,hasTarget:c,isAbsoluteUrl:T,isExternal:A,href:X,isActive:(H==null?void 0:H.isActive)??Ve(()=>L.value===g.currentRoute.value.path),isExactActive:(H==null?void 0:H.isExactActive)??Ve(()=>L.value===g.currentRoute.value.path),route:(H==null?void 0:H.route)??Ve(()=>g.resolve(L.value)),async navigate(){await e1(X.value,{replace:h.replace,external:A.value||c.value})}}}return Ri({name:n,props:{to:{type:[String,Object],default:void 0,required:!1},href:{type:[String,Object],default:void 0,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},noRel:{type:Boolean,default:void 0,required:!1},prefetch:{type:Boolean,default:void 0,required:!1},noPrefetch:{type:Boolean,default:void 0,required:!1},activeClass:{type:String,default:void 0,required:!1},exactActiveClass:{type:String,default:void 0,required:!1},prefetchedClass:{type:String,default:void 0,required:!1},replace:{type:Boolean,default:void 0,required:!1},ariaCurrentValue:{type:String,default:void 0,required:!1},external:{type:Boolean,default:void 0,required:!1},custom:{type:Boolean,default:void 0,required:!1}},useLink:u,setup(h,{slots:g}){const m=Vo(),{to:c,href:T,navigate:M,isExternal:k,hasTarget:A,isAbsoluteUrl:L}=u(h),H=kt(!1),X=kt(null),W=se=>{var Te;X.value=h.custom?(Te=se==null?void 0:se.$el)==null?void 0:Te.nextElementSibling:se==null?void 0:se.$el};if(h.prefetch!==!1&&h.noPrefetch!==!0&&h.target!=="_blank"&&!BM()){const Te=Yi();let ye,j=null;Wr(()=>{const oe=OM();oy(()=>{ye=ag(()=>{var ee;(ee=X==null?void 0:X.value)!=null&&ee.tagName&&(j=oe.observe(X.value,async()=>{j==null||j(),j=null;const ne=typeof c.value=="string"?c.value:k.value?kv(c.value):m.resolve(c.value).fullPath;await Promise.all([Te.hooks.callHook("link:prefetch",ne).catch(()=>{}),!k.value&&!A.value&&_1(c.value,m).catch(()=>{})]),H.value=!0}))})})}),Of(()=>{ye&&HA(ye),j==null||j(),j=null})}return()=>{var ye;if(!k.value&&!A.value){const j={ref:W,to:c.value,activeClass:h.activeClass||e.activeClass,exactActiveClass:h.exactActiveClass||e.exactActiveClass,replace:h.replace,ariaCurrentValue:h.ariaCurrentValue,custom:h.custom};return h.custom||(H.value&&(j.class=h.prefetchedClass||e.prefetchedClass),j.rel=h.rel||void 0),Nn(Vm("RouterLink"),j,g.default)}const se=h.target||null,Te=DM(h.noRel?"":h.rel,e.externalRelAttribute,L.value||A.value?"noopener noreferrer":"")||null;return h.custom?g.default?g.default({href:T.value,navigate:M,get route(){if(!T.value)return;const j=new URL(T.value,window.location.href);return{path:j.pathname,fullPath:j.pathname,get query(){return Kg(j.search)},hash:j.hash,params:{},name:void 0,matched:[],redirectedFrom:void 0,meta:{},href:T.value}},rel:Te,target:se,isExternal:k.value||A.value,isActive:!1,isExactActive:!1}):null:Nn("a",{ref:X,href:T.value||null,rel:Te,target:se},(ye=g.default)==null?void 0:ye.call(g))}}})}const v1=RM(vC);function Av(e,n){const s=n==="append"?yf:Nf;return ca(e)&&!e.startsWith("http")?e:s(e,!0)}function OM(){const e=Yi();if(e._observer)return e._observer;let n=null;const s=new Map,u=(g,m)=>(n||(n=new IntersectionObserver(c=>{for(const T of c){const M=s.get(T.target);(T.isIntersecting||T.intersectionRatio>0)&&M&&M()}})),s.set(g,m),n.observe(g),()=>{s.delete(g),n.unobserve(g),s.size===0&&(n.disconnect(),n=null)});return e._observer={observe:u}}function BM(){const e=navigator.connection;return!!(e&&(e.saveData||/2g/.test(e.effectiveType)))}function kv(e){return Xg(e.path||"",e.query||{})+(e.hash?"#"+e.hash:"")}const ra=(e,n,s,u,h=!1)=>{const g=YS(),m=Uf(),c=Ve(()=>{var L;const M=hm(n),k=hm(s),A=hm(u);return ys((M==null?void 0:M.strategy)||((L=m.ui)==null?void 0:L.strategy),A?{wrapper:A}:{},M||{},h?y1(m.ui,e,{}):{},k||{})}),T=Ve(()=>Gk(g,["class"]));return{ui:c,attrs:T}};function qf({ui:e,props:n}){const s=la();if(aa("ButtonGroupContextConsumer",!0),Zr("ButtonGroupContextConsumer",!1))return{size:Ve(()=>n.size),rounded:Ve(()=>e.value.rounded)};let h=s.parent,g;for(;h&&!g;){if(h.type.name==="ButtonGroup"){g=Zr(`group-${h.uid}`);break}h=h.parent}const m=Ve(()=>g==null?void 0:g.value.children.indexOf(s));return Wr(()=>{g==null||g.value.register(s)}),sa(()=>{g==null||g.value.unregister(s)}),{size:Ve(()=>(g==null?void 0:g.value.size)||n.size),rounded:Ve(()=>!g||m.value===-1?e.value.rounded:g.value.children.length===1?g.value.ui.rounded:m.value===0?g.value.rounded.start:m.value===g.value.children.length-1?g.value.rounded.end:"rounded-none")}}const FM={wrapper:"relative inline-flex items-center justify-center flex-shrink-0",background:"bg-gray-100 dark:bg-gray-800",rounded:"rounded-full",text:"font-medium leading-none text-gray-900 dark:text-white truncate",placeholder:"font-medium leading-none text-gray-500 dark:text-gray-400 truncate",size:{"3xs":"h-4 w-4 text-[8px]","2xs":"h-5 w-5 text-[10px]",xs:"h-6 w-6 text-xs",sm:"h-8 w-8 text-sm",md:"h-10 w-10 text-base",lg:"h-12 w-12 text-lg",xl:"h-14 w-14 text-xl","2xl":"h-16 w-16 text-2xl","3xl":"h-20 w-20 text-3xl"},chip:{base:"absolute rounded-full ring-1 ring-white dark:ring-gray-900 flex items-center justify-center text-white dark:text-gray-900 font-medium",background:"bg-{color}-500 dark:bg-{color}-400",position:{"top-right":"top-0 right-0","bottom-right":"bottom-0 right-0","top-left":"top-0 left-0","bottom-left":"bottom-0 left-0"},size:{"3xs":"h-[4px] min-w-[4px] text-[4px] p-px","2xs":"h-[5px] min-w-[5px] text-[5px] p-px",xs:"h-1.5 min-w-[0.375rem] text-[6px] p-px",sm:"h-2 min-w-[0.5rem] text-[7px] p-0.5",md:"h-2.5 min-w-[0.625rem] text-[8px] p-0.5",lg:"h-3 min-w-[0.75rem] text-[10px] p-0.5",xl:"h-3.5 min-w-[0.875rem] text-[11px] p-1","2xl":"h-4 min-w-[1rem] text-[12px] p-1","3xl":"h-5 min-w-[1.25rem] text-[14px] p-1"}},icon:{base:"text-gray-500 dark:text-gray-400 flex-shrink-0",size:{"3xs":"h-2 w-2","2xs":"h-2.5 w-2.5",xs:"h-3 w-3",sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6",xl:"h-7 w-7","2xl":"h-8 w-8","3xl":"h-10 w-10"}},default:{size:"sm",icon:null,chipColor:null,chipPosition:"top-right"}},VM={base:"inline-flex items-center",rounded:"rounded-md",font:"font-medium",size:{xs:"text-xs px-1.5 py-0.5",sm:"text-xs px-2 py-1",md:"text-sm px-2 py-1",lg:"text-sm px-2.5 py-1.5"},color:{white:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-900 dark:text-white bg-white dark:bg-gray-900"},gray:{solid:"ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-700 dark:text-gray-200 bg-gray-50 dark:bg-gray-800"},black:{solid:"text-white dark:text-gray-900 bg-gray-900 dark:bg-white"}},variant:{solid:"bg-{color}-500 dark:bg-{color}-400 text-white dark:text-gray-900",outline:"text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400",soft:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400",subtle:"bg-{color}-50 dark:bg-{color}-400 dark:bg-opacity-10 text-{color}-500 dark:text-{color}-400 ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 ring-opacity-25 dark:ring-opacity-25"},default:{size:"sm",variant:"solid",color:"primary"}},NM={base:"focus:outline-none focus-visible:outline-0 disabled:cursor-not-allowed disabled:opacity-75 flex-shrink-0",font:"font-medium",rounded:"rounded-md",truncate:"text-left break-all line-clamp-1",block:"w-full flex justify-center items-center",inline:"inline-flex items-center",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},gap:{"2xs":"gap-x-1",xs:"gap-x-1.5",sm:"gap-x-1.5",md:"gap-x-2",lg:"gap-x-2.5",xl:"gap-x-2.5"},padding:{"2xs":"px-2 py-1",xs:"px-2.5 py-1.5",sm:"px-2.5 py-1.5",md:"px-3 py-2",lg:"px-3.5 py-2.5",xl:"px-3.5 py-2.5"},square:{"2xs":"p-1",xs:"p-1.5",sm:"p-1.5",md:"p-2",lg:"p-2.5",xl:"p-2.5"},color:{white:{solid:"shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-900 dark:text-white bg-white hover:bg-gray-50 disabled:bg-white dark:bg-gray-900 dark:hover:bg-gray-800/50 dark:disabled:bg-gray-900 focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400",ghost:"text-gray-900 dark:text-white hover:bg-white dark:hover:bg-gray-900 focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400"},gray:{solid:"shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 text-gray-700 dark:text-gray-200 bg-gray-50 hover:bg-gray-100 disabled:bg-gray-50 dark:bg-gray-800 dark:hover:bg-gray-700/50 dark:disabled:bg-gray-800 focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400",ghost:"text-gray-700 dark:text-gray-200 hover:text-gray-900 dark:hover:text-white hover:bg-gray-50 dark:hover:bg-gray-800 focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400",link:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 underline-offset-4 hover:underline focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400"},black:{solid:"shadow-sm text-white dark:text-gray-900 bg-gray-900 hover:bg-gray-800 disabled:bg-gray-900 dark:bg-white dark:hover:bg-gray-100 dark:disabled:bg-white focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400",link:"text-gray-900 dark:text-white underline-offset-4 hover:underline focus-visible:ring-inset focus-visible:ring-2 focus-visible:ring-primary-500 dark:focus-visible:ring-primary-400"}},variant:{solid:"shadow-sm text-white dark:text-gray-900 bg-{color}-500 hover:bg-{color}-600 disabled:bg-{color}-500 dark:bg-{color}-400 dark:hover:bg-{color}-500 dark:disabled:bg-{color}-400 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-{color}-500 dark:focus-visible:outline-{color}-400",outline:"ring-1 ring-inset ring-current text-{color}-500 dark:text-{color}-400 hover:bg-{color}-50 disabled:bg-transparent dark:hover:bg-{color}-950 dark:disabled:bg-transparent focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400",soft:"text-{color}-500 dark:text-{color}-400 bg-{color}-50 hover:bg-{color}-100 disabled:bg-{color}-50 dark:bg-{color}-950 dark:hover:bg-{color}-900 dark:disabled:bg-{color}-950 focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400",ghost:"text-{color}-500 dark:text-{color}-400 hover:bg-{color}-50 disabled:bg-transparent dark:hover:bg-{color}-950 dark:disabled:bg-transparent focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400",link:"text-{color}-500 hover:text-{color}-600 disabled:text-{color}-500 dark:text-{color}-400 dark:hover:text-{color}-500 dark:disabled:text-{color}-400 underline-offset-4 hover:underline focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400"},icon:{base:"flex-shrink-0",loading:"animate-spin",size:{"2xs":"h-4 w-4",xs:"h-4 w-4",sm:"h-5 w-5",md:"h-5 w-5",lg:"h-5 w-5",xl:"h-6 w-6"}},default:{size:"sm",variant:"solid",color:"primary",loadingIcon:"i-heroicons-arrow-path-20-solid"}},x1={base:"invisible before:visible before:block before:rotate-45 before:z-[-1] before:w-2 before:h-2",ring:"before:ring-1 before:ring-gray-200 dark:before:ring-gray-800",rounded:"before:rounded-sm",background:"before:bg-gray-200 dark:before:bg-gray-800",shadow:"before:shadow",placement:"group-data-[popper-placement*='right']:-left-1 group-data-[popper-placement*='left']:-right-1 group-data-[popper-placement*='top']:-bottom-1 group-data-[popper-placement*='bottom']:-top-1"},ly={wrapper:"relative",base:"relative block w-full disabled:cursor-not-allowed disabled:opacity-75 focus:outline-none border-0",form:"form-input",rounded:"rounded-md",placeholder:"placeholder-gray-400 dark:placeholder-gray-500",file:{base:"file:mr-1.5 file:font-medium file:text-gray-500 dark:file:text-gray-400 file:bg-transparent file:border-0 file:p-0 file:outline-none"},size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base"},gap:{"2xs":"gap-x-1",xs:"gap-x-1.5",sm:"gap-x-1.5",md:"gap-x-2",lg:"gap-x-2.5",xl:"gap-x-2.5"},padding:{"2xs":"px-2 py-1",xs:"px-2.5 py-1.5",sm:"px-2.5 py-1.5",md:"px-3 py-2",lg:"px-3.5 py-2.5",xl:"px-3.5 py-2.5"},leading:{padding:{"2xs":"ps-7",xs:"ps-8",sm:"ps-9",md:"ps-10",lg:"ps-11",xl:"ps-12"}},trailing:{padding:{"2xs":"pe-7",xs:"pe-8",sm:"pe-9",md:"pe-10",lg:"pe-11",xl:"pe-12"}},color:{white:{outline:"shadow-sm bg-white dark:bg-gray-900 text-gray-900 dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"},gray:{outline:"shadow-sm bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400"}},variant:{outline:"shadow-sm bg-transparent text-gray-900 dark:text-white ring-1 ring-inset ring-{color}-500 dark:ring-{color}-400 focus:ring-2 focus:ring-{color}-500 dark:focus:ring-{color}-400",none:"bg-transparent focus:ring-0 focus:shadow-none"},icon:{base:"flex-shrink-0 text-gray-400 dark:text-gray-500",color:"text-{color}-500 dark:text-{color}-400",loading:"animate-spin",size:{"2xs":"h-4 w-4",xs:"h-4 w-4",sm:"h-5 w-5",md:"h-5 w-5",lg:"h-5 w-5",xl:"h-6 w-6"},leading:{wrapper:"absolute inset-y-0 start-0 flex items-center",pointer:"pointer-events-none",padding:{"2xs":"px-2",xs:"px-2.5",sm:"px-2.5",md:"px-3",lg:"px-3.5",xl:"px-3.5"}},trailing:{wrapper:"absolute inset-y-0 end-0 flex items-center",pointer:"pointer-events-none",padding:{"2xs":"px-2",xs:"px-2.5",sm:"px-2.5",md:"px-3",lg:"px-3.5",xl:"px-3.5"}}},default:{size:"sm",color:"white",variant:"outline",loadingIcon:"i-heroicons-arrow-path-20-solid"}},Mv={container:"z-20 group",trigger:"flex items-center w-full",width:"w-full",height:"max-h-60",base:"relative focus:outline-none overflow-y-auto scroll-py-1",background:"bg-white dark:bg-gray-800",shadow:"shadow-lg",rounded:"rounded-md",padding:"p-1",ring:"ring-1 ring-gray-200 dark:ring-gray-700",empty:"text-sm text-gray-400 dark:text-gray-500 px-2 py-1.5",option:{base:"cursor-default select-none relative flex items-center justify-between gap-1",rounded:"rounded-md",padding:"px-1.5 py-1.5",size:"text-sm",color:"text-gray-900 dark:text-white",container:"flex items-center gap-1.5 min-w-0",active:"bg-gray-100 dark:bg-gray-900",inactive:"",selected:"pe-7",disabled:"cursor-not-allowed opacity-50",empty:"text-sm text-gray-400 dark:text-gray-500 px-2 py-1.5",icon:{base:"flex-shrink-0 h-5 w-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{wrapper:"absolute inset-y-0 end-0 flex items-center",padding:"pe-2",base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"}},transition:{leaveActiveClass:"transition ease-in duration-100",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},popper:{placement:"bottom-end"},default:{selectedIcon:"i-heroicons-check-20-solid",trailingIcon:"i-heroicons-chevron-down-20-solid"},arrow:{...x1,ring:"before:ring-1 before:ring-gray-200 dark:before:ring-gray-700",background:"before:bg-white dark:before:bg-gray-700"}};({...ly});const $M={...ly,form:"form-select",placeholder:"text-gray-400 dark:text-gray-500",default:{size:"sm",color:"white",variant:"outline",loadingIcon:"i-heroicons-arrow-path-20-solid",trailingIcon:"i-heroicons-chevron-down-20-solid"}},jM={...Mv,select:"inline-flex items-center text-left cursor-default",input:"block w-[calc(100%+0.5rem)] focus:ring-transparent text-sm px-3 py-1.5 text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 border-0 border-b border-gray-200 dark:border-gray-700 sticky -top-1 -mt-1 mb-1 -mx-1 z-10 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none",required:"absolute inset-0 w-px opacity-0 cursor-default",label:"block truncate",option:{...Mv.option,create:"block truncate"},transition:{leaveActiveClass:"transition ease-in duration-100",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},popper:{placement:"bottom-end"},default:{selectedIcon:"i-heroicons-check-20-solid",clearSearchOnClose:!1,showCreateOptionWhen:"empty"},arrow:{...x1,ring:"before:ring-1 before:ring-gray-200 dark:before:ring-gray-700",background:"before:bg-white dark:before:bg-gray-700"}},UM={wrapper:"w-full pointer-events-auto",container:"relative overflow-hidden",inner:"w-0 flex-1",title:"text-sm font-medium text-gray-900 dark:text-white",description:"mt-1 text-sm leading-4 text-gray-500 dark:text-gray-400",actions:"flex items-center gap-2 mt-3 flex-shrink-0",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-lg",padding:"p-4",gap:"gap-3",ring:"ring-1 ring-gray-200 dark:ring-gray-800",icon:{base:"flex-shrink-0 w-5 h-5",color:"text-{color}-500 dark:text-{color}-400"},avatar:{base:"flex-shrink-0 self-center",size:"md"},progress:{base:"absolute bottom-0 end-0 start-0 h-1",background:"bg-{color}-500 dark:bg-{color}-400"},transition:{enterActiveClass:"transform ease-out duration-300 transition",enterFromClass:"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2",enterToClass:"translate-y-0 opacity-100 sm:translate-x-0",leaveActiveClass:"transition ease-in duration-100",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},default:{color:"primary",icon:null,timeout:5e3,closeButton:{icon:"i-heroicons-x-mark-20-solid",color:"gray",variant:"link",padded:!1},actionButton:{size:"xs",color:"white"}}},qM={wrapper:"fixed flex flex-col justify-end z-[55]",position:"bottom-0 end-0",width:"w-full sm:w-96",container:"px-4 sm:px-6 py-6 space-y-3 overflow-y-auto"},jn=(e,n)=>{const s=e.__vccOpts||e;for(const[u,h]of n)s[u]=h;return s},Ws=ys(Di.ui.strategy,Di.ui.badge,VM),HM=Ri({inheritAttrs:!1,props:{size:{type:String,default:()=>Ws.default.size,validator(e){return Object.keys(Ws.size).includes(e)}},color:{type:String,default:()=>Ws.default.color,validator(e){return[...Di.ui.colors,...Object.keys(Ws.color)].includes(e)}},variant:{type:String,default:()=>Ws.default.variant,validator(e){return[...Object.keys(Ws.variant),...Object.values(Ws.color).flatMap(n=>Object.keys(n))].includes(e)}},label:{type:[String,Number],default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:n,attrs:s}=ra("badge",eo(e,"ui"),Ws),{size:u,rounded:h}=qf({ui:n,props:e}),g=Ve(()=>{var c,T;const m=((T=(c=n.value.color)==null?void 0:c[e.color])==null?void 0:T[e.variant])||n.value.variant[e.variant];return fs(tr(n.value.base,n.value.font,h.value,n.value.size[u.value],m==null?void 0:m.replaceAll("{color}",e.color)),e.class)});return{attrs:s,badgeClass:g}}});function GM(e,n,s,u,h,g){return _t(),ri("span",br({class:e.badgeClass},e.attrs),[sr(e.$slots,"default",{},()=>[go(Ur(e.label),1)])],16)}const b1=jn(HM,[["render",GM]]),w1=Object.freeze({left:0,top:0,width:16,height:16}),E1=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),cy=Object.freeze({...w1,...E1});Object.freeze({...cy,body:"",hidden:!1});({...w1});const S1=Object.freeze({width:null,height:null}),T1=Object.freeze({...S1,...E1});function ZM(e,n){const s={...e};for(const u in n){const h=n[u],g=typeof h;u in S1?(h===null||h&&(g==="string"||g==="number"))&&(s[u]=h):g===typeof s[u]&&(s[u]=u==="rotate"?h%4:h)}return s}const WM=/[\s,]+/;function KM(e,n){n.split(WM).forEach(s=>{switch(s.trim()){case"horizontal":e.hFlip=!0;break;case"vertical":e.vFlip=!0;break}})}function XM(e,n=0){const s=e.replace(/^-?[0-9.]*/,"");function u(h){for(;h<0;)h+=4;return h%4}if(s===""){const h=parseInt(e);return isNaN(h)?0:u(h)}else if(s!==e){let h=0;switch(s){case"%":h=25;break;case"deg":h=90}if(h){let g=parseFloat(e.slice(0,e.length-s.length));return isNaN(g)?0:(g=g/h,g%1===0?u(g):0)}}return n}const JM=/(-?[0-9.]*[0-9]+[0-9.]*)/g,YM=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function Lv(e,n,s){if(n===1)return e;if(s=s||100,typeof e=="number")return Math.ceil(e*n*s)/s;if(typeof e!="string")return e;const u=e.split(JM);if(u===null||!u.length)return e;const h=[];let g=u.shift(),m=YM.test(g);for(;;){if(m){const c=parseFloat(g);isNaN(c)?h.push(g):h.push(Math.ceil(c*n*s)/s)}else h.push(g);if(g=u.shift(),g===void 0)return h.join("");m=!m}}function QM(e,n="defs"){let s="";const u=e.indexOf("<"+n);for(;u>=0;){const h=e.indexOf(">",u),g=e.indexOf("</"+n);if(h===-1||g===-1)break;const m=e.indexOf(">",g);if(m===-1)break;s+=e.slice(h+1,g).trim(),e=e.slice(0,u).trim()+e.slice(m+1)}return{defs:s,content:e}}function eL(e,n){return e?"<defs>"+e+"</defs>"+n:n}function tL(e,n,s){const u=QM(e);return eL(u.defs,n+u.content+s)}const iL=e=>e==="unset"||e==="undefined"||e==="none";function rL(e,n){const s={...cy,...e},u={...T1,...n},h={left:s.left,top:s.top,width:s.width,height:s.height};let g=s.body;[s,u].forEach(W=>{const se=[],Te=W.hFlip,ye=W.vFlip;let j=W.rotate;Te?ye?j+=2:(se.push("translate("+(h.width+h.left).toString()+" "+(0-h.top).toString()+")"),se.push("scale(-1 1)"),h.top=h.left=0):ye&&(se.push("translate("+(0-h.left).toString()+" "+(h.height+h.top).toString()+")"),se.push("scale(1 -1)"),h.top=h.left=0);let oe;switch(j<0&&(j-=Math.floor(j/4)*4),j=j%4,j){case 1:oe=h.height/2+h.top,se.unshift("rotate(90 "+oe.toString()+" "+oe.toString()+")");break;case 2:se.unshift("rotate(180 "+(h.width/2+h.left).toString()+" "+(h.height/2+h.top).toString()+")");break;case 3:oe=h.width/2+h.left,se.unshift("rotate(-90 "+oe.toString()+" "+oe.toString()+")");break}j%2===1&&(h.left!==h.top&&(oe=h.left,h.left=h.top,h.top=oe),h.width!==h.height&&(oe=h.width,h.width=h.height,h.height=oe)),se.length&&(g=tL(g,'<g transform="'+se.join(" ")+'">',"</g>"))});const m=u.width,c=u.height,T=h.width,M=h.height;let k,A;m===null?(A=c===null?"1em":c==="auto"?M:c,k=Lv(A,T/M)):(k=m==="auto"?T:m,A=c===null?Lv(k,M/T):c==="auto"?M:c);const L={},H=(W,se)=>{iL(se)||(L[W]=se.toString())};H("width",k),H("height",A);const X=[h.left,h.top,T,M];return L.viewBox=X.join(" "),{attributes:L,viewBox:X,body:g}}const nL=/\sid="(\S+)"/g,oL="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let sL=0;function aL(e,n=oL){const s=[];let u;for(;u=nL.exec(e);)s.push(u[1]);if(!s.length)return e;const h="suffix"+(Math.random()*16777216|Date.now()).toString(16);return s.forEach(g=>{const m=typeof n=="function"?n(g):n+(sL++).toString(),c=g.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");e=e.replace(new RegExp('([#;"])('+c+')([")]|\\.[a-z])',"g"),"$1"+m+h+"$3")}),e=e.replace(new RegExp(h,"g"),""),e}function lL(e,n){let s=e.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const u in n)s+=" "+u+'="'+n[u]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+s+">"+e+"</svg>"}function cL(e){return e.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function uL(e){return"data:image/svg+xml,"+cL(e)}function hL(e){return'url("'+uL(e)+'")'}const Pv={...T1,inline:!1},dL={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},fL={display:"inline-block"},pg={backgroundColor:"currentColor"},I1={backgroundColor:"transparent"},zv={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Dv={webkitMask:pg,mask:pg,background:I1};for(const e in Dv){const n=Dv[e];for(const s in zv)n[e+s]=zv[s]}const Qd={};["horizontal","vertical"].forEach(e=>{const n=e.slice(0,1)+"Flip";Qd[e+"-flip"]=n,Qd[e.slice(0,1)+"-flip"]=n,Qd[e+"Flip"]=n});function Rv(e){return e+(e.match(/^[-0-9.]+$/)?"px":"")}const pL=(e,n)=>{const s=ZM(Pv,n),u={...dL},h=n.mode||"svg",g={},m=n.style,c=typeof m=="object"&&!(m instanceof Array)?m:{};for(let W in n){const se=n[W];if(se!==void 0)switch(W){case"icon":case"style":case"onLoad":case"mode":break;case"inline":case"hFlip":case"vFlip":s[W]=se===!0||se==="true"||se===1;break;case"flip":typeof se=="string"&&KM(s,se);break;case"color":g.color=se;break;case"rotate":typeof se=="string"?s[W]=XM(se):typeof se=="number"&&(s[W]=se);break;case"ariaHidden":case"aria-hidden":se!==!0&&se!=="true"&&delete u["aria-hidden"];break;default:{const Te=Qd[W];Te?(se===!0||se==="true"||se===1)&&(s[Te]=!0):Pv[W]===void 0&&(u[W]=se)}}}const T=rL(e,s),M=T.attributes;if(s.inline&&(g.verticalAlign="-0.125em"),h==="svg"){u.style={...g,...c},Object.assign(u,M);let W=0,se=n.id;return typeof se=="string"&&(se=se.replace(/-/g,"_")),u.innerHTML=aL(T.body,se?()=>se+"ID"+W++:"iconifyVue"),Nn("svg",u)}const{body:k,width:A,height:L}=e,H=h==="mask"||(h==="bg"?!1:k.indexOf("currentColor")!==-1),X=lL(k,{...M,width:A+"",height:L+""});return u.style={...g,"--svg":hL(X),width:Rv(M.width),height:Rv(M.height),...fL,...H?pg:I1,...c},Nn("span",u)},mL=Object.create(null),gL=Ri({inheritAttrs:!1,render(){const e=this.$attrs,n=e.icon,s=typeof n=="string"?mL[n]:typeof n=="object"?n:null;return s===null||typeof s!="object"||typeof s.body!="string"?this.$slots.default?this.$slots.default():null:pL({...cy,...s},e)}}),Xu=/^[a-z0-9]+(-[a-z0-9]+)*$/,Hf=(e,n,s,u="")=>{const h=e.split(":");if(e.slice(0,1)==="@"){if(h.length<2||h.length>3)return null;u=h.shift().slice(1)}if(h.length>3||!h.length)return null;if(h.length>1){const c=h.pop(),T=h.pop(),M={provider:h.length>0?h[0]:u,prefix:T,name:c};return n&&!ef(M)?null:M}const g=h[0],m=g.split("-");if(m.length>1){const c={provider:u,prefix:m.shift(),name:m.join("-")};return n&&!ef(c)?null:c}if(s&&u===""){const c={provider:u,prefix:"",name:g};return n&&!ef(c,s)?null:c}return null},ef=(e,n)=>e?!!((e.provider===""||e.provider.match(Xu))&&(n&&e.prefix===""||e.prefix.match(Xu))&&e.name.match(Xu)):!1,C1=Object.freeze({left:0,top:0,width:16,height:16}),Sf=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),uy=Object.freeze({...C1,...Sf}),mg=Object.freeze({...uy,body:"",hidden:!1});function yL(e,n){const s={};!e.hFlip!=!n.hFlip&&(s.hFlip=!0),!e.vFlip!=!n.vFlip&&(s.vFlip=!0);const u=((e.rotate||0)+(n.rotate||0))%4;return u&&(s.rotate=u),s}function Ov(e,n){const s=yL(e,n);for(const u in mg)u in Sf?u in e&&!(u in s)&&(s[u]=Sf[u]):u in n?s[u]=n[u]:u in e&&(s[u]=e[u]);return s}function _L(e,n){const s=e.icons,u=e.aliases||Object.create(null),h=Object.create(null);function g(m){if(s[m])return h[m]=[];if(!(m in h)){h[m]=null;const c=u[m]&&u[m].parent,T=c&&g(c);T&&(h[m]=[c].concat(T))}return h[m]}return Object.keys(s).concat(Object.keys(u)).forEach(g),h}function vL(e,n,s){const u=e.icons,h=e.aliases||Object.create(null);let g={};function m(c){g=Ov(u[c]||h[c],g)}return m(n),s.forEach(m),Ov(e,g)}function A1(e,n){const s=[];if(typeof e!="object"||typeof e.icons!="object")return s;e.not_found instanceof Array&&e.not_found.forEach(h=>{n(h,null),s.push(h)});const u=_L(e);for(const h in u){const g=u[h];g&&(n(h,vL(e,h,g)),s.push(h))}return s}const xL={provider:"",aliases:{},not_found:{},...C1};function Tm(e,n){for(const s in n)if(s in e&&typeof e[s]!=typeof n[s])return!1;return!0}function k1(e){if(typeof e!="object"||e===null)return null;const n=e;if(typeof n.prefix!="string"||!e.icons||typeof e.icons!="object"||!Tm(e,xL))return null;const s=n.icons;for(const h in s){const g=s[h];if(!h.match(Xu)||typeof g.body!="string"||!Tm(g,mg))return null}const u=n.aliases||Object.create(null);for(const h in u){const g=u[h],m=g.parent;if(!h.match(Xu)||typeof m!="string"||!s[m]&&!u[m]||!Tm(g,mg))return null}return n}const Bv=Object.create(null);function bL(e,n){return{provider:e,prefix:n,icons:Object.create(null),missing:new Set}}function Ja(e,n){const s=Bv[e]||(Bv[e]=Object.create(null));return s[n]||(s[n]=bL(e,n))}function hy(e,n){return k1(n)?A1(n,(s,u)=>{u?e.icons[s]=u:e.missing.add(s)}):[]}function wL(e,n,s){try{if(typeof s.body=="string")return e.icons[n]={...s},!0}catch{}return!1}let lh=!1;function M1(e){return typeof e=="boolean"&&(lh=e),lh}function EL(e){const n=typeof e=="string"?Hf(e,!0,lh):e;if(n){const s=Ja(n.provider,n.prefix),u=n.name;return s.icons[u]||(s.missing.has(u)?null:void 0)}}function SL(e,n){const s=Hf(e,!0,lh);if(!s)return!1;const u=Ja(s.provider,s.prefix);return wL(u,s.name,n)}function TL(e,n){if(typeof e!="object")return!1;if(typeof n!="string"&&(n=e.provider||""),lh&&!n&&!e.prefix){let h=!1;return k1(e)&&(e.prefix="",A1(e,(g,m)=>{m&&SL(g,m)&&(h=!0)})),h}const s=e.prefix;if(!ef({provider:n,prefix:s,name:"a"}))return!1;const u=Ja(n,s);return!!hy(u,e)}const IL=Object.freeze({width:null,height:null}),CL=Object.freeze({...IL,...Sf});""+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);const gg=Object.create(null);function AL(e,n){gg[e]=n}function yg(e){return gg[e]||gg[""]}function dy(e){let n;if(typeof e.resources=="string")n=[e.resources];else if(n=e.resources,!(n instanceof Array)||!n.length)return null;return{resources:n,path:e.path||"/",maxURL:e.maxURL||500,rotate:e.rotate||750,timeout:e.timeout||5e3,random:e.random===!0,index:e.index||0,dataAfterTimeout:e.dataAfterTimeout!==!1}}const fy=Object.create(null),Ru=["https://api.simplesvg.com","https://api.unisvg.com"],tf=[];for(;Ru.length>0;)Ru.length===1||Math.random()>.5?tf.push(Ru.shift()):tf.push(Ru.pop());fy[""]=dy({resources:["https://api.iconify.design"].concat(tf)});function _g(e,n){const s=dy(n);return s===null?!1:(fy[e]=s,!0)}function py(e){return fy[e]}const kL=()=>{let e;try{if(e=fetch,typeof e=="function")return e}catch{}};let Fv=kL();function ML(e,n){const s=py(e);if(!s)return 0;let u;if(!s.maxURL)u=0;else{let h=0;s.resources.forEach(m=>{h=Math.max(h,m.length)});const g=n+".json?icons=";u=s.maxURL-h-s.path.length-g.length}return u}function LL(e){return e===404}const PL=(e,n,s)=>{const u=[],h=ML(e,n),g="icons";let m={type:g,provider:e,prefix:n,icons:[]},c=0;return s.forEach((T,M)=>{c+=T.length+1,c>=h&&M>0&&(u.push(m),m={type:g,provider:e,prefix:n,icons:[]},c=T.length),m.icons.push(T)}),u.push(m),u};function zL(e){if(typeof e=="string"){const n=py(e);if(n)return n.path}return"/"}const DL=(e,n,s)=>{if(!Fv){s("abort",424);return}let u=zL(n.provider);switch(n.type){case"icons":{const g=n.prefix,c=n.icons.join(","),T=new URLSearchParams({icons:c});u+=g+".json?"+T.toString();break}case"custom":{const g=n.uri;u+=g.slice(0,1)==="/"?g.slice(1):g;break}default:s("abort",400);return}let h=503;Fv(e+u).then(g=>{const m=g.status;if(m!==200){setTimeout(()=>{s(LL(m)?"abort":"next",m)});return}return h=501,g.json()}).then(g=>{if(typeof g!="object"||g===null){setTimeout(()=>{g===404?s("abort",g):s("next",h)});return}setTimeout(()=>{s("success",g)})}).catch(()=>{s("next",h)})},RL={prepare:PL,send:DL};function OL(e){const n={loaded:[],missing:[],pending:[]},s=Object.create(null);e.sort((h,g)=>h.provider!==g.provider?h.provider.localeCompare(g.provider):h.prefix!==g.prefix?h.prefix.localeCompare(g.prefix):h.name.localeCompare(g.name));let u={provider:"",prefix:"",name:""};return e.forEach(h=>{if(u.name===h.name&&u.prefix===h.prefix&&u.provider===h.provider)return;u=h;const g=h.provider,m=h.prefix,c=h.name,T=s[g]||(s[g]=Object.create(null)),M=T[m]||(T[m]=Ja(g,m));let k;c in M.icons?k=n.loaded:m===""||M.missing.has(c)?k=n.missing:k=n.pending;const A={provider:g,prefix:m,name:c};k.push(A)}),n}function L1(e,n){e.forEach(s=>{const u=s.loaderCallbacks;u&&(s.loaderCallbacks=u.filter(h=>h.id!==n))})}function BL(e){e.pendingCallbacksFlag||(e.pendingCallbacksFlag=!0,setTimeout(()=>{e.pendingCallbacksFlag=!1;const n=e.loaderCallbacks?e.loaderCallbacks.slice(0):[];if(!n.length)return;let s=!1;const u=e.provider,h=e.prefix;n.forEach(g=>{const m=g.icons,c=m.pending.length;m.pending=m.pending.filter(T=>{if(T.prefix!==h)return!0;const M=T.name;if(e.icons[M])m.loaded.push({provider:u,prefix:h,name:M});else if(e.missing.has(M))m.missing.push({provider:u,prefix:h,name:M});else return s=!0,!0;return!1}),m.pending.length!==c&&(s||L1([e],g.id),g.callback(m.loaded.slice(0),m.missing.slice(0),m.pending.slice(0),g.abort))})}))}let FL=0;function VL(e,n,s){const u=FL++,h=L1.bind(null,s,u);if(!n.pending.length)return h;const g={id:u,icons:n,callback:e,abort:h};return s.forEach(m=>{(m.loaderCallbacks||(m.loaderCallbacks=[])).push(g)}),h}function NL(e,n=!0,s=!1){const u=[];return e.forEach(h=>{const g=typeof h=="string"?Hf(h,n,s):h;g&&u.push(g)}),u}var $L={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function jL(e,n,s,u){const h=e.resources.length,g=e.random?Math.floor(Math.random()*h):e.index;let m;if(e.random){let ne=e.resources.slice(0);for(m=[];ne.length>1;){const Ie=Math.floor(Math.random()*ne.length);m.push(ne[Ie]),ne=ne.slice(0,Ie).concat(ne.slice(Ie+1))}m=m.concat(ne)}else m=e.resources.slice(g).concat(e.resources.slice(0,g));const c=Date.now();let T="pending",M=0,k,A=null,L=[],H=[];typeof u=="function"&&H.push(u);function X(){A&&(clearTimeout(A),A=null)}function W(){T==="pending"&&(T="aborted"),X(),L.forEach(ne=>{ne.status==="pending"&&(ne.status="aborted")}),L=[]}function se(ne,Ie){Ie&&(H=[]),typeof ne=="function"&&H.push(ne)}function Te(){return{startTime:c,payload:n,status:T,queriesSent:M,queriesPending:L.length,subscribe:se,abort:W}}function ye(){T="failed",H.forEach(ne=>{ne(void 0,k)})}function j(){L.forEach(ne=>{ne.status==="pending"&&(ne.status="aborted")}),L=[]}function oe(ne,Ie,Ee){const Me=Ie!=="success";switch(L=L.filter(pe=>pe!==ne),T){case"pending":break;case"failed":if(Me||!e.dataAfterTimeout)return;break;default:return}if(Ie==="abort"){k=Ee,ye();return}if(Me){k=Ee,L.length||(m.length?ee():ye());return}if(X(),j(),!e.random){const pe=e.resources.indexOf(ne.resource);pe!==-1&&pe!==e.index&&(e.index=pe)}T="completed",H.forEach(pe=>{pe(Ee)})}function ee(){if(T!=="pending")return;X();const ne=m.shift();if(ne===void 0){if(L.length){A=setTimeout(()=>{X(),T==="pending"&&(j(),ye())},e.timeout);return}ye();return}const Ie={status:"pending",resource:ne,callback:(Ee,Me)=>{oe(Ie,Ee,Me)}};L.push(Ie),M++,A=setTimeout(ee,e.rotate),s(ne,n,Ie.callback)}return setTimeout(ee),Te}function P1(e){const n={...$L,...e};let s=[];function u(){s=s.filter(c=>c().status==="pending")}function h(c,T,M){const k=jL(n,c,T,(A,L)=>{u(),M&&M(A,L)});return s.push(k),k}function g(c){return s.find(T=>c(T))||null}return{query:h,find:g,setIndex:c=>{n.index=c},getIndex:()=>n.index,cleanup:u}}function Vv(){}const Im=Object.create(null);function UL(e){if(!Im[e]){const n=py(e);if(!n)return;const s=P1(n),u={config:n,redundancy:s};Im[e]=u}return Im[e]}function qL(e,n,s){let u,h;if(typeof e=="string"){const g=yg(e);if(!g)return s(void 0,424),Vv;h=g.send;const m=UL(e);m&&(u=m.redundancy)}else{const g=dy(e);if(g){u=P1(g);const m=e.resources?e.resources[0]:"",c=yg(m);c&&(h=c.send)}}return!u||!h?(s(void 0,424),Vv):u.query(n,h,s)().abort}const Nv="iconify2",ch="iconify",z1=ch+"-count",$v=ch+"-version",D1=36e5,HL=168,GL=50;function vg(e,n){try{return e.getItem(n)}catch{}}function my(e,n,s){try{return e.setItem(n,s),!0}catch{}}function jv(e,n){try{e.removeItem(n)}catch{}}function xg(e,n){return my(e,z1,n.toString())}function bg(e){return parseInt(vg(e,z1))||0}const Gf={local:!0,session:!0},R1={local:new Set,session:new Set};let gy=!1;function ZL(e){gy=e}let jd=typeof window>"u"?{}:window;function O1(e){const n=e+"Storage";try{if(jd&&jd[n]&&typeof jd[n].length=="number")return jd[n]}catch{}Gf[e]=!1}function B1(e,n){const s=O1(e);if(!s)return;const u=vg(s,$v);if(u!==Nv){if(u){const c=bg(s);for(let T=0;T<c;T++)jv(s,ch+T.toString())}my(s,$v,Nv),xg(s,0);return}const h=Math.floor(Date.now()/D1)-HL,g=c=>{const T=ch+c.toString(),M=vg(s,T);if(typeof M=="string"){try{const k=JSON.parse(M);if(typeof k=="object"&&typeof k.cached=="number"&&k.cached>h&&typeof k.provider=="string"&&typeof k.data=="object"&&typeof k.data.prefix=="string"&&n(k,c))return!0}catch{}jv(s,T)}};let m=bg(s);for(let c=m-1;c>=0;c--)g(c)||(c===m-1?(m--,xg(s,m)):R1[e].add(c))}function F1(){if(!gy){ZL(!0);for(const e in Gf)B1(e,n=>{const s=n.data,u=n.provider,h=s.prefix,g=Ja(u,h);if(!hy(g,s).length)return!1;const m=s.lastModified||-1;return g.lastModifiedCached=g.lastModifiedCached?Math.min(g.lastModifiedCached,m):m,!0})}}function WL(e,n){const s=e.lastModifiedCached;if(s&&s>=n)return s===n;if(e.lastModifiedCached=n,s)for(const u in Gf)B1(u,h=>{const g=h.data;return h.provider!==e.provider||g.prefix!==e.prefix||g.lastModified===n});return!0}function KL(e,n){gy||F1();function s(u){let h;if(!Gf[u]||!(h=O1(u)))return;const g=R1[u];let m;if(g.size)g.delete(m=Array.from(g).shift());else if(m=bg(h),m>=GL||!xg(h,m+1))return;const c={cached:Math.floor(Date.now()/D1),provider:e.provider,data:n};return my(h,ch+m.toString(),JSON.stringify(c))}n.lastModified&&!WL(e,n.lastModified)||Object.keys(n.icons).length&&(n.not_found&&(n=Object.assign({},n),delete n.not_found),s("local")||s("session"))}function Uv(){}function XL(e){e.iconsLoaderFlag||(e.iconsLoaderFlag=!0,setTimeout(()=>{e.iconsLoaderFlag=!1,BL(e)}))}function JL(e,n){e.iconsToLoad?e.iconsToLoad=e.iconsToLoad.concat(n).sort():e.iconsToLoad=n,e.iconsQueueFlag||(e.iconsQueueFlag=!0,setTimeout(()=>{e.iconsQueueFlag=!1;const{provider:s,prefix:u}=e,h=e.iconsToLoad;delete e.iconsToLoad;let g;if(!h||!(g=yg(s)))return;g.prepare(s,u,h).forEach(c=>{qL(s,c,T=>{if(typeof T!="object")c.icons.forEach(M=>{e.missing.add(M)});else try{const M=hy(e,T);if(!M.length)return;const k=e.pendingIcons;k&&M.forEach(A=>{k.delete(A)}),KL(e,T)}catch(M){console.error(M)}XL(e)})})}))}const YL=(e,n)=>{const s=NL(e,!0,M1()),u=OL(s);if(!u.pending.length){let T=!0;return n&&setTimeout(()=>{T&&n(u.loaded,u.missing,u.pending,Uv)}),()=>{T=!1}}const h=Object.create(null),g=[];let m,c;return u.pending.forEach(T=>{const{provider:M,prefix:k}=T;if(k===c&&M===m)return;m=M,c=k,g.push(Ja(M,k));const A=h[M]||(h[M]=Object.create(null));A[k]||(A[k]=[])}),u.pending.forEach(T=>{const{provider:M,prefix:k,name:A}=T,L=Ja(M,k),H=L.pendingIcons||(L.pendingIcons=new Set);H.has(A)||(H.add(A),h[M][k].push(A))}),g.forEach(T=>{const{provider:M,prefix:k}=T;h[M][k].length&&JL(T,h[M][k])}),n?VL(n,u,g):Uv},QL=e=>new Promise((n,s)=>{const u=typeof e=="string"?Hf(e,!0):e;if(!u){s(e);return}YL([u||e],h=>{if(h.length&&u){const g=EL(u);if(g){n({...uy,...g});return}}s(e)})});({...CL});const qv={backgroundColor:"currentColor"},eP={backgroundColor:"transparent"},Hv={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},Gv={webkitMask:qv,mask:qv,background:eP};for(const e in Gv){const n=Gv[e];for(const s in Hv)n[e+s]=Hv[s]}const Cm={};["horizontal","vertical"].forEach(e=>{const n=e.slice(0,1)+"Flip";Cm[e+"-flip"]=n,Cm[e.slice(0,1)+"-flip"]=n,Cm[e+"Flip"]=n});M1(!0);AL("",RL);if(typeof document<"u"&&typeof window<"u"){F1();const e=window;if(e.IconifyPreload!==void 0){const n=e.IconifyPreload,s="Invalid IconifyPreload syntax.";typeof n=="object"&&n!==null&&(n instanceof Array?n:[n]).forEach(u=>{try{(typeof u!="object"||u===null||u instanceof Array||typeof u.icons!="object"||typeof u.prefix!="string"||!TL(u))&&console.error(s)}catch{console.error(s)}})}if(e.IconifyProviders!==void 0){const n=e.IconifyProviders;if(typeof n=="object"&&n!==null)for(let s in n){const u="IconifyProviders["+s+"] is invalid.";try{const h=n[s];if(typeof h!="object"||!h||h.resources===void 0)continue;_g(s,h)||console.error(u)}catch{console.error(u)}}}}({...uy});const tP=["fluent-emoji-high-contrast","material-symbols-light","cryptocurrency-color","icon-park-outline","icon-park-twotone","fluent-emoji-flat","emojione-monotone","streamline-emojis","heroicons-outline","simple-line-icons","material-symbols","flat-color-icons","icon-park-solid","pepicons-pencil","heroicons-solid","pepicons-print","cryptocurrency","pixelarticons","system-uicons","bitcoin-icons","devicon-plain","entypo-social","token-branded","grommet-icons","vscode-icons","pepicons-pop","svg-spinners","fluent-emoji","simple-icons","circle-flags","medical-icon","icomoon-free","majesticons","radix-icons","humbleicons","fa6-regular","emojione-v1","skill-icons","academicons","healthicons","fluent-mdl2","teenyicons","ant-design","gravity-ui","akar-icons","lets-icons","streamline","fa6-brands","file-icons","game-icons","foundation","fa-regular","mono-icons","hugeicons","iconamoon","zondicons","mdi-light","eos-icons","gridicons","icon-park","heroicons","fa6-solid","meteocons","arcticons","dashicons","fa-brands","websymbol","fontelico","mingcute","flowbite","marketeq","bytesize","guidance","openmoji","emojione","nonicons","brandico","flagpack","fa-solid","fontisto","si-glyph","pepicons","iconoir","tdesign","clarity","octicon","codicon","pajamas","formkit","line-md","twemoji","noto-v1","fxemoji","devicon","raphael","flat-ui","topcoat","feather","tabler","carbon","lucide","memory","mynaui","circum","fluent","nimbus","entypo","icons8","subway","vaadin","solar","basil","typcn","charm","prime","quill","logos","token","covid","maki","gala","mage","ooui","noto","unjs","flag","iwwa","zmdi","bpmn","mdi","ion","uil","bxs","cil","uiw","uim","uit","uis","jam","oui","bxl","cib","cbi","cif","gis","map","geo","fad","eva","wpf","whh","ic","ph","ri","bi","bx","gg","ci","ep","fe","mi","f7","ei","wi","la","fa","oi","et","el","ls","vs","il","ps"];function iP(e=""){let n,s="";if(e[0]==="@"&&e.includes(":")&&(s=e.split(":")[0].slice(1),e=e.split(":").slice(1).join(":")),e.startsWith("i-")){e=e.replace(/^i-/,"");for(const u of tP)if(e.startsWith(u)){n=u,e=e.slice(u.length+1);break}}else if(e.includes(":")){const[u,h]=e.split(":");n=u,e=h}return{provider:s,prefix:n||"",name:e||""}}const rP=Ri({__name:"Icon",props:{name:{type:String,required:!0},size:{type:String,default:""}},async setup(e){let n,s;const u=Yi(),h=Uf(),g=e;Zi(()=>{var se;return(se=h.nuxtIcon)==null?void 0:se.iconifyApiOptions},()=>{var se,Te,ye,j,oe,ee;if((Te=(se=h.nuxtIcon)==null?void 0:se.iconifyApiOptions)!=null&&Te.url){try{new URL(h.nuxtIcon.iconifyApiOptions.url)}catch{console.warn("Nuxt Icon: Invalid custom Iconify API URL");return}if((j=(ye=h.nuxtIcon)==null?void 0:ye.iconifyApiOptions)!=null&&j.publicApiFallback){_g("custom",{resources:[(oe=h.nuxtIcon)==null?void 0:oe.iconifyApiOptions.url],index:0});return}_g("",{resources:[(ee=h.nuxtIcon)==null?void 0:ee.iconifyApiOptions.url]})}},{immediate:!0});const m=mh("icons",()=>({})),c=kt(!1),T=Ve(()=>{var se,Te;return(Te=(se=h.nuxtIcon)==null?void 0:se.aliases)!=null&&Te[g.name]?h.nuxtIcon.aliases[g.name]:g.name}),M=Ve(()=>iP(T.value)),k=Ve(()=>[M.value.provider,M.value.prefix,M.value.name].filter(Boolean).join(":")),A=Ve(()=>{var se;return(se=m.value)==null?void 0:se[k.value]}),L=Ve(()=>{var se;return(se=u.vueApp)==null?void 0:se.component(T.value)}),H=Ve(()=>{var Te,ye,j;if(!g.size&&typeof((Te=h.nuxtIcon)==null?void 0:Te.size)=="boolean"&&!((ye=h.nuxtIcon)!=null&&ye.size))return;const se=g.size||((j=h.nuxtIcon)==null?void 0:j.size)||"1em";return String(Number(se))===se?`${se}px`:se}),X=Ve(()=>{var se;return((se=h==null?void 0:h.nuxtIcon)==null?void 0:se.class)??"icon"});async function W(){var se;L.value||(se=m.value)!=null&&se[k.value]||(c.value=!0,m.value[k.value]=await QL(M.value).catch(()=>{}),c.value=!1)}return Zi(T,W),!L.value&&([n,s]=eT(()=>W()),n=await n,s()),(se,Te)=>c.value?(_t(),ri("span",{key:0,class:Mt(X.value),style:ia({width:H.value,height:H.value})},null,6)):A.value?(_t(),li(ni(gL),{key:1,icon:A.value,class:Mt(X.value),width:H.value,height:H.value},null,8,["icon","class","width","height"])):L.value?(_t(),li(hs(L.value),{key:2,class:Mt(X.value),width:H.value,height:H.value},null,8,["class","width","height"])):(_t(),ri("span",{key:3,class:Mt(X.value),style:ia({fontSize:H.value,lineHeight:H.value,width:H.value,height:H.value})},[sr(se.$slots,"default",{},()=>[go(Ur(e.name),1)],!0)],6))}}),V1=jn(rP,[["__scopeId","data-v-e8d572f6"]]),nP=Object.freeze(Object.defineProperty({__proto__:null,default:V1},Symbol.toStringTag,{value:"Module"})),oP=Ri({props:{name:{type:String,required:!0},dynamic:{type:Boolean,default:!1}},setup(e){const n=Uf();return{dynamic:Ve(()=>{var u,h;return e.dynamic||((h=(u=n.ui)==null?void 0:u.icons)==null?void 0:h.dynamic)})}}});function sP(e,n,s,u,h,g){const m=V1;return e.dynamic?(_t(),li(m,{key:0,name:e.name},null,8,["name"])):(_t(),ri("span",{key:1,class:Mt(e.name)},null,2))}const $o=jn(oP,[["render",sP]]),aP=Ri({inheritAttrs:!1,props:{...ay,as:{type:String,default:"button"},type:{type:String,default:"button"},disabled:{type:Boolean,default:null},active:{type:Boolean,default:void 0},exact:{type:Boolean,default:!1},exactQuery:{type:Boolean,default:!1},exactHash:{type:Boolean,default:!1},inactiveClass:{type:String,default:void 0}},setup(e){function n(s,u,{isActive:h,isExactActive:g}){return e.exactQuery&&!MC(s.query,u.query)||e.exactHash&&s.hash!==u.hash?e.inactiveClass:e.exact&&g||!e.exact&&h?e.activeClass:e.inactiveClass}return{resolveLinkClass:n}}}),lP=["href","aria-disabled","role","rel","target","onClick"];function cP(e,n,s,u,h,g){const m=v1;return e.to?(_t(),li(m,br({key:1},e.$props,{custom:""}),{default:xr(({route:c,href:T,target:M,rel:k,navigate:A,isActive:L,isExactActive:H,isExternal:X})=>[$i("a",br(e.$attrs,{href:e.disabled?void 0:T,"aria-disabled":e.disabled?"true":void 0,role:e.disabled?"link":void 0,rel:k,target:M,class:e.active!==void 0?e.active?e.activeClass:e.inactiveClass:e.resolveLinkClass(c,e.$route,{isActive:L,isExactActive:H}),onClick:W=>!X&&!e.disabled&&A(W)}),[sr(e.$slots,"default",zm(df({isActive:e.active!==void 0?e.active:e.exact?H:L})))],16,lP)]),_:3},16)):(_t(),li(hs(e.as),br({key:0,type:e.type,disabled:e.disabled},e.$attrs,{class:e.active?e.activeClass:e.inactiveClass}),{default:xr(()=>[sr(e.$slots,"default",zm(df({isActive:e.active})))]),_:3},16,["type","disabled","class"]))}const N1=jn(aP,[["render",cP]]),as=ys(Di.ui.strategy,Di.ui.button,NM),uP=Ri({components:{UIcon:$o,ULink:N1},inheritAttrs:!1,props:{...ay,type:{type:String,default:"button"},block:{type:Boolean,default:!1},label:{type:String,default:null},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:()=>as.default.size,validator(e){return Object.keys(as.size).includes(e)}},color:{type:String,default:()=>as.default.color,validator(e){return[...Di.ui.colors,...Object.keys(as.color)].includes(e)}},variant:{type:String,default:()=>as.default.variant,validator(e){return[...Object.keys(as.variant),...Object.values(as.color).flatMap(n=>Object.keys(n))].includes(e)}},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>as.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},square:{type:Boolean,default:!1},truncate:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e,{slots:n}){const{ui:s,attrs:u}=ra("button",eo(e,"ui"),as),{size:h,rounded:g}=qf({ui:s,props:e}),m=Ve(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),c=Ve(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),T=Ve(()=>e.square||!n.default&&!e.label),M=Ve(()=>{var se,Te;const W=((Te=(se=s.value.color)==null?void 0:se[e.color])==null?void 0:Te[e.variant])||s.value.variant[e.variant];return fs(tr(s.value.base,s.value.font,g.value,s.value.size[h.value],s.value.gap[h.value],e.padded&&s.value[T.value?"square":"padding"][h.value],W==null?void 0:W.replaceAll("{color}",e.color),e.block?s.value.block:s.value.inline),e.class)}),k=Ve(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),A=Ve(()=>e.loading&&!m.value?e.loadingIcon:e.trailingIcon||e.icon),L=Ve(()=>tr(s.value.icon.base,s.value.icon.size[h.value],e.loading&&s.value.icon.loading)),H=Ve(()=>tr(s.value.icon.base,s.value.icon.size[h.value],e.loading&&!m.value&&s.value.icon.loading)),X=Ve(()=>Zk(e));return{ui:s,attrs:u,isLeading:m,isTrailing:c,isSquare:T,buttonClass:M,leadingIconName:k,trailingIconName:A,leadingIconClass:L,trailingIconClass:H,linkProps:X}}});function hP(e,n,s,u,h,g){const m=$o,c=N1;return _t(),li(c,br({type:e.type,disabled:e.disabled||e.loading,class:e.buttonClass},{...e.linkProps,...e.attrs}),{default:xr(()=>[sr(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[e.isLeading&&e.leadingIconName?(_t(),li(m,{key:0,name:e.leadingIconName,class:Mt(e.leadingIconClass),"aria-hidden":"true"},null,8,["name","class"])):Li("",!0)]),sr(e.$slots,"default",{},()=>[e.label?(_t(),ri("span",{key:0,class:Mt([e.truncate?e.ui.truncate:""])},Ur(e.label),3)):Li("",!0)]),sr(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[e.isTrailing&&e.trailingIconName?(_t(),li(m,{key:0,name:e.trailingIconName,class:Mt(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])):Li("",!0)])]),_:3},16,["type","disabled","class"])}const Zf=jn(uP,[["render",hP]]),$1=()=>mh("color-mode").value,j1=e=>(Gx("data-v-82e603f3"),e=e(),Zx(),e),dP={class:"px-4 flex items-center border-b border-gray-200 dark:border-gray-800"},fP={class:"app-logo flex items-center"},pP=j1(()=>$i("h1",null,"japanmesh",-1)),mP=j1(()=>$i("div",{class:"grow"},null,-1)),gP=Ri({__name:"AppHeader",setup(e){const n=$1(),s=kt(""),u=Ve(()=>n.preference==="light"?"i-heroicons-sun":"i-heroicons-moon-16-solid");function h(){n.preference=n.preference==="light"?"dark":"light"}return Wr(()=>{fetch("https://api.github.com/repos/qazsato/japanmesh/releases/latest").then(m=>m.json()).then(m=>{s.value=m.tag_name})}),(g,m)=>{const c=v1,T=b1,M=Zf;return _t(),ri("header",dP,[$i("div",fP,[ei(c,{to:"/"},{default:xr(()=>[pP]),_:1}),ni(s)?(_t(),li(T,{key:0,label:ni(s),variant:"outline",color:"primary",size:"xs",class:"mx-2"},null,8,["label"])):Li("",!0)]),mP,ei(M,{icon:ni(u),size:"sm",color:"gray",square:"",variant:"ghost",onClick:h,class:"mx-1"},null,8,["icon"]),ei(M,{icon:"i-simple-icons-npm",size:"sm",color:"gray",square:"",variant:"ghost",to:"https://www.npmjs.com/package/japanmesh",target:"_blank",class:"mx-1"}),ei(M,{icon:"i-simple-icons-github",size:"sm",color:"gray",square:"",variant:"ghost",to:"https://github.com/qazsato/geo-docs",target:"_blank",class:"mx-1"})])}}}),yP=jn(gP,[["__scopeId","data-v-82e603f3"]]),U1=(e,n)=>{const s=Zr("form-events",void 0),u=Zr("form-group",void 0),h=Zr("form-inputs",void 0);u&&(e!=null&&e.id&&(u.inputId.value=e==null?void 0:e.id),h&&(h.value[u.name.value]=u.inputId.value));const g=kt(!1);function m(k,A){s&&s.emit({type:k,path:A})}function c(){m("blur",u==null?void 0:u.name.value),g.value=!0}function T(){m("change",u==null?void 0:u.name.value)}const M=h1(()=>{(g.value||u!=null&&u.eagerValidation.value)&&m("input",u==null?void 0:u.name.value)},300);return{inputId:Ve(()=>(e==null?void 0:e.id)??(u==null?void 0:u.inputId.value)),name:Ve(()=>(e==null?void 0:e.name)??(u==null?void 0:u.name.value)),size:Ve(()=>{var A;const k=n.size[u==null?void 0:u.size.value]?u==null?void 0:u.size.value:null;return(e==null?void 0:e.size)??k??((A=n==null?void 0:n.default)==null?void 0:A.size)}),color:Ve(()=>{var k;return(k=u==null?void 0:u.error)!=null&&k.value?"red":e==null?void 0:e.color}),emitFormBlur:c,emitFormInput:M,emitFormChange:T}},ls=ys(Di.ui.strategy,Di.ui.input,ly),_P=Ri({components:{UIcon:$o},inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>ls.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:null},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(ls.size).includes(e)}},color:{type:String,default:()=>ls.default.color,validator(e){return[...Di.ui.colors,...Object.keys(ls.color)].includes(e)}},variant:{type:String,default:()=>ls.default.variant,validator(e){return[...Object.keys(ls.variant),...Object.values(ls.color).flatMap(n=>Object.keys(n))].includes(e)}},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:n,slots:s}){const{ui:u,attrs:h}=ra("input",eo(e,"ui"),ls,eo(e,"class")),{size:g,rounded:m}=qf({ui:u,props:e}),{emitFormBlur:c,emitFormInput:T,size:M,color:k,inputId:A,name:L}=U1(e,ls),H=Ve(()=>g.value||M.value),X=kt($f({},e.modelModifiers,{trim:!1,lazy:!1,number:!1})),W=kt(null),se=()=>{var Ge;e.autofocus&&((Ge=W.value)==null||Ge.focus())},Te=Ge=>{X.value.trim&&(Ge=Ge.trim()),(X.value.number||e.type==="number")&&(Ge=Xk(Ge)),n("update:modelValue",Ge),T()},ye=Ge=>{X.value.lazy||Te(Ge.target.value)},j=Ge=>{if(e.type==="file"){const rt=Ge.target.files;n("change",rt)}else{const rt=Ge.target.value;n("change",rt),X.value.lazy&&Te(rt),X.value.trim&&(Ge.target.value=rt.trim())}},oe=Ge=>{c(),n("blur",Ge)};Wr(()=>{setTimeout(()=>{se()},e.autofocusDelay)});const ee=Ve(()=>{var rt,Ke;const Ge=((Ke=(rt=u.value.color)==null?void 0:rt[k.value])==null?void 0:Ke[e.variant])||u.value.variant[e.variant];return fs(tr(u.value.base,u.value.form,m.value,u.value.placeholder,e.type==="file"&&u.value.file.base,u.value.size[H.value],e.padded?u.value.padding[H.value]:"p-0",Ge==null?void 0:Ge.replaceAll("{color}",k.value),(ne.value||s.leading)&&u.value.leading.padding[H.value],(Ie.value||s.trailing)&&u.value.trailing.padding[H.value]),e.inputClass)}),ne=Ve(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),Ie=Ve(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),Ee=Ve(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),Me=Ve(()=>e.loading&&!ne.value?e.loadingIcon:e.trailingIcon||e.icon),pe=Ve(()=>tr(u.value.icon.leading.wrapper,u.value.icon.leading.pointer,u.value.icon.leading.padding[H.value])),Ae=Ve(()=>tr(u.value.icon.base,k.value&&Di.ui.colors.includes(k.value)&&u.value.icon.color.replaceAll("{color}",k.value),u.value.icon.size[H.value],e.loading&&u.value.icon.loading)),Le=Ve(()=>tr(u.value.icon.trailing.wrapper,u.value.icon.trailing.pointer,u.value.icon.trailing.padding[H.value])),Oe=Ve(()=>tr(u.value.icon.base,k.value&&Di.ui.colors.includes(k.value)&&u.value.icon.color.replaceAll("{color}",k.value),u.value.icon.size[H.value],e.loading&&!ne.value&&u.value.icon.loading));return{ui:u,attrs:h,name:L,inputId:A,input:W,isLeading:ne,isTrailing:Ie,inputClass:ee,leadingIconName:Ee,leadingIconClass:Ae,leadingWrapperIconClass:pe,trailingIconName:Me,trailingIconClass:Oe,trailingWrapperIconClass:Le,onInput:ye,onChange:j,onBlur:oe}}}),vP=["id","name","value","type","required","placeholder","disabled"];function xP(e,n,s,u,h,g){const m=$o;return _t(),ri("div",{class:Mt(e.type==="hidden"?"hidden":e.ui.wrapper)},[$i("input",br({id:e.inputId,ref:"input",name:e.name,value:e.modelValue,type:e.type,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass},e.attrs,{onInput:n[0]||(n[0]=(...c)=>e.onInput&&e.onInput(...c)),onBlur:n[1]||(n[1]=(...c)=>e.onBlur&&e.onBlur(...c)),onChange:n[2]||(n[2]=(...c)=>e.onChange&&e.onChange(...c))}),null,16,vP),sr(e.$slots,"default"),e.isLeading&&e.leadingIconName||e.$slots.leading?(_t(),ri("span",{key:0,class:Mt(e.leadingWrapperIconClass)},[sr(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[ei(m,{name:e.leadingIconName,class:Mt(e.leadingIconClass)},null,8,["name","class"])])],2)):Li("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(_t(),ri("span",{key:1,class:Mt(e.trailingWrapperIconClass)},[sr(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[ei(m,{name:e.trailingIconName,class:Mt(e.trailingIconClass)},null,8,["name","class"])])],2)):Li("",!0)],2)}const bP=jn(_P,[["render",xP]]),ja=ys(Di.ui.strategy,Di.ui.avatar,FM),wP=Ri({components:{UIcon:$o},inheritAttrs:!1,props:{as:{type:[String,Object],default:"img"},src:{type:[String,Boolean],default:null},alt:{type:String,default:null},text:{type:String,default:null},icon:{type:String,default:()=>ja.default.icon},size:{type:String,default:()=>ja.default.size,validator(e){return Object.keys(ja.size).includes(e)}},chipColor:{type:String,default:()=>ja.default.chipColor,validator(e){return["gray",...Di.ui.colors].includes(e)}},chipPosition:{type:String,default:()=>ja.default.chipPosition,validator(e){return Object.keys(ja.chip.position).includes(e)}},chipText:{type:[String,Number],default:null},imgClass:{type:String,default:""},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:n,attrs:s}=ra("avatar",eo(e,"ui"),ja),u=Ve(()=>typeof e.src=="boolean"?null:e.src),h=Ve(()=>(e.alt||"").split(" ").map(A=>A.charAt(0)).join("").substring(0,2)),g=Ve(()=>fs(tr(n.value.wrapper,(M.value||!u.value)&&n.value.background,n.value.rounded,n.value.size[e.size]),e.class)),m=Ve(()=>fs(tr(n.value.rounded,n.value.size[e.size]),e.imgClass)),c=Ve(()=>tr(n.value.icon.base,n.value.icon.size[e.size])),T=Ve(()=>tr(n.value.chip.base,n.value.chip.size[e.size],n.value.chip.position[e.chipPosition],n.value.chip.background.replaceAll("{color}",e.chipColor))),M=kt(!1);Zi(()=>e.src,()=>{M.value&&(M.value=!1)});function k(){M.value=!0}return{ui:n,attrs:s,wrapperClass:g,imgClass:m,iconClass:c,chipClass:T,url:u,placeholder:h,error:M,onError:k}}});function EP(e,n,s,u,h,g){const m=$o;return _t(),ri("span",{class:Mt(e.wrapperClass)},[e.url&&!e.error?(_t(),li(hs(e.as),br({key:0,class:e.imgClass,alt:e.alt,src:e.url},e.attrs,{onError:e.onError}),null,16,["class","alt","src","onError"])):e.text?(_t(),ri("span",{key:1,class:Mt(e.ui.text)},Ur(e.text),3)):e.icon?(_t(),li(m,{key:2,name:e.icon,class:Mt(e.iconClass)},null,8,["name","class"])):e.placeholder?(_t(),ri("span",{key:3,class:Mt(e.ui.placeholder)},Ur(e.placeholder),3)):Li("",!0),e.chipColor?(_t(),ri("span",{key:4,class:Mt(e.chipClass)},Ur(e.chipText),3)):Li("",!0),sr(e.$slots,"default")],2)}const Wf=jn(wP,[["render",EP]]),SP=Symbol.for("nuxt:client-only"),TP="data-n-ids",IP="-";function CP(e){var h,g,m,c,T,M;if(typeof e!="string")throw new TypeError("[nuxt] [useId] key must be a string.");e=`n${e.slice(1)}`;const n=Yi(),s=la();if(!s)throw new TypeError("[nuxt] `useId` must be called within a component setup function.");n._id||(n._id=0),s._nuxtIdIndex||(s._nuxtIdIndex={}),(h=s._nuxtIdIndex)[e]||(h[e]=0);const u=e+IP+s._nuxtIdIndex[e]++;if(n.payload.serverRendered&&n.isHydrating&&!Zr(SP,!1)){const k=((g=s.vnode.el)==null?void 0:g.nodeType)===8&&((c=(m=s.vnode.el)==null?void 0:m.nextElementSibling)!=null&&c.getAttribute)?(T=s.vnode.el)==null?void 0:T.nextElementSibling:s.vnode.el,A=JSON.parse(((M=k==null?void 0:k.getAttribute)==null?void 0:M.call(k,TP))||"{}");if(A[u])return A[u]}return e+"_"+n._id++}function Ou(e,n,s){let u=s.initialDeps??[],h;return()=>{var g,m,c,T;let M;s.key&&((g=s.debug)!=null&&g.call(s))&&(M=Date.now());const k=e();if(!(k.length!==u.length||k.some((H,X)=>u[X]!==H)))return h;u=k;let L;if(s.key&&((m=s.debug)!=null&&m.call(s))&&(L=Date.now()),h=n(...k),s.key&&((c=s.debug)!=null&&c.call(s))){const H=Math.round((Date.now()-M)*100)/100,X=Math.round((Date.now()-L)*100)/100,W=X/16,se=(Te,ye)=>{for(Te=String(Te);Te.length<ye;)Te=" "+Te;return Te};console.info(`%c ${se(X,5)} /${se(H,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*W,120))}deg 100% 31%);`,s==null?void 0:s.key)}return(T=s==null?void 0:s.onChange)==null||T.call(s,h),h}}function Am(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const AP=(e,n)=>Math.abs(e-n)<1,kP=(e,n,s)=>{let u;return function(...h){e.clearTimeout(u),u=e.setTimeout(()=>n.apply(this,h),s)}},MP=e=>e,LP=e=>{const n=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),u=[];for(let h=n;h<=s;h++)u.push(h);return u},PP=(e,n)=>{const s=e.scrollElement;if(!s)return;const u=e.targetWindow;if(!u)return;const h=m=>{const{width:c,height:T}=m;n({width:Math.round(c),height:Math.round(T)})};if(h(s.getBoundingClientRect()),!u.ResizeObserver)return()=>{};const g=new u.ResizeObserver(m=>{const c=m[0];if(c!=null&&c.borderBoxSize){const T=c.borderBoxSize[0];if(T){h({width:T.inlineSize,height:T.blockSize});return}}h(s.getBoundingClientRect())});return g.observe(s,{box:"border-box"}),()=>{g.unobserve(s)}},Zv={passive:!0},zP=typeof window>"u"?!0:"onscrollend"in window,DP=(e,n)=>{const s=e.scrollElement;if(!s)return;const u=e.targetWindow;if(!u)return;let h=0;const g=zP?()=>{}:kP(u,()=>{n(h,!1)},e.options.isScrollingResetDelay),m=M=>()=>{h=s[e.options.horizontal?"scrollLeft":"scrollTop"],g(),n(h,M)},c=m(!0),T=m(!1);return T(),s.addEventListener("scroll",c,Zv),s.addEventListener("scrollend",T,Zv),()=>{s.removeEventListener("scroll",c),s.removeEventListener("scrollend",T)}},RP=(e,n,s)=>{if(n!=null&&n.borderBoxSize){const u=n.borderBoxSize[0];if(u)return Math.round(u[s.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[s.options.horizontal?"width":"height"])},OP=(e,{adjustments:n=0,behavior:s},u)=>{var h,g;const m=e+n;(g=(h=u.scrollElement)==null?void 0:h.scrollTo)==null||g.call(h,{[u.options.horizontal?"left":"top"]:m,behavior:s})};class BP{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let s=null;const u=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(h=>{h.forEach(g=>{this._measureElement(g.target,g)})}));return{disconnect:()=>{var h;return(h=u())==null?void 0:h.disconnect()},observe:h=>{var g;return(g=u())==null?void 0:g.observe(h,{box:"border-box"})},unobserve:h=>{var g;return(g=u())==null?void 0:g.unobserve(h)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([u,h])=>{typeof h>"u"&&delete s[u]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:MP,rangeExtractor:LP,onChange:()=>{},measureElement:RP,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,...s}},this.notify=(s,u)=>{var h,g;const{startIndex:m,endIndex:c}=this.range??{startIndex:void 0,endIndex:void 0},T=this.calculateRange();(s||m!==(T==null?void 0:T.startIndex)||c!==(T==null?void 0:T.endIndex))&&((g=(h=this.options).onChange)==null||g.call(h,this,u))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{var s;const u=this.options.getScrollElement();this.scrollElement!==u&&(this.cleanup(),this.scrollElement=u,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,h=>{this.scrollRect=h,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(h,g)=>{this.scrollAdjustments=0,this.scrollDirection=g?this.scrollOffset<h?"forward":"backward":null,this.scrollOffset=h;const m=this.isScrolling;this.isScrolling=g,this.notify(m!==g,g)})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurementOptions=Ou(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(s,u,h,g)=>(this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:u,scrollMargin:h,getItemKey:g}),{key:!1}),this.getFurthestMeasurement=(s,u)=>{const h=new Map,g=new Map;for(let m=u-1;m>=0;m--){const c=s[m];if(h.has(c.lane))continue;const T=g.get(c.lane);if(T==null||c.end>T.end?g.set(c.lane,c):c.end<T.end&&h.set(c.lane,!0),h.size===this.options.lanes)break}return g.size===this.options.lanes?Array.from(g.values()).sort((m,c)=>m.end===c.end?m.index-c.index:m.end-c.end)[0]:void 0},this.getMeasurements=Ou(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:u,scrollMargin:h,getItemKey:g},m)=>{const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const T=this.measurementsCache.slice(0,c);for(let M=c;M<s;M++){const k=g(M),A=this.options.lanes===1?T[M-1]:this.getFurthestMeasurement(T,M),L=A?A.end+this.options.gap:u+h,H=m.get(k),X=typeof H=="number"?H:this.options.estimateSize(M),W=L+X,se=A?A.lane:M%this.options.lanes;T[M]={index:M,start:L,size:X,end:W,key:k,lane:se}}return this.measurementsCache=T,T},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Ou(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(s,u,h)=>this.range=s.length>0&&u>0?FP({measurements:s,outerSize:u,scrollOffset:h}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=Ou(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(s,u,h,g)=>u===null?[]:s({startIndex:u.startIndex,endIndex:u.endIndex,overscan:h,count:g}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const u=this.options.indexAttribute,h=s.getAttribute(u);return h?parseInt(h,10):(console.warn(`Missing attribute name '${u}={index}' on measured element.`),-1)},this._measureElement=(s,u)=>{const h=this.measurementsCache[this.indexFromElement(s)];if(!h||!s.isConnected){this.measureElementCache.forEach((c,T)=>{c===s&&(this.observer.unobserve(s),this.measureElementCache.delete(T))});return}const g=this.measureElementCache.get(h.key);g!==s&&(g&&this.observer.unobserve(g),this.observer.observe(s),this.measureElementCache.set(h.key,s));const m=this.options.measureElement(s,u,this);this.resizeItem(h,m)},this.resizeItem=(s,u)=>{const h=this.itemSizeCache.get(s.key)??s.size,g=u-h;g!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,g,this):s.start<this.scrollOffset+this.scrollAdjustments)&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=g,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,u)),this.notify(!0,!1))},this.measureElement=s=>{s&&this._measureElement(s,void 0)},this.getVirtualItems=Ou(()=>[this.getIndexes(),this.getMeasurements()],(s,u)=>{const h=[];for(let g=0,m=s.length;g<m;g++){const c=s[g],T=u[c];h.push(T)}return h},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const u=this.getMeasurements();return Am(u[q1(0,u.length-1,h=>Am(u[h]).start,s)])},this.getOffsetForAlignment=(s,u)=>{const h=this.getSize();u==="auto"&&(s<=this.scrollOffset?u="start":s>=this.scrollOffset+h?u="end":u="start"),u==="start"?s=s:u==="end"?s=s-h:u==="center"&&(s=s-h/2);const g=this.options.horizontal?"scrollWidth":"scrollHeight",c=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[g]:this.scrollElement[g]:0)-this.getSize();return Math.max(Math.min(c,s),0)},this.getOffsetForIndex=(s,u="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const h=Am(this.getMeasurements()[s]);if(u==="auto")if(h.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)u="end";else if(h.start<=this.scrollOffset+this.options.scrollPaddingStart)u="start";else return[this.scrollOffset,u];const g=u==="end"?h.end+this.options.scrollPaddingEnd:h.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(g,u),u]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(s,{align:u="start",behavior:h}={})=>{this.cancelScrollToIndex(),h==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,u),{adjustments:void 0,behavior:h})},this.scrollToIndex=(s,{align:u="auto",behavior:h}={})=>{s=Math.max(0,Math.min(s,this.options.count-1)),this.cancelScrollToIndex(),h==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[g,m]=this.getOffsetForIndex(s,u);this._scrollToOffset(g,{adjustments:void 0,behavior:h}),h!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(s))){const[T]=this.getOffsetForIndex(s,m);AP(T,this.scrollOffset)||this.scrollToIndex(s,{align:m,behavior:h})}else this.scrollToIndex(s,{align:m,behavior:h})}))},this.scrollBy=(s,{behavior:u}={})=>{this.cancelScrollToIndex(),u==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+s,{adjustments:void 0,behavior:u})},this.getTotalSize=()=>{var s;const u=this.getMeasurements();let h;return u.length===0?h=this.options.paddingStart:h=this.options.lanes===1?((s=u[u.length-1])==null?void 0:s.end)??0:Math.max(...u.slice(-this.options.lanes).map(g=>g.end)),h-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(s,{adjustments:u,behavior:h})=>{this.options.scrollToFn(s,{behavior:h,adjustments:u},this)},this.measure=()=>{var s,u;this.itemSizeCache=new Map,(u=(s=this.options).onChange)==null||u.call(s,this,!1)},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(s=>{this.itemSizeCache.set(s.key,s.size)}),this.notify(!1,!1)}}const q1=(e,n,s,u)=>{for(;e<=n;){const h=(e+n)/2|0,g=s(h);if(g<u)e=h+1;else if(g>u)n=h-1;else return h}return e>0?e-1:0};function FP({measurements:e,outerSize:n,scrollOffset:s}){const u=e.length-1,g=q1(0,u,c=>e[c].start,s);let m=g;for(;m<u&&e[m].end<s+n;)m++;return{startIndex:g,endIndex:m}}function VP(e){const n=new BP(ni(e)),s=uc(n),u=n._didMount();return Zi(()=>ni(e).getScrollElement(),h=>{h&&n._willUpdate()},{immediate:!0}),Zi(()=>ni(e),h=>{n.setOptions({...h,onChange:(g,m)=>{var c;E0(s),(c=h.onChange)==null||c.call(h,g,m)}}),n._willUpdate(),E0(s)},{immediate:!0}),Tx(u),s}function NP(e){return VP(Ve(()=>({observeElementRect:PP,observeElementOffset:DP,scrollToFn:OP,...ni(e)})))}function H1(e,n,s){let u=kt(s==null?void 0:s.value),h=Ve(()=>e.value!==void 0);return[Ve(()=>h.value?e.value:u.value),function(g){return h.value||(u.value=g),n==null?void 0:n(g)}]}function $P(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(n=>setTimeout(()=>{throw n}))}function Tf(){let e=[],n={addEventListener(s,u,h,g){return s.addEventListener(u,h,g),n.add(()=>s.removeEventListener(u,h,g))},requestAnimationFrame(...s){let u=requestAnimationFrame(...s);n.add(()=>cancelAnimationFrame(u))},nextFrame(...s){n.requestAnimationFrame(()=>{n.requestAnimationFrame(...s)})},setTimeout(...s){let u=setTimeout(...s);n.add(()=>clearTimeout(u))},microTask(...s){let u={current:!0};return $P(()=>{u.current&&s[0]()}),n.add(()=>{u.current=!1})},style(s,u,h){let g=s.style.getPropertyValue(u);return Object.assign(s.style,{[u]:h}),this.add(()=>{Object.assign(s.style,{[u]:g})})},group(s){let u=Tf();return s(u),this.add(()=>u.dispose())},add(s){return e.push(s),()=>{let u=e.indexOf(s);if(u>=0)for(let h of e.splice(u,1))h()}},dispose(){for(let s of e.splice(0))s()}};return n}function jP(){let e=Tf();return sa(()=>e.dispose()),e}function UP(){let e=jP();return n=>{e.dispose(),e.nextFrame(n)}}let G1=Symbol("headlessui.useid"),qP=0;function tl(){return Zr(G1,()=>`${++qP}`)()}function HP(e){aa(G1,e)}function Xt(e){var n;if(e==null||e.value==null)return null;let s=(n=e.value.$el)!=null?n:e.value;return s instanceof Node?s:null}function Gr(e,n,...s){if(e in n){let h=n[e];return typeof h=="function"?h(...s):h}let u=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(n).map(h=>`"${h}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(u,Gr),u}var GP=Object.defineProperty,ZP=(e,n,s)=>n in e?GP(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s,Wv=(e,n,s)=>(ZP(e,typeof n!="symbol"?n+"":n,s),s);let WP=class{constructor(){Wv(this,"current",this.detect()),Wv(this,"currentId",0)}set(n){this.current!==n&&(this.currentId=0,this.current=n)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},yy=new WP;function _y(e){if(yy.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(e!=null&&e.hasOwnProperty("value")){let n=Xt(e);if(n)return n.ownerDocument}return document}let Kv=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var KP=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(KP||{}),XP=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(XP||{}),JP=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(JP||{}),vy=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(vy||{});function Z1(e,n=0){var s;return e===((s=_y(e))==null?void 0:s.body)?!1:Gr(n,{0(){return e.matches(Kv)},1(){let u=e;for(;u!==null;){if(u.matches(Kv))return!0;u=u.parentElement}return!1}})}var YP=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(YP||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function W1(e,n=s=>s){return e.slice().sort((s,u)=>{let h=n(s),g=n(u);if(h===null||g===null)return 0;let m=h.compareDocumentPosition(g);return m&Node.DOCUMENT_POSITION_FOLLOWING?-1:m&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function QP(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function ez(){return/Android/gi.test(window.navigator.userAgent)}function K1(){return QP()||ez()}function Ud(e,n,s){yy.isServer||Vn(u=>{document.addEventListener(e,n,s),u(()=>document.removeEventListener(e,n,s))})}function tz(e,n,s){yy.isServer||Vn(u=>{window.addEventListener(e,n,s),u(()=>window.removeEventListener(e,n,s))})}function X1(e,n,s=Ve(()=>!0)){function u(g,m){if(!s.value||g.defaultPrevented)return;let c=m(g);if(c===null||!c.getRootNode().contains(c))return;let T=function M(k){return typeof k=="function"?M(k()):Array.isArray(k)||k instanceof Set?k:[k]}(e);for(let M of T){if(M===null)continue;let k=M instanceof HTMLElement?M:Xt(M);if(k!=null&&k.contains(c)||g.composed&&g.composedPath().includes(k))return}return!Z1(c,vy.Loose)&&c.tabIndex!==-1&&g.preventDefault(),n(g,c)}let h=kt(null);Ud("pointerdown",g=>{var m,c;s.value&&(h.value=((c=(m=g.composedPath)==null?void 0:m.call(g))==null?void 0:c[0])||g.target)},!0),Ud("mousedown",g=>{var m,c;s.value&&(h.value=((c=(m=g.composedPath)==null?void 0:m.call(g))==null?void 0:c[0])||g.target)},!0),Ud("click",g=>{K1()||h.value&&(u(g,()=>h.value),h.value=null)},!0),Ud("touchend",g=>u(g,()=>g.target instanceof HTMLElement?g.target:null),!0),tz("blur",g=>u(g,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Xv(e,n){if(e)return e;let s=n??"button";if(typeof s=="string"&&s.toLowerCase()==="button")return"button"}function J1(e,n){let s=kt(Xv(e.value.type,e.value.as));return Wr(()=>{s.value=Xv(e.value.type,e.value.as)}),Vn(()=>{var u;s.value||Xt(n)&&Xt(n)instanceof HTMLButtonElement&&!((u=Xt(n))!=null&&u.hasAttribute("type"))&&(s.value="button")}),s}function Jv(e){return[e.screenX,e.screenY]}function Y1(){let e=kt([-1,-1]);return{wasMoved(n){let s=Jv(n);return e.value[0]===s[0]&&e.value[1]===s[1]?!1:(e.value=s,!0)},update(n){e.value=Jv(n)}}}function iz({container:e,accept:n,walk:s,enabled:u}){Vn(()=>{let h=e.value;if(!h||u!==void 0&&!u.value)return;let g=_y(e);if(!g)return;let m=Object.assign(T=>n(T),{acceptNode:n}),c=g.createTreeWalker(h,NodeFilter.SHOW_ELEMENT,m,!1);for(;c.nextNode();)s(c.currentNode)})}var Ya=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Ya||{}),rz=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(rz||{});function jo({visible:e=!0,features:n=0,ourProps:s,theirProps:u,...h}){var g;let m=ew(u,s),c=Object.assign(h,{props:m});if(e||n&2&&m.static)return km(c);if(n&1){let T=(g=m.unmount)==null||g?0:1;return Gr(T,{0(){return null},1(){return km({...h,props:{...m,hidden:!0,style:{display:"none"}}})}})}return km(c)}function km({props:e,attrs:n,slots:s,slot:u,name:h}){var g,m;let{as:c,...T}=gh(e,["unmount","static"]),M=(g=s.default)==null?void 0:g.call(s,u),k={};if(u){let A=!1,L=[];for(let[H,X]of Object.entries(u))typeof X=="boolean"&&(A=!0),X===!0&&L.push(H);A&&(k["data-headlessui-state"]=L.join(" "))}if(c==="template"){if(M=Q1(M??[]),Object.keys(T).length>0||Object.keys(n).length>0){let[A,...L]=M??[];if(!nz(A)||L.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${h} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(T).concat(Object.keys(n)).map(W=>W.trim()).filter((W,se,Te)=>Te.indexOf(W)===se).sort((W,se)=>W.localeCompare(se)).map(W=>`  - ${W}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(W=>`  - ${W}`).join(`
`)].join(`
`));let H=ew((m=A.props)!=null?m:{},T,k),X=Fo(A,H,!0);for(let W in H)W.startsWith("on")&&(X.props||(X.props={}),X.props[W]=H[W]);return X}return Array.isArray(M)&&M.length===1?M[0]:M}return Nn(c,Object.assign({},T,k),{default:()=>M})}function Q1(e){return e.flatMap(n=>n.type===ar?Q1(n.children):[n])}function ew(...e){if(e.length===0)return{};if(e.length===1)return e[0];let n={},s={};for(let u of e)for(let h in u)h.startsWith("on")&&typeof u[h]=="function"?(s[h]!=null||(s[h]=[]),s[h].push(u[h])):n[h]=u[h];if(n.disabled||n["aria-disabled"])return Object.assign(n,Object.fromEntries(Object.keys(s).map(u=>[u,void 0])));for(let u in s)Object.assign(n,{[u](h,...g){let m=s[u];for(let c of m){if(h instanceof Event&&h.defaultPrevented)return;c(h,...g)}}});return n}function tw(e){let n=Object.assign({},e);for(let s in n)n[s]===void 0&&delete n[s];return n}function gh(e,n=[]){let s=Object.assign({},e);for(let u of n)u in s&&delete s[u];return s}function nz(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var xy=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(xy||{});let iw=Ri({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:n,attrs:s}){return()=>{var u;let{features:h,...g}=e,m={"aria-hidden":(h&2)===2?!0:(u=g["aria-hidden"])!=null?u:void 0,hidden:(h&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(h&4)===4&&(h&2)!==2&&{display:"none"}}};return jo({ourProps:m,theirProps:g,slot:{},attrs:s,slots:n,name:"Hidden"})}}}),rw=Symbol("Context");var ps=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(ps||{});function nw(){return Zr(rw,null)}function ow(e){aa(rw,e)}var bi=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(bi||{}),sw=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(sw||{});function oz(e){function n(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",n))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",n),n())}let Ha=[];oz(()=>{function e(n){n.target instanceof HTMLElement&&n.target!==document.body&&Ha[0]!==n.target&&(Ha.unshift(n.target),Ha=Ha.filter(s=>s!=null&&s.isConnected),Ha.splice(10))}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function sz(e){throw new Error("Unexpected object: "+e)}var _i=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(_i||{});function wg(e,n){let s=n.resolveItems();if(s.length<=0)return null;let u=n.resolveActiveIndex(),h=u??-1;switch(e.focus){case 0:{for(let g=0;g<s.length;++g)if(!n.resolveDisabled(s[g],g,s))return g;return u}case 1:{h===-1&&(h=s.length);for(let g=h-1;g>=0;--g)if(!n.resolveDisabled(s[g],g,s))return g;return u}case 2:{for(let g=h+1;g<s.length;++g)if(!n.resolveDisabled(s[g],g,s))return g;return u}case 3:{for(let g=s.length-1;g>=0;--g)if(!n.resolveDisabled(s[g],g,s))return g;return u}case 4:{for(let g=0;g<s.length;++g)if(n.resolveId(s[g],g,s)===e.id)return g;return u}case 5:return null;default:sz(e)}}function by(e={},n=null,s=[]){for(let[u,h]of Object.entries(e))lw(s,aw(n,u),h);return s}function aw(e,n){return e?e+"["+n+"]":n}function lw(e,n,s){if(Array.isArray(s))for(let[u,h]of s.entries())lw(e,aw(n,u.toString()),h);else s instanceof Date?e.push([n,s.toISOString()]):typeof s=="boolean"?e.push([n,s?"1":"0"]):typeof s=="string"?e.push([n,s]):typeof s=="number"?e.push([n,`${s}`]):s==null?e.push([n,""]):by(s,n,e)}var az={};function lz(e,n){return e===n}var cz=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(cz||{}),uz=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(uz||{}),hz=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(hz||{});let cw=Symbol("ComboboxContext");function bc(e){let n=Zr(cw,null);if(n===null){let s=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,bc),s}return n}let uw=Symbol("VirtualContext"),dz=Ri({name:"VirtualProvider",setup(e,{slots:n}){let s=bc("VirtualProvider"),u=Ve(()=>{let c=Xt(s.optionsRef);if(!c)return{start:0,end:0};let T=window.getComputedStyle(c);return{start:parseFloat(T.paddingBlockStart||T.paddingTop),end:parseFloat(T.paddingBlockEnd||T.paddingBottom)}}),h=NP(Ve(()=>({scrollPaddingStart:u.value.start,scrollPaddingEnd:u.value.end,count:s.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return Xt(s.optionsRef)},overscan:12}))),g=Ve(()=>{var c;return(c=s.virtual.value)==null?void 0:c.options}),m=kt(0);return Zi([g],()=>{m.value+=1}),aa(uw,s.virtual.value?h:null),()=>[Nn("div",{style:{position:"relative",width:"100%",height:`${h.value.getTotalSize()}px`},ref:c=>{if(c){if(typeof process<"u"&&az.JEST_WORKER_ID!==void 0||s.activationTrigger.value===0)return;s.activeOptionIndex.value!==null&&s.virtual.value.options.length>s.activeOptionIndex.value&&h.value.scrollToIndex(s.activeOptionIndex.value)}}},h.value.getVirtualItems().map(c=>Fo(n.default({option:s.virtual.value.options[c.index],open:s.comboboxState.value===0})[0],{key:`${m.value}-${c.index}`,"data-index":c.index,"aria-setsize":s.virtual.value.options.length,"aria-posinset":c.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${c.start}px)`,overflowAnchor:"none"}})))]}}),fz=Ri({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:n,attrs:s,emit:u}){let h=kt(1),g=kt(null),m=kt(null),c=kt(null),T=kt(null),M=kt({static:!1,hold:!1}),k=kt([]),A=kt(null),L=kt(2),H=kt(!1);function X(pe=Ae=>Ae){let Ae=A.value!==null?k.value[A.value]:null,Le=pe(k.value.slice()),Oe=Le.length>0&&Le[0].dataRef.order.value!==null?Le.sort((rt,Ke)=>rt.dataRef.order.value-Ke.dataRef.order.value):W1(Le,rt=>Xt(rt.dataRef.domRef)),Ge=Ae?Oe.indexOf(Ae):null;return Ge===-1&&(Ge=null),{options:Oe,activeOptionIndex:Ge}}let W=Ve(()=>e.multiple?1:0),se=Ve(()=>e.nullable),[Te,ye]=H1(Ve(()=>e.modelValue),pe=>u("update:modelValue",pe),Ve(()=>e.defaultValue)),j=Ve(()=>Te.value===void 0?Gr(W.value,{1:[],0:void 0}):Te.value),oe=null,ee=null;function ne(pe){return Gr(W.value,{0(){return ye==null?void 0:ye(pe)},1:()=>{let Ae=Vt(Ee.value.value).slice(),Le=Vt(pe),Oe=Ae.findIndex(Ge=>Ee.compare(Le,Vt(Ge)));return Oe===-1?Ae.push(Le):Ae.splice(Oe,1),ye==null?void 0:ye(Ae)}})}let Ie=Ve(()=>{});Zi([Ie],([pe],[Ae])=>{if(Ee.virtual.value&&pe&&Ae&&A.value!==null){let Le=pe.indexOf(Ae[A.value]);Le!==-1?A.value=Le:A.value=null}});let Ee={comboboxState:h,value:j,mode:W,compare(pe,Ae){if(typeof e.by=="string"){let Le=e.by;return(pe==null?void 0:pe[Le])===(Ae==null?void 0:Ae[Le])}return e.by===null?lz(pe,Ae):e.by(pe,Ae)},calculateIndex(pe){return Ee.virtual.value?e.by===null?Ee.virtual.value.options.indexOf(pe):Ee.virtual.value.options.findIndex(Ae=>Ee.compare(Ae,pe)):k.value.findIndex(Ae=>Ee.compare(Ae.dataRef.value,pe))},defaultValue:Ve(()=>e.defaultValue),nullable:se,immediate:Ve(()=>!1),virtual:Ve(()=>null),inputRef:m,labelRef:g,buttonRef:c,optionsRef:T,disabled:Ve(()=>e.disabled),options:k,change(pe){ye(pe)},activeOptionIndex:Ve(()=>{if(H.value&&A.value===null&&(Ee.virtual.value?Ee.virtual.value.options.length>0:k.value.length>0)){if(Ee.virtual.value){let Ae=Ee.virtual.value.options.findIndex(Le=>{var Oe;return!((Oe=Ee.virtual.value)!=null&&Oe.disabled(Le))});if(Ae!==-1)return Ae}let pe=k.value.findIndex(Ae=>!Ae.dataRef.disabled);if(pe!==-1)return pe}return A.value}),activationTrigger:L,optionsPropsRef:M,closeCombobox(){H.value=!1,!e.disabled&&h.value!==1&&(h.value=1,A.value=null)},openCombobox(){if(H.value=!0,!e.disabled&&h.value!==0){if(Ee.value.value){let pe=Ee.calculateIndex(Ee.value.value);pe!==-1&&(A.value=pe)}h.value=0}},setActivationTrigger(pe){L.value=pe},goToOption(pe,Ae,Le){H.value=!1,oe!==null&&cancelAnimationFrame(oe),oe=requestAnimationFrame(()=>{if(e.disabled||T.value&&!M.value.static&&h.value===1)return;if(Ee.virtual.value){A.value=pe===_i.Specific?Ae:wg({focus:pe},{resolveItems:()=>Ee.virtual.value.options,resolveActiveIndex:()=>{var rt,Ke;return(Ke=(rt=Ee.activeOptionIndex.value)!=null?rt:Ee.virtual.value.options.findIndex(dt=>{var nt;return!((nt=Ee.virtual.value)!=null&&nt.disabled(dt))}))!=null?Ke:null},resolveDisabled:rt=>Ee.virtual.value.disabled(rt),resolveId(){throw new Error("Function not implemented.")}}),L.value=Le??2;return}let Oe=X();if(Oe.activeOptionIndex===null){let rt=Oe.options.findIndex(Ke=>!Ke.dataRef.disabled);rt!==-1&&(Oe.activeOptionIndex=rt)}let Ge=pe===_i.Specific?Ae:wg({focus:pe},{resolveItems:()=>Oe.options,resolveActiveIndex:()=>Oe.activeOptionIndex,resolveId:rt=>rt.id,resolveDisabled:rt=>rt.dataRef.disabled});A.value=Ge,L.value=Le??2,k.value=Oe.options})},selectOption(pe){let Ae=k.value.find(Oe=>Oe.id===pe);if(!Ae)return;let{dataRef:Le}=Ae;ne(Le.value)},selectActiveOption(){if(Ee.activeOptionIndex.value!==null){if(Ee.virtual.value)ne(Ee.virtual.value.options[Ee.activeOptionIndex.value]);else{let{dataRef:pe}=k.value[Ee.activeOptionIndex.value];ne(pe.value)}Ee.goToOption(_i.Specific,Ee.activeOptionIndex.value)}},registerOption(pe,Ae){let Le=Bo({id:pe,dataRef:Ae});if(Ee.virtual.value){k.value.push(Le);return}ee&&cancelAnimationFrame(ee);let Oe=X(Ge=>(Ge.push(Le),Ge));A.value===null&&Ee.isSelected(Ae.value.value)&&(Oe.activeOptionIndex=Oe.options.indexOf(Le)),k.value=Oe.options,A.value=Oe.activeOptionIndex,L.value=2,Oe.options.some(Ge=>!Xt(Ge.dataRef.domRef))&&(ee=requestAnimationFrame(()=>{let Ge=X();k.value=Ge.options,A.value=Ge.activeOptionIndex}))},unregisterOption(pe,Ae){if(oe!==null&&cancelAnimationFrame(oe),Ae&&(H.value=!0),Ee.virtual.value){k.value=k.value.filter(Oe=>Oe.id!==pe);return}let Le=X(Oe=>{let Ge=Oe.findIndex(rt=>rt.id===pe);return Ge!==-1&&Oe.splice(Ge,1),Oe});k.value=Le.options,A.value=Le.activeOptionIndex,L.value=2},isSelected(pe){return Gr(W.value,{0:()=>Ee.compare(Vt(Ee.value.value),Vt(pe)),1:()=>Vt(Ee.value.value).some(Ae=>Ee.compare(Vt(Ae),Vt(pe)))})},isActive(pe){return A.value===Ee.calculateIndex(pe)}};X1([m,c,T],()=>Ee.closeCombobox(),Ve(()=>h.value===0)),aa(cw,Ee),ow(Ve(()=>Gr(h.value,{0:ps.Open,1:ps.Closed})));let Me=Ve(()=>{var pe;return(pe=Xt(m))==null?void 0:pe.closest("form")});return Wr(()=>{Zi([Me],()=>{if(!Me.value||e.defaultValue===void 0)return;function pe(){Ee.change(e.defaultValue)}return Me.value.addEventListener("reset",pe),()=>{var Ae;(Ae=Me.value)==null||Ae.removeEventListener("reset",pe)}},{immediate:!0})}),()=>{var pe,Ae,Le;let{name:Oe,disabled:Ge,form:rt,...Ke}=e,dt={open:h.value===0,disabled:Ge,activeIndex:Ee.activeOptionIndex.value,activeOption:Ee.activeOptionIndex.value===null?null:Ee.virtual.value?Ee.virtual.value.options[(pe=Ee.activeOptionIndex.value)!=null?pe:0]:(Le=(Ae=Ee.options.value[Ee.activeOptionIndex.value])==null?void 0:Ae.dataRef.value)!=null?Le:null,value:j.value};return Nn(ar,[...Oe!=null&&j.value!=null?by({[Oe]:j.value}).map(([nt,ti])=>Nn(iw,tw({features:xy.Hidden,key:nt,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:rt,disabled:Ge,name:nt,value:ti}))):[],jo({theirProps:{...s,...gh(Ke,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:dt,slots:n,attrs:s,name:"Combobox"})])}}}),pz=Ri({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:n,slots:s,expose:u}){var h;let g=(h=e.id)!=null?h:`headlessui-combobox-button-${tl()}`,m=bc("ComboboxButton");u({el:m.buttonRef,$el:m.buttonRef});function c(k){m.disabled.value||(m.comboboxState.value===0?m.closeCombobox():(k.preventDefault(),m.openCombobox()),qr(()=>{var A;return(A=Xt(m.inputRef))==null?void 0:A.focus({preventScroll:!0})}))}function T(k){switch(k.key){case bi.ArrowDown:k.preventDefault(),k.stopPropagation(),m.comboboxState.value===1&&m.openCombobox(),qr(()=>{var A;return(A=m.inputRef.value)==null?void 0:A.focus({preventScroll:!0})});return;case bi.ArrowUp:k.preventDefault(),k.stopPropagation(),m.comboboxState.value===1&&(m.openCombobox(),qr(()=>{m.value.value||m.goToOption(_i.Last)})),qr(()=>{var A;return(A=m.inputRef.value)==null?void 0:A.focus({preventScroll:!0})});return;case bi.Escape:if(m.comboboxState.value!==0)return;k.preventDefault(),m.optionsRef.value&&!m.optionsPropsRef.value.static&&k.stopPropagation(),m.closeCombobox(),qr(()=>{var A;return(A=m.inputRef.value)==null?void 0:A.focus({preventScroll:!0})});return}}let M=J1(Ve(()=>({as:e.as,type:n.type})),m.buttonRef);return()=>{var k,A;let L={open:m.comboboxState.value===0,disabled:m.disabled.value,value:m.value.value},{...H}=e,X={ref:m.buttonRef,id:g,type:M.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(k=Xt(m.optionsRef))==null?void 0:k.id,"aria-expanded":m.comboboxState.value===0,"aria-labelledby":m.labelRef.value?[(A=Xt(m.labelRef))==null?void 0:A.id,g].join(" "):void 0,disabled:m.disabled.value===!0?!0:void 0,onKeydown:T,onClick:c};return jo({ourProps:X,theirProps:H,slot:L,attrs:n,slots:s,name:"ComboboxButton"})}}}),mz=Ri({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:n,attrs:s,slots:u,expose:h}){var g;let m=(g=e.id)!=null?g:`headlessui-combobox-input-${tl()}`,c=bc("ComboboxInput"),T=Ve(()=>_y(Xt(c.inputRef))),M={value:!1};h({el:c.inputRef,$el:c.inputRef});function k(){c.change(null);let ee=Xt(c.optionsRef);ee&&(ee.scrollTop=0),c.goToOption(_i.Nothing)}let A=Ve(()=>{var ee;let ne=c.value.value;return Xt(c.inputRef)?typeof e.displayValue<"u"&&ne!==void 0?(ee=e.displayValue(ne))!=null?ee:"":typeof ne=="string"?ne:"":""});Wr(()=>{Zi([A,c.comboboxState,T],([ee,ne],[Ie,Ee])=>{if(M.value)return;let Me=Xt(c.inputRef);Me&&((Ee===0&&ne===1||ee!==Ie)&&(Me.value=ee),requestAnimationFrame(()=>{var pe;if(M.value||!Me||((pe=T.value)==null?void 0:pe.activeElement)!==Me)return;let{selectionStart:Ae,selectionEnd:Le}=Me;Math.abs((Le??0)-(Ae??0))===0&&Ae===0&&Me.setSelectionRange(Me.value.length,Me.value.length)}))},{immediate:!0}),Zi([c.comboboxState],([ee],[ne])=>{if(ee===0&&ne===1){if(M.value)return;let Ie=Xt(c.inputRef);if(!Ie)return;let Ee=Ie.value,{selectionStart:Me,selectionEnd:pe,selectionDirection:Ae}=Ie;Ie.value="",Ie.value=Ee,Ae!==null?Ie.setSelectionRange(Me,pe,Ae):Ie.setSelectionRange(Me,pe)}})});let L=kt(!1);function H(){L.value=!0}function X(){Tf().nextFrame(()=>{L.value=!1})}let W=UP();function se(ee){switch(M.value=!0,W(()=>{M.value=!1}),ee.key){case bi.Enter:if(M.value=!1,c.comboboxState.value!==0||L.value)return;if(ee.preventDefault(),ee.stopPropagation(),c.activeOptionIndex.value===null){c.closeCombobox();return}c.selectActiveOption(),c.mode.value===0&&c.closeCombobox();break;case bi.ArrowDown:return M.value=!1,ee.preventDefault(),ee.stopPropagation(),Gr(c.comboboxState.value,{0:()=>c.goToOption(_i.Next),1:()=>c.openCombobox()});case bi.ArrowUp:return M.value=!1,ee.preventDefault(),ee.stopPropagation(),Gr(c.comboboxState.value,{0:()=>c.goToOption(_i.Previous),1:()=>{c.openCombobox(),qr(()=>{c.value.value||c.goToOption(_i.Last)})}});case bi.Home:if(ee.shiftKey)break;return M.value=!1,ee.preventDefault(),ee.stopPropagation(),c.goToOption(_i.First);case bi.PageUp:return M.value=!1,ee.preventDefault(),ee.stopPropagation(),c.goToOption(_i.First);case bi.End:if(ee.shiftKey)break;return M.value=!1,ee.preventDefault(),ee.stopPropagation(),c.goToOption(_i.Last);case bi.PageDown:return M.value=!1,ee.preventDefault(),ee.stopPropagation(),c.goToOption(_i.Last);case bi.Escape:if(M.value=!1,c.comboboxState.value!==0)return;ee.preventDefault(),c.optionsRef.value&&!c.optionsPropsRef.value.static&&ee.stopPropagation(),c.nullable.value&&c.mode.value===0&&c.value.value===null&&k(),c.closeCombobox();break;case bi.Tab:if(M.value=!1,c.comboboxState.value!==0)return;c.mode.value===0&&c.activationTrigger.value!==1&&c.selectActiveOption(),c.closeCombobox();break}}function Te(ee){n("change",ee),c.nullable.value&&c.mode.value===0&&ee.target.value===""&&k(),c.openCombobox()}function ye(ee){var ne,Ie,Ee;let Me=(ne=ee.relatedTarget)!=null?ne:Ha.find(pe=>pe!==ee.currentTarget);if(M.value=!1,!((Ie=Xt(c.optionsRef))!=null&&Ie.contains(Me))&&!((Ee=Xt(c.buttonRef))!=null&&Ee.contains(Me))&&c.comboboxState.value===0)return ee.preventDefault(),c.mode.value===0&&(c.nullable.value&&c.value.value===null?k():c.activationTrigger.value!==1&&c.selectActiveOption()),c.closeCombobox()}function j(ee){var ne,Ie,Ee;let Me=(ne=ee.relatedTarget)!=null?ne:Ha.find(pe=>pe!==ee.currentTarget);(Ie=Xt(c.buttonRef))!=null&&Ie.contains(Me)||(Ee=Xt(c.optionsRef))!=null&&Ee.contains(Me)||c.disabled.value||c.immediate.value&&c.comboboxState.value!==0&&(c.openCombobox(),Tf().nextFrame(()=>{c.setActivationTrigger(1)}))}let oe=Ve(()=>{var ee,ne,Ie,Ee;return(Ee=(Ie=(ne=e.defaultValue)!=null?ne:c.defaultValue.value!==void 0?(ee=e.displayValue)==null?void 0:ee.call(e,c.defaultValue.value):null)!=null?Ie:c.defaultValue.value)!=null?Ee:""});return()=>{var ee,ne,Ie,Ee,Me,pe,Ae;let Le={open:c.comboboxState.value===0},{displayValue:Oe,onChange:Ge,...rt}=e,Ke={"aria-controls":(ee=c.optionsRef.value)==null?void 0:ee.id,"aria-expanded":c.comboboxState.value===0,"aria-activedescendant":c.activeOptionIndex.value===null?void 0:c.virtual.value?(ne=c.options.value.find(dt=>!c.virtual.value.disabled(dt.dataRef.value)&&c.compare(dt.dataRef.value,c.virtual.value.options[c.activeOptionIndex.value])))==null?void 0:ne.id:(Ie=c.options.value[c.activeOptionIndex.value])==null?void 0:Ie.id,"aria-labelledby":(pe=(Ee=Xt(c.labelRef))==null?void 0:Ee.id)!=null?pe:(Me=Xt(c.buttonRef))==null?void 0:Me.id,"aria-autocomplete":"list",id:m,onCompositionstart:H,onCompositionend:X,onKeydown:se,onInput:Te,onFocus:j,onBlur:ye,role:"combobox",type:(Ae=s.type)!=null?Ae:"text",tabIndex:0,ref:c.inputRef,defaultValue:oe.value,disabled:c.disabled.value===!0?!0:void 0};return jo({ourProps:Ke,theirProps:rt,slot:Le,attrs:s,slots:u,features:Ya.RenderStrategy|Ya.Static,name:"ComboboxInput"})}}}),gz=Ri({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:n,slots:s,expose:u}){let h=bc("ComboboxOptions"),g=`headlessui-combobox-options-${tl()}`;u({el:h.optionsRef,$el:h.optionsRef}),Vn(()=>{h.optionsPropsRef.value.static=e.static}),Vn(()=>{h.optionsPropsRef.value.hold=e.hold});let m=nw(),c=Ve(()=>m!==null?(m.value&ps.Open)===ps.Open:h.comboboxState.value===0);iz({container:Ve(()=>Xt(h.optionsRef)),enabled:Ve(()=>h.comboboxState.value===0),accept(M){return M.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:M.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(M){M.setAttribute("role","none")}});function T(M){M.preventDefault()}return()=>{var M,k,A;let L={open:h.comboboxState.value===0},H={"aria-labelledby":(A=(M=Xt(h.labelRef))==null?void 0:M.id)!=null?A:(k=Xt(h.buttonRef))==null?void 0:k.id,id:g,ref:h.optionsRef,role:"listbox","aria-multiselectable":h.mode.value===1?!0:void 0,onMousedown:T},X=gh(e,["hold"]);return jo({ourProps:H,theirProps:X,slot:L,attrs:n,slots:h.virtual.value&&h.comboboxState.value===0?{...s,default:()=>[Nn(dz,{},s.default)]}:s,features:Ya.RenderStrategy|Ya.Static,visible:c.value,name:"ComboboxOptions"})}}}),yz=Ri({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:n,attrs:s,expose:u}){let h=bc("ComboboxOption"),g=`headlessui-combobox-option-${tl()}`,m=kt(null),c=Ve(()=>e.disabled);u({el:m,$el:m});let T=Ve(()=>{var ye;return h.virtual.value?h.activeOptionIndex.value===h.calculateIndex(e.value):h.activeOptionIndex.value===null?!1:((ye=h.options.value[h.activeOptionIndex.value])==null?void 0:ye.id)===g}),M=Ve(()=>h.isSelected(e.value)),k=Zr(uw,null),A=Ve(()=>({disabled:e.disabled,value:e.value,domRef:m,order:Ve(()=>e.order)}));Wr(()=>h.registerOption(g,A)),sa(()=>h.unregisterOption(g,T.value)),Vn(()=>{let ye=Xt(m);ye&&(k==null||k.value.measureElement(ye))}),Vn(()=>{h.comboboxState.value===0&&T.value&&(h.virtual.value||h.activationTrigger.value!==0&&qr(()=>{var ye,j;return(j=(ye=Xt(m))==null?void 0:ye.scrollIntoView)==null?void 0:j.call(ye,{block:"nearest"})}))});function L(ye){ye.preventDefault(),ye.button===sw.Left&&(c.value||(h.selectOption(g),K1()||requestAnimationFrame(()=>{var j;return(j=Xt(h.inputRef))==null?void 0:j.focus({preventScroll:!0})}),h.mode.value===0&&h.closeCombobox()))}function H(){var ye;if(e.disabled||(ye=h.virtual.value)!=null&&ye.disabled(e.value))return h.goToOption(_i.Nothing);let j=h.calculateIndex(e.value);h.goToOption(_i.Specific,j)}let X=Y1();function W(ye){X.update(ye)}function se(ye){var j;if(!X.wasMoved(ye)||e.disabled||(j=h.virtual.value)!=null&&j.disabled(e.value)||T.value)return;let oe=h.calculateIndex(e.value);h.goToOption(_i.Specific,oe,0)}function Te(ye){var j;X.wasMoved(ye)&&(e.disabled||(j=h.virtual.value)!=null&&j.disabled(e.value)||T.value&&(h.optionsPropsRef.value.hold||h.goToOption(_i.Nothing)))}return()=>{let{disabled:ye}=e,j={active:T.value,selected:M.value,disabled:ye},oe={id:g,ref:m,role:"option",tabIndex:ye===!0?void 0:-1,"aria-disabled":ye===!0?!0:void 0,"aria-selected":M.value,disabled:void 0,onMousedown:L,onFocus:H,onPointerenter:W,onMouseenter:W,onPointermove:se,onMousemove:se,onPointerleave:Te,onMouseleave:Te},ee=gh(e,["order","value"]);return jo({ourProps:oe,theirProps:ee,slot:j,attrs:s,slots:n,name:"ComboboxOption"})}}}),Yv=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Qv(e){var n,s;let u=(n=e.innerText)!=null?n:"",h=e.cloneNode(!0);if(!(h instanceof HTMLElement))return u;let g=!1;for(let c of h.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),g=!0;let m=g?(s=h.innerText)!=null?s:"":u;return Yv.test(m)&&(m=m.replace(Yv,"")),m}function _z(e){let n=e.getAttribute("aria-label");if(typeof n=="string")return n.trim();let s=e.getAttribute("aria-labelledby");if(s){let u=s.split(" ").map(h=>{let g=document.getElementById(h);if(g){let m=g.getAttribute("aria-label");return typeof m=="string"?m.trim():Qv(g).trim()}return null}).filter(Boolean);if(u.length>0)return u.join(", ")}return Qv(e).trim()}function vz(e){let n=kt(""),s=kt("");return()=>{let u=Xt(e);if(!u)return"";let h=u.innerText;if(n.value===h)return s.value;let g=_z(u).trim().toLowerCase();return n.value=h,s.value=g,g}}function xz(e,n){return e===n}var bz=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(bz||{}),wz=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(wz||{}),Ez=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ez||{});function Sz(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let hw=Symbol("ListboxContext");function Kf(e){let n=Zr(hw,null);if(n===null){let s=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Kf),s}return n}let Tz=Ri({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>xz},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:n,attrs:s,emit:u}){let h=kt(1),g=kt(null),m=kt(null),c=kt(null),T=kt([]),M=kt(""),k=kt(null),A=kt(1);function L(j=oe=>oe){let oe=k.value!==null?T.value[k.value]:null,ee=W1(j(T.value.slice()),Ie=>Xt(Ie.dataRef.domRef)),ne=oe?ee.indexOf(oe):null;return ne===-1&&(ne=null),{options:ee,activeOptionIndex:ne}}let H=Ve(()=>e.multiple?1:0),[X,W]=H1(Ve(()=>e.modelValue),j=>u("update:modelValue",j),Ve(()=>e.defaultValue)),se=Ve(()=>X.value===void 0?Gr(H.value,{1:[],0:void 0}):X.value),Te={listboxState:h,value:se,mode:H,compare(j,oe){if(typeof e.by=="string"){let ee=e.by;return(j==null?void 0:j[ee])===(oe==null?void 0:oe[ee])}return e.by(j,oe)},orientation:Ve(()=>e.horizontal?"horizontal":"vertical"),labelRef:g,buttonRef:m,optionsRef:c,disabled:Ve(()=>e.disabled),options:T,searchQuery:M,activeOptionIndex:k,activationTrigger:A,closeListbox(){e.disabled||h.value!==1&&(h.value=1,k.value=null)},openListbox(){e.disabled||h.value!==0&&(h.value=0)},goToOption(j,oe,ee){if(e.disabled||h.value===1)return;let ne=L(),Ie=wg(j===_i.Specific?{focus:_i.Specific,id:oe}:{focus:j},{resolveItems:()=>ne.options,resolveActiveIndex:()=>ne.activeOptionIndex,resolveId:Ee=>Ee.id,resolveDisabled:Ee=>Ee.dataRef.disabled});M.value="",k.value=Ie,A.value=ee??1,T.value=ne.options},search(j){if(e.disabled||h.value===1)return;let oe=M.value!==""?0:1;M.value+=j.toLowerCase();let ee=(k.value!==null?T.value.slice(k.value+oe).concat(T.value.slice(0,k.value+oe)):T.value).find(Ie=>Ie.dataRef.textValue.startsWith(M.value)&&!Ie.dataRef.disabled),ne=ee?T.value.indexOf(ee):-1;ne===-1||ne===k.value||(k.value=ne,A.value=1)},clearSearch(){e.disabled||h.value!==1&&M.value!==""&&(M.value="")},registerOption(j,oe){let ee=L(ne=>[...ne,{id:j,dataRef:oe}]);T.value=ee.options,k.value=ee.activeOptionIndex},unregisterOption(j){let oe=L(ee=>{let ne=ee.findIndex(Ie=>Ie.id===j);return ne!==-1&&ee.splice(ne,1),ee});T.value=oe.options,k.value=oe.activeOptionIndex,A.value=1},theirOnChange(j){e.disabled||W(j)},select(j){e.disabled||W(Gr(H.value,{0:()=>j,1:()=>{let oe=Vt(Te.value.value).slice(),ee=Vt(j),ne=oe.findIndex(Ie=>Te.compare(ee,Vt(Ie)));return ne===-1?oe.push(ee):oe.splice(ne,1),oe}}))}};X1([m,c],(j,oe)=>{var ee;Te.closeListbox(),Z1(oe,vy.Loose)||(j.preventDefault(),(ee=Xt(m))==null||ee.focus())},Ve(()=>h.value===0)),aa(hw,Te),ow(Ve(()=>Gr(h.value,{0:ps.Open,1:ps.Closed})));let ye=Ve(()=>{var j;return(j=Xt(m))==null?void 0:j.closest("form")});return Wr(()=>{Zi([ye],()=>{if(!ye.value||e.defaultValue===void 0)return;function j(){Te.theirOnChange(e.defaultValue)}return ye.value.addEventListener("reset",j),()=>{var oe;(oe=ye.value)==null||oe.removeEventListener("reset",j)}},{immediate:!0})}),()=>{let{name:j,modelValue:oe,disabled:ee,form:ne,...Ie}=e,Ee={open:h.value===0,disabled:ee,value:se.value};return Nn(ar,[...j!=null&&se.value!=null?by({[j]:se.value}).map(([Me,pe])=>Nn(iw,tw({features:xy.Hidden,key:Me,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:ne,disabled:ee,name:Me,value:pe}))):[],jo({ourProps:{},theirProps:{...s,...gh(Ie,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:Ee,slots:n,attrs:s,name:"Listbox"})])}}}),Iz=Ri({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:n,slots:s,expose:u}){var h;let g=(h=e.id)!=null?h:`headlessui-listbox-button-${tl()}`,m=Kf("ListboxButton");u({el:m.buttonRef,$el:m.buttonRef});function c(A){switch(A.key){case bi.Space:case bi.Enter:case bi.ArrowDown:A.preventDefault(),m.openListbox(),qr(()=>{var L;(L=Xt(m.optionsRef))==null||L.focus({preventScroll:!0}),m.value.value||m.goToOption(_i.First)});break;case bi.ArrowUp:A.preventDefault(),m.openListbox(),qr(()=>{var L;(L=Xt(m.optionsRef))==null||L.focus({preventScroll:!0}),m.value.value||m.goToOption(_i.Last)});break}}function T(A){switch(A.key){case bi.Space:A.preventDefault();break}}function M(A){m.disabled.value||(m.listboxState.value===0?(m.closeListbox(),qr(()=>{var L;return(L=Xt(m.buttonRef))==null?void 0:L.focus({preventScroll:!0})})):(A.preventDefault(),m.openListbox(),Sz(()=>{var L;return(L=Xt(m.optionsRef))==null?void 0:L.focus({preventScroll:!0})})))}let k=J1(Ve(()=>({as:e.as,type:n.type})),m.buttonRef);return()=>{var A,L;let H={open:m.listboxState.value===0,disabled:m.disabled.value,value:m.value.value},{...X}=e,W={ref:m.buttonRef,id:g,type:k.value,"aria-haspopup":"listbox","aria-controls":(A=Xt(m.optionsRef))==null?void 0:A.id,"aria-expanded":m.listboxState.value===0,"aria-labelledby":m.labelRef.value?[(L=Xt(m.labelRef))==null?void 0:L.id,g].join(" "):void 0,disabled:m.disabled.value===!0?!0:void 0,onKeydown:c,onKeyup:T,onClick:M};return jo({ourProps:W,theirProps:X,slot:H,attrs:n,slots:s,name:"ListboxButton"})}}}),Cz=Ri({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:n,slots:s,expose:u}){var h;let g=(h=e.id)!=null?h:`headlessui-listbox-options-${tl()}`,m=Kf("ListboxOptions"),c=kt(null);u({el:m.optionsRef,$el:m.optionsRef});function T(A){switch(c.value&&clearTimeout(c.value),A.key){case bi.Space:if(m.searchQuery.value!=="")return A.preventDefault(),A.stopPropagation(),m.search(A.key);case bi.Enter:if(A.preventDefault(),A.stopPropagation(),m.activeOptionIndex.value!==null){let L=m.options.value[m.activeOptionIndex.value];m.select(L.dataRef.value)}m.mode.value===0&&(m.closeListbox(),qr(()=>{var L;return(L=Xt(m.buttonRef))==null?void 0:L.focus({preventScroll:!0})}));break;case Gr(m.orientation.value,{vertical:bi.ArrowDown,horizontal:bi.ArrowRight}):return A.preventDefault(),A.stopPropagation(),m.goToOption(_i.Next);case Gr(m.orientation.value,{vertical:bi.ArrowUp,horizontal:bi.ArrowLeft}):return A.preventDefault(),A.stopPropagation(),m.goToOption(_i.Previous);case bi.Home:case bi.PageUp:return A.preventDefault(),A.stopPropagation(),m.goToOption(_i.First);case bi.End:case bi.PageDown:return A.preventDefault(),A.stopPropagation(),m.goToOption(_i.Last);case bi.Escape:A.preventDefault(),A.stopPropagation(),m.closeListbox(),qr(()=>{var L;return(L=Xt(m.buttonRef))==null?void 0:L.focus({preventScroll:!0})});break;case bi.Tab:A.preventDefault(),A.stopPropagation();break;default:A.key.length===1&&(m.search(A.key),c.value=setTimeout(()=>m.clearSearch(),350));break}}let M=nw(),k=Ve(()=>M!==null?(M.value&ps.Open)===ps.Open:m.listboxState.value===0);return()=>{var A,L;let H={open:m.listboxState.value===0},{...X}=e,W={"aria-activedescendant":m.activeOptionIndex.value===null||(A=m.options.value[m.activeOptionIndex.value])==null?void 0:A.id,"aria-multiselectable":m.mode.value===1?!0:void 0,"aria-labelledby":(L=Xt(m.buttonRef))==null?void 0:L.id,"aria-orientation":m.orientation.value,id:g,onKeydown:T,role:"listbox",tabIndex:0,ref:m.optionsRef};return jo({ourProps:W,theirProps:X,slot:H,attrs:n,slots:s,features:Ya.RenderStrategy|Ya.Static,visible:k.value,name:"ListboxOptions"})}}}),Az=Ri({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:n,attrs:s,expose:u}){var h;let g=(h=e.id)!=null?h:`headlessui-listbox-option-${tl()}`,m=Kf("ListboxOption"),c=kt(null);u({el:c,$el:c});let T=Ve(()=>m.activeOptionIndex.value!==null?m.options.value[m.activeOptionIndex.value].id===g:!1),M=Ve(()=>Gr(m.mode.value,{0:()=>m.compare(Vt(m.value.value),Vt(e.value)),1:()=>Vt(m.value.value).some(j=>m.compare(Vt(j),Vt(e.value)))})),k=Ve(()=>Gr(m.mode.value,{1:()=>{var j;let oe=Vt(m.value.value);return((j=m.options.value.find(ee=>oe.some(ne=>m.compare(Vt(ne),Vt(ee.dataRef.value)))))==null?void 0:j.id)===g},0:()=>M.value})),A=vz(c),L=Ve(()=>({disabled:e.disabled,value:e.value,get textValue(){return A()},domRef:c}));Wr(()=>m.registerOption(g,L)),sa(()=>m.unregisterOption(g)),Wr(()=>{Zi([m.listboxState,M],()=>{m.listboxState.value===0&&M.value&&Gr(m.mode.value,{1:()=>{k.value&&m.goToOption(_i.Specific,g)},0:()=>{m.goToOption(_i.Specific,g)}})},{immediate:!0})}),Vn(()=>{m.listboxState.value===0&&T.value&&m.activationTrigger.value!==0&&qr(()=>{var j,oe;return(oe=(j=Xt(c))==null?void 0:j.scrollIntoView)==null?void 0:oe.call(j,{block:"nearest"})})});function H(j){if(e.disabled)return j.preventDefault();m.select(e.value),m.mode.value===0&&(m.closeListbox(),qr(()=>{var oe;return(oe=Xt(m.buttonRef))==null?void 0:oe.focus({preventScroll:!0})}))}function X(){if(e.disabled)return m.goToOption(_i.Nothing);m.goToOption(_i.Specific,g)}let W=Y1();function se(j){W.update(j)}function Te(j){W.wasMoved(j)&&(e.disabled||T.value||m.goToOption(_i.Specific,g,0))}function ye(j){W.wasMoved(j)&&(e.disabled||T.value&&m.goToOption(_i.Nothing))}return()=>{let{disabled:j}=e,oe={active:T.value,selected:M.value,disabled:j},{value:ee,disabled:ne,...Ie}=e,Ee={id:g,ref:c,role:"option",tabIndex:j===!0?void 0:-1,"aria-disabled":j===!0?!0:void 0,"aria-selected":M.value,disabled:void 0,onClick:H,onFocus:X,onPointerenter:se,onMouseenter:se,onPointermove:Te,onMousemove:Te,onPointerleave:ye,onMouseleave:ye};return jo({ourProps:Ee,theirProps:Ie,slot:oe,attrs:s,slots:n,name:"ListboxOption"})}}});function $n(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var n=e.ownerDocument;return n&&n.defaultView||window}return e}function Qa(e){var n=$n(e).Element;return e instanceof n||e instanceof Element}function io(e){var n=$n(e).HTMLElement;return e instanceof n||e instanceof HTMLElement}function wy(e){if(typeof ShadowRoot>"u")return!1;var n=$n(e).ShadowRoot;return e instanceof n||e instanceof ShadowRoot}var Ka=Math.max,If=Math.min,pc=Math.round;function Eg(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(n){return n.brand+"/"+n.version}).join(" "):navigator.userAgent}function dw(){return!/^((?!chrome|android).)*safari/i.test(Eg())}function mc(e,n,s){n===void 0&&(n=!1),s===void 0&&(s=!1);var u=e.getBoundingClientRect(),h=1,g=1;n&&io(e)&&(h=e.offsetWidth>0&&pc(u.width)/e.offsetWidth||1,g=e.offsetHeight>0&&pc(u.height)/e.offsetHeight||1);var m=Qa(e)?$n(e):window,c=m.visualViewport,T=!dw()&&s,M=(u.left+(T&&c?c.offsetLeft:0))/h,k=(u.top+(T&&c?c.offsetTop:0))/g,A=u.width/h,L=u.height/g;return{width:A,height:L,top:k,right:M+A,bottom:k+L,left:M,x:M,y:k}}function Ey(e){var n=$n(e),s=n.pageXOffset,u=n.pageYOffset;return{scrollLeft:s,scrollTop:u}}function kz(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function Mz(e){return e===$n(e)||!io(e)?Ey(e):kz(e)}function No(e){return e?(e.nodeName||"").toLowerCase():null}function ua(e){return((Qa(e)?e.ownerDocument:e.document)||window.document).documentElement}function Sy(e){return mc(ua(e)).left+Ey(e).scrollLeft}function ms(e){return $n(e).getComputedStyle(e)}function Ty(e){var n=ms(e),s=n.overflow,u=n.overflowX,h=n.overflowY;return/auto|scroll|overlay|hidden/.test(s+h+u)}function Lz(e){var n=e.getBoundingClientRect(),s=pc(n.width)/e.offsetWidth||1,u=pc(n.height)/e.offsetHeight||1;return s!==1||u!==1}function Pz(e,n,s){s===void 0&&(s=!1);var u=io(n),h=io(n)&&Lz(n),g=ua(n),m=mc(e,h,s),c={scrollLeft:0,scrollTop:0},T={x:0,y:0};return(u||!u&&!s)&&((No(n)!=="body"||Ty(g))&&(c=Mz(n)),io(n)?(T=mc(n,!0),T.x+=n.clientLeft,T.y+=n.clientTop):g&&(T.x=Sy(g))),{x:m.left+c.scrollLeft-T.x,y:m.top+c.scrollTop-T.y,width:m.width,height:m.height}}function Iy(e){var n=mc(e),s=e.offsetWidth,u=e.offsetHeight;return Math.abs(n.width-s)<=1&&(s=n.width),Math.abs(n.height-u)<=1&&(u=n.height),{x:e.offsetLeft,y:e.offsetTop,width:s,height:u}}function Xf(e){return No(e)==="html"?e:e.assignedSlot||e.parentNode||(wy(e)?e.host:null)||ua(e)}function fw(e){return["html","body","#document"].indexOf(No(e))>=0?e.ownerDocument.body:io(e)&&Ty(e)?e:fw(Xf(e))}function Ju(e,n){var s;n===void 0&&(n=[]);var u=fw(e),h=u===((s=e.ownerDocument)==null?void 0:s.body),g=$n(u),m=h?[g].concat(g.visualViewport||[],Ty(u)?u:[]):u,c=n.concat(m);return h?c:c.concat(Ju(Xf(m)))}function zz(e){return["table","td","th"].indexOf(No(e))>=0}function ex(e){return!io(e)||ms(e).position==="fixed"?null:e.offsetParent}function Dz(e){var n=/firefox/i.test(Eg()),s=/Trident/i.test(Eg());if(s&&io(e)){var u=ms(e);if(u.position==="fixed")return null}var h=Xf(e);for(wy(h)&&(h=h.host);io(h)&&["html","body"].indexOf(No(h))<0;){var g=ms(h);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||n&&g.willChange==="filter"||n&&g.filter&&g.filter!=="none")return h;h=h.parentNode}return null}function yh(e){for(var n=$n(e),s=ex(e);s&&zz(s)&&ms(s).position==="static";)s=ex(s);return s&&(No(s)==="html"||No(s)==="body"&&ms(s).position==="static")?n:s||Dz(e)||n}var Bn="top",yo="bottom",_o="right",Fn="left",Cy="auto",_h=[Bn,yo,_o,Fn],gc="start",uh="end",Rz="clippingParents",pw="viewport",Bu="popper",Oz="reference",tx=_h.reduce(function(e,n){return e.concat([n+"-"+gc,n+"-"+uh])},[]),mw=[].concat(_h,[Cy]).reduce(function(e,n){return e.concat([n,n+"-"+gc,n+"-"+uh])},[]),Bz="beforeRead",Fz="read",Vz="afterRead",Nz="beforeMain",$z="main",jz="afterMain",Uz="beforeWrite",qz="write",Hz="afterWrite",Gz=[Bz,Fz,Vz,Nz,$z,jz,Uz,qz,Hz];function Zz(e){var n=new Map,s=new Set,u=[];e.forEach(function(g){n.set(g.name,g)});function h(g){s.add(g.name);var m=[].concat(g.requires||[],g.requiresIfExists||[]);m.forEach(function(c){if(!s.has(c)){var T=n.get(c);T&&h(T)}}),u.push(g)}return e.forEach(function(g){s.has(g.name)||h(g)}),u}function Wz(e){var n=Zz(e);return Gz.reduce(function(s,u){return s.concat(n.filter(function(h){return h.phase===u}))},[])}function Kz(e){var n;return function(){return n||(n=new Promise(function(s){Promise.resolve().then(function(){n=void 0,s(e())})})),n}}function Xz(e){var n=e.reduce(function(s,u){var h=s[u.name];return s[u.name]=h?Object.assign({},h,u,{options:Object.assign({},h.options,u.options),data:Object.assign({},h.data,u.data)}):u,s},{});return Object.keys(n).map(function(s){return n[s]})}function Jz(e,n){var s=$n(e),u=ua(e),h=s.visualViewport,g=u.clientWidth,m=u.clientHeight,c=0,T=0;if(h){g=h.width,m=h.height;var M=dw();(M||!M&&n==="fixed")&&(c=h.offsetLeft,T=h.offsetTop)}return{width:g,height:m,x:c+Sy(e),y:T}}function Yz(e){var n,s=ua(e),u=Ey(e),h=(n=e.ownerDocument)==null?void 0:n.body,g=Ka(s.scrollWidth,s.clientWidth,h?h.scrollWidth:0,h?h.clientWidth:0),m=Ka(s.scrollHeight,s.clientHeight,h?h.scrollHeight:0,h?h.clientHeight:0),c=-u.scrollLeft+Sy(e),T=-u.scrollTop;return ms(h||s).direction==="rtl"&&(c+=Ka(s.clientWidth,h?h.clientWidth:0)-g),{width:g,height:m,x:c,y:T}}function gw(e,n){var s=n.getRootNode&&n.getRootNode();if(e.contains(n))return!0;if(s&&wy(s)){var u=n;do{if(u&&e.isSameNode(u))return!0;u=u.parentNode||u.host}while(u)}return!1}function Sg(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Qz(e,n){var s=mc(e,!1,n==="fixed");return s.top=s.top+e.clientTop,s.left=s.left+e.clientLeft,s.bottom=s.top+e.clientHeight,s.right=s.left+e.clientWidth,s.width=e.clientWidth,s.height=e.clientHeight,s.x=s.left,s.y=s.top,s}function ix(e,n,s){return n===pw?Sg(Jz(e,s)):Qa(n)?Qz(n,s):Sg(Yz(ua(e)))}function e5(e){var n=Ju(Xf(e)),s=["absolute","fixed"].indexOf(ms(e).position)>=0,u=s&&io(e)?yh(e):e;return Qa(u)?n.filter(function(h){return Qa(h)&&gw(h,u)&&No(h)!=="body"}):[]}function t5(e,n,s,u){var h=n==="clippingParents"?e5(e):[].concat(n),g=[].concat(h,[s]),m=g[0],c=g.reduce(function(T,M){var k=ix(e,M,u);return T.top=Ka(k.top,T.top),T.right=If(k.right,T.right),T.bottom=If(k.bottom,T.bottom),T.left=Ka(k.left,T.left),T},ix(e,m,u));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function Ro(e){return e.split("-")[0]}function yc(e){return e.split("-")[1]}function Ay(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function yw(e){var n=e.reference,s=e.element,u=e.placement,h=u?Ro(u):null,g=u?yc(u):null,m=n.x+n.width/2-s.width/2,c=n.y+n.height/2-s.height/2,T;switch(h){case Bn:T={x:m,y:n.y-s.height};break;case yo:T={x:m,y:n.y+n.height};break;case _o:T={x:n.x+n.width,y:c};break;case Fn:T={x:n.x-s.width,y:c};break;default:T={x:n.x,y:n.y}}var M=h?Ay(h):null;if(M!=null){var k=M==="y"?"height":"width";switch(g){case gc:T[M]=T[M]-(n[k]/2-s[k]/2);break;case uh:T[M]=T[M]+(n[k]/2-s[k]/2);break}}return T}function _w(){return{top:0,right:0,bottom:0,left:0}}function vw(e){return Object.assign({},_w(),e)}function xw(e,n){return n.reduce(function(s,u){return s[u]=e,s},{})}function ky(e,n){n===void 0&&(n={});var s=n,u=s.placement,h=u===void 0?e.placement:u,g=s.strategy,m=g===void 0?e.strategy:g,c=s.boundary,T=c===void 0?Rz:c,M=s.rootBoundary,k=M===void 0?pw:M,A=s.elementContext,L=A===void 0?Bu:A,H=s.altBoundary,X=H===void 0?!1:H,W=s.padding,se=W===void 0?0:W,Te=vw(typeof se!="number"?se:xw(se,_h)),ye=L===Bu?Oz:Bu,j=e.rects.popper,oe=e.elements[X?ye:L],ee=t5(Qa(oe)?oe:oe.contextElement||ua(e.elements.popper),T,k,m),ne=mc(e.elements.reference),Ie=yw({reference:ne,element:j,strategy:"absolute",placement:h}),Ee=Sg(Object.assign({},j,Ie)),Me=L===Bu?Ee:ne,pe={top:ee.top-Me.top+Te.top,bottom:Me.bottom-ee.bottom+Te.bottom,left:ee.left-Me.left+Te.left,right:Me.right-ee.right+Te.right},Ae=e.modifiersData.offset;if(L===Bu&&Ae){var Le=Ae[h];Object.keys(pe).forEach(function(Oe){var Ge=[_o,yo].indexOf(Oe)>=0?1:-1,rt=[Bn,yo].indexOf(Oe)>=0?"y":"x";pe[Oe]+=Le[rt]*Ge})}return pe}var rx={placement:"bottom",modifiers:[],strategy:"absolute"};function nx(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return!n.some(function(u){return!(u&&typeof u.getBoundingClientRect=="function")})}function i5(e){e===void 0&&(e={});var n=e,s=n.defaultModifiers,u=s===void 0?[]:s,h=n.defaultOptions,g=h===void 0?rx:h;return function(c,T,M){M===void 0&&(M=g);var k={placement:"bottom",orderedModifiers:[],options:Object.assign({},rx,g),modifiersData:{},elements:{reference:c,popper:T},attributes:{},styles:{}},A=[],L=!1,H={state:k,setOptions:function(Te){var ye=typeof Te=="function"?Te(k.options):Te;W(),k.options=Object.assign({},g,k.options,ye),k.scrollParents={reference:Qa(c)?Ju(c):c.contextElement?Ju(c.contextElement):[],popper:Ju(T)};var j=Wz(Xz([].concat(u,k.options.modifiers)));return k.orderedModifiers=j.filter(function(oe){return oe.enabled}),X(),H.update()},forceUpdate:function(){if(!L){var Te=k.elements,ye=Te.reference,j=Te.popper;if(nx(ye,j)){k.rects={reference:Pz(ye,yh(j),k.options.strategy==="fixed"),popper:Iy(j)},k.reset=!1,k.placement=k.options.placement,k.orderedModifiers.forEach(function(pe){return k.modifiersData[pe.name]=Object.assign({},pe.data)});for(var oe=0;oe<k.orderedModifiers.length;oe++){if(k.reset===!0){k.reset=!1,oe=-1;continue}var ee=k.orderedModifiers[oe],ne=ee.fn,Ie=ee.options,Ee=Ie===void 0?{}:Ie,Me=ee.name;typeof ne=="function"&&(k=ne({state:k,options:Ee,name:Me,instance:H})||k)}}}},update:Kz(function(){return new Promise(function(se){H.forceUpdate(),se(k)})}),destroy:function(){W(),L=!0}};if(!nx(c,T))return H;H.setOptions(M).then(function(se){!L&&M.onFirstUpdate&&M.onFirstUpdate(se)});function X(){k.orderedModifiers.forEach(function(se){var Te=se.name,ye=se.options,j=ye===void 0?{}:ye,oe=se.effect;if(typeof oe=="function"){var ee=oe({state:k,name:Te,instance:H,options:j}),ne=function(){};A.push(ee||ne)}})}function W(){A.forEach(function(se){return se()}),A=[]}return H}}var qd={passive:!0};function r5(e){var n=e.state,s=e.instance,u=e.options,h=u.scroll,g=h===void 0?!0:h,m=u.resize,c=m===void 0?!0:m,T=$n(n.elements.popper),M=[].concat(n.scrollParents.reference,n.scrollParents.popper);return g&&M.forEach(function(k){k.addEventListener("scroll",s.update,qd)}),c&&T.addEventListener("resize",s.update,qd),function(){g&&M.forEach(function(k){k.removeEventListener("scroll",s.update,qd)}),c&&T.removeEventListener("resize",s.update,qd)}}const bw={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:r5,data:{}};function n5(e){var n=e.state,s=e.name;n.modifiersData[s]=yw({reference:n.rects.reference,element:n.rects.popper,strategy:"absolute",placement:n.placement})}const o5={name:"popperOffsets",enabled:!0,phase:"read",fn:n5,data:{}};var s5={top:"auto",right:"auto",bottom:"auto",left:"auto"};function a5(e,n){var s=e.x,u=e.y,h=n.devicePixelRatio||1;return{x:pc(s*h)/h||0,y:pc(u*h)/h||0}}function ox(e){var n,s=e.popper,u=e.popperRect,h=e.placement,g=e.variation,m=e.offsets,c=e.position,T=e.gpuAcceleration,M=e.adaptive,k=e.roundOffsets,A=e.isFixed,L=m.x,H=L===void 0?0:L,X=m.y,W=X===void 0?0:X,se=typeof k=="function"?k({x:H,y:W}):{x:H,y:W};H=se.x,W=se.y;var Te=m.hasOwnProperty("x"),ye=m.hasOwnProperty("y"),j=Fn,oe=Bn,ee=window;if(M){var ne=yh(s),Ie="clientHeight",Ee="clientWidth";if(ne===$n(s)&&(ne=ua(s),ms(ne).position!=="static"&&c==="absolute"&&(Ie="scrollHeight",Ee="scrollWidth")),ne=ne,h===Bn||(h===Fn||h===_o)&&g===uh){oe=yo;var Me=A&&ne===ee&&ee.visualViewport?ee.visualViewport.height:ne[Ie];W-=Me-u.height,W*=T?1:-1}if(h===Fn||(h===Bn||h===yo)&&g===uh){j=_o;var pe=A&&ne===ee&&ee.visualViewport?ee.visualViewport.width:ne[Ee];H-=pe-u.width,H*=T?1:-1}}var Ae=Object.assign({position:c},M&&s5),Le=k===!0?a5({x:H,y:W},$n(s)):{x:H,y:W};if(H=Le.x,W=Le.y,T){var Oe;return Object.assign({},Ae,(Oe={},Oe[oe]=ye?"0":"",Oe[j]=Te?"0":"",Oe.transform=(ee.devicePixelRatio||1)<=1?"translate("+H+"px, "+W+"px)":"translate3d("+H+"px, "+W+"px, 0)",Oe))}return Object.assign({},Ae,(n={},n[oe]=ye?W+"px":"",n[j]=Te?H+"px":"",n.transform="",n))}function l5(e){var n=e.state,s=e.options,u=s.gpuAcceleration,h=u===void 0?!0:u,g=s.adaptive,m=g===void 0?!0:g,c=s.roundOffsets,T=c===void 0?!0:c,M={placement:Ro(n.placement),variation:yc(n.placement),popper:n.elements.popper,popperRect:n.rects.popper,gpuAcceleration:h,isFixed:n.options.strategy==="fixed"};n.modifiersData.popperOffsets!=null&&(n.styles.popper=Object.assign({},n.styles.popper,ox(Object.assign({},M,{offsets:n.modifiersData.popperOffsets,position:n.options.strategy,adaptive:m,roundOffsets:T})))),n.modifiersData.arrow!=null&&(n.styles.arrow=Object.assign({},n.styles.arrow,ox(Object.assign({},M,{offsets:n.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:T})))),n.attributes.popper=Object.assign({},n.attributes.popper,{"data-popper-placement":n.placement})}const ww={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:l5,data:{}};function c5(e){var n=e.state;Object.keys(n.elements).forEach(function(s){var u=n.styles[s]||{},h=n.attributes[s]||{},g=n.elements[s];!io(g)||!No(g)||(Object.assign(g.style,u),Object.keys(h).forEach(function(m){var c=h[m];c===!1?g.removeAttribute(m):g.setAttribute(m,c===!0?"":c)}))})}function u5(e){var n=e.state,s={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(n.elements.popper.style,s.popper),n.styles=s,n.elements.arrow&&Object.assign(n.elements.arrow.style,s.arrow),function(){Object.keys(n.elements).forEach(function(u){var h=n.elements[u],g=n.attributes[u]||{},m=Object.keys(n.styles.hasOwnProperty(u)?n.styles[u]:s[u]),c=m.reduce(function(T,M){return T[M]="",T},{});!io(h)||!No(h)||(Object.assign(h.style,c),Object.keys(g).forEach(function(T){h.removeAttribute(T)}))})}}const h5={name:"applyStyles",enabled:!0,phase:"write",fn:c5,effect:u5,requires:["computeStyles"]};var d5=[bw,o5,ww,h5],f5={left:"right",right:"left",bottom:"top",top:"bottom"};function rf(e){return e.replace(/left|right|bottom|top/g,function(n){return f5[n]})}var p5={start:"end",end:"start"};function sx(e){return e.replace(/start|end/g,function(n){return p5[n]})}function m5(e,n){n===void 0&&(n={});var s=n,u=s.placement,h=s.boundary,g=s.rootBoundary,m=s.padding,c=s.flipVariations,T=s.allowedAutoPlacements,M=T===void 0?mw:T,k=yc(u),A=k?c?tx:tx.filter(function(X){return yc(X)===k}):_h,L=A.filter(function(X){return M.indexOf(X)>=0});L.length===0&&(L=A);var H=L.reduce(function(X,W){return X[W]=ky(e,{placement:W,boundary:h,rootBoundary:g,padding:m})[Ro(W)],X},{});return Object.keys(H).sort(function(X,W){return H[X]-H[W]})}function g5(e){if(Ro(e)===Cy)return[];var n=rf(e);return[sx(e),n,sx(n)]}function y5(e){var n=e.state,s=e.options,u=e.name;if(!n.modifiersData[u]._skip){for(var h=s.mainAxis,g=h===void 0?!0:h,m=s.altAxis,c=m===void 0?!0:m,T=s.fallbackPlacements,M=s.padding,k=s.boundary,A=s.rootBoundary,L=s.altBoundary,H=s.flipVariations,X=H===void 0?!0:H,W=s.allowedAutoPlacements,se=n.options.placement,Te=Ro(se),ye=Te===se,j=T||(ye||!X?[rf(se)]:g5(se)),oe=[se].concat(j).reduce(function(Qi,Oi){return Qi.concat(Ro(Oi)===Cy?m5(n,{placement:Oi,boundary:k,rootBoundary:A,padding:M,flipVariations:X,allowedAutoPlacements:W}):Oi)},[]),ee=n.rects.reference,ne=n.rects.popper,Ie=new Map,Ee=!0,Me=oe[0],pe=0;pe<oe.length;pe++){var Ae=oe[pe],Le=Ro(Ae),Oe=yc(Ae)===gc,Ge=[Bn,yo].indexOf(Le)>=0,rt=Ge?"width":"height",Ke=ky(n,{placement:Ae,boundary:k,rootBoundary:A,altBoundary:L,padding:M}),dt=Ge?Oe?_o:Fn:Oe?yo:Bn;ee[rt]>ne[rt]&&(dt=rf(dt));var nt=rf(dt),ti=[];if(g&&ti.push(Ke[Le]<=0),c&&ti.push(Ke[dt]<=0,Ke[nt]<=0),ti.every(function(Qi){return Qi})){Me=Ae,Ee=!1;break}Ie.set(Ae,ti)}if(Ee)for(var Ut=X?3:1,Nt=function(Oi){var fi=oe.find(function(Pi){var Bi=Ie.get(Pi);if(Bi)return Bi.slice(0,Oi).every(function(Br){return Br})});if(fi)return Me=fi,"break"},jt=Ut;jt>0;jt--){var Si=Nt(jt);if(Si==="break")break}n.placement!==Me&&(n.modifiersData[u]._skip=!0,n.placement=Me,n.reset=!0)}}const _5={name:"flip",enabled:!0,phase:"main",fn:y5,requiresIfExists:["offset"],data:{_skip:!1}};function v5(e,n,s){var u=Ro(e),h=[Fn,Bn].indexOf(u)>=0?-1:1,g=typeof s=="function"?s(Object.assign({},n,{placement:e})):s,m=g[0],c=g[1];return m=m||0,c=(c||0)*h,[Fn,_o].indexOf(u)>=0?{x:c,y:m}:{x:m,y:c}}function x5(e){var n=e.state,s=e.options,u=e.name,h=s.offset,g=h===void 0?[0,0]:h,m=mw.reduce(function(k,A){return k[A]=v5(A,n.rects,g),k},{}),c=m[n.placement],T=c.x,M=c.y;n.modifiersData.popperOffsets!=null&&(n.modifiersData.popperOffsets.x+=T,n.modifiersData.popperOffsets.y+=M),n.modifiersData[u]=m}const b5={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:x5};function w5(e){return e==="x"?"y":"x"}function Yu(e,n,s){return Ka(e,If(n,s))}function E5(e,n,s){var u=Yu(e,n,s);return u>s?s:u}function S5(e){var n=e.state,s=e.options,u=e.name,h=s.mainAxis,g=h===void 0?!0:h,m=s.altAxis,c=m===void 0?!1:m,T=s.boundary,M=s.rootBoundary,k=s.altBoundary,A=s.padding,L=s.tether,H=L===void 0?!0:L,X=s.tetherOffset,W=X===void 0?0:X,se=ky(n,{boundary:T,rootBoundary:M,padding:A,altBoundary:k}),Te=Ro(n.placement),ye=yc(n.placement),j=!ye,oe=Ay(Te),ee=w5(oe),ne=n.modifiersData.popperOffsets,Ie=n.rects.reference,Ee=n.rects.popper,Me=typeof W=="function"?W(Object.assign({},n.rects,{placement:n.placement})):W,pe=typeof Me=="number"?{mainAxis:Me,altAxis:Me}:Object.assign({mainAxis:0,altAxis:0},Me),Ae=n.modifiersData.offset?n.modifiersData.offset[n.placement]:null,Le={x:0,y:0};if(ne){if(g){var Oe,Ge=oe==="y"?Bn:Fn,rt=oe==="y"?yo:_o,Ke=oe==="y"?"height":"width",dt=ne[oe],nt=dt+se[Ge],ti=dt-se[rt],Ut=H?-Ee[Ke]/2:0,Nt=ye===gc?Ie[Ke]:Ee[Ke],jt=ye===gc?-Ee[Ke]:-Ie[Ke],Si=n.elements.arrow,Qi=H&&Si?Iy(Si):{width:0,height:0},Oi=n.modifiersData["arrow#persistent"]?n.modifiersData["arrow#persistent"].padding:_w(),fi=Oi[Ge],Pi=Oi[rt],Bi=Yu(0,Ie[Ke],Qi[Ke]),Br=j?Ie[Ke]/2-Ut-Bi-fi-pe.mainAxis:Nt-Bi-fi-pe.mainAxis,pr=j?-Ie[Ke]/2+Ut+Bi+Pi+pe.mainAxis:jt+Bi+Pi+pe.mainAxis,Fr=n.elements.arrow&&yh(n.elements.arrow),lr=Fr?oe==="y"?Fr.clientTop||0:Fr.clientLeft||0:0,ue=(Oe=Ae==null?void 0:Ae[oe])!=null?Oe:0,ge=dt+Br-ue-lr,Be=dt+pr-ue,le=Yu(H?If(nt,ge):nt,dt,H?Ka(ti,Be):ti);ne[oe]=le,Le[oe]=le-dt}if(c){var He,tt=oe==="x"?Bn:Fn,Ze=oe==="x"?yo:_o,je=ne[ee],Qe=ee==="y"?"height":"width",We=je+se[tt],pt=je-se[Ze],Tt=[Bn,Fn].indexOf(Te)!==-1,xt=(He=Ae==null?void 0:Ae[ee])!=null?He:0,Lt=Tt?We:je-Ie[Qe]-Ee[Qe]-xt+pe.altAxis,Ht=Tt?je+Ie[Qe]+Ee[Qe]-xt-pe.altAxis:pt,$e=H&&Tt?E5(Lt,je,Ht):Yu(H?Lt:We,je,H?Ht:pt);ne[ee]=$e,Le[ee]=$e-je}n.modifiersData[u]=Le}}const T5={name:"preventOverflow",enabled:!0,phase:"main",fn:S5,requiresIfExists:["offset"]};var I5=function(n,s){return n=typeof n=="function"?n(Object.assign({},s.rects,{placement:s.placement})):n,vw(typeof n!="number"?n:xw(n,_h))};function C5(e){var n,s=e.state,u=e.name,h=e.options,g=s.elements.arrow,m=s.modifiersData.popperOffsets,c=Ro(s.placement),T=Ay(c),M=[Fn,_o].indexOf(c)>=0,k=M?"height":"width";if(!(!g||!m)){var A=I5(h.padding,s),L=Iy(g),H=T==="y"?Bn:Fn,X=T==="y"?yo:_o,W=s.rects.reference[k]+s.rects.reference[T]-m[T]-s.rects.popper[k],se=m[T]-s.rects.reference[T],Te=yh(g),ye=Te?T==="y"?Te.clientHeight||0:Te.clientWidth||0:0,j=W/2-se/2,oe=A[H],ee=ye-L[k]-A[X],ne=ye/2-L[k]/2+j,Ie=Yu(oe,ne,ee),Ee=T;s.modifiersData[u]=(n={},n[Ee]=Ie,n.centerOffset=Ie-ne,n)}}function A5(e){var n=e.state,s=e.options,u=s.element,h=u===void 0?"[data-popper-arrow]":u;h!=null&&(typeof h=="string"&&(h=n.elements.popper.querySelector(h),!h)||gw(n.elements.popper,h)&&(n.elements.arrow=h))}const k5={name:"arrow",enabled:!0,phase:"main",fn:C5,effect:A5,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},M5=i5({defaultModifiers:[...d5,b5,_5,T5,ww,bw,k5]});function L5({locked:e=!1,overflowPadding:n=8,offsetDistance:s=8,offsetSkid:u=0,gpuAcceleration:h=!0,adaptive:g=!0,scroll:m=!0,resize:c=!0,arrow:T=!1,placement:M,strategy:k},A){const L=kt(null),H=kt(null),X=kt(null);return Wr(()=>{Vn(W=>{if(!H.value||!L.value&&!(A!=null&&A.value))return;const se=Sv(H),Te=Sv(L);if(!(se instanceof HTMLElement)||!Te)return;const ye={modifiers:[{name:"flip",enabled:!e},{name:"preventOverflow",options:{padding:n}},{name:"offset",options:{offset:[u,s]}},{name:"computeStyles",options:{adaptive:g,gpuAcceleration:h}},{name:"eventListeners",options:{scroll:m,resize:c}},{name:"arrow",enabled:T}]};M&&(ye.placement=M),k&&(ye.strategy=k),X.value=M5(Te,se,ye),W(X.value.destroy)})}),[L,H,X]}const Lo=ys(Di.ui.strategy,Di.ui.select,$M),Hd=ys(Di.ui.strategy,Di.ui.selectMenu,jM),P5=Ri({components:{HCombobox:fz,HComboboxButton:pz,HComboboxOptions:gz,HComboboxOption:yz,HComboboxInput:mz,HListbox:Tz,HListboxButton:Iz,HListboxOptions:Cz,HListboxOption:Az,UIcon:$o,UAvatar:Wf},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array,Boolean],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>Lo.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>Lo.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>Hd.default.selectedIcon},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},searchable:{type:[Boolean,Function],default:!1},searchablePlaceholder:{type:String,default:"Search..."},searchableLazy:{type:Boolean,default:!1},clearSearchOnClose:{type:Boolean,default:()=>Hd.default.clearSearchOnClose},debounce:{type:Number,default:200},creatable:{type:Boolean,default:!1},showCreateOptionWhen:{type:String,default:()=>Hd.default.showCreateOptionWhen},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(Lo.size).includes(e)}},color:{type:String,default:()=>Lo.default.color,validator(e){return[...Di.ui.colors,...Object.keys(Lo.color)].includes(e)}},variant:{type:String,default:()=>Lo.default.variant,validator(e){return[...Object.keys(Lo.variant),...Object.values(Lo.color).flatMap(n=>Object.keys(n))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},searchAttributes:{type:Array,default:null},popper:{type:Object,default:()=>({})},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:n,slots:s}){const{ui:u,attrs:h}=ra("select",eo(e,"ui"),Lo,eo(e,"class")),{ui:g}=ra("selectMenu",eo(e,"uiMenu"),Hd),m=Ve(()=>$f({},e.popper,g.value.popper)),[c,T]=L5(m.value),{size:M,rounded:k}=qf({ui:u,props:e}),{emitFormBlur:A,emitFormChange:L,inputId:H,color:X,size:W,name:se}=U1(e,Lo),Te=Ve(()=>M.value||W.value),ye=kt(""),j=Ve({get(){return e.query??ye.value},set(Ut){ye.value=Ut,n("update:query",Ut)}}),oe=Ve(()=>{if(e.multiple)return Array.isArray(e.modelValue)&&e.modelValue.length?`${e.modelValue.length} selected`:null;if(e.modelValue!==void 0&&e.modelValue!==null)if(e.valueAttribute){const Ut=e.options.find(Nt=>Nt[e.valueAttribute]===e.modelValue);return Ut?Ut[e.optionAttribute]:null}else return["string","number"].includes(typeof e.modelValue)?e.modelValue:e.modelValue[e.optionAttribute];return null}),ee=Ve(()=>{var Nt,jt;const Ut=((jt=(Nt=u.value.color)==null?void 0:Nt[X.value])==null?void 0:jt[e.variant])||u.value.variant[e.variant];return fs(tr(u.value.base,g.value.select,k.value,u.value.size[Te.value],u.value.gap[Te.value],e.padded?u.value.padding[Te.value]:"p-0",Ut==null?void 0:Ut.replaceAll("{color}",X.value),(ne.value||s.leading)&&u.value.leading.padding[Te.value],(Ie.value||s.trailing)&&u.value.trailing.padding[Te.value]),e.placeholder&&!e.modelValue&&u.value.placeholder,e.selectClass)}),ne=Ve(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),Ie=Ve(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),Ee=Ve(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),Me=Ve(()=>e.loading&&!ne.value?e.loadingIcon:e.trailingIcon||e.icon),pe=Ve(()=>tr(u.value.icon.leading.wrapper,u.value.icon.leading.pointer,u.value.icon.leading.padding[Te.value])),Ae=Ve(()=>tr(u.value.icon.base,X.value&&Di.ui.colors.includes(X.value)&&u.value.icon.color.replaceAll("{color}",X.value),u.value.icon.size[Te.value],e.loading&&u.value.icon.loading)),Le=Ve(()=>tr(u.value.icon.trailing.wrapper,u.value.icon.trailing.pointer,u.value.icon.trailing.padding[Te.value])),Oe=Ve(()=>tr(u.value.icon.base,X.value&&Di.ui.colors.includes(X.value)&&u.value.icon.color.replaceAll("{color}",X.value),u.value.icon.size[Te.value],e.loading&&!ne.value&&u.value.icon.loading)),Ge=typeof e.searchable=="function"?h1(e.searchable,e.debounce):void 0,rt=nk(async()=>e.searchable&&Ge?await Ge(j.value):j.value===""?e.options:e.options.filter(Ut=>{var Nt;return((Nt=e.searchAttributes)!=null&&Nt.length?e.searchAttributes:[e.optionAttribute]).some(jt=>{if(["string","number"].includes(typeof Ut))return String(Ut).search(new RegExp(j.value,"i"))!==-1;const Si=y1(Ut,jt);return Si!=null&&String(Si).search(new RegExp(j.value,"i"))!==-1})}),[],{lazy:e.searchableLazy}),Ke=Ve(()=>j.value===""||e.showCreateOptionWhen==="empty"&&rt.value.length||e.showCreateOptionWhen==="always"&&rt.value.find(Nt=>["string","number"].includes(typeof Nt)?Nt===j.value:Nt[e.optionAttribute]===j.value)?null:["string","number"].includes(typeof e.modelValue)?j.value:{[e.optionAttribute]:j.value});function dt(){e.clearSearchOnClose&&(j.value="")}Zi(T,Ut=>{Ut?n("open"):(dt(),n("close"),A())});function nt(Ut){n("update:modelValue",Ut),n("change",Ut),L()}function ti(Ut){j.value=Ut.target.value}return HP(()=>CP("$YMH7mn4R4k")),{ui:u,uiMenu:g,attrs:h,name:se,inputId:H,popper:m,trigger:c,container:T,label:oe,isLeading:ne,isTrailing:Ie,selectClass:ee,leadingIconName:Ee,leadingIconClass:Ae,leadingWrapperIconClass:pe,trailingIconName:Me,trailingIconClass:Oe,trailingWrapperIconClass:Le,filteredOptions:rt,createOption:Ke,query:j,onUpdate:nt,onQueryChange:ti}}}),z5=["value","required"],D5=["id","disabled"],R5={class:"truncate"};function O5(e,n,s,u,h,g){const m=$o,c=Vm("HComboboxInput"),T=Wf;return _t(),li(hs(e.searchable?"HCombobox":"HListbox"),{by:e.by,name:e.name,"model-value":e.modelValue,multiple:e.multiple,disabled:e.disabled,as:"div",class:Mt(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:xr(({open:M})=>[e.required?(_t(),ri("input",{key:0,value:e.modelValue,required:e.required,class:Mt(e.uiMenu.required),tabindex:"-1","aria-hidden":"true"},null,10,z5)):Li("",!0),(_t(),li(hs(e.searchable?"HComboboxButton":"HListboxButton"),{ref:"trigger",as:"div",role:"button",class:Mt(e.uiMenu.trigger)},{default:xr(()=>[sr(e.$slots,"default",{open:M,disabled:e.disabled,loading:e.loading},()=>[$i("button",br({id:e.inputId,class:e.selectClass,disabled:e.disabled,type:"button"},e.attrs),[e.isLeading&&e.leadingIconName||e.$slots.leading?(_t(),ri("span",{key:0,class:Mt(e.leadingWrapperIconClass)},[sr(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[ei(m,{name:e.leadingIconName,class:Mt(e.leadingIconClass)},null,8,["name","class"])])],2)):Li("",!0),sr(e.$slots,"label",{},()=>[e.label?(_t(),ri("span",{key:0,class:Mt(e.uiMenu.label)},Ur(e.label),3)):(_t(),ri("span",{key:1,class:Mt(e.uiMenu.label)},Ur(e.placeholder||""),3))]),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(_t(),ri("span",{key:1,class:Mt(e.trailingWrapperIconClass)},[sr(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[ei(m,{name:e.trailingIconName,class:Mt(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):Li("",!0)],16,D5)])]),_:2},1032,["class"])),M?(_t(),ri("div",{key:1,ref:"container",class:Mt([e.uiMenu.container,e.uiMenu.width])},[ei(Vf,br({appear:""},e.uiMenu.transition),{default:xr(()=>[$i("div",null,[e.popper.arrow?(_t(),ri("div",{key:0,"data-popper-arrow":"",class:Mt(Object.values(e.uiMenu.arrow))},null,2)):Li("",!0),(_t(),li(hs(e.searchable?"HComboboxOptions":"HListboxOptions"),{static:"",class:Mt([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:xr(()=>{var k,A;return[e.searchable?(_t(),li(c,{key:0,"display-value":()=>e.query,name:"q",placeholder:e.searchablePlaceholder,autofocus:"",autocomplete:"off",class:Mt(e.uiMenu.input),onChange:e.onQueryChange},null,8,["display-value","placeholder","class","onChange"])):Li("",!0),(_t(!0),ri(ar,null,oh(e.filteredOptions,(L,H)=>(_t(),li(hs(e.searchable?"HComboboxOption":"HListboxOption"),{key:H,as:"template",value:e.valueAttribute?L[e.valueAttribute]:L,disabled:L.disabled},{default:xr(({active:X,selected:W,disabled:se})=>[$i("li",{class:Mt([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,X?e.uiMenu.option.active:e.uiMenu.option.inactive,W&&e.uiMenu.option.selected,se&&e.uiMenu.option.disabled])},[$i("div",{class:Mt(e.uiMenu.option.container)},[sr(e.$slots,"option",{option:L,active:X,selected:W},()=>[L.icon?(_t(),li(m,{key:0,name:L.icon,class:Mt([e.uiMenu.option.icon.base,X?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,L.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):L.avatar?(_t(),li(T,br({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...L.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):L.chip?(_t(),ri("span",{key:2,class:Mt(e.uiMenu.option.chip.base),style:ia({background:`#${L.chip}`})},null,6)):Li("",!0),$i("span",R5,Ur(["string","number"].includes(typeof L)?L:L[e.optionAttribute]),1)])],2),W?(_t(),ri("span",{key:0,class:Mt([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[ei(m,{name:e.selectedIcon,class:Mt(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):Li("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.creatable&&e.createOption?(_t(),li(hs(e.searchable?"HComboboxOption":"HListboxOption"),{key:1,value:e.createOption,as:"template"},{default:xr(({active:L,selected:H})=>[$i("li",{class:Mt([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,L?e.uiMenu.option.active:e.uiMenu.option.inactive])},[$i("div",{class:Mt(e.uiMenu.option.container)},[sr(e.$slots,"option-create",{option:e.createOption,active:L,selected:H},()=>[$i("span",{class:Mt(e.uiMenu.option.create)},'Create "'+Ur(e.createOption[e.optionAttribute])+'"',3)])],2)],2)]),_:3},8,["value"])):e.searchable&&e.query&&!((k=e.filteredOptions)!=null&&k.length)?(_t(),ri("p",{key:2,class:Mt(e.uiMenu.option.empty)},[sr(e.$slots,"option-empty",{query:e.query},()=>[go(' No results for "'+Ur(e.query)+'". ',1)])],2)):(A=e.filteredOptions)!=null&&A.length?Li("",!0):(_t(),ri("p",{key:3,class:Mt(e.uiMenu.empty)},[sr(e.$slots,"empty",{query:e.query},()=>[go(" No options. ")])],2))]}),_:3},8,["class"]))])]),_:3},16)],2)):Li("",!0)]),_:3},8,["by","name","model-value","multiple","disabled","class","onUpdate:modelValue"])}const B5=jn(P5,[["render",O5]]);function Ew(){const e=mh("notifications",()=>[]);function n(g){const m={id:new Date().getTime().toString(),...g};return e.value.findIndex(T=>T.id===m.id)===-1&&e.value.push(m),m}function s(g){e.value=e.value.filter(m=>m.id!==g)}function u(g,m){const c=e.value.findIndex(T=>T.id===g);if(c!==-1){const T=e.value[c];e.value.splice(c,1,{...T,...m})}}function h(){e.value=[]}return{add:n,remove:s,update:u,clear:h}}var F5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V5(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sw={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.4.1/LICENSE.txt
 */(function(e,n){(function(s,u){e.exports=u()})(F5,function(){var s={},u={};function h(m,c,T){if(u[m]=T,m==="index"){var M="var sharedModule = {}; ("+u.shared+")(sharedModule); ("+u.worker+")(sharedModule);",k={};return u.shared(k),u.index(s,k),typeof window<"u"&&s.setWorkerUrl(window.URL.createObjectURL(new Blob([M],{type:"text/javascript"}))),s}}h("shared",["exports"],function(m){function c(r,t,o,l){return new(o||(o=Promise))(function(f,y){function x(C){try{E(l.next(C))}catch(P){y(P)}}function b(C){try{E(l.throw(C))}catch(P){y(P)}}function E(C){var P;C.done?f(C.value):(P=C.value,P instanceof o?P:new o(function(D){D(P)})).then(x,b)}E((l=l.apply(r,t||[])).next())})}function T(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}typeof SuppressedError=="function"&&SuppressedError;var M=k;function k(r,t){this.x=r,this.y=t}k.prototype={clone:function(){return new k(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,t){return this.clone()._rotateAround(r,t)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var t=r.x-this.x,o=r.y-this.y;return t*t+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,t){return Math.atan2(this.x*t-this.y*r,this.x*r+this.y*t)},_matMult:function(r){var t=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=t,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var t=Math.cos(r),o=Math.sin(r),l=o*this.x+t*this.y;return this.x=t*this.x-o*this.y,this.y=l,this},_rotateAround:function(r,t){var o=Math.cos(r),l=Math.sin(r),f=t.y+l*(this.x-t.x)+o*(this.y-t.y);return this.x=t.x+o*(this.x-t.x)-l*(this.y-t.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},k.convert=function(r){return r instanceof k?r:Array.isArray(r)?new k(r[0],r[1]):r};var A=T(M),L=H;function H(r,t,o,l){this.cx=3*r,this.bx=3*(o-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=t,this.p2x=o,this.p2y=l}H.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,t){if(t===void 0&&(t=1e-6),r<0)return 0;if(r>1)return 1;for(var o=r,l=0;l<8;l++){var f=this.sampleCurveX(o)-r;if(Math.abs(f)<t)return o;var y=this.sampleCurveDerivativeX(o);if(Math.abs(y)<1e-6)break;o-=f/y}var x=0,b=1;for(o=r,l=0;l<20&&(f=this.sampleCurveX(o),!(Math.abs(f-r)<t));l++)r>f?x=o:b=o,o=.5*(b-x)+x;return o},solve:function(r,t){return this.sampleCurveY(this.solveCurveX(r,t))}};var X=T(L);let W,se;function Te(){return W==null&&(W=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),W}function ye(){if(se==null&&(se=!1,Te())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let l=0;l<5*5;l++){const f=4*l;t.fillStyle=`rgb(${f},${f+1},${f+2})`,t.fillRect(l%5,Math.floor(l/5),1,1)}const o=t.getImageData(0,0,5,5).data;for(let l=0;l<5*5*4;l++)if(l%4!=3&&o[l]!==l){se=!0;break}}}return se||!1}function j(r,t,o,l){const f=new X(r,t,o,l);return y=>f.solve(y)}const oe=j(.25,.1,.25,1);function ee(r,t,o){return Math.min(o,Math.max(t,r))}function ne(r,t,o){const l=o-t,f=((r-t)%l+l)%l+t;return f===t?o:f}function Ie(r,...t){for(const o of t)for(const l in o)r[l]=o[l];return r}let Ee=1;function Me(r,t,o){const l={};for(const f in r)l[f]=t.call(this,r[f],f,r);return l}function pe(r,t,o){const l={};for(const f in r)t.call(this,r[f],f,r)&&(l[f]=r[f]);return l}function Ae(r){return Array.isArray(r)?r.map(Ae):typeof r=="object"&&r?Me(r,Ae):r}const Le={};function Oe(r){Le[r]||(typeof console<"u"&&console.warn(r),Le[r]=!0)}function Ge(r,t,o){return(o.y-r.y)*(t.x-r.x)>(t.y-r.y)*(o.x-r.x)}function rt(r){return typeof WorkerGlobalScope<"u"&&r!==void 0&&r instanceof WorkerGlobalScope}let Ke=null;function dt(r){return typeof ImageBitmap<"u"&&r instanceof ImageBitmap}const nt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ti(r,t,o,l,f){return c(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const y=new VideoFrame(r,{timestamp:0});try{const x=y==null?void 0:y.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const b=x.startsWith("BGR"),E=new Uint8ClampedArray(l*f*4);if(yield y.copyTo(E,function(C,P,D,B,V){const U=4*Math.max(-P,0),Z=(Math.max(0,D)-D)*B*4+U,Y=4*B,ae=Math.max(0,P),we=Math.max(0,D);return{rect:{x:ae,y:we,width:Math.min(C.width,P+B)-ae,height:Math.min(C.height,D+V)-we},layout:[{offset:Z,stride:Y}]}}(r,t,o,l,f)),b)for(let C=0;C<E.length;C+=4){const P=E[C];E[C]=E[C+2],E[C+2]=P}return E}finally{y.close()}})}let Ut,Nt;const jt="AbortError";function Si(){return new Error(jt)}const Qi={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Oi(r){return Qi.REGISTERED_PROTOCOLS[r.substring(0,r.indexOf("://"))]}const fi="global-dispatcher";class Pi extends Error{constructor(t,o,l,f){super(`AJAXError: ${o} (${t}): ${l}`),this.status=t,this.statusText=o,this.url=l,this.body=f}}const Bi=()=>rt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Br=function(r,t){if(/:\/\//.test(r.url)&&!/^https?:|^file:/.test(r.url)){const l=Oi(r.url);if(l)return l(r,t);if(rt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,targetMapId:fi},t)}if(!(/^file:/.test(o=r.url)||/^file:/.test(Bi())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(l,f){return c(this,void 0,void 0,function*(){const y=new Request(l.url,{method:l.method||"GET",body:l.body,credentials:l.credentials,headers:l.headers,cache:l.cache,referrer:Bi(),signal:f.signal});l.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");const x=yield fetch(y);if(!x.ok){const C=yield x.blob();throw new Pi(x.status,x.statusText,l.url,C)}let b;b=l.type==="arrayBuffer"||l.type==="image"?x.arrayBuffer():l.type==="json"?x.json():x.text();const E=yield b;if(f.signal.aborted)throw Si();return{data:E,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(r,t);if(rt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:r,mustQueue:!0,targetMapId:fi},t)}var o;return function(l,f){return new Promise((y,x)=>{var b;const E=new XMLHttpRequest;E.open(l.method||"GET",l.url,!0),l.type!=="arrayBuffer"&&l.type!=="image"||(E.responseType="arraybuffer");for(const C in l.headers)E.setRequestHeader(C,l.headers[C]);l.type==="json"&&(E.responseType="text",!((b=l.headers)===null||b===void 0)&&b.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=l.credentials==="include",E.onerror=()=>{x(new Error(E.statusText))},E.onload=()=>{if(!f.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let C=E.response;if(l.type==="json")try{C=JSON.parse(E.response)}catch(P){return void x(P)}y({data:C,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{const C=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});x(new Pi(E.status,E.statusText,l.url,C))}},f.signal.addEventListener("abort",()=>{E.abort(),x(Si())}),E.send(l.body)})}(r,t)};function pr(r){if(!r||r.indexOf("://")<=0||r.indexOf("data:image/")===0||r.indexOf("blob:")===0)return!0;const t=new URL(r),o=window.location;return t.protocol===o.protocol&&t.host===o.host}function Fr(r,t,o){o[r]&&o[r].indexOf(t)!==-1||(o[r]=o[r]||[],o[r].push(t))}function lr(r,t,o){if(o&&o[r]){const l=o[r].indexOf(t);l!==-1&&o[r].splice(l,1)}}class ue{constructor(t,o={}){Ie(this,o),this.type=t}}class ge extends ue{constructor(t,o={}){super("error",Ie({error:t},o))}}class Be{on(t,o){return this._listeners=this._listeners||{},Fr(t,o,this._listeners),this}off(t,o){return lr(t,o,this._listeners),lr(t,o,this._oneTimeListeners),this}once(t,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Fr(t,o,this._oneTimeListeners),this):new Promise(l=>this.once(t,l))}fire(t,o){typeof t=="string"&&(t=new ue(t,o||{}));const l=t.type;if(this.listens(l)){t.target=this;const f=this._listeners&&this._listeners[l]?this._listeners[l].slice():[];for(const b of f)b.call(this,t);const y=this._oneTimeListeners&&this._oneTimeListeners[l]?this._oneTimeListeners[l].slice():[];for(const b of y)lr(l,b,this._oneTimeListeners),b.call(this,t);const x=this._eventedParent;x&&(Ie(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(t))}else t instanceof ge&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,o){return this._eventedParent=t,this._eventedParentData=o,this}}var le={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const He=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function tt(r,t){const o={};for(const l in r)l!=="ref"&&(o[l]=r[l]);return He.forEach(l=>{l in t&&(o[l]=t[l])}),o}function Ze(r,t){if(Array.isArray(r)){if(!Array.isArray(t)||r.length!==t.length)return!1;for(let o=0;o<r.length;o++)if(!Ze(r[o],t[o]))return!1;return!0}if(typeof r=="object"&&r!==null&&t!==null){if(typeof t!="object"||Object.keys(r).length!==Object.keys(t).length)return!1;for(const o in r)if(!Ze(r[o],t[o]))return!1;return!0}return r===t}function je(r,t){r.push(t)}function Qe(r,t,o){je(o,{command:"addSource",args:[r,t[r]]})}function We(r,t,o){je(t,{command:"removeSource",args:[r]}),o[r]=!0}function pt(r,t,o,l){We(r,o,l),Qe(r,t,o)}function Tt(r,t,o){let l;for(l in r[o])if(Object.prototype.hasOwnProperty.call(r[o],l)&&l!=="data"&&!Ze(r[o][l],t[o][l]))return!1;for(l in t[o])if(Object.prototype.hasOwnProperty.call(t[o],l)&&l!=="data"&&!Ze(r[o][l],t[o][l]))return!1;return!0}function xt(r,t,o,l,f,y){r=r||{},t=t||{};for(const x in r)Object.prototype.hasOwnProperty.call(r,x)&&(Ze(r[x],t[x])||o.push({command:y,args:[l,x,t[x],f]}));for(const x in t)Object.prototype.hasOwnProperty.call(t,x)&&!Object.prototype.hasOwnProperty.call(r,x)&&(Ze(r[x],t[x])||o.push({command:y,args:[l,x,t[x],f]}))}function Lt(r){return r.id}function Ht(r,t){return r[t.id]=t,r}class $e{constructor(t,o,l,f){this.message=(t?`${t}: `:"")+l,f&&(this.identifier=f),o!=null&&o.__line__&&(this.line=o.__line__)}}function Gt(r,...t){for(const o of t)for(const l in o)r[l]=o[l];return r}class ai extends Error{constructor(t,o){super(o),this.message=o,this.key=t}}class mr{constructor(t,o=[]){this.parent=t,this.bindings={};for(const[l,f]of o)this.bindings[l]=f}concat(t){return new mr(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const Kr={kind:"null"},Ye={kind:"number"},Bt={kind:"string"},Dt={kind:"boolean"},pi={kind:"color"},Ti={kind:"object"},Ft={kind:"value"},ro={kind:"collator"},no={kind:"formatted"},gr={kind:"padding"},Q={kind:"resolvedImage"},F={kind:"variableAnchorOffsetCollection"};function N(r,t){return{kind:"array",itemType:r,N:t}}function q(r){if(r.kind==="array"){const t=q(r.itemType);return typeof r.N=="number"?`array<${t}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${t}>`}return r.kind}const ie=[Kr,Ye,Bt,Dt,pi,no,Ti,N(Ft),gr,Q,F];function fe(r,t){if(t.kind==="error")return null;if(r.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!fe(r.itemType,t.itemType))&&(typeof r.N!="number"||r.N===t.N))return null}else{if(r.kind===t.kind)return null;if(r.kind==="value"){for(const o of ie)if(!fe(o,t))return null}}return`Expected ${q(r)} but found ${q(t)} instead.`}function _e(r,t){return t.some(o=>o.kind===r.kind)}function be(r,t){return t.some(o=>o==="null"?r===null:o==="array"?Array.isArray(r):o==="object"?r&&!Array.isArray(r)&&typeof r=="object":o===typeof r)}function he(r,t){return r.kind==="array"&&t.kind==="array"?r.itemType.kind===t.itemType.kind&&typeof r.N=="number":r.kind===t.kind}const ke=.96422,Ue=.82521,Re=4/29,De=6/29,It=3*De*De,St=De*De*De,Jt=Math.PI/180,Rt=180/Math.PI;function ii(r){return(r%=360)<0&&(r+=360),r}function mi([r,t,o,l]){let f,y;const x=rr((.2225045*(r=Ii(r))+.7168786*(t=Ii(t))+.0606169*(o=Ii(o)))/1);r===t&&t===o?f=y=x:(f=rr((.4360747*r+.3850649*t+.1430804*o)/ke),y=rr((.0139322*r+.0971045*t+.7141733*o)/Ue));const b=116*x-16;return[b<0?0:b,500*(f-x),200*(x-y),l]}function Ii(r){return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function rr(r){return r>St?Math.pow(r,1/3):r/It+Re}function Zt([r,t,o,l]){let f=(r+16)/116,y=isNaN(t)?f:f+t/500,x=isNaN(o)?f:f-o/200;return f=1*cr(f),y=ke*cr(y),x=Ue*cr(x),[Fi(3.1338561*y-1.6168667*f-.4906146*x),Fi(-.9787684*y+1.9161415*f+.033454*x),Fi(.0719453*y-.2289914*f+1.4052427*x),l]}function Fi(r){return(r=r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055)<0?0:r>1?1:r}function cr(r){return r>De?r*r*r:It*(r-Re)}function Xr(r){return parseInt(r.padEnd(2,r),16)/255}function cn(r,t){return ur(t?r/100:r,0,1)}function ur(r,t,o){return Math.min(Math.max(t,r),o)}function _s(r){return!r.some(Number.isNaN)}const Jf={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class di{constructor(t,o,l,f=1,y=!0){this.r=t,this.g=o,this.b=l,this.a=f,y||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[t,o,l,f]))}static parse(t){if(t instanceof di)return t;if(typeof t!="string")return;const o=function(l){if((l=l.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=Jf[l];if(f){const[x,b,E]=f;return[x/255,b/255,E/255,1]}if(l.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(l)){const x=l.length<6?1:2;let b=1;return[Xr(l.slice(b,b+=x)),Xr(l.slice(b,b+=x)),Xr(l.slice(b,b+=x)),Xr(l.slice(b,b+x)||"ff")]}if(l.startsWith("rgb")){const x=l.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[b,E,C,P,D,B,V,U,Z,Y,ae,we]=x,de=[P||" ",V||" ",Y].join("");if(de==="  "||de==="  /"||de===",,"||de===",,,"){const xe=[C,B,Z].join(""),ze=xe==="%%%"?100:xe===""?255:0;if(ze){const qe=[ur(+E/ze,0,1),ur(+D/ze,0,1),ur(+U/ze,0,1),ae?cn(+ae,we):1];if(_s(qe))return qe}}return}}const y=l.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){const[x,b,E,C,P,D,B,V,U]=y,Z=[E||" ",P||" ",B].join("");if(Z==="  "||Z==="  /"||Z===",,"||Z===",,,"){const Y=[+b,ur(+C,0,100),ur(+D,0,100),V?cn(+V,U):1];if(_s(Y))return function([ae,we,de,xe]){function ze(qe){const st=(qe+ae/30)%12,Ct=we*Math.min(de,1-de);return de-Ct*Math.max(-1,Math.min(st-3,9-st,1))}return ae=ii(ae),we/=100,de/=100,[ze(0),ze(8),ze(4),xe]}(Y)}}}(t);return o?new di(...o,!1):void 0}get rgb(){const{r:t,g:o,b:l,a:f}=this,y=f||1/0;return this.overwriteGetter("rgb",[t/y,o/y,l/y,f])}get hcl(){return this.overwriteGetter("hcl",function(t){const[o,l,f,y]=mi(t),x=Math.sqrt(l*l+f*f);return[Math.round(1e4*x)?ii(Math.atan2(f,l)*Rt):NaN,x,o,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",mi(this.rgb))}overwriteGetter(t,o){return Object.defineProperty(this,t,{value:o}),o}toString(){const[t,o,l,f]=this.rgb;return`rgba(${[t,o,l].map(y=>Math.round(255*y)).join(",")},${f})`}}di.black=new di(0,0,0,1),di.white=new di(1,1,1,1),di.transparent=new di(0,0,0,0),di.red=new di(1,0,0,1);class wc{constructor(t,o,l){this.sensitivity=t?o?"variant":"case":o?"accent":"base",this.locale=l,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,o){return this.collator.compare(t,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ec{constructor(t,o,l,f,y){this.text=t,this.image=o,this.scale=l,this.fontStack=f,this.textColor=y}}class un{constructor(t){this.sections=t}static fromString(t){return new un([new Ec(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof un?t:un.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}}class Jr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Jr)return t;if(typeof t=="number")return new Jr([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const o of t)if(typeof o!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Jr(t)}}toString(){return JSON.stringify(this.values)}}const ha=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Yr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Yr)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let o=0;o<t.length;o+=2){const l=t[o],f=t[o+1];if(typeof l!="string"||!ha.has(l)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Yr(t)}}toString(){return JSON.stringify(this.values)}}class vn{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new vn({name:t,available:!1}):null}}function xh(r,t,o,l){return typeof r=="number"&&r>=0&&r<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof o=="number"&&o>=0&&o<=255?l===void 0||typeof l=="number"&&l>=0&&l<=1?null:`Invalid rgba value [${[r,t,o,l].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof l=="number"?[r,t,o,l]:[r,t,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function oo(r){if(r===null||typeof r=="string"||typeof r=="boolean"||typeof r=="number"||r instanceof di||r instanceof wc||r instanceof un||r instanceof Jr||r instanceof Yr||r instanceof vn)return!0;if(Array.isArray(r)){for(const t of r)if(!oo(t))return!1;return!0}if(typeof r=="object"){for(const t in r)if(!oo(r[t]))return!1;return!0}return!1}function nr(r){if(r===null)return Kr;if(typeof r=="string")return Bt;if(typeof r=="boolean")return Dt;if(typeof r=="number")return Ye;if(r instanceof di)return pi;if(r instanceof wc)return ro;if(r instanceof un)return no;if(r instanceof Jr)return gr;if(r instanceof Yr)return F;if(r instanceof vn)return Q;if(Array.isArray(r)){const t=r.length;let o;for(const l of r){const f=nr(l);if(o){if(o===f)continue;o=Ft;break}o=f}return N(o||Ft,t)}return Ti}function da(r){const t=typeof r;return r===null?"":t==="string"||t==="number"||t==="boolean"?String(r):r instanceof di||r instanceof un||r instanceof Jr||r instanceof Yr||r instanceof vn?r.toString():JSON.stringify(r)}class Uo{constructor(t,o){this.type=t,this.value=o}static parse(t,o){if(t.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!oo(t[1]))return o.error("invalid value");const l=t[1];let f=nr(l);const y=o.expectedType;return f.kind!=="array"||f.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(f=y),new Uo(f,l)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Wi{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const qo={string:Bt,number:Ye,boolean:Dt,object:Ti};class Tn{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");let l,f=1;const y=t[0];if(y==="array"){let b,E;if(t.length>2){const C=t[1];if(typeof C!="string"||!(C in qo)||C==="object")return o.error('The item type argument of "array" must be one of string, number, boolean',1);b=qo[C],f++}else b=Ft;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return o.error('The length argument to "array" must be a positive integer literal',2);E=t[2],f++}l=N(b,E)}else{if(!qo[y])throw new Error(`Types doesn't contain name = ${y}`);l=qo[y]}const x=[];for(;f<t.length;f++){const b=o.parse(t[f],f,Ft);if(!b)return null;x.push(b)}return new Tn(l,x)}evaluate(t){for(let o=0;o<this.args.length;o++){const l=this.args[o].evaluate(t);if(!fe(this.type,nr(l)))return l;if(o===this.args.length-1)throw new Wi(`Expected value to be of type ${q(this.type)}, but found ${q(nr(l))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const il={"to-boolean":Dt,"to-color":pi,"to-number":Ye,"to-string":Bt};class Un{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const l=t[0];if(!il[l])throw new Error(`Can't parse ${l} as it is not part of the known types`);if((l==="to-boolean"||l==="to-string")&&t.length!==2)return o.error("Expected one argument.");const f=il[l],y=[];for(let x=1;x<t.length;x++){const b=o.parse(t[x],x,Ft);if(!b)return null;y.push(b)}return new Un(f,y)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let o,l;for(const f of this.args){if(o=f.evaluate(t),l=null,o instanceof di)return o;if(typeof o=="string"){const y=t.parseColor(o);if(y)return y}else if(Array.isArray(o)&&(l=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:xh(o[0],o[1],o[2],o[3]),!l))return new di(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Wi(l||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(const l of this.args){o=l.evaluate(t);const f=Jr.parse(o);if(f)return f}throw new Wi(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(const l of this.args){o=l.evaluate(t);const f=Yr.parse(o);if(f)return f}throw new Wi(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(const l of this.args){if(o=l.evaluate(t),o===null)return 0;const f=Number(o);if(!isNaN(f))return f}throw new Wi(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return un.fromString(da(this.args[0].evaluate(t)));case"resolvedImage":return vn.fromString(da(this.args[0].evaluate(t)));default:return da(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Sc=["Unknown","Point","LineString","Polygon"];class vs{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Sc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let o=this._parseColorCache[t];return o||(o=this._parseColorCache[t]=di.parse(t)),o}}class ci{constructor(t,o,l=[],f,y=new mr,x=[]){this.registry=t,this.path=l,this.key=l.map(b=>`[${b}]`).join(""),this.scope=y,this.errors=x,this.expectedType=f,this._isConstant=o}parse(t,o,l,f,y={}){return o?this.concat(o,l,f)._parse(t,y):this._parse(t,y)}_parse(t,o){function l(f,y,x){return x==="assert"?new Tn(y,[f]):x==="coerce"?new Un(y,[f]):f}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=t[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const y=this.registry[f];if(y){let x=y.parse(t,this);if(!x)return null;if(this.expectedType){const b=this.expectedType,E=x.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||E.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(b.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(b.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(b,E))return null}else x=l(x,b,o.typeAnnotation||"coerce");else x=l(x,b,o.typeAnnotation||"coerce");else x=l(x,b,o.typeAnnotation||"coerce");else x=l(x,b,o.typeAnnotation||"assert")}if(!(x instanceof Uo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const b=new vs;try{x=new Uo(x.type,x.evaluate(b))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,o,l){const f=typeof t=="number"?this.path.concat(t):this.path,y=l?this.scope.concat(l):this.scope;return new ci(this.registry,this._isConstant,f,o||null,y,this.errors)}error(t,...o){const l=`${this.key}${o.map(f=>`[${f}]`).join("")}`;this.errors.push(new ai(l,t))}checkSubtype(t,o){const l=fe(t,o);return l&&this.error(l),l}}class rl{constructor(t,o){this.type=o.type,this.bindings=[].concat(t),this.result=o}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const o of this.bindings)t(o[1]);t(this.result)}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const l=[];for(let y=1;y<t.length-1;y+=2){const x=t[y];if(typeof x!="string")return o.error(`Expected string, but found ${typeof x} instead.`,y);if(/[^a-zA-Z0-9_]/.test(x))return o.error("Variable names must contain only alphanumeric characters or '_'.",y);const b=o.parse(t[y+1],y+1);if(!b)return null;l.push([x,b])}const f=o.parse(t[t.length-1],t.length-1,o.expectedType,l);return f?new rl(l,f):null}outputDefined(){return this.result.outputDefined()}}class xs{constructor(t,o){this.type=o.type,this.name=t,this.boundExpression=o}static parse(t,o){if(t.length!==2||typeof t[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");const l=t[1];return o.scope.has(l)?new xs(l,o.scope.get(l)):o.error(`Unknown variable "${l}". Make sure "${l}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class Tc{constructor(t,o,l){this.type=t,this.index=o,this.input=l}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=o.parse(t[1],1,Ye),f=o.parse(t[2],2,N(o.expectedType||Ft));return l&&f?new Tc(f.type.itemType,l,f):null}evaluate(t){const o=this.index.evaluate(t),l=this.input.evaluate(t);if(o<0)throw new Wi(`Array index out of bounds: ${o} < 0.`);if(o>=l.length)throw new Wi(`Array index out of bounds: ${o} > ${l.length-1}.`);if(o!==Math.floor(o))throw new Wi(`Array index must be an integer, but found ${o} instead.`);return l[o]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class nl{constructor(t,o){this.type=Dt,this.needle=t,this.haystack=o}static parse(t,o){if(t.length!==3)return o.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const l=o.parse(t[1],1,Ft),f=o.parse(t[2],2,Ft);return l&&f?_e(l.type,[Dt,Bt,Ye,Kr,Ft])?new nl(l,f):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${q(l.type)} instead`):null}evaluate(t){const o=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!l)return!1;if(!be(o,["boolean","string","number","null"]))throw new Wi(`Expected first argument to be of type boolean, string, number or null, but found ${q(nr(o))} instead.`);if(!be(l,["string","array"]))throw new Wi(`Expected second argument to be of type array or string, but found ${q(nr(l))} instead.`);return l.indexOf(o)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class fa{constructor(t,o,l){this.type=Ye,this.needle=t,this.haystack=o,this.fromIndex=l}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=o.parse(t[1],1,Ft),f=o.parse(t[2],2,Ft);if(!l||!f)return null;if(!_e(l.type,[Dt,Bt,Ye,Kr,Ft]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${q(l.type)} instead`);if(t.length===4){const y=o.parse(t[3],3,Ye);return y?new fa(l,f,y):null}return new fa(l,f)}evaluate(t){const o=this.needle.evaluate(t),l=this.haystack.evaluate(t);if(!be(o,["boolean","string","number","null"]))throw new Wi(`Expected first argument to be of type boolean, string, number or null, but found ${q(nr(o))} instead.`);if(!be(l,["string","array"]))throw new Wi(`Expected second argument to be of type array or string, but found ${q(nr(l))} instead.`);if(this.fromIndex){const f=this.fromIndex.evaluate(t);return l.indexOf(o,f)}return l.indexOf(o)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class Ic{constructor(t,o,l,f,y,x){this.inputType=t,this.type=o,this.input=l,this.cases=f,this.outputs=y,this.otherwise=x}static parse(t,o){if(t.length<5)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return o.error("Expected an even number of arguments.");let l,f;o.expectedType&&o.expectedType.kind!=="value"&&(f=o.expectedType);const y={},x=[];for(let C=2;C<t.length-1;C+=2){let P=t[C];const D=t[C+1];Array.isArray(P)||(P=[P]);const B=o.concat(C);if(P.length===0)return B.error("Expected at least one branch label.");for(const U of P){if(typeof U!="number"&&typeof U!="string")return B.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return B.error("Numeric branch labels must be integer values.");if(l){if(B.checkSubtype(l,nr(U)))return null}else l=nr(U);if(y[String(U)]!==void 0)return B.error("Branch labels must be unique.");y[String(U)]=x.length}const V=o.parse(D,C,f);if(!V)return null;f=f||V.type,x.push(V)}const b=o.parse(t[1],1,Ft);if(!b)return null;const E=o.parse(t[t.length-1],t.length-1,f);return E?b.type.kind!=="value"&&o.concat(1).checkSubtype(l,b.type)?null:new Ic(l,f,b,y,x,E):null}evaluate(t){const o=this.input.evaluate(t);return(nr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}}class ol{constructor(t,o,l){this.type=t,this.branches=o,this.otherwise=l}static parse(t,o){if(t.length<4)return o.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return o.error("Expected an odd number of arguments.");let l;o.expectedType&&o.expectedType.kind!=="value"&&(l=o.expectedType);const f=[];for(let x=1;x<t.length-1;x+=2){const b=o.parse(t[x],x,Dt);if(!b)return null;const E=o.parse(t[x+1],x+1,l);if(!E)return null;f.push([b,E]),l=l||E.type}const y=o.parse(t[t.length-1],t.length-1,l);if(!y)return null;if(!l)throw new Error("Can't infer output type");return new ol(l,f,y)}evaluate(t){for(const[o,l]of this.branches)if(o.evaluate(t))return l.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[o,l]of this.branches)t(o),t(l);t(this.otherwise)}outputDefined(){return this.branches.every(([t,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class pa{constructor(t,o,l,f){this.type=t,this.input=o,this.beginIndex=l,this.endIndex=f}static parse(t,o){if(t.length<=2||t.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const l=o.parse(t[1],1,Ft),f=o.parse(t[2],2,Ye);if(!l||!f)return null;if(!_e(l.type,[N(Ft),Bt,Ft]))return o.error(`Expected first argument to be of type array or string, but found ${q(l.type)} instead`);if(t.length===4){const y=o.parse(t[3],3,Ye);return y?new pa(l.type,l,f,y):null}return new pa(l.type,l,f)}evaluate(t){const o=this.input.evaluate(t),l=this.beginIndex.evaluate(t);if(!be(o,["string","array"]))throw new Wi(`Expected first argument to be of type array or string, but found ${q(nr(o))} instead.`);if(this.endIndex){const f=this.endIndex.evaluate(t);return o.slice(l,f)}return o.slice(l)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function sl(r,t){const o=r.length-1;let l,f,y=0,x=o,b=0;for(;y<=x;)if(b=Math.floor((y+x)/2),l=r[b],f=r[b+1],l<=t){if(b===o||t<f)return b;y=b+1}else{if(!(l>t))throw new Wi("Input is not a number.");x=b-1}return 0}class ma{constructor(t,o,l){this.type=t,this.input=o,this.labels=[],this.outputs=[];for(const[f,y]of l)this.labels.push(f),this.outputs.push(y)}static parse(t,o){if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");const l=o.parse(t[1],1,Ye);if(!l)return null;const f=[];let y=null;o.expectedType&&o.expectedType.kind!=="value"&&(y=o.expectedType);for(let x=1;x<t.length;x+=2){const b=x===1?-1/0:t[x],E=t[x+1],C=x,P=x+1;if(typeof b!="number")return o.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',C);if(f.length&&f[f.length-1][0]>=b)return o.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',C);const D=o.parse(E,P,y);if(!D)return null;y=y||D.type,f.push([b,D])}return new ma(y,l,f)}evaluate(t){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(t);const f=this.input.evaluate(t);if(f<=o[0])return l[0].evaluate(t);const y=o.length;return f>=o[y-1]?l[y-1].evaluate(t):l[sl(o,f)].evaluate(t)}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Yf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Qf=Cc;function Cc(r,t,o,l){this.cx=3*r,this.bx=3*(o-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(l-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=t,this.p2x=o,this.p2y=l}Cc.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,t){if(t===void 0&&(t=1e-6),r<0)return 0;if(r>1)return 1;for(var o=r,l=0;l<8;l++){var f=this.sampleCurveX(o)-r;if(Math.abs(f)<t)return o;var y=this.sampleCurveDerivativeX(o);if(Math.abs(y)<1e-6)break;o-=f/y}var x=0,b=1;for(o=r,l=0;l<20&&(f=this.sampleCurveX(o),!(Math.abs(f-r)<t));l++)r>f?x=o:b=o,o=.5*(b-x)+x;return o},solve:function(r,t){return this.sampleCurveY(this.solveCurveX(r,t))}};var bh=Yf(Qf);function Ho(r,t,o){return r+o*(t-r)}function al(r,t,o){return r.map((l,f)=>Ho(l,t[f],o))}const Vr={number:Ho,color:function(r,t,o,l="rgb"){switch(l){case"rgb":{const[f,y,x,b]=al(r.rgb,t.rgb,o);return new di(f,y,x,b,!1)}case"hcl":{const[f,y,x,b]=r.hcl,[E,C,P,D]=t.hcl;let B,V;if(isNaN(f)||isNaN(E))isNaN(f)?isNaN(E)?B=NaN:(B=E,x!==1&&x!==0||(V=C)):(B=f,P!==1&&P!==0||(V=y));else{let we=E-f;E>f&&we>180?we-=360:E<f&&f-E>180&&(we+=360),B=f+o*we}const[U,Z,Y,ae]=function([we,de,xe,ze]){return we=isNaN(we)?0:we*Jt,Zt([xe,Math.cos(we)*de,Math.sin(we)*de,ze])}([B,V??Ho(y,C,o),Ho(x,P,o),Ho(b,D,o)]);return new di(U,Z,Y,ae,!1)}case"lab":{const[f,y,x,b]=Zt(al(r.lab,t.lab,o));return new di(f,y,x,b,!1)}}},array:al,padding:function(r,t,o){return new Jr(al(r.values,t.values,o))},variableAnchorOffsetCollection:function(r,t,o){const l=r.values,f=t.values;if(l.length!==f.length)throw new Wi(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${t.toString()}`);const y=[];for(let x=0;x<l.length;x+=2){if(l[x]!==f[x])throw new Wi(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${l[x]}, to[${x}]: ${f[x]}`);y.push(l[x]);const[b,E]=l[x+1],[C,P]=f[x+1];y.push([Ho(b,C,o),Ho(E,P,o)])}return new Yr(y)}};class hn{constructor(t,o,l,f,y){this.type=t,this.operator=o,this.interpolation=l,this.input=f,this.labels=[],this.outputs=[];for(const[x,b]of y)this.labels.push(x),this.outputs.push(b)}static interpolationFactor(t,o,l,f){let y=0;if(t.name==="exponential")y=Ac(o,t.base,l,f);else if(t.name==="linear")y=Ac(o,1,l,f);else if(t.name==="cubic-bezier"){const x=t.controlPoints;y=new bh(x[0],x[1],x[2],x[3]).solve(Ac(o,1,l,f))}return y}static parse(t,o){let[l,f,y,...x]=t;if(!Array.isArray(f)||f.length===0)return o.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const C=f[1];if(typeof C!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:C}}else{if(f[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const C=f.slice(1);if(C.length!==4||C.some(P=>typeof P!="number"||P<0||P>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:C}}}if(t.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(y=o.parse(y,2,Ye),!y)return null;const b=[];let E=null;l==="interpolate-hcl"||l==="interpolate-lab"?E=pi:o.expectedType&&o.expectedType.kind!=="value"&&(E=o.expectedType);for(let C=0;C<x.length;C+=2){const P=x[C],D=x[C+1],B=C+3,V=C+4;if(typeof P!="number")return o.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',B);if(b.length&&b[b.length-1][0]>=P)return o.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',B);const U=o.parse(D,V,E);if(!U)return null;E=E||U.type,b.push([P,U])}return he(E,Ye)||he(E,pi)||he(E,gr)||he(E,F)||he(E,N(Ye))?new hn(E,l,f,y,b):o.error(`Type ${q(E)} is not interpolatable.`)}evaluate(t){const o=this.labels,l=this.outputs;if(o.length===1)return l[0].evaluate(t);const f=this.input.evaluate(t);if(f<=o[0])return l[0].evaluate(t);const y=o.length;if(f>=o[y-1])return l[y-1].evaluate(t);const x=sl(o,f),b=hn.interpolationFactor(this.interpolation,f,o[x],o[x+1]),E=l[x].evaluate(t),C=l[x+1].evaluate(t);switch(this.operator){case"interpolate":return Vr[this.type.kind](E,C,b);case"interpolate-hcl":return Vr.color(E,C,b,"hcl");case"interpolate-lab":return Vr.color(E,C,b,"lab")}}eachChild(t){t(this.input);for(const o of this.outputs)t(o)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}}function Ac(r,t,o,l){const f=l-o,y=r-o;return f===0?0:t===1?y/f:(Math.pow(t,y)-1)/(Math.pow(t,f)-1)}class ll{constructor(t,o){this.type=t,this.args=o}static parse(t,o){if(t.length<2)return o.error("Expectected at least one argument.");let l=null;const f=o.expectedType;f&&f.kind!=="value"&&(l=f);const y=[];for(const b of t.slice(1)){const E=o.parse(b,1+y.length,l,void 0,{typeAnnotation:"omit"});if(!E)return null;l=l||E.type,y.push(E)}if(!l)throw new Error("No output type");const x=f&&y.some(b=>fe(f,b.type));return new ll(x?Ft:l,y)}evaluate(t){let o,l=null,f=0;for(const y of this.args)if(f++,l=y.evaluate(t),l&&l instanceof vn&&!l.available&&(o||(o=l.name),l=null,f===this.args.length&&(l=o)),l!==null)break;return l}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}function kc(r,t){return r==="=="||r==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function Mc(r,t,o,l){return l.compare(t,o)===0}function bs(r,t,o){const l=r!=="=="&&r!=="!=";return class Tw{constructor(y,x,b){this.type=Dt,this.lhs=y,this.rhs=x,this.collator=b,this.hasUntypedArgument=y.type.kind==="value"||x.type.kind==="value"}static parse(y,x){if(y.length!==3&&y.length!==4)return x.error("Expected two or three arguments.");const b=y[0];let E=x.parse(y[1],1,Ft);if(!E)return null;if(!kc(b,E.type))return x.concat(1).error(`"${b}" comparisons are not supported for type '${q(E.type)}'.`);let C=x.parse(y[2],2,Ft);if(!C)return null;if(!kc(b,C.type))return x.concat(2).error(`"${b}" comparisons are not supported for type '${q(C.type)}'.`);if(E.type.kind!==C.type.kind&&E.type.kind!=="value"&&C.type.kind!=="value")return x.error(`Cannot compare types '${q(E.type)}' and '${q(C.type)}'.`);l&&(E.type.kind==="value"&&C.type.kind!=="value"?E=new Tn(C.type,[E]):E.type.kind!=="value"&&C.type.kind==="value"&&(C=new Tn(E.type,[C])));let P=null;if(y.length===4){if(E.type.kind!=="string"&&C.type.kind!=="string"&&E.type.kind!=="value"&&C.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(P=x.parse(y[3],3,ro),!P)return null}return new Tw(E,C,P)}evaluate(y){const x=this.lhs.evaluate(y),b=this.rhs.evaluate(y);if(l&&this.hasUntypedArgument){const E=nr(x),C=nr(b);if(E.kind!==C.kind||E.kind!=="string"&&E.kind!=="number")throw new Wi(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${E.kind}, ${C.kind}) instead.`)}if(this.collator&&!l&&this.hasUntypedArgument){const E=nr(x),C=nr(b);if(E.kind!=="string"||C.kind!=="string")return t(y,x,b)}return this.collator?o(y,x,b,this.collator.evaluate(y)):t(y,x,b)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}const ep=bs("==",function(r,t,o){return t===o},Mc),wh=bs("!=",function(r,t,o){return t!==o},function(r,t,o,l){return!Mc(0,t,o,l)}),Eh=bs("<",function(r,t,o){return t<o},function(r,t,o,l){return l.compare(t,o)<0}),tp=bs(">",function(r,t,o){return t>o},function(r,t,o,l){return l.compare(t,o)>0}),ip=bs("<=",function(r,t,o){return t<=o},function(r,t,o,l){return l.compare(t,o)<=0}),rp=bs(">=",function(r,t,o){return t>=o},function(r,t,o,l){return l.compare(t,o)>=0});class cl{constructor(t,o,l){this.type=ro,this.locale=l,this.caseSensitive=t,this.diacriticSensitive=o}static parse(t,o){if(t.length!==2)return o.error("Expected one argument.");const l=t[1];if(typeof l!="object"||Array.isArray(l))return o.error("Collator options argument must be an object.");const f=o.parse(l["case-sensitive"]!==void 0&&l["case-sensitive"],1,Dt);if(!f)return null;const y=o.parse(l["diacritic-sensitive"]!==void 0&&l["diacritic-sensitive"],1,Dt);if(!y)return null;let x=null;return l.locale&&(x=o.parse(l.locale,1,Bt),!x)?null:new cl(f,y,x)}evaluate(t){return new wc(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Lc{constructor(t,o,l,f,y){this.type=Bt,this.number=t,this.locale=o,this.currency=l,this.minFractionDigits=f,this.maxFractionDigits=y}static parse(t,o){if(t.length!==3)return o.error("Expected two arguments.");const l=o.parse(t[1],1,Ye);if(!l)return null;const f=t[2];if(typeof f!="object"||Array.isArray(f))return o.error("NumberFormat options argument must be an object.");let y=null;if(f.locale&&(y=o.parse(f.locale,1,Bt),!y))return null;let x=null;if(f.currency&&(x=o.parse(f.currency,1,Bt),!x))return null;let b=null;if(f["min-fraction-digits"]&&(b=o.parse(f["min-fraction-digits"],1,Ye),!b))return null;let E=null;return f["max-fraction-digits"]&&(E=o.parse(f["max-fraction-digits"],1,Ye),!E)?null:new Lc(l,y,x,b,E)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class ul{constructor(t){this.type=no,this.sections=t}static parse(t,o){if(t.length<2)return o.error("Expected at least one argument.");const l=t[1];if(!Array.isArray(l)&&typeof l=="object")return o.error("First argument must be an image or text section.");const f=[];let y=!1;for(let x=1;x<=t.length-1;++x){const b=t[x];if(y&&typeof b=="object"&&!Array.isArray(b)){y=!1;let E=null;if(b["font-scale"]&&(E=o.parse(b["font-scale"],1,Ye),!E))return null;let C=null;if(b["text-font"]&&(C=o.parse(b["text-font"],1,N(Bt)),!C))return null;let P=null;if(b["text-color"]&&(P=o.parse(b["text-color"],1,pi),!P))return null;const D=f[f.length-1];D.scale=E,D.font=C,D.textColor=P}else{const E=o.parse(t[x],1,Ft);if(!E)return null;const C=E.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,f.push({content:E,scale:null,font:null,textColor:null})}}return new ul(f)}evaluate(t){return new un(this.sections.map(o=>{const l=o.content.evaluate(t);return nr(l)===Q?new Ec("",l,null,null,null):new Ec(da(l),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null)}))}eachChild(t){for(const o of this.sections)t(o.content),o.scale&&t(o.scale),o.font&&t(o.font),o.textColor&&t(o.textColor)}outputDefined(){return!1}}class Pc{constructor(t){this.type=Q,this.input=t}static parse(t,o){if(t.length!==2)return o.error("Expected two arguments.");const l=o.parse(t[1],1,Bt);return l?new Pc(l):o.error("No image name provided.")}evaluate(t){const o=this.input.evaluate(t),l=vn.fromString(o);return l&&t.availableImages&&(l.available=t.availableImages.indexOf(o)>-1),l}eachChild(t){t(this.input)}outputDefined(){return!1}}class ga{constructor(t){this.type=Ye,this.input=t}static parse(t,o){if(t.length!==2)return o.error(`Expected 1 argument, but found ${t.length-1} instead.`);const l=o.parse(t[1],1);return l?l.type.kind!=="array"&&l.type.kind!=="string"&&l.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${q(l.type)} instead.`):new ga(l):null}evaluate(t){const o=this.input.evaluate(t);if(typeof o=="string"||Array.isArray(o))return o.length;throw new Wi(`Expected value to be of type string or array, but found ${q(nr(o))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const dn=8192;function ui(r,t){const o=(180+r[0])/360,l=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(o*f*dn),Math.round(l*f*dn)]}function zc(r,t){const o=Math.pow(2,t.z);return[(f=(r[0]/dn+t.x)/o,360*f-180),(l=(r[1]/dn+t.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90)];var l,f}function ya(r,t){r[0]=Math.min(r[0],t[0]),r[1]=Math.min(r[1],t[1]),r[2]=Math.max(r[2],t[0]),r[3]=Math.max(r[3],t[1])}function _a(r,t){return!(r[0]<=t[0]||r[2]>=t[2]||r[1]<=t[1]||r[3]>=t[3])}function np(r,t,o){const l=r[0]-t[0],f=r[1]-t[1],y=r[0]-o[0],x=r[1]-o[1];return l*x-y*f==0&&l*y<=0&&f*x<=0}function hl(r,t,o,l){return(f=[l[0]-o[0],l[1]-o[1]])[0]*(y=[t[0]-r[0],t[1]-r[1]])[1]-f[1]*y[0]!=0&&!(!Th(r,t,o,l)||!Th(o,l,r,t));var f,y}function op(r,t,o){for(const l of o)for(let f=0;f<l.length-1;++f)if(hl(r,t,l[f],l[f+1]))return!0;return!1}function ws(r,t,o=!1){let l=!1;for(const b of t)for(let E=0;E<b.length-1;E++){if(np(r,b[E],b[E+1]))return o;(y=b[E])[1]>(f=r)[1]!=(x=b[E+1])[1]>f[1]&&f[0]<(x[0]-y[0])*(f[1]-y[1])/(x[1]-y[1])+y[0]&&(l=!l)}var f,y,x;return l}function sp(r,t){for(const o of t)if(ws(r,o))return!0;return!1}function Sh(r,t){for(const o of r)if(!ws(o,t))return!1;for(let o=0;o<r.length-1;++o)if(op(r[o],r[o+1],t))return!1;return!0}function ap(r,t){for(const o of t)if(Sh(r,o))return!0;return!1}function Th(r,t,o,l){const f=l[0]-o[0],y=l[1]-o[1],x=(r[0]-o[0])*y-f*(r[1]-o[1]),b=(t[0]-o[0])*y-f*(t[1]-o[1]);return x>0&&b<0||x<0&&b>0}function Dc(r,t,o){const l=[];for(let f=0;f<r.length;f++){const y=[];for(let x=0;x<r[f].length;x++){const b=ui(r[f][x],o);ya(t,b),y.push(b)}l.push(y)}return l}function Ih(r,t,o){const l=[];for(let f=0;f<r.length;f++){const y=Dc(r[f],t,o);l.push(y)}return l}function Ch(r,t,o,l){if(r[0]<o[0]||r[0]>o[2]){const f=.5*l;let y=r[0]-o[0]>f?-l:o[0]-r[0]>f?l:0;y===0&&(y=r[0]-o[2]>f?-l:o[2]-r[0]>f?l:0),r[0]+=y}ya(t,r)}function Ah(r,t,o,l){const f=Math.pow(2,l.z)*dn,y=[l.x*dn,l.y*dn],x=[];for(const b of r)for(const E of b){const C=[E.x+y[0],E.y+y[1]];Ch(C,t,o,f),x.push(C)}return x}function kh(r,t,o,l){const f=Math.pow(2,l.z)*dn,y=[l.x*dn,l.y*dn],x=[];for(const E of r){const C=[];for(const P of E){const D=[P.x+y[0],P.y+y[1]];ya(t,D),C.push(D)}x.push(C)}if(t[2]-t[0]<=f/2){(b=t)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const E of x)for(const C of E)Ch(C,t,o,f)}var b;return x}class Go{constructor(t,o){this.type=Dt,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(oo(t[1])){const l=t[1];if(l.type==="FeatureCollection"){const f=[];for(const y of l.features){const{type:x,coordinates:b}=y.geometry;x==="Polygon"&&f.push(b),x==="MultiPolygon"&&f.push(...b)}if(f.length)return new Go(l,{type:"MultiPolygon",coordinates:f})}else if(l.type==="Feature"){const f=l.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Go(l,l.geometry)}else if(l.type==="Polygon"||l.type==="MultiPolygon")return new Go(l,l)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,l){const f=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(l.type==="Polygon"){const b=Dc(l.coordinates,y,x),E=Ah(o.geometry(),f,y,x);if(!_a(f,y))return!1;for(const C of E)if(!ws(C,b))return!1}if(l.type==="MultiPolygon"){const b=Ih(l.coordinates,y,x),E=Ah(o.geometry(),f,y,x);if(!_a(f,y))return!1;for(const C of E)if(!sp(C,b))return!1}return!0}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,l){const f=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],x=o.canonicalID();if(l.type==="Polygon"){const b=Dc(l.coordinates,y,x),E=kh(o.geometry(),f,y,x);if(!_a(f,y))return!1;for(const C of E)if(!Sh(C,b))return!1}if(l.type==="MultiPolygon"){const b=Ih(l.coordinates,y,x),E=kh(o.geometry(),f,y,x);if(!_a(f,y))return!1;for(const C of E)if(!ap(C,b))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Mh=class{constructor(r=[],t=lp){if(this.data=r,this.length=this.data.length,this.compare=t,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(r){this.data.push(r),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const r=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:t,compare:o}=this,l=t[r];for(;r>0;){const f=r-1>>1,y=t[f];if(o(l,y)>=0)break;t[r]=y,r=f}t[r]=l}_down(r){const{data:t,compare:o}=this,l=this.length>>1,f=t[r];for(;r<l;){let y=1+(r<<1),x=t[y];const b=y+1;if(b<this.length&&o(t[b],x)<0&&(y=b,x=t[b]),o(x,f)>=0)break;t[r]=x,r=y}t[r]=f}};function lp(r,t){return r<t?-1:r>t?1:0}function cp(r,t,o,l,f){Lh(r,t,o,l||r.length-1,f||up)}function Lh(r,t,o,l,f){for(;l>o;){if(l-o>600){var y=l-o+1,x=t-o+1,b=Math.log(y),E=.5*Math.exp(2*b/3),C=.5*Math.sqrt(b*E*(y-E)/y)*(x-y/2<0?-1:1);Lh(r,t,Math.max(o,Math.floor(t-x*E/y+C)),Math.min(l,Math.floor(t+(y-x)*E/y+C)),f)}var P=r[t],D=o,B=l;for(va(r,o,t),f(r[l],P)>0&&va(r,o,l);D<B;){for(va(r,D,B),D++,B--;f(r[D],P)<0;)D++;for(;f(r[B],P)>0;)B--}f(r[o],P)===0?va(r,o,B):va(r,++B,l),B<=t&&(o=B+1),t<=B&&(l=B-1)}}function va(r,t,o){var l=r[t];r[t]=r[o],r[o]=l}function up(r,t){return r<t?-1:r>t?1:0}function dl(r,t){if(r.length<=1)return[r];const o=[];let l,f;for(const y of r){const x=dp(y);x!==0&&(y.area=Math.abs(x),f===void 0&&(f=x<0),f===x<0?(l&&o.push(l),l=[y]):l.push(y))}if(l&&o.push(l),t>1)for(let y=0;y<o.length;y++)o[y].length<=t||(cp(o[y],t,1,o[y].length-1,hp),o[y]=o[y].slice(0,t));return o}function hp(r,t){return t.area-r.area}function dp(r){let t=0;for(let o,l,f=0,y=r.length,x=y-1;f<y;x=f++)o=r[f],l=r[x],t+=(l.x-o.x)*(o.y+l.y);return t}const Ph=1/298.257223563,zh=Ph*(2-Ph),Dh=Math.PI/180;class Rc{constructor(t){const o=6378.137*Dh*1e3,l=Math.cos(t*Dh),f=1/(1-zh*(1-l*l)),y=Math.sqrt(f);this.kx=o*y*l,this.ky=o*y*f*(1-zh)}distance(t,o){const l=this.wrap(t[0]-o[0])*this.kx,f=(t[1]-o[1])*this.ky;return Math.sqrt(l*l+f*f)}pointOnLine(t,o){let l,f,y,x,b=1/0;for(let E=0;E<t.length-1;E++){let C=t[E][0],P=t[E][1],D=this.wrap(t[E+1][0]-C)*this.kx,B=(t[E+1][1]-P)*this.ky,V=0;D===0&&B===0||(V=(this.wrap(o[0]-C)*this.kx*D+(o[1]-P)*this.ky*B)/(D*D+B*B),V>1?(C=t[E+1][0],P=t[E+1][1]):V>0&&(C+=D/this.kx*V,P+=B/this.ky*V)),D=this.wrap(o[0]-C)*this.kx,B=(o[1]-P)*this.ky;const U=D*D+B*B;U<b&&(b=U,l=C,f=P,y=E,x=V)}return{point:[l,f],index:y,t:Math.max(0,Math.min(1,x))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Rh(r,t){return t[0]-r[0]}function Es(r){return r[1]-r[0]+1}function so(r,t){return r[1]>=r[0]&&r[1]<t}function Oc(r,t){if(r[0]>r[1])return[null,null];const o=Es(r);if(t){if(o===2)return[r,null];const f=Math.floor(o/2);return[[r[0],r[0]+f],[r[0]+f,r[1]]]}if(o===1)return[r,null];const l=Math.floor(o/2)-1;return[[r[0],r[0]+l],[r[0]+l+1,r[1]]]}function Bc(r,t){if(!so(t,r.length))return[1/0,1/0,-1/0,-1/0];const o=[1/0,1/0,-1/0,-1/0];for(let l=t[0];l<=t[1];++l)ya(o,r[l]);return o}function Fc(r){const t=[1/0,1/0,-1/0,-1/0];for(const o of r)for(const l of o)ya(t,l);return t}function Ki(r){return r[0]!==-1/0&&r[1]!==-1/0&&r[2]!==1/0&&r[3]!==1/0}function Vc(r,t,o){if(!Ki(r)||!Ki(t))return NaN;let l=0,f=0;return r[2]<t[0]&&(l=t[0]-r[2]),r[0]>t[2]&&(l=r[0]-t[2]),r[1]>t[3]&&(f=r[1]-t[3]),r[3]<t[1]&&(f=t[1]-r[3]),o.distance([0,0],[l,f])}function Kt(r,t,o){const l=o.pointOnLine(t,r);return o.distance(r,l.point)}function xa(r,t,o,l,f){const y=Math.min(Kt(r,[o,l],f),Kt(t,[o,l],f)),x=Math.min(Kt(o,[r,t],f),Kt(l,[r,t],f));return Math.min(y,x)}function Vi(r,t,o,l,f){if(!so(t,r.length)||!so(l,o.length))return 1/0;let y=1/0;for(let x=t[0];x<t[1];++x){const b=r[x],E=r[x+1];for(let C=l[0];C<l[1];++C){const P=o[C],D=o[C+1];if(hl(b,E,P,D))return 0;y=Math.min(y,xa(b,E,P,D,f))}}return y}function zi(r,t,o,l,f){if(!so(t,r.length)||!so(l,o.length))return NaN;let y=1/0;for(let x=t[0];x<=t[1];++x)for(let b=l[0];b<=l[1];++b)if(y=Math.min(y,f.distance(r[x],o[b])),y===0)return y;return y}function fl(r,t,o){if(ws(r,t,!0))return 0;let l=1/0;for(const f of t){const y=f[0],x=f[f.length-1];if(y!==x&&(l=Math.min(l,Kt(r,[x,y],o)),l===0))return l;const b=o.pointOnLine(f,r);if(l=Math.min(l,o.distance(r,b.point)),l===0)return l}return l}function Oh(r,t,o,l){if(!so(t,r.length))return NaN;for(let y=t[0];y<=t[1];++y)if(ws(r[y],o,!0))return 0;let f=1/0;for(let y=t[0];y<t[1];++y){const x=r[y],b=r[y+1];for(const E of o)for(let C=0,P=E.length,D=P-1;C<P;D=C++){const B=E[D],V=E[C];if(hl(x,b,B,V))return 0;f=Math.min(f,xa(x,b,B,V,l))}}return f}function Nc(r,t){for(const o of r)for(const l of o)if(ws(l,t,!0))return!0;return!1}function fp(r,t,o,l=1/0){const f=Fc(r),y=Fc(t);if(l!==1/0&&Vc(f,y,o)>=l)return l;if(_a(f,y)){if(Nc(r,t))return 0}else if(Nc(t,r))return 0;let x=1/0;for(const b of r)for(let E=0,C=b.length,P=C-1;E<C;P=E++){const D=b[P],B=b[E];for(const V of t)for(let U=0,Z=V.length,Y=Z-1;U<Z;Y=U++){const ae=V[Y],we=V[U];if(hl(D,B,ae,we))return 0;x=Math.min(x,xa(D,B,ae,we,o))}}return x}function Bh(r,t,o,l,f,y){if(!y)return;const x=Vc(Bc(l,y),f,o);x<t&&r.push([x,y,[0,0]])}function pl(r,t,o,l,f,y,x){if(!y||!x)return;const b=Vc(Bc(l,y),Bc(f,x),o);b<t&&r.push([b,y,x])}function ml(r,t,o,l,f=1/0){let y=Math.min(l.distance(r[0],o[0][0]),f);if(y===0)return y;const x=new Mh([[0,[0,r.length-1],[0,0]]],Rh),b=Fc(o);for(;x.length>0;){const E=x.pop();if(E[0]>=y)continue;const C=E[1],P=t?50:100;if(Es(C)<=P){if(!so(C,r.length))return NaN;if(t){const D=Oh(r,C,o,l);if(isNaN(D)||D===0)return D;y=Math.min(y,D)}else for(let D=C[0];D<=C[1];++D){const B=fl(r[D],o,l);if(y=Math.min(y,B),y===0)return 0}}else{const D=Oc(C,t);Bh(x,y,l,r,b,D[0]),Bh(x,y,l,r,b,D[1])}}return y}function ba(r,t,o,l,f,y=1/0){let x=Math.min(y,f.distance(r[0],o[0]));if(x===0)return x;const b=new Mh([[0,[0,r.length-1],[0,o.length-1]]],Rh);for(;b.length>0;){const E=b.pop();if(E[0]>=x)continue;const C=E[1],P=E[2],D=t?50:100,B=l?50:100;if(Es(C)<=D&&Es(P)<=B){if(!so(C,r.length)&&so(P,o.length))return NaN;let V;if(t&&l)V=Vi(r,C,o,P,f),x=Math.min(x,V);else if(t&&!l){const U=r.slice(C[0],C[1]+1);for(let Z=P[0];Z<=P[1];++Z)if(V=Kt(o[Z],U,f),x=Math.min(x,V),x===0)return x}else if(!t&&l){const U=o.slice(P[0],P[1]+1);for(let Z=C[0];Z<=C[1];++Z)if(V=Kt(r[Z],U,f),x=Math.min(x,V),x===0)return x}else V=zi(r,C,o,P,f),x=Math.min(x,V)}else{const V=Oc(C,t),U=Oc(P,l);pl(b,x,f,r,o,V[0],U[0]),pl(b,x,f,r,o,V[0],U[1]),pl(b,x,f,r,o,V[1],U[0]),pl(b,x,f,r,o,V[1],U[1])}}return x}function gl(r){return r.type==="MultiPolygon"?r.coordinates.map(t=>({type:"Polygon",coordinates:t})):r.type==="MultiLineString"?r.coordinates.map(t=>({type:"LineString",coordinates:t})):r.type==="MultiPoint"?r.coordinates.map(t=>({type:"Point",coordinates:t})):[r]}class xo{constructor(t,o){this.type=Ye,this.geojson=t,this.geometries=o}static parse(t,o){if(t.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(oo(t[1])){const l=t[1];if(l.type==="FeatureCollection")return new xo(l,l.features.map(f=>gl(f.geometry)).flat());if(l.type==="Feature")return new xo(l,gl(l.geometry));if("type"in l&&"coordinates"in l)return new xo(l,gl(l))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return function(o,l){const f=o.geometry(),y=f.flat().map(E=>zc([E.x,E.y],o.canonical));if(f.length===0)return NaN;const x=new Rc(y[0][1]);let b=1/0;for(const E of l){switch(E.type){case"Point":b=Math.min(b,ba(y,!1,[E.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,ba(y,!1,E.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,ml(y,!1,E.coordinates,x,b))}if(b===0)return b}return b}(t,this.geometries);if(t.geometryType()==="LineString")return function(o,l){const f=o.geometry(),y=f.flat().map(E=>zc([E.x,E.y],o.canonical));if(f.length===0)return NaN;const x=new Rc(y[0][1]);let b=1/0;for(const E of l){switch(E.type){case"Point":b=Math.min(b,ba(y,!0,[E.coordinates],!1,x,b));break;case"LineString":b=Math.min(b,ba(y,!0,E.coordinates,!0,x,b));break;case"Polygon":b=Math.min(b,ml(y,!0,E.coordinates,x,b))}if(b===0)return b}return b}(t,this.geometries);if(t.geometryType()==="Polygon")return function(o,l){const f=o.geometry();if(f.length===0||f[0].length===0)return NaN;const y=dl(f,0).map(E=>E.map(C=>C.map(P=>zc([P.x,P.y],o.canonical)))),x=new Rc(y[0][0][0][1]);let b=1/0;for(const E of l)for(const C of y){switch(E.type){case"Point":b=Math.min(b,ml([E.coordinates],!1,C,x,b));break;case"LineString":b=Math.min(b,ml(E.coordinates,!0,C,x,b));break;case"Polygon":b=Math.min(b,fp(C,E.coordinates,x,b))}if(b===0)return b}return b}(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Zo={"==":ep,"!=":wh,">":tp,"<":Eh,">=":rp,"<=":ip,array:Tn,at:Tc,boolean:Tn,case:ol,coalesce:ll,collator:cl,format:ul,image:Pc,in:nl,"index-of":fa,interpolate:hn,"interpolate-hcl":hn,"interpolate-lab":hn,length:ga,let:rl,literal:Uo,match:Ic,number:Tn,"number-format":Lc,object:Tn,slice:pa,step:ma,string:Tn,"to-boolean":Un,"to-color":Un,"to-number":Un,"to-string":Un,var:xs,within:Go,distance:xo};class Qr{constructor(t,o,l,f){this.name=t,this.type=o,this._evaluate=l,this.args=f}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,o){const l=t[0],f=Qr.definitions[l];if(!f)return o.error(`Unknown expression "${l}". If you wanted a literal array, use ["literal", [...]].`,0);const y=Array.isArray(f)?f[0]:f.type,x=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,b=x.filter(([C])=>!Array.isArray(C)||C.length===t.length-1);let E=null;for(const[C,P]of b){E=new ci(o.registry,yl,o.path,null,o.scope);const D=[];let B=!1;for(let V=1;V<t.length;V++){const U=t[V],Z=Array.isArray(C)?C[V-1]:C.type,Y=E.parse(U,1+D.length,Z);if(!Y){B=!0;break}D.push(Y)}if(!B)if(Array.isArray(C)&&C.length!==D.length)E.error(`Expected ${C.length} arguments, but found ${D.length} instead.`);else{for(let V=0;V<D.length;V++){const U=Array.isArray(C)?C[V]:C.type,Z=D[V];E.concat(V+1).checkSubtype(U,Z.type)}if(E.errors.length===0)return new Qr(l,y,P,D)}}if(b.length===1)o.errors.push(...E.errors);else{const C=(b.length?b:x).map(([D])=>{return B=D,Array.isArray(B)?`(${B.map(q).join(", ")})`:`(${q(B.type)}...)`;var B}).join(" | "),P=[];for(let D=1;D<t.length;D++){const B=o.parse(t[D],1+P.length);if(!B)return null;P.push(q(B.type))}o.error(`Expected arguments of type ${C}, but found (${P.join(", ")}) instead.`)}return null}static register(t,o){Qr.definitions=o;for(const l in o)t[l]=Qr}}function Fh(r,[t,o,l,f]){t=t.evaluate(r),o=o.evaluate(r),l=l.evaluate(r);const y=f?f.evaluate(r):1,x=xh(t,o,l,y);if(x)throw new Wi(x);return new di(t/255,o/255,l/255,y,!1)}function Vh(r,t){return r in t}function $c(r,t){const o=t[r];return o===void 0?null:o}function Wo(r){return{type:r}}function yl(r){if(r instanceof xs)return yl(r.boundExpression);if(r instanceof Qr&&r.name==="error"||r instanceof cl||r instanceof Go||r instanceof xo)return!1;const t=r instanceof Un||r instanceof Tn;let o=!0;return r.eachChild(l=>{o=t?o&&yl(l):o&&l instanceof Uo}),!!o&&_l(r)&&vl(r,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _l(r){if(r instanceof Qr&&(r.name==="get"&&r.args.length===1||r.name==="feature-state"||r.name==="has"&&r.args.length===1||r.name==="properties"||r.name==="geometry-type"||r.name==="id"||/^filter-/.test(r.name))||r instanceof Go||r instanceof xo)return!1;let t=!0;return r.eachChild(o=>{t&&!_l(o)&&(t=!1)}),t}function wa(r){if(r instanceof Qr&&r.name==="feature-state")return!1;let t=!0;return r.eachChild(o=>{t&&!wa(o)&&(t=!1)}),t}function vl(r,t){if(r instanceof Qr&&t.indexOf(r.name)>=0)return!1;let o=!0;return r.eachChild(l=>{o&&!vl(l,t)&&(o=!1)}),o}function jc(r){return{result:"success",value:r}}function Ko(r){return{result:"error",value:r}}function ao(r){return r["property-type"]==="data-driven"||r["property-type"]==="cross-faded-data-driven"}function Nh(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function xl(r){return!!r.expression&&r.expression.interpolated}function oi(r){return r instanceof Number?"number":r instanceof String?"string":r instanceof Boolean?"boolean":Array.isArray(r)?"array":r===null?"null":typeof r}function Ss(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}function bl(r){return r}function Ea(r,t){const o=t.type==="color",l=r.stops&&typeof r.stops[0][0]=="object",f=l||!(l||r.property!==void 0),y=r.type||(xl(t)?"exponential":"interval");if(o||t.type==="padding"){const P=o?di.parse:Jr.parse;(r=Gt({},r)).stops&&(r.stops=r.stops.map(D=>[D[0],P(D[1])])),r.default=P(r.default?r.default:t.default)}if(r.colorSpace&&(x=r.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${r.colorSpace}"`);var x;let b,E,C;if(y==="exponential")b=qc;else if(y==="interval")b=$h;else if(y==="categorical"){b=Uc,E=Object.create(null);for(const P of r.stops)E[P[0]]=P[1];C=typeof r.stops[0][0]}else{if(y!=="identity")throw new Error(`Unknown function type "${y}"`);b=wl}if(l){const P={},D=[];for(let U=0;U<r.stops.length;U++){const Z=r.stops[U],Y=Z[0].zoom;P[Y]===void 0&&(P[Y]={zoom:Y,type:r.type,property:r.property,default:r.default,stops:[]},D.push(Y)),P[Y].stops.push([Z[0].value,Z[1]])}const B=[];for(const U of D)B.push([P[U].zoom,Ea(P[U],t)]);const V={name:"linear"};return{kind:"composite",interpolationType:V,interpolationFactor:hn.interpolationFactor.bind(void 0,V),zoomStops:B.map(U=>U[0]),evaluate:({zoom:U},Z)=>qc({stops:B,base:r.base},t,U).evaluate(U,Z)}}if(f){const P=y==="exponential"?{name:"exponential",base:r.base!==void 0?r.base:1}:null;return{kind:"camera",interpolationType:P,interpolationFactor:hn.interpolationFactor.bind(void 0,P),zoomStops:r.stops.map(D=>D[0]),evaluate:({zoom:D})=>b(r,t,D,E,C)}}return{kind:"source",evaluate(P,D){const B=D&&D.properties?D.properties[r.property]:void 0;return B===void 0?Ts(r.default,t.default):b(r,t,B,E,C)}}}function Ts(r,t,o){return r!==void 0?r:t!==void 0?t:o!==void 0?o:void 0}function Uc(r,t,o,l,f){return Ts(typeof o===f?l[o]:void 0,r.default,t.default)}function $h(r,t,o){if(oi(o)!=="number")return Ts(r.default,t.default);const l=r.stops.length;if(l===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[l-1][0])return r.stops[l-1][1];const f=sl(r.stops.map(y=>y[0]),o);return r.stops[f][1]}function qc(r,t,o){const l=r.base!==void 0?r.base:1;if(oi(o)!=="number")return Ts(r.default,t.default);const f=r.stops.length;if(f===1||o<=r.stops[0][0])return r.stops[0][1];if(o>=r.stops[f-1][0])return r.stops[f-1][1];const y=sl(r.stops.map(P=>P[0]),o),x=function(P,D,B,V){const U=V-B,Z=P-B;return U===0?0:D===1?Z/U:(Math.pow(D,Z)-1)/(Math.pow(D,U)-1)}(o,l,r.stops[y][0],r.stops[y+1][0]),b=r.stops[y][1],E=r.stops[y+1][1],C=Vr[t.type]||bl;return typeof b.evaluate=="function"?{evaluate(...P){const D=b.evaluate.apply(void 0,P),B=E.evaluate.apply(void 0,P);if(D!==void 0&&B!==void 0)return C(D,B,x,r.colorSpace)}}:C(b,E,x,r.colorSpace)}function wl(r,t,o){switch(t.type){case"color":o=di.parse(o);break;case"formatted":o=un.fromString(o.toString());break;case"resolvedImage":o=vn.fromString(o.toString());break;case"padding":o=Jr.parse(o);break;default:oi(o)===t.type||t.type==="enum"&&t.values[o]||(o=void 0)}return Ts(o,r.default,t.default)}Qr.register(Zo,{error:[{kind:"error"},[Bt],(r,[t])=>{throw new Wi(t.evaluate(r))}],typeof:[Bt,[Ft],(r,[t])=>q(nr(t.evaluate(r)))],"to-rgba":[N(Ye,4),[pi],(r,[t])=>{const[o,l,f,y]=t.evaluate(r).rgb;return[255*o,255*l,255*f,y]}],rgb:[pi,[Ye,Ye,Ye],Fh],rgba:[pi,[Ye,Ye,Ye,Ye],Fh],has:{type:Dt,overloads:[[[Bt],(r,[t])=>Vh(t.evaluate(r),r.properties())],[[Bt,Ti],(r,[t,o])=>Vh(t.evaluate(r),o.evaluate(r))]]},get:{type:Ft,overloads:[[[Bt],(r,[t])=>$c(t.evaluate(r),r.properties())],[[Bt,Ti],(r,[t,o])=>$c(t.evaluate(r),o.evaluate(r))]]},"feature-state":[Ft,[Bt],(r,[t])=>$c(t.evaluate(r),r.featureState||{})],properties:[Ti,[],r=>r.properties()],"geometry-type":[Bt,[],r=>r.geometryType()],id:[Ft,[],r=>r.id()],zoom:[Ye,[],r=>r.globals.zoom],"heatmap-density":[Ye,[],r=>r.globals.heatmapDensity||0],"line-progress":[Ye,[],r=>r.globals.lineProgress||0],accumulated:[Ft,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[Ye,Wo(Ye),(r,t)=>{let o=0;for(const l of t)o+=l.evaluate(r);return o}],"*":[Ye,Wo(Ye),(r,t)=>{let o=1;for(const l of t)o*=l.evaluate(r);return o}],"-":{type:Ye,overloads:[[[Ye,Ye],(r,[t,o])=>t.evaluate(r)-o.evaluate(r)],[[Ye],(r,[t])=>-t.evaluate(r)]]},"/":[Ye,[Ye,Ye],(r,[t,o])=>t.evaluate(r)/o.evaluate(r)],"%":[Ye,[Ye,Ye],(r,[t,o])=>t.evaluate(r)%o.evaluate(r)],ln2:[Ye,[],()=>Math.LN2],pi:[Ye,[],()=>Math.PI],e:[Ye,[],()=>Math.E],"^":[Ye,[Ye,Ye],(r,[t,o])=>Math.pow(t.evaluate(r),o.evaluate(r))],sqrt:[Ye,[Ye],(r,[t])=>Math.sqrt(t.evaluate(r))],log10:[Ye,[Ye],(r,[t])=>Math.log(t.evaluate(r))/Math.LN10],ln:[Ye,[Ye],(r,[t])=>Math.log(t.evaluate(r))],log2:[Ye,[Ye],(r,[t])=>Math.log(t.evaluate(r))/Math.LN2],sin:[Ye,[Ye],(r,[t])=>Math.sin(t.evaluate(r))],cos:[Ye,[Ye],(r,[t])=>Math.cos(t.evaluate(r))],tan:[Ye,[Ye],(r,[t])=>Math.tan(t.evaluate(r))],asin:[Ye,[Ye],(r,[t])=>Math.asin(t.evaluate(r))],acos:[Ye,[Ye],(r,[t])=>Math.acos(t.evaluate(r))],atan:[Ye,[Ye],(r,[t])=>Math.atan(t.evaluate(r))],min:[Ye,Wo(Ye),(r,t)=>Math.min(...t.map(o=>o.evaluate(r)))],max:[Ye,Wo(Ye),(r,t)=>Math.max(...t.map(o=>o.evaluate(r)))],abs:[Ye,[Ye],(r,[t])=>Math.abs(t.evaluate(r))],round:[Ye,[Ye],(r,[t])=>{const o=t.evaluate(r);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ye,[Ye],(r,[t])=>Math.floor(t.evaluate(r))],ceil:[Ye,[Ye],(r,[t])=>Math.ceil(t.evaluate(r))],"filter-==":[Dt,[Bt,Ft],(r,[t,o])=>r.properties()[t.value]===o.value],"filter-id-==":[Dt,[Ft],(r,[t])=>r.id()===t.value],"filter-type-==":[Dt,[Bt],(r,[t])=>r.geometryType()===t.value],"filter-<":[Dt,[Bt,Ft],(r,[t,o])=>{const l=r.properties()[t.value],f=o.value;return typeof l==typeof f&&l<f}],"filter-id-<":[Dt,[Ft],(r,[t])=>{const o=r.id(),l=t.value;return typeof o==typeof l&&o<l}],"filter->":[Dt,[Bt,Ft],(r,[t,o])=>{const l=r.properties()[t.value],f=o.value;return typeof l==typeof f&&l>f}],"filter-id->":[Dt,[Ft],(r,[t])=>{const o=r.id(),l=t.value;return typeof o==typeof l&&o>l}],"filter-<=":[Dt,[Bt,Ft],(r,[t,o])=>{const l=r.properties()[t.value],f=o.value;return typeof l==typeof f&&l<=f}],"filter-id-<=":[Dt,[Ft],(r,[t])=>{const o=r.id(),l=t.value;return typeof o==typeof l&&o<=l}],"filter->=":[Dt,[Bt,Ft],(r,[t,o])=>{const l=r.properties()[t.value],f=o.value;return typeof l==typeof f&&l>=f}],"filter-id->=":[Dt,[Ft],(r,[t])=>{const o=r.id(),l=t.value;return typeof o==typeof l&&o>=l}],"filter-has":[Dt,[Ft],(r,[t])=>t.value in r.properties()],"filter-has-id":[Dt,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[Dt,[N(Bt)],(r,[t])=>t.value.indexOf(r.geometryType())>=0],"filter-id-in":[Dt,[N(Ft)],(r,[t])=>t.value.indexOf(r.id())>=0],"filter-in-small":[Dt,[Bt,N(Ft)],(r,[t,o])=>o.value.indexOf(r.properties()[t.value])>=0],"filter-in-large":[Dt,[Bt,N(Ft)],(r,[t,o])=>function(l,f,y,x){for(;y<=x;){const b=y+x>>1;if(f[b]===l)return!0;f[b]>l?x=b-1:y=b+1}return!1}(r.properties()[t.value],o.value,0,o.value.length-1)],all:{type:Dt,overloads:[[[Dt,Dt],(r,[t,o])=>t.evaluate(r)&&o.evaluate(r)],[Wo(Dt),(r,t)=>{for(const o of t)if(!o.evaluate(r))return!1;return!0}]]},any:{type:Dt,overloads:[[[Dt,Dt],(r,[t,o])=>t.evaluate(r)||o.evaluate(r)],[Wo(Dt),(r,t)=>{for(const o of t)if(o.evaluate(r))return!0;return!1}]]},"!":[Dt,[Dt],(r,[t])=>!t.evaluate(r)],"is-supported-script":[Dt,[Bt],(r,[t])=>{const o=r.globals&&r.globals.isSupportedScript;return!o||o(t.evaluate(r))}],upcase:[Bt,[Bt],(r,[t])=>t.evaluate(r).toUpperCase()],downcase:[Bt,[Bt],(r,[t])=>t.evaluate(r).toLowerCase()],concat:[Bt,Wo(Ft),(r,t)=>t.map(o=>da(o.evaluate(r))).join("")],"resolved-locale":[Bt,[ro],(r,[t])=>t.evaluate(r).resolvedLocale()]});class Hc{constructor(t,o){var l;this.expression=t,this._warningHistory={},this._evaluator=new vs,this._defaultValue=o?(l=o).type==="color"&&Ss(l.default)?new di(0,0,0,0):l.type==="color"?di.parse(l.default)||null:l.type==="padding"?Jr.parse(l.default)||null:l.type==="variableAnchorOffsetCollection"?Yr.parse(l.default)||null:l.default===void 0?null:l.default:null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(t,o,l,f,y,x){return this._evaluator.globals=t,this._evaluator.feature=o,this._evaluator.featureState=l,this._evaluator.canonical=f,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(t,o,l,f,y,x){this._evaluator.globals=t,this._evaluator.feature=o||null,this._evaluator.featureState=l||null,this._evaluator.canonical=f,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=x||null;try{const b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new Wi(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console<"u"&&console.warn(b.message)),this._defaultValue}}}function El(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in Zo}function Sl(r,t){const o=new ci(Zo,yl,[],t?function(f){const y={color:pi,string:Bt,number:Ye,enum:Bt,boolean:Dt,formatted:no,padding:gr,resolvedImage:Q,variableAnchorOffsetCollection:F};return f.type==="array"?N(y[f.value]||Ft,f.length):y[f.type]}(t):void 0),l=o.parse(r,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return l?jc(new Hc(l,t)):Ko(o.errors)}class Gc{constructor(t,o){this.kind=t,this._styleExpression=o,this.isStateDependent=t!=="constant"&&!wa(o.expression)}evaluateWithoutErrorHandling(t,o,l,f,y,x){return this._styleExpression.evaluateWithoutErrorHandling(t,o,l,f,y,x)}evaluate(t,o,l,f,y,x){return this._styleExpression.evaluate(t,o,l,f,y,x)}}class Zc{constructor(t,o,l,f){this.kind=t,this.zoomStops=l,this._styleExpression=o,this.isStateDependent=t!=="camera"&&!wa(o.expression),this.interpolationType=f}evaluateWithoutErrorHandling(t,o,l,f,y,x){return this._styleExpression.evaluateWithoutErrorHandling(t,o,l,f,y,x)}evaluate(t,o,l,f,y,x){return this._styleExpression.evaluate(t,o,l,f,y,x)}interpolationFactor(t,o,l){return this.interpolationType?hn.interpolationFactor(this.interpolationType,t,o,l):0}}function Sa(r,t){const o=Sl(r,t);if(o.result==="error")return o;const l=o.value.expression,f=_l(l);if(!f&&!ao(t))return Ko([new ai("","data expressions not supported")]);const y=vl(l,["zoom"]);if(!y&&!Nh(t))return Ko([new ai("","zoom expressions not supported")]);const x=Cr(l);return x||y?x instanceof ai?Ko([x]):x instanceof hn&&!xl(t)?Ko([new ai("",'"interpolate" expressions cannot be used with this property')]):jc(x?new Zc(f?"camera":"composite",o.value,x.labels,x instanceof hn?x.interpolation:void 0):new Gc(f?"constant":"source",o.value)):Ko([new ai("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xo{constructor(t,o){this._parameters=t,this._specification=o,Gt(this,Ea(this._parameters,this._specification))}static deserialize(t){return new Xo(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Cr(r){let t=null;if(r instanceof rl)t=Cr(r.result);else if(r instanceof ll){for(const o of r.args)if(t=Cr(o),t)break}else(r instanceof ma||r instanceof hn)&&r.input instanceof Qr&&r.input.name==="zoom"&&(t=r);return t instanceof ai||r.eachChild(o=>{const l=Cr(o);l instanceof ai?t=l:!t&&l?t=new ai("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&l&&t!==l&&(t=new ai("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function Jo(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const t of r.slice(1))if(!Jo(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const jh={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Wc(r){if(r==null)return{filter:()=>!0,needGeometry:!1};Jo(r)||(r=Ta(r));const t=Sl(r,jh);if(t.result==="error")throw new Error(t.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,l,f)=>t.value.evaluate(o,l,{},f),needGeometry:Is(r)}}function pp(r,t){return r<t?-1:r>t?1:0}function Is(r){if(!Array.isArray(r))return!1;if(r[0]==="within"||r[0]==="distance")return!0;for(let t=1;t<r.length;t++)if(Is(r[t]))return!0;return!1}function Ta(r){if(!r)return!0;const t=r[0];return r.length<=1?t!=="any":t==="=="?Ia(r[1],r[2],"=="):t==="!="?Il(Ia(r[1],r[2],"==")):t==="<"||t===">"||t==="<="||t===">="?Ia(r[1],r[2],t):t==="any"?(o=r.slice(1),["any"].concat(o.map(Ta))):t==="all"?["all"].concat(r.slice(1).map(Ta)):t==="none"?["all"].concat(r.slice(1).map(Ta).map(Il)):t==="in"?Uh(r[1],r.slice(2)):t==="!in"?Il(Uh(r[1],r.slice(2))):t==="has"?Tl(r[1]):t!=="!has"||Il(Tl(r[1]));var o}function Ia(r,t,o){switch(r){case"$type":return[`filter-type-${o}`,t];case"$id":return[`filter-id-${o}`,t];default:return[`filter-${o}`,r,t]}}function Uh(r,t){if(t.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(o=>typeof o!=typeof t[0])?["filter-in-large",r,["literal",t.sort(pp)]]:["filter-in-small",r,["literal",t]]}}function Tl(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function Il(r){return["!",r]}function Yo(r){const t=typeof r;if(t==="number"||t==="boolean"||t==="string"||r==null)return JSON.stringify(r);if(Array.isArray(r)){let f="[";for(const y of r)f+=`${Yo(y)},`;return`${f}]`}const o=Object.keys(r).sort();let l="{";for(let f=0;f<o.length;f++)l+=`${JSON.stringify(o[f])}:${Yo(r[o[f]])},`;return`${l}}`}function mp(r){let t="";for(const o of He)t+=`/${Yo(r[o])}`;return t}function Cl(r){const t=r.value;return t?[new $e(r.key,t,"constants have been deprecated as of v8")]:[]}function Ui(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function lo(r){if(Array.isArray(r))return r.map(lo);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const t={};for(const o in r)t[o]=lo(r[o]);return t}return Ui(r)}function fn(r){const t=r.key,o=r.value,l=r.valueSpec||{},f=r.objectElementValidators||{},y=r.style,x=r.styleSpec,b=r.validateSpec;let E=[];const C=oi(o);if(C!=="object")return[new $e(t,o,`object expected, ${C} found`)];for(const P in o){const D=P.split(".")[0],B=l[D]||l["*"];let V;if(f[D])V=f[D];else if(l[D])V=b;else if(f["*"])V=f["*"];else{if(!l["*"]){E.push(new $e(t,o[P],`unknown property "${P}"`));continue}V=b}E=E.concat(V({key:(t&&`${t}.`)+P,value:o[P],valueSpec:B,style:y,styleSpec:x,object:o,objectKey:P,validateSpec:b},o))}for(const P in l)f[P]||l[P].required&&l[P].default===void 0&&o[P]===void 0&&E.push(new $e(t,o,`missing required property "${P}"`));return E}function Al(r){const t=r.value,o=r.valueSpec,l=r.style,f=r.styleSpec,y=r.key,x=r.arrayElementValidator||r.validateSpec;if(oi(t)!=="array")return[new $e(y,t,`array expected, ${oi(t)} found`)];if(o.length&&t.length!==o.length)return[new $e(y,t,`array length ${o.length} expected, length ${t.length} found`)];if(o["min-length"]&&t.length<o["min-length"])return[new $e(y,t,`array length at least ${o["min-length"]} expected, length ${t.length} found`)];let b={type:o.value,values:o.values};f.$version<7&&(b.function=o.function),oi(o.value)==="object"&&(b=o.value);let E=[];for(let C=0;C<t.length;C++)E=E.concat(x({array:t,arrayIndex:C,value:t[C],valueSpec:b,validateSpec:r.validateSpec,style:l,styleSpec:f,key:`${y}[${C}]`}));return E}function Kc(r){const t=r.key,o=r.value,l=r.valueSpec;let f=oi(o);return f==="number"&&o!=o&&(f="NaN"),f!=="number"?[new $e(t,o,`number expected, ${f} found`)]:"minimum"in l&&o<l.minimum?[new $e(t,o,`${o} is less than the minimum value ${l.minimum}`)]:"maximum"in l&&o>l.maximum?[new $e(t,o,`${o} is greater than the maximum value ${l.maximum}`)]:[]}function kl(r){const t=r.valueSpec,o=Ui(r.value.type);let l,f,y,x={};const b=o!=="categorical"&&r.value.property===void 0,E=!b,C=oi(r.value.stops)==="array"&&oi(r.value.stops[0])==="array"&&oi(r.value.stops[0][0])==="object",P=fn({key:r.key,value:r.value,valueSpec:r.styleSpec.function,validateSpec:r.validateSpec,style:r.style,styleSpec:r.styleSpec,objectElementValidators:{stops:function(V){if(o==="identity")return[new $e(V.key,V.value,'identity function may not have a "stops" property')];let U=[];const Z=V.value;return U=U.concat(Al({key:V.key,value:Z,valueSpec:V.valueSpec,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec,arrayElementValidator:D})),oi(Z)==="array"&&Z.length===0&&U.push(new $e(V.key,Z,"array must have at least one stop")),U},default:function(V){return V.validateSpec({key:V.key,value:V.value,valueSpec:t,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec})}}});return o==="identity"&&b&&P.push(new $e(r.key,r.value,'missing required property "property"')),o==="identity"||r.value.stops||P.push(new $e(r.key,r.value,'missing required property "stops"')),o==="exponential"&&r.valueSpec.expression&&!xl(r.valueSpec)&&P.push(new $e(r.key,r.value,"exponential functions not supported")),r.styleSpec.$version>=8&&(E&&!ao(r.valueSpec)?P.push(new $e(r.key,r.value,"property functions not supported")):b&&!Nh(r.valueSpec)&&P.push(new $e(r.key,r.value,"zoom functions not supported"))),o!=="categorical"&&!C||r.value.property!==void 0||P.push(new $e(r.key,r.value,'"property" property is required')),P;function D(V){let U=[];const Z=V.value,Y=V.key;if(oi(Z)!=="array")return[new $e(Y,Z,`array expected, ${oi(Z)} found`)];if(Z.length!==2)return[new $e(Y,Z,`array length 2 expected, length ${Z.length} found`)];if(C){if(oi(Z[0])!=="object")return[new $e(Y,Z,`object expected, ${oi(Z[0])} found`)];if(Z[0].zoom===void 0)return[new $e(Y,Z,"object stop key must have zoom")];if(Z[0].value===void 0)return[new $e(Y,Z,"object stop key must have value")];if(y&&y>Ui(Z[0].zoom))return[new $e(Y,Z[0].zoom,"stop zoom values must appear in ascending order")];Ui(Z[0].zoom)!==y&&(y=Ui(Z[0].zoom),f=void 0,x={}),U=U.concat(fn({key:`${Y}[0]`,value:Z[0],valueSpec:{zoom:{}},validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec,objectElementValidators:{zoom:Kc,value:B}}))}else U=U.concat(B({key:`${Y}[0]`,value:Z[0],valueSpec:{},validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec},Z));return El(lo(Z[1]))?U.concat([new $e(`${Y}[1]`,Z[1],"expressions are not allowed in function stops.")]):U.concat(V.validateSpec({key:`${Y}[1]`,value:Z[1],valueSpec:t,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec}))}function B(V,U){const Z=oi(V.value),Y=Ui(V.value),ae=V.value!==null?V.value:U;if(l){if(Z!==l)return[new $e(V.key,ae,`${Z} stop domain type must match previous stop domain type ${l}`)]}else l=Z;if(Z!=="number"&&Z!=="string"&&Z!=="boolean")return[new $e(V.key,ae,"stop domain value must be a number, string, or boolean")];if(Z!=="number"&&o!=="categorical"){let we=`number expected, ${Z} found`;return ao(t)&&o===void 0&&(we+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new $e(V.key,ae,we)]}return o!=="categorical"||Z!=="number"||isFinite(Y)&&Math.floor(Y)===Y?o!=="categorical"&&Z==="number"&&f!==void 0&&Y<f?[new $e(V.key,ae,"stop domain values must appear in ascending order")]:(f=Y,o==="categorical"&&Y in x?[new $e(V.key,ae,"stop domain values must be unique")]:(x[Y]=!0,[])):[new $e(V.key,ae,`integer expected, found ${Y}`)]}}function co(r){const t=(r.expressionContext==="property"?Sa:Sl)(lo(r.value),r.valueSpec);if(t.result==="error")return t.value.map(l=>new $e(`${r.key}${l.key}`,r.value,l.message));const o=t.value.expression||t.value._styleExpression.expression;if(r.expressionContext==="property"&&r.propertyKey==="text-font"&&!o.outputDefined())return[new $e(r.key,r.value,`Invalid data expression for "${r.propertyKey}". Output values must be contained as literals within the expression.`)];if(r.expressionContext==="property"&&r.propertyType==="layout"&&!wa(o))return[new $e(r.key,r.value,'"feature-state" data expressions are not supported with layout properties.')];if(r.expressionContext==="filter"&&!wa(o))return[new $e(r.key,r.value,'"feature-state" data expressions are not supported with filters.')];if(r.expressionContext&&r.expressionContext.indexOf("cluster")===0){if(!vl(o,["zoom","feature-state"]))return[new $e(r.key,r.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(r.expressionContext==="cluster-initial"&&!_l(o))return[new $e(r.key,r.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cs(r){const t=r.key,o=r.value,l=r.valueSpec,f=[];return Array.isArray(l.values)?l.values.indexOf(Ui(o))===-1&&f.push(new $e(t,o,`expected one of [${l.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(l.values).indexOf(Ui(o))===-1&&f.push(new $e(t,o,`expected one of [${Object.keys(l.values).join(", ")}], ${JSON.stringify(o)} found`)),f}function Ml(r){return Jo(lo(r.value))?co(Gt({},r,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Xc(r)}function Xc(r){const t=r.value,o=r.key;if(oi(t)!=="array")return[new $e(o,t,`array expected, ${oi(t)} found`)];const l=r.styleSpec;let f,y=[];if(t.length<1)return[new $e(o,t,"filter array must have at least 1 element")];switch(y=y.concat(Cs({key:`${o}[0]`,value:t[0],valueSpec:l.filter_operator,style:r.style,styleSpec:r.styleSpec})),Ui(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Ui(t[1])==="$type"&&y.push(new $e(o,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&y.push(new $e(o,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(f=oi(t[1]),f!=="string"&&y.push(new $e(`${o}[1]`,t[1],`string expected, ${f} found`)));for(let x=2;x<t.length;x++)f=oi(t[x]),Ui(t[1])==="$type"?y=y.concat(Cs({key:`${o}[${x}]`,value:t[x],valueSpec:l.geometry_type,style:r.style,styleSpec:r.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&y.push(new $e(`${o}[${x}]`,t[x],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let x=1;x<t.length;x++)y=y.concat(Xc({key:`${o}[${x}]`,value:t[x],style:r.style,styleSpec:r.styleSpec}));break;case"has":case"!has":f=oi(t[1]),t.length!==2?y.push(new $e(o,t,`filter array for "${t[0]}" operator must have 2 elements`)):f!=="string"&&y.push(new $e(`${o}[1]`,t[1],`string expected, ${f} found`))}return y}function Jc(r,t){const o=r.key,l=r.validateSpec,f=r.style,y=r.styleSpec,x=r.value,b=r.objectKey,E=y[`${t}_${r.layerType}`];if(!E)return[];const C=b.match(/^(.*)-transition$/);if(t==="paint"&&C&&E[C[1]]&&E[C[1]].transition)return l({key:o,value:x,valueSpec:y.transition,style:f,styleSpec:y});const P=r.valueSpec||E[b];if(!P)return[new $e(o,x,`unknown property "${b}"`)];let D;if(oi(x)==="string"&&ao(P)&&!P.tokens&&(D=/^{([^}]+)}$/.exec(x)))return[new $e(o,x,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];const B=[];return r.layerType==="symbol"&&(b==="text-field"&&f&&!f.glyphs&&B.push(new $e(o,x,'use of "text-field" requires a style "glyphs" property')),b==="text-font"&&Ss(lo(x))&&Ui(x.type)==="identity"&&B.push(new $e(o,x,'"text-font" does not support identity functions'))),B.concat(l({key:r.key,value:x,valueSpec:P,style:f,styleSpec:y,expressionContext:"property",propertyType:t,propertyKey:b}))}function Ll(r){return Jc(r,"paint")}function Yc(r){return Jc(r,"layout")}function qh(r){let t=[];const o=r.value,l=r.key,f=r.style,y=r.styleSpec;o.type||o.ref||t.push(new $e(l,o,'either "type" or "ref" is required'));let x=Ui(o.type);const b=Ui(o.ref);if(o.id){const E=Ui(o.id);for(let C=0;C<r.arrayIndex;C++){const P=f.layers[C];Ui(P.id)===E&&t.push(new $e(l,o.id,`duplicate layer id "${o.id}", previously used at line ${P.id.__line__}`))}}if("ref"in o){let E;["type","source","source-layer","filter","layout"].forEach(C=>{C in o&&t.push(new $e(l,o[C],`"${C}" is prohibited for ref layers`))}),f.layers.forEach(C=>{Ui(C.id)===b&&(E=C)}),E?E.ref?t.push(new $e(l,o.ref,"ref cannot reference another ref layer")):x=Ui(E.type):t.push(new $e(l,o.ref,`ref layer "${b}" not found`))}else if(x!=="background")if(o.source){const E=f.sources&&f.sources[o.source],C=E&&Ui(E.type);E?C==="vector"&&x==="raster"?t.push(new $e(l,o.source,`layer "${o.id}" requires a raster source`)):C!=="raster-dem"&&x==="hillshade"?t.push(new $e(l,o.source,`layer "${o.id}" requires a raster-dem source`)):C==="raster"&&x!=="raster"?t.push(new $e(l,o.source,`layer "${o.id}" requires a vector source`)):C!=="vector"||o["source-layer"]?C==="raster-dem"&&x!=="hillshade"?t.push(new $e(l,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!o.paint||!o.paint["line-gradient"]||C==="geojson"&&E.lineMetrics||t.push(new $e(l,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new $e(l,o,`layer "${o.id}" must specify a "source-layer"`)):t.push(new $e(l,o.source,`source "${o.source}" not found`))}else t.push(new $e(l,o,'missing required property "source"'));return t=t.concat(fn({key:l,value:o,valueSpec:y.layer,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,objectElementValidators:{"*":()=>[],type:()=>r.validateSpec({key:`${l}.type`,value:o.type,valueSpec:y.layer.type,style:r.style,styleSpec:r.styleSpec,validateSpec:r.validateSpec,object:o,objectKey:"type"}),filter:Ml,layout:E=>fn({layer:o,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":C=>Yc(Gt({layerType:x},C))}}),paint:E=>fn({layer:o,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":C=>Ll(Gt({layerType:x},C))}})}})),t}function bo(r){const t=r.value,o=r.key,l=oi(t);return l!=="string"?[new $e(o,t,`string expected, ${l} found`)]:[]}const Hh={promoteId:function({key:r,value:t}){if(oi(t)==="string")return bo({key:r,value:t});{const o=[];for(const l in t)o.push(...bo({key:`${r}.${l}`,value:t[l]}));return o}}};function Qc(r){const t=r.value,o=r.key,l=r.styleSpec,f=r.style,y=r.validateSpec;if(!t.type)return[new $e(o,t,'"type" is required')];const x=Ui(t.type);let b;switch(x){case"vector":case"raster":return b=fn({key:o,value:t,valueSpec:l[`source_${x.replace("-","_")}`],style:r.style,styleSpec:l,objectElementValidators:Hh,validateSpec:y}),b;case"raster-dem":return b=function(E){var C;const P=(C=E.sourceName)!==null&&C!==void 0?C:"",D=E.value,B=E.styleSpec,V=B.source_raster_dem,U=E.style;let Z=[];const Y=oi(D);if(D===void 0)return Z;if(Y!=="object")return Z.push(new $e("source_raster_dem",D,`object expected, ${Y} found`)),Z;const ae=Ui(D.encoding)==="custom",we=["redFactor","greenFactor","blueFactor","baseShift"],de=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const xe in D)!ae&&we.includes(xe)?Z.push(new $e(xe,D[xe],`In "${P}": "${xe}" is only valid when "encoding" is set to "custom". ${de} encoding found`)):V[xe]?Z=Z.concat(E.validateSpec({key:xe,value:D[xe],valueSpec:V[xe],validateSpec:E.validateSpec,style:U,styleSpec:B})):Z.push(new $e(xe,D[xe],`unknown property "${xe}"`));return Z}({sourceName:o,value:t,style:r.style,styleSpec:l,validateSpec:y}),b;case"geojson":if(b=fn({key:o,value:t,valueSpec:l.source_geojson,style:f,styleSpec:l,validateSpec:y,objectElementValidators:Hh}),t.cluster)for(const E in t.clusterProperties){const[C,P]=t.clusterProperties[E],D=typeof C=="string"?[C,["accumulated"],["get",E]]:C;b.push(...co({key:`${o}.${E}.map`,value:P,validateSpec:y,expressionContext:"cluster-map"})),b.push(...co({key:`${o}.${E}.reduce`,value:D,validateSpec:y,expressionContext:"cluster-reduce"}))}return b;case"video":return fn({key:o,value:t,valueSpec:l.source_video,style:f,validateSpec:y,styleSpec:l});case"image":return fn({key:o,value:t,valueSpec:l.source_image,style:f,validateSpec:y,styleSpec:l});case"canvas":return[new $e(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Cs({key:`${o}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:f,validateSpec:y,styleSpec:l})}}function eu(r){const t=r.value,o=r.styleSpec,l=o.light,f=r.style;let y=[];const x=oi(t);if(t===void 0)return y;if(x!=="object")return y=y.concat([new $e("light",t,`object expected, ${x} found`)]),y;for(const b in t){const E=b.match(/^(.*)-transition$/);y=y.concat(E&&l[E[1]]&&l[E[1]].transition?r.validateSpec({key:b,value:t[b],valueSpec:o.transition,validateSpec:r.validateSpec,style:f,styleSpec:o}):l[b]?r.validateSpec({key:b,value:t[b],valueSpec:l[b],validateSpec:r.validateSpec,style:f,styleSpec:o}):[new $e(b,t[b],`unknown property "${b}"`)])}return y}function tu(r){const t=r.value,o=r.styleSpec,l=o.sky,f=r.style,y=oi(t);if(t===void 0)return[];if(y!=="object")return[new $e("sky",t,`object expected, ${y} found`)];let x=[];for(const b in t)x=x.concat(l[b]?r.validateSpec({key:b,value:t[b],valueSpec:l[b],style:f,styleSpec:o}):[new $e(b,t[b],`unknown property "${b}"`)]);return x}function Gh(r){const t=r.value,o=r.styleSpec,l=o.terrain,f=r.style;let y=[];const x=oi(t);if(t===void 0)return y;if(x!=="object")return y=y.concat([new $e("terrain",t,`object expected, ${x} found`)]),y;for(const b in t)y=y.concat(l[b]?r.validateSpec({key:b,value:t[b],valueSpec:l[b],validateSpec:r.validateSpec,style:f,styleSpec:o}):[new $e(b,t[b],`unknown property "${b}"`)]);return y}function Zh(r){let t=[];const o=r.value,l=r.key;if(Array.isArray(o)){const f=[],y=[];for(const x in o)o[x].id&&f.includes(o[x].id)&&t.push(new $e(l,o,`all the sprites' ids must be unique, but ${o[x].id} is duplicated`)),f.push(o[x].id),o[x].url&&y.includes(o[x].url)&&t.push(new $e(l,o,`all the sprites' URLs must be unique, but ${o[x].url} is duplicated`)),y.push(o[x].url),t=t.concat(fn({key:`${l}[${x}]`,value:o[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:r.validateSpec}));return t}return bo({key:l,value:o})}const iu={"*":()=>[],array:Al,boolean:function(r){const t=r.value,o=r.key,l=oi(t);return l!=="boolean"?[new $e(o,t,`boolean expected, ${l} found`)]:[]},number:Kc,color:function(r){const t=r.key,o=r.value,l=oi(o);return l!=="string"?[new $e(t,o,`color expected, ${l} found`)]:di.parse(String(o))?[]:[new $e(t,o,`color expected, "${o}" found`)]},constants:Cl,enum:Cs,filter:Ml,function:kl,layer:qh,object:fn,source:Qc,light:eu,sky:tu,terrain:Gh,projection:function(r){const t=r.value,o=r.styleSpec,l=o.projection,f=r.style,y=oi(t);if(t===void 0)return[];if(y!=="object")return[new $e("projection",t,`object expected, ${y} found`)];let x=[];for(const b in t)x=x.concat(l[b]?r.validateSpec({key:b,value:t[b],valueSpec:l[b],style:f,styleSpec:o}):[new $e(b,t[b],`unknown property "${b}"`)]);return x},string:bo,formatted:function(r){return bo(r).length===0?[]:co(r)},resolvedImage:function(r){return bo(r).length===0?[]:co(r)},padding:function(r){const t=r.key,o=r.value;if(oi(o)==="array"){if(o.length<1||o.length>4)return[new $e(t,o,`padding requires 1 to 4 values; ${o.length} values found`)];const l={type:"number"};let f=[];for(let y=0;y<o.length;y++)f=f.concat(r.validateSpec({key:`${t}[${y}]`,value:o[y],validateSpec:r.validateSpec,valueSpec:l}));return f}return Kc({key:t,value:o,valueSpec:{}})},variableAnchorOffsetCollection:function(r){const t=r.key,o=r.value,l=oi(o),f=r.styleSpec;if(l!=="array"||o.length<1||o.length%2!=0)return[new $e(t,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let x=0;x<o.length;x+=2)y=y.concat(Cs({key:`${t}[${x}]`,value:o[x],valueSpec:f.layout_symbol["text-anchor"]})),y=y.concat(Al({key:`${t}[${x+1}]`,value:o[x+1],valueSpec:{length:2,value:"number"},validateSpec:r.validateSpec,style:r.style,styleSpec:f}));return y},sprite:Zh};function As(r){const t=r.value,o=r.valueSpec,l=r.styleSpec;return r.validateSpec=As,o.expression&&Ss(Ui(t))?kl(r):o.expression&&El(lo(t))?co(r):o.type&&iu[o.type]?iu[o.type](r):fn(Gt({},r,{valueSpec:o.type?l[o.type]:o}))}function ru(r){const t=r.value,o=r.key,l=bo(r);return l.length||(t.indexOf("{fontstack}")===-1&&l.push(new $e(o,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&l.push(new $e(o,t,'"glyphs" url must include a "{range}" token'))),l}function xn(r,t=le){let o=[];return o=o.concat(As({key:"",value:r,valueSpec:t.$root,styleSpec:t,style:r,validateSpec:As,objectElementValidators:{glyphs:ru,"*":()=>[]}})),r.constants&&(o=o.concat(Cl({key:"constants",value:r.constants,style:r,styleSpec:t,validateSpec:As}))),Wh(o)}function pn(r){return function(t){return r({...t,validateSpec:As})}}function Wh(r){return[].concat(r).sort((t,o)=>t.line-o.line)}function bn(r){return function(...t){return Wh(r.apply(this,t))}}xn.source=bn(pn(Qc)),xn.sprite=bn(pn(Zh)),xn.glyphs=bn(pn(ru)),xn.light=bn(pn(eu)),xn.sky=bn(pn(tu)),xn.terrain=bn(pn(Gh)),xn.layer=bn(pn(qh)),xn.filter=bn(pn(Ml)),xn.paintProperty=bn(pn(Ll)),xn.layoutProperty=bn(pn(Yc));const Ca=xn,gp=Ca.light,Kh=Ca.paintProperty,Xh=Ca.layoutProperty;function nu(r,t){let o=!1;if(t&&t.length)for(const l of t)r.fire(new ge(new Error(l.message))),o=!0;return o}class Aa{constructor(t,o,l){const f=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const x=new Int32Array(this.arrayBuffer);t=x[0],this.d=(o=x[1])+2*(l=x[2]);for(let E=0;E<this.d*this.d;E++){const C=x[3+E],P=x[3+E+1];f.push(C===P?null:x.subarray(C,P))}const b=x[3+f.length+1];this.keys=x.subarray(x[3+f.length],b),this.bboxes=x.subarray(b),this.insert=this._insertReadonly}else{this.d=o+2*l;for(let x=0;x<this.d*this.d;x++)f.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=t,this.padding=l,this.scale=o/t,this.uid=0;const y=l/o*t;this.min=-y,this.max=t+y}insert(t,o,l,f,y){this._forEachCell(o,l,f,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(o),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,o,l,f,y,x){this.cells[y].push(x)}query(t,o,l,f,y){const x=this.min,b=this.max;if(t<=x&&o<=x&&b<=l&&b<=f&&!y)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(t,o,l,f,this._queryCell,E,{},y),E}}_queryCell(t,o,l,f,y,x,b,E){const C=this.cells[y];if(C!==null){const P=this.keys,D=this.bboxes;for(let B=0;B<C.length;B++){const V=C[B];if(b[V]===void 0){const U=4*V;(E?E(D[U+0],D[U+1],D[U+2],D[U+3]):t<=D[U+2]&&o<=D[U+3]&&l>=D[U+0]&&f>=D[U+1])?(b[V]=!0,x.push(P[V])):b[V]=!1}}}}_forEachCell(t,o,l,f,y,x,b,E){const C=this._convertToCellCoord(t),P=this._convertToCellCoord(o),D=this._convertToCellCoord(l),B=this._convertToCellCoord(f);for(let V=C;V<=D;V++)for(let U=P;U<=B;U++){const Z=this.d*U+V;if((!E||E(this._convertFromCellCoord(V),this._convertFromCellCoord(U),this._convertFromCellCoord(V+1),this._convertFromCellCoord(U+1)))&&y.call(this,t,o,l,f,Z,x,b,E))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,o=3+this.cells.length+1+1;let l=0;for(let x=0;x<this.cells.length;x++)l+=this.cells[x].length;const f=new Int32Array(o+l+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let y=o;for(let x=0;x<t.length;x++){const b=t[x];f[3+x]=y,f.set(b,y),y+=b.length}return f[3+t.length]=y,f.set(this.keys,y),y+=this.keys.length,f[3+t.length+1]=y,f.set(this.bboxes,y),y+=this.bboxes.length,f.buffer}static serialize(t,o){const l=t.toArrayBuffer();return o&&o.push(l),{buffer:l}}static deserialize(t){return new Aa(t.buffer)}}const wo={};function mt(r,t,o={}){if(wo[r])throw new Error(`${r} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:r,writeable:!1}),wo[r]={klass:t,omit:o.omit||[],shallow:o.shallow||[]}}mt("Object",Object),mt("TransferableGridIndex",Aa),mt("Color",di),mt("Error",Error),mt("AJAXError",Pi),mt("ResolvedImage",vn),mt("StylePropertyFunction",Xo),mt("StyleExpression",Hc,{omit:["_evaluator"]}),mt("ZoomDependentExpression",Zc),mt("ZoomConstantExpression",Gc),mt("CompoundExpression",Qr,{omit:["_evaluate"]});for(const r in Zo)Zo[r]._classRegistryKey||mt(`Expression_${r}`,Zo[r]);function Jh(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function ka(r,t){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error)return r;if(Jh(r)||dt(r))return t&&t.push(r),r;if(ArrayBuffer.isView(r)){const o=r;return t&&t.push(o.buffer),o}if(r instanceof ImageData)return t&&t.push(r.data.buffer),r;if(Array.isArray(r)){const o=[];for(const l of r)o.push(ka(l,t));return o}if(typeof r=="object"){const o=r.constructor,l=o._classRegistryKey;if(!l)throw new Error(`can't serialize object of unregistered class ${o.name}`);if(!wo[l])throw new Error(`${l} is not registered.`);const f=o.serialize?o.serialize(r,t):{};if(o.serialize){if(t&&f===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const y in r){if(!r.hasOwnProperty(y)||wo[l].omit.indexOf(y)>=0)continue;const x=r[y];f[y]=wo[l].shallow.indexOf(y)>=0?x:ka(x,t)}r instanceof Error&&(f.message=r.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(f.$name=l),f}throw new Error("can't serialize object of type "+typeof r)}function qn(r){if(r==null||typeof r=="boolean"||typeof r=="number"||typeof r=="string"||r instanceof Boolean||r instanceof Number||r instanceof String||r instanceof Date||r instanceof RegExp||r instanceof Blob||r instanceof Error||Jh(r)||dt(r)||ArrayBuffer.isView(r)||r instanceof ImageData)return r;if(Array.isArray(r))return r.map(qn);if(typeof r=="object"){const t=r.$name||"Object";if(!wo[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:o}=wo[t];if(!o)throw new Error(`can't deserialize unregistered class ${t}`);if(o.deserialize)return o.deserialize(r);const l=Object.create(o.prototype);for(const f of Object.keys(r)){if(f==="$name")continue;const y=r[f];l[f]=wo[t].shallow.indexOf(f)>=0?y:qn(y)}return l}throw new Error("can't deserialize object of type "+typeof r)}class Yh{constructor(){this.first=!0}update(t,o){const l=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=l,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=l,!0):(this.lastFloorZoom>l?(this.lastIntegerZoom=l+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<l&&(this.lastIntegerZoom=l,this.lastIntegerZoomTime=o),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=l,!0))}}const ct={"Latin-1 Supplement":r=>r>=128&&r<=255,Arabic:r=>r>=1536&&r<=1791,"Arabic Supplement":r=>r>=1872&&r<=1919,"Arabic Extended-A":r=>r>=2208&&r<=2303,"Hangul Jamo":r=>r>=4352&&r<=4607,"Unified Canadian Aboriginal Syllabics":r=>r>=5120&&r<=5759,Khmer:r=>r>=6016&&r<=6143,"Unified Canadian Aboriginal Syllabics Extended":r=>r>=6320&&r<=6399,"General Punctuation":r=>r>=8192&&r<=8303,"Letterlike Symbols":r=>r>=8448&&r<=8527,"Number Forms":r=>r>=8528&&r<=8591,"Miscellaneous Technical":r=>r>=8960&&r<=9215,"Control Pictures":r=>r>=9216&&r<=9279,"Optical Character Recognition":r=>r>=9280&&r<=9311,"Enclosed Alphanumerics":r=>r>=9312&&r<=9471,"Geometric Shapes":r=>r>=9632&&r<=9727,"Miscellaneous Symbols":r=>r>=9728&&r<=9983,"Miscellaneous Symbols and Arrows":r=>r>=11008&&r<=11263,"CJK Radicals Supplement":r=>r>=11904&&r<=12031,"Kangxi Radicals":r=>r>=12032&&r<=12255,"Ideographic Description Characters":r=>r>=12272&&r<=12287,"CJK Symbols and Punctuation":r=>r>=12288&&r<=12351,Hiragana:r=>r>=12352&&r<=12447,Katakana:r=>r>=12448&&r<=12543,Bopomofo:r=>r>=12544&&r<=12591,"Hangul Compatibility Jamo":r=>r>=12592&&r<=12687,Kanbun:r=>r>=12688&&r<=12703,"Bopomofo Extended":r=>r>=12704&&r<=12735,"CJK Strokes":r=>r>=12736&&r<=12783,"Katakana Phonetic Extensions":r=>r>=12784&&r<=12799,"Enclosed CJK Letters and Months":r=>r>=12800&&r<=13055,"CJK Compatibility":r=>r>=13056&&r<=13311,"CJK Unified Ideographs Extension A":r=>r>=13312&&r<=19903,"Yijing Hexagram Symbols":r=>r>=19904&&r<=19967,"CJK Unified Ideographs":r=>r>=19968&&r<=40959,"Yi Syllables":r=>r>=40960&&r<=42127,"Yi Radicals":r=>r>=42128&&r<=42191,"Hangul Jamo Extended-A":r=>r>=43360&&r<=43391,"Hangul Syllables":r=>r>=44032&&r<=55215,"Hangul Jamo Extended-B":r=>r>=55216&&r<=55295,"Private Use Area":r=>r>=57344&&r<=63743,"CJK Compatibility Ideographs":r=>r>=63744&&r<=64255,"Arabic Presentation Forms-A":r=>r>=64336&&r<=65023,"Vertical Forms":r=>r>=65040&&r<=65055,"CJK Compatibility Forms":r=>r>=65072&&r<=65103,"Small Form Variants":r=>r>=65104&&r<=65135,"Arabic Presentation Forms-B":r=>r>=65136&&r<=65279,"Halfwidth and Fullwidth Forms":r=>r>=65280&&r<=65519};function ou(r){for(const t of r)if(su(t.charCodeAt(0)))return!0;return!1}function yp(r){for(const t of r)if(!Qh(t.charCodeAt(0)))return!1;return!0}function Qh(r){return!(ct.Arabic(r)||ct["Arabic Supplement"](r)||ct["Arabic Extended-A"](r)||ct["Arabic Presentation Forms-A"](r)||ct["Arabic Presentation Forms-B"](r))}function su(r){return!(r!==746&&r!==747&&(r<4352||!(ct["Bopomofo Extended"](r)||ct.Bopomofo(r)||ct["CJK Compatibility Forms"](r)&&!(r>=65097&&r<=65103)||ct["CJK Compatibility Ideographs"](r)||ct["CJK Compatibility"](r)||ct["CJK Radicals Supplement"](r)||ct["CJK Strokes"](r)||!(!ct["CJK Symbols and Punctuation"](r)||r>=12296&&r<=12305||r>=12308&&r<=12319||r===12336)||ct["CJK Unified Ideographs Extension A"](r)||ct["CJK Unified Ideographs"](r)||ct["Enclosed CJK Letters and Months"](r)||ct["Hangul Compatibility Jamo"](r)||ct["Hangul Jamo Extended-A"](r)||ct["Hangul Jamo Extended-B"](r)||ct["Hangul Jamo"](r)||ct["Hangul Syllables"](r)||ct.Hiragana(r)||ct["Ideographic Description Characters"](r)||ct.Kanbun(r)||ct["Kangxi Radicals"](r)||ct["Katakana Phonetic Extensions"](r)||ct.Katakana(r)&&r!==12540||!(!ct["Halfwidth and Fullwidth Forms"](r)||r===65288||r===65289||r===65293||r>=65306&&r<=65310||r===65339||r===65341||r===65343||r>=65371&&r<=65503||r===65507||r>=65512&&r<=65519)||!(!ct["Small Form Variants"](r)||r>=65112&&r<=65118||r>=65123&&r<=65126)||ct["Unified Canadian Aboriginal Syllabics"](r)||ct["Unified Canadian Aboriginal Syllabics Extended"](r)||ct["Vertical Forms"](r)||ct["Yijing Hexagram Symbols"](r)||ct["Yi Syllables"](r)||ct["Yi Radicals"](r))))}function ed(r){return!(su(r)||function(t){return!!(ct["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||ct["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||ct["Letterlike Symbols"](t)||ct["Number Forms"](t)||ct["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||ct["Control Pictures"](t)&&t!==9251||ct["Optical Character Recognition"](t)||ct["Enclosed Alphanumerics"](t)||ct["Geometric Shapes"](t)||ct["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||ct["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||ct["CJK Symbols and Punctuation"](t)||ct.Katakana(t)||ct["Private Use Area"](t)||ct["CJK Compatibility Forms"](t)||ct["Small Form Variants"](t)||ct["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)}(r))}function Eo(r){return r>=1424&&r<=2303||ct["Arabic Presentation Forms-A"](r)||ct["Arabic Presentation Forms-B"](r)}function td(r,t){return!(!t&&Eo(r)||r>=2304&&r<=3583||r>=3840&&r<=4255||ct.Khmer(r))}function au(r){for(const t of r)if(Eo(t.charCodeAt(0)))return!0;return!1}const So=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(r){this.pluginStatus=r.pluginStatus,this.pluginURL=r.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(r){this.applyArabicShaping=r.applyArabicShaping,this.processBidirectionalText=r.processBidirectionalText,this.processStyledBidirectionalText=r.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class wi{constructor(t,o){this.zoom=t,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Yh,this.transition={})}isSupportedScript(t){return function(o,l){for(const f of o)if(!td(f.charCodeAt(0),l))return!1;return!0}(t,So.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,o=t-Math.floor(t),l=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*l}:{fromScale:.5,toScale:1,t:1-(1-l)*o}}}class Pl{constructor(t,o){this.property=t,this.value=o,this.expression=function(l,f){if(Ss(l))return new Xo(l,f);if(El(l)){const y=Sa(l,f);if(y.result==="error")throw new Error(y.value.map(x=>`${x.key}: ${x.message}`).join(", "));return y.value}{let y=l;return f.type==="color"&&typeof l=="string"?y=di.parse(l):f.type!=="padding"||typeof l!="number"&&!Array.isArray(l)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(l)&&(y=Yr.parse(l)):y=Jr.parse(l),{kind:"constant",evaluate:()=>y}}}(o===void 0?t.specification.default:o,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,o,l){return this.property.possiblyEvaluate(this,t,o,l)}}class ks{constructor(t){this.property=t,this.value=new Pl(t,void 0)}transitioned(t,o){return new id(this.property,this.value,o,Ie({},t.transition,this.transition),t.now)}untransitioned(){return new id(this.property,this.value,null,{},0)}}class Ms{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return Ae(this._values[t].value.value)}setValue(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ks(this._values[t].property)),this._values[t].value=new Pl(this._values[t].property,o===null?void 0:Ae(o))}getTransition(t){return Ae(this._values[t].transition)}setTransition(t,o){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ks(this._values[t].property)),this._values[t].transition=Ae(o)||void 0}serialize(){const t={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(t[o]=l);const f=this.getTransition(o);f!==void 0&&(t[`${o}-transition`]=f)}return t}transitioned(t,o){const l=new lu(this._properties);for(const f of Object.keys(this._values))l._values[f]=this._values[f].transitioned(t,o._values[f]);return l}untransitioned(){const t=new lu(this._properties);for(const o of Object.keys(this._values))t._values[o]=this._values[o].untransitioned();return t}}class id{constructor(t,o,l,f,y){this.property=t,this.value=o,this.begin=y+f.delay||0,this.end=this.begin+f.duration||0,t.specification.transition&&(f.delay||f.duration)&&(this.prior=l)}possiblyEvaluate(t,o,l){const f=t.now||0,y=this.value.possiblyEvaluate(t,o,l),x=this.prior;if(x){if(f>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(f<this.begin)return x.possiblyEvaluate(t,o,l);{const b=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(t,o,l),y,function(E){if(E<=0)return 0;if(E>=1)return 1;const C=E*E,P=C*E;return 4*(E<.5?P:3*(E-C)+P-.75)}(b))}}return y}}class lu{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,o,l){const f=new zl(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].possiblyEvaluate(t,o,l);return f}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Ma{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return Ae(this._values[t].value)}setValue(t,o){this._values[t]=new Pl(this._values[t].property,o===null?void 0:Ae(o))}serialize(){const t={};for(const o of Object.keys(this._values)){const l=this.getValue(o);l!==void 0&&(t[o]=l)}return t}possiblyEvaluate(t,o,l){const f=new zl(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].possiblyEvaluate(t,o,l);return f}}class Hn{constructor(t,o,l){this.property=t,this.value=o,this.parameters=l}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,o,l,f){return this.property.evaluate(this.value,this.parameters,t,o,l,f)}}class zl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class wt{constructor(t){this.specification=t}possiblyEvaluate(t,o){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(o)}interpolate(t,o,l){const f=Vr[this.specification.type];return f?f(t,o,l):t}}class At{constructor(t,o){this.specification=t,this.overrides=o}possiblyEvaluate(t,o,l,f){return new Hn(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(o,null,{},l,f)}:t.expression,o)}interpolate(t,o,l){if(t.value.kind!=="constant"||o.value.kind!=="constant")return t;if(t.value.value===void 0||o.value.value===void 0)return new Hn(this,{kind:"constant",value:void 0},t.parameters);const f=Vr[this.specification.type];if(f){const y=f(t.value.value,o.value.value,l);return new Hn(this,{kind:"constant",value:y},t.parameters)}return t}evaluate(t,o,l,f,y,x){return t.kind==="constant"?t.value:t.evaluate(o,l,f,y,x)}}class _ extends At{possiblyEvaluate(t,o,l,f){if(t.value===void 0)return new Hn(this,{kind:"constant",value:void 0},o);if(t.expression.kind==="constant"){const y=t.expression.evaluate(o,null,{},l,f),x=t.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,b=this._calculate(x,x,x,o);return new Hn(this,{kind:"constant",value:b},o)}if(t.expression.kind==="camera"){const y=this._calculate(t.expression.evaluate({zoom:o.zoom-1}),t.expression.evaluate({zoom:o.zoom}),t.expression.evaluate({zoom:o.zoom+1}),o);return new Hn(this,{kind:"constant",value:y},o)}return new Hn(this,t.expression,o)}evaluate(t,o,l,f,y,x){if(t.kind==="source"){const b=t.evaluate(o,l,f,y,x);return this._calculate(b,b,b,o)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(o.zoom)-1},l,f),t.evaluate({zoom:Math.floor(o.zoom)},l,f),t.evaluate({zoom:Math.floor(o.zoom)+1},l,f),o):t.value}_calculate(t,o,l,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:l,to:o}}interpolate(t){return t}}class i{constructor(t){this.specification=t}possiblyEvaluate(t,o,l,f){if(t.value!==void 0){if(t.expression.kind==="constant"){const y=t.expression.evaluate(o,null,{},l,f);return this._calculate(y,y,y,o)}return this._calculate(t.expression.evaluate(new wi(Math.floor(o.zoom-1),o)),t.expression.evaluate(new wi(Math.floor(o.zoom),o)),t.expression.evaluate(new wi(Math.floor(o.zoom+1),o)),o)}}_calculate(t,o,l,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:o}:{from:l,to:o}}interpolate(t){return t}}class a{constructor(t){this.specification=t}possiblyEvaluate(t,o,l,f){return!!t.expression.evaluate(o,null,{},l,f)}interpolate(){return!1}}class d{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const o in t){const l=t[o];l.specification.overridable&&this.overridableProperties.push(o);const f=this.defaultPropertyValues[o]=new Pl(l,void 0),y=this.defaultTransitionablePropertyValues[o]=new ks(l);this.defaultTransitioningPropertyValues[o]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=f.possiblyEvaluate({})}}}mt("DataDrivenProperty",At),mt("DataConstantProperty",wt),mt("CrossFadedDataDrivenProperty",_),mt("CrossFadedProperty",i),mt("ColorRampProperty",a);const p="-transition";class v extends Be{constructor(t,o){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),o.layout&&(this._unevaluatedLayout=new Ma(o.layout)),o.paint)){this._transitionablePaint=new Ms(o.paint);for(const l in t.paint)this.setPaintProperty(l,t.paint[l],{validate:!1});for(const l in t.layout)this.setLayoutProperty(l,t.layout[l],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new zl(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,o,l={}){o!=null&&this._validate(Xh,`layers.${this.id}.layout.${t}`,t,o,l)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,o):this.visibility=o)}getPaintProperty(t){return t.endsWith(p)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,o,l={}){if(o!=null&&this._validate(Kh,`layers.${this.id}.paint.${t}`,t,o,l))return!1;if(t.endsWith(p))return this._transitionablePaint.setTransition(t.slice(0,-11),o||void 0),!1;{const f=this._transitionablePaint._values[t],y=f.property.specification["property-type"]==="cross-faded-data-driven",x=f.value.isDataDriven(),b=f.value;this._transitionablePaint.setValue(t,o),this._handleSpecialPaintPropertyUpdate(t);const E=this._transitionablePaint._values[t].value;return E.isDataDriven()||x||y||this._handleOverridablePaintPropertyUpdate(t,b,E)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,o,l){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,o){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,o)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),pe(t,(o,l)=>!(o===void 0||l==="layout"&&!Object.keys(o).length||l==="paint"&&!Object.keys(o).length))}_validate(t,o,l,f,y={}){return(!y||y.validate!==!1)&&nu(this,t.call(Ca,{key:o,layerType:this.type,objectKey:l,value:f,styleSpec:le,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const o=this.paint.get(t);if(o instanceof Hn&&ao(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}const w={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class S{constructor(t,o){this._structArray=t,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class I{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,o){return t._trim(),o&&(t.isTransferred=!0,o.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const o=Object.create(this.prototype);return o.arrayBuffer=t.arrayBuffer,o.length=t.length,o.capacity=t.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function z(r,t=1){let o=0,l=0;return{members:r.map(f=>{const y=w[f.type].BYTES_PER_ELEMENT,x=o=O(o,Math.max(t,y)),b=f.components||1;return l=Math.max(l,y),o+=y*b,{name:f.name,type:f.type,components:b,offset:x}}),size:O(o,Math.max(l,t)),alignment:t}}function O(r,t){return Math.ceil(r/t)*t}class R extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o){const l=this.length;return this.resize(l+1),this.emplace(l,t,o)}emplace(t,o,l){const f=2*t;return this.int16[f+0]=o,this.int16[f+1]=l,t}}R.prototype.bytesPerElement=4,mt("StructArrayLayout2i4",R);class $ extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,o,l)}emplace(t,o,l,f){const y=3*t;return this.int16[y+0]=o,this.int16[y+1]=l,this.int16[y+2]=f,t}}$.prototype.bytesPerElement=6,mt("StructArrayLayout3i6",$);class G extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,f){const y=this.length;return this.resize(y+1),this.emplace(y,t,o,l,f)}emplace(t,o,l,f,y){const x=4*t;return this.int16[x+0]=o,this.int16[x+1]=l,this.int16[x+2]=f,this.int16[x+3]=y,t}}G.prototype.bytesPerElement=8,mt("StructArrayLayout4i8",G);class K extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,f,y,x){const b=this.length;return this.resize(b+1),this.emplace(b,t,o,l,f,y,x)}emplace(t,o,l,f,y,x,b){const E=6*t;return this.int16[E+0]=o,this.int16[E+1]=l,this.int16[E+2]=f,this.int16[E+3]=y,this.int16[E+4]=x,this.int16[E+5]=b,t}}K.prototype.bytesPerElement=12,mt("StructArrayLayout2i4i12",K);class re extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,f,y,x){const b=this.length;return this.resize(b+1),this.emplace(b,t,o,l,f,y,x)}emplace(t,o,l,f,y,x,b){const E=4*t,C=8*t;return this.int16[E+0]=o,this.int16[E+1]=l,this.uint8[C+4]=f,this.uint8[C+5]=y,this.uint8[C+6]=x,this.uint8[C+7]=b,t}}re.prototype.bytesPerElement=8,mt("StructArrayLayout2i4ub8",re);class J extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o){const l=this.length;return this.resize(l+1),this.emplace(l,t,o)}emplace(t,o,l){const f=2*t;return this.float32[f+0]=o,this.float32[f+1]=l,t}}J.prototype.bytesPerElement=8,mt("StructArrayLayout2f8",J);class ce extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,l,f,y,x,b,E,C,P){const D=this.length;return this.resize(D+1),this.emplace(D,t,o,l,f,y,x,b,E,C,P)}emplace(t,o,l,f,y,x,b,E,C,P,D){const B=10*t;return this.uint16[B+0]=o,this.uint16[B+1]=l,this.uint16[B+2]=f,this.uint16[B+3]=y,this.uint16[B+4]=x,this.uint16[B+5]=b,this.uint16[B+6]=E,this.uint16[B+7]=C,this.uint16[B+8]=P,this.uint16[B+9]=D,t}}ce.prototype.bytesPerElement=20,mt("StructArrayLayout10ui20",ce);class me extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,l,f,y,x,b,E,C,P,D,B){const V=this.length;return this.resize(V+1),this.emplace(V,t,o,l,f,y,x,b,E,C,P,D,B)}emplace(t,o,l,f,y,x,b,E,C,P,D,B,V){const U=12*t;return this.int16[U+0]=o,this.int16[U+1]=l,this.int16[U+2]=f,this.int16[U+3]=y,this.uint16[U+4]=x,this.uint16[U+5]=b,this.uint16[U+6]=E,this.uint16[U+7]=C,this.int16[U+8]=P,this.int16[U+9]=D,this.int16[U+10]=B,this.int16[U+11]=V,t}}me.prototype.bytesPerElement=24,mt("StructArrayLayout4i4ui4i24",me);class te extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,o,l)}emplace(t,o,l,f){const y=3*t;return this.float32[y+0]=o,this.float32[y+1]=l,this.float32[y+2]=f,t}}te.prototype.bytesPerElement=12,mt("StructArrayLayout3f12",te);class ve extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint32[1*t+0]=o,t}}ve.prototype.bytesPerElement=4,mt("StructArrayLayout1ul4",ve);class Se extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,l,f,y,x,b,E,C){const P=this.length;return this.resize(P+1),this.emplace(P,t,o,l,f,y,x,b,E,C)}emplace(t,o,l,f,y,x,b,E,C,P){const D=10*t,B=5*t;return this.int16[D+0]=o,this.int16[D+1]=l,this.int16[D+2]=f,this.int16[D+3]=y,this.int16[D+4]=x,this.int16[D+5]=b,this.uint32[B+3]=E,this.uint16[D+8]=C,this.uint16[D+9]=P,t}}Se.prototype.bytesPerElement=20,mt("StructArrayLayout6i1ul2ui20",Se);class Pe extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,f,y,x){const b=this.length;return this.resize(b+1),this.emplace(b,t,o,l,f,y,x)}emplace(t,o,l,f,y,x,b){const E=6*t;return this.int16[E+0]=o,this.int16[E+1]=l,this.int16[E+2]=f,this.int16[E+3]=y,this.int16[E+4]=x,this.int16[E+5]=b,t}}Pe.prototype.bytesPerElement=12,mt("StructArrayLayout2i2i2i12",Pe);class Ne extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,f,y){const x=this.length;return this.resize(x+1),this.emplace(x,t,o,l,f,y)}emplace(t,o,l,f,y,x){const b=4*t,E=8*t;return this.float32[b+0]=o,this.float32[b+1]=l,this.float32[b+2]=f,this.int16[E+6]=y,this.int16[E+7]=x,t}}Ne.prototype.bytesPerElement=16,mt("StructArrayLayout2f1f2i16",Ne);class Xe extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,o,l,f,y,x){const b=this.length;return this.resize(b+1),this.emplace(b,t,o,l,f,y,x)}emplace(t,o,l,f,y,x,b){const E=16*t,C=4*t,P=8*t;return this.uint8[E+0]=o,this.uint8[E+1]=l,this.float32[C+1]=f,this.float32[C+2]=y,this.int16[P+6]=x,this.int16[P+7]=b,t}}Xe.prototype.bytesPerElement=16,mt("StructArrayLayout2ub2f2i16",Xe);class ut extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,o,l)}emplace(t,o,l,f){const y=3*t;return this.uint16[y+0]=o,this.uint16[y+1]=l,this.uint16[y+2]=f,t}}ut.prototype.bytesPerElement=6,mt("StructArrayLayout3ui6",ut);class ht extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,l,f,y,x,b,E,C,P,D,B,V,U,Z,Y,ae){const we=this.length;return this.resize(we+1),this.emplace(we,t,o,l,f,y,x,b,E,C,P,D,B,V,U,Z,Y,ae)}emplace(t,o,l,f,y,x,b,E,C,P,D,B,V,U,Z,Y,ae,we){const de=24*t,xe=12*t,ze=48*t;return this.int16[de+0]=o,this.int16[de+1]=l,this.uint16[de+2]=f,this.uint16[de+3]=y,this.uint32[xe+2]=x,this.uint32[xe+3]=b,this.uint32[xe+4]=E,this.uint16[de+10]=C,this.uint16[de+11]=P,this.uint16[de+12]=D,this.float32[xe+7]=B,this.float32[xe+8]=V,this.uint8[ze+36]=U,this.uint8[ze+37]=Z,this.uint8[ze+38]=Y,this.uint32[xe+10]=ae,this.int16[de+22]=we,t}}ht.prototype.bytesPerElement=48,mt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ht);class Je extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,l,f,y,x,b,E,C,P,D,B,V,U,Z,Y,ae,we,de,xe,ze,qe,st,Ct,lt,ot,bt,gt){const ft=this.length;return this.resize(ft+1),this.emplace(ft,t,o,l,f,y,x,b,E,C,P,D,B,V,U,Z,Y,ae,we,de,xe,ze,qe,st,Ct,lt,ot,bt,gt)}emplace(t,o,l,f,y,x,b,E,C,P,D,B,V,U,Z,Y,ae,we,de,xe,ze,qe,st,Ct,lt,ot,bt,gt,ft){const Fe=32*t,Et=16*t;return this.int16[Fe+0]=o,this.int16[Fe+1]=l,this.int16[Fe+2]=f,this.int16[Fe+3]=y,this.int16[Fe+4]=x,this.int16[Fe+5]=b,this.int16[Fe+6]=E,this.int16[Fe+7]=C,this.uint16[Fe+8]=P,this.uint16[Fe+9]=D,this.uint16[Fe+10]=B,this.uint16[Fe+11]=V,this.uint16[Fe+12]=U,this.uint16[Fe+13]=Z,this.uint16[Fe+14]=Y,this.uint16[Fe+15]=ae,this.uint16[Fe+16]=we,this.uint16[Fe+17]=de,this.uint16[Fe+18]=xe,this.uint16[Fe+19]=ze,this.uint16[Fe+20]=qe,this.uint16[Fe+21]=st,this.uint16[Fe+22]=Ct,this.uint32[Et+12]=lt,this.float32[Et+13]=ot,this.float32[Et+14]=bt,this.uint16[Fe+30]=gt,this.uint16[Fe+31]=ft,t}}Je.prototype.bytesPerElement=64,mt("StructArrayLayout8i15ui1ul2f2ui64",Je);class et extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.float32[1*t+0]=o,t}}et.prototype.bytesPerElement=4,mt("StructArrayLayout1f4",et);class yt extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,o,l)}emplace(t,o,l,f){const y=3*t;return this.uint16[6*t+0]=o,this.float32[y+1]=l,this.float32[y+2]=f,t}}yt.prototype.bytesPerElement=12,mt("StructArrayLayout1ui2f12",yt);class Ot extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o,l){const f=this.length;return this.resize(f+1),this.emplace(f,t,o,l)}emplace(t,o,l,f){const y=4*t;return this.uint32[2*t+0]=o,this.uint16[y+2]=l,this.uint16[y+3]=f,t}}Ot.prototype.bytesPerElement=8,mt("StructArrayLayout1ul2ui8",Ot);class it extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,o){const l=this.length;return this.resize(l+1),this.emplace(l,t,o)}emplace(t,o,l){const f=2*t;return this.uint16[f+0]=o,this.uint16[f+1]=l,t}}it.prototype.bytesPerElement=4,mt("StructArrayLayout2ui4",it);class at extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const o=this.length;return this.resize(o+1),this.emplace(o,t)}emplace(t,o){return this.uint16[1*t+0]=o,t}}at.prototype.bytesPerElement=2,mt("StructArrayLayout1ui2",at);class Pt extends I{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,o,l,f){const y=this.length;return this.resize(y+1),this.emplace(y,t,o,l,f)}emplace(t,o,l,f,y){const x=4*t;return this.float32[x+0]=o,this.float32[x+1]=l,this.float32[x+2]=f,this.float32[x+3]=y,t}}Pt.prototype.bytesPerElement=16,mt("StructArrayLayout4f16",Pt);class Ci extends S{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new A(this.anchorPointX,this.anchorPointY)}}Ci.prototype.size=20;class Wt extends Se{get(t){return new Ci(this,t)}}mt("CollisionBoxArray",Wt);class Yt extends S{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Yt.prototype.size=48;class Ai extends ht{get(t){return new Yt(this,t)}}mt("PlacedSymbolArray",Ai);class Ar extends S{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ar.prototype.size=64;class In extends Je{get(t){return new Ar(this,t)}}mt("SymbolInstanceArray",In);class ki extends et{getoffsetX(t){return this.float32[1*t+0]}}mt("GlyphOffsetArray",ki);class en extends ${getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}mt("SymbolLineVertexArray",en);class Nr extends S{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Nr.prototype.size=12;class kr extends yt{get(t){return new Nr(this,t)}}mt("TextAnchorOffsetArray",kr);class Mr extends S{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Mr.prototype.size=8;class Cn extends Ot{get(t){return new Mr(this,t)}}mt("FeatureIndexArray",Cn);class Qo extends R{}class Dl extends R{}class Ls extends R{}class es extends K{}class Rl extends re{}class cu extends J{}class Er extends ce{}class An extends me{}class To extends te{}class Ps extends ve{}class Lr extends Pe{}class Pr extends Xe{}class yr extends ut{}class Ni extends it{}const zs=z([{name:"a_pos",components:2,type:"Int16"}],4),{members:uu}=zs;class hr{constructor(t=[]){this.segments=t}prepareSegment(t,o,l,f){let y=this.segments[this.segments.length-1];return t>hr.MAX_VERTEX_ARRAY_LENGTH&&Oe(`Max vertices per segment is ${hr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!y||y.vertexLength+t>hr.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==f)&&(y={vertexOffset:o.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0},f!==void 0&&(y.sortKey=f),this.segments.push(y)),y}get(){return this.segments}destroy(){for(const t of this.segments)for(const o in t.vaos)t.vaos[o].destroy()}static simpleSegment(t,o,l,f){return new hr([{vertexOffset:t,primitiveOffset:o,vertexLength:l,primitiveLength:f,vaos:{},sortKey:0}])}}function rd(r,t){return 256*(r=ee(Math.floor(r),0,255))+ee(Math.floor(t),0,255)}hr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,mt("SegmentVector",hr);const Ol=z([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Bl={exports:{}},Io={exports:{}};Io.exports=function(r,t){var o,l,f,y,x,b,E,C;for(l=r.length-(o=3&r.length),f=t,x=3432918353,b=461845907,C=0;C<l;)E=255&r.charCodeAt(C)|(255&r.charCodeAt(++C))<<8|(255&r.charCodeAt(++C))<<16|(255&r.charCodeAt(++C))<<24,++C,f=27492+(65535&(y=5*(65535&(f=(f^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(y>>>16)&65535)<<16);switch(E=0,o){case 3:E^=(255&r.charCodeAt(C+2))<<16;case 2:E^=(255&r.charCodeAt(C+1))<<8;case 1:f^=E=(65535&(E=(E=(65535&(E^=255&r.charCodeAt(C)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295}return f^=r.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var nd=Io.exports,hu={exports:{}};hu.exports=function(r,t){for(var o,l=r.length,f=t^l,y=0;l>=4;)o=1540483477*(65535&(o=255&r.charCodeAt(y)|(255&r.charCodeAt(++y))<<8|(255&r.charCodeAt(++y))<<16|(255&r.charCodeAt(++y))<<24))+((1540483477*(o>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),l-=4,++y;switch(l){case 3:f^=(255&r.charCodeAt(y+2))<<16;case 2:f^=(255&r.charCodeAt(y+1))<<8;case 1:f=1540483477*(65535&(f^=255&r.charCodeAt(y)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var du=nd,fu=hu.exports;Bl.exports=du,Bl.exports.murmur3=du,Bl.exports.murmur2=fu;var Fl=T(Bl.exports);class Ds{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,o,l,f){this.ids.push(Ly(t)),this.positions.push(o,l,f)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const o=Ly(t);let l=0,f=this.ids.length-1;for(;l<f;){const x=l+f>>1;this.ids[x]>=o?f=x:l=x+1}const y=[];for(;this.ids[l]===o;)y.push({index:this.positions[3*l],start:this.positions[3*l+1],end:this.positions[3*l+2]}),l++;return y}static serialize(t,o){const l=new Float64Array(t.ids),f=new Uint32Array(t.positions);return _p(l,f,0,l.length-1),o&&o.push(l.buffer,f.buffer),{ids:l,positions:f}}static deserialize(t){const o=new Ds;return o.ids=t.ids,o.positions=t.positions,o.indexed=!0,o}}function Ly(r){const t=+r;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Fl(String(r))}function _p(r,t,o,l){for(;o<l;){const f=r[o+l>>1];let y=o-1,x=l+1;for(;;){do y++;while(r[y]<f);do x--;while(r[x]>f);if(y>=x)break;od(r,y,x),od(t,3*y,3*x),od(t,3*y+1,3*x+1),od(t,3*y+2,3*x+2)}x-o<l-x?(_p(r,t,o,x),o=x+1):(_p(r,t,x+1,l),l=x)}}function od(r,t,o){const l=r[t];r[t]=r[o],r[o]=l}mt("FeaturePositionMap",Ds);class La{constructor(t,o){this.gl=t.gl,this.location=o}}class sd extends La{constructor(t,o){super(t,o),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class Py extends La{constructor(t,o){super(t,o),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class zy extends La{constructor(t,o){super(t,o),this.current=di.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const qw=new Float32Array(16);function vp(r){return[rd(255*r.r,255*r.g),rd(255*r.b,255*r.a)]}class pu{constructor(t,o,l){this.value=t,this.uniformNames=o.map(f=>`u_${f}`),this.type=l}setUniform(t,o,l){t.set(l.constantOr(this.value))}getBinding(t,o,l){return this.type==="color"?new zy(t,o):new sd(t,o)}}class Vl{constructor(t,o){this.uniformNames=o.map(l=>`u_${l}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=t.tlbr}setUniform(t,o,l,f){const y=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&t.set(y)}getBinding(t,o,l){return l.substr(0,9)==="u_pattern"?new Py(t,o):new sd(t,o)}}class ts{constructor(t,o,l,f){this.expression=t,this.type=l,this.maxValue=0,this.paintVertexAttributes=o.map(y=>({name:`a_${y}`,type:"Float32",components:l==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(t,o,l,f,y){const x=this.paintVertexArray.length,b=this.expression.evaluate(new wi(0),o,{},f,[],y);this.paintVertexArray.resize(t),this._setPaintValue(x,t,b)}updatePaintArray(t,o,l,f){const y=this.expression.evaluate({zoom:0},l,f);this._setPaintValue(t,o,y)}_setPaintValue(t,o,l){if(this.type==="color"){const f=vp(l);for(let y=t;y<o;y++)this.paintVertexArray.emplace(y,f[0],f[1])}else{for(let f=t;f<o;f++)this.paintVertexArray.emplace(f,l);this.maxValue=Math.max(this.maxValue,Math.abs(l))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class uo{constructor(t,o,l,f,y,x){this.expression=t,this.uniformNames=o.map(b=>`u_${b}_t`),this.type=l,this.useIntegerZoom=f,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=o.map(b=>({name:`a_${b}`,type:"Float32",components:l==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(t,o,l,f,y){const x=this.expression.evaluate(new wi(this.zoom),o,{},f,[],y),b=this.expression.evaluate(new wi(this.zoom+1),o,{},f,[],y),E=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(E,t,x,b)}updatePaintArray(t,o,l,f){const y=this.expression.evaluate({zoom:this.zoom},l,f),x=this.expression.evaluate({zoom:this.zoom+1},l,f);this._setPaintValue(t,o,y,x)}_setPaintValue(t,o,l,f){if(this.type==="color"){const y=vp(l),x=vp(f);for(let b=t;b<o;b++)this.paintVertexArray.emplace(b,y[0],y[1],x[0],x[1])}else{for(let y=t;y<o;y++)this.paintVertexArray.emplace(y,l,f);this.maxValue=Math.max(this.maxValue,Math.abs(l),Math.abs(f))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,o){const l=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,f=ee(this.expression.interpolationFactor(l,this.zoom,this.zoom+1),0,1);t.set(f)}getBinding(t,o,l){return new sd(t,o)}}class Rs{constructor(t,o,l,f,y,x){this.expression=t,this.type=o,this.useIntegerZoom=l,this.zoom=f,this.layerId=x,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(t,o,l){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(f,t,o.patterns&&o.patterns[this.layerId],l)}updatePaintArray(t,o,l,f,y){this._setPaintValues(t,o,l.patterns&&l.patterns[this.layerId],y)}_setPaintValues(t,o,l,f){if(!f||!l)return;const{min:y,mid:x,max:b}=l,E=f[y],C=f[x],P=f[b];if(E&&C&&P)for(let D=t;D<o;D++)this.zoomInPaintVertexArray.emplace(D,C.tl[0],C.tl[1],C.br[0],C.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],C.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,C.tl[0],C.tl[1],C.br[0],C.br[1],P.tl[0],P.tl[1],P.br[0],P.br[1],C.pixelRatio,P.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,Ol.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,Ol.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Dy{constructor(t,o,l){this.binders={},this._buffers=[];const f=[];for(const y in t.paint._values){if(!l(y))continue;const x=t.paint.get(y);if(!(x instanceof Hn&&ao(x.property.specification)))continue;const b=Hw(y,t.type),E=x.value,C=x.property.specification.type,P=x.property.useIntegerZoom,D=x.property.specification["property-type"],B=D==="cross-faded"||D==="cross-faded-data-driven";if(E.kind==="constant")this.binders[y]=B?new Vl(E.value,b):new pu(E.value,b,C),f.push(`/u_${y}`);else if(E.kind==="source"||B){const V=Ry(y,C,"source");this.binders[y]=B?new Rs(E,C,P,o,V,t.id):new ts(E,b,C,V),f.push(`/a_${y}`)}else{const V=Ry(y,C,"composite");this.binders[y]=new uo(E,b,C,P,o,V),f.push(`/z_${y}`)}}this.cacheKey=f.sort().join("")}getMaxValue(t){const o=this.binders[t];return o instanceof ts||o instanceof uo?o.maxValue:0}populatePaintArrays(t,o,l,f,y){for(const x in this.binders){const b=this.binders[x];(b instanceof ts||b instanceof uo||b instanceof Rs)&&b.populatePaintArray(t,o,l,f,y)}}setConstantPatternPositions(t,o){for(const l in this.binders){const f=this.binders[l];f instanceof Vl&&f.setConstantPatternPositions(t,o)}}updatePaintArrays(t,o,l,f,y){let x=!1;for(const b in t){const E=o.getPositions(b);for(const C of E){const P=l.feature(C.index);for(const D in this.binders){const B=this.binders[D];if((B instanceof ts||B instanceof uo||B instanceof Rs)&&B.expression.isStateDependent===!0){const V=f.paint.get(D);B.expression=V.value,B.updatePaintArray(C.start,C.end,P,t[b],y),x=!0}}}}return x}defines(){const t=[];for(const o in this.binders){const l=this.binders[o];(l instanceof pu||l instanceof Vl)&&t.push(...l.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return t}getBinderAttributes(){const t=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof ts||l instanceof uo)for(let f=0;f<l.paintVertexAttributes.length;f++)t.push(l.paintVertexAttributes[f].name);else if(l instanceof Rs)for(let f=0;f<Ol.members.length;f++)t.push(Ol.members[f].name)}return t}getBinderUniforms(){const t=[];for(const o in this.binders){const l=this.binders[o];if(l instanceof pu||l instanceof Vl||l instanceof uo)for(const f of l.uniformNames)t.push(f)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,o){const l=[];for(const f in this.binders){const y=this.binders[f];if(y instanceof pu||y instanceof Vl||y instanceof uo){for(const x of y.uniformNames)if(o[x]){const b=y.getBinding(t,o[x],x);l.push({name:x,property:f,binding:b})}}}return l}setUniforms(t,o,l,f){for(const{name:y,property:x,binding:b}of o)this.binders[x].setUniform(b,f,l.get(x),y)}updatePaintBuffers(t){this._buffers=[];for(const o in this.binders){const l=this.binders[o];if(t&&l instanceof Rs){const f=t.fromScale===2?l.zoomInPaintVertexBuffer:l.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(l instanceof ts||l instanceof uo)&&l.paintVertexBuffer&&this._buffers.push(l.paintVertexBuffer)}}upload(t){for(const o in this.binders){const l=this.binders[o];(l instanceof ts||l instanceof uo||l instanceof Rs)&&l.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const o=this.binders[t];(o instanceof ts||o instanceof uo||o instanceof Rs)&&o.destroy()}}}class Pa{constructor(t,o,l=()=>!0){this.programConfigurations={};for(const f of t)this.programConfigurations[f.id]=new Dy(f,o,l);this.needsUpload=!1,this._featureMap=new Ds,this._bufferOffset=0}populatePaintArrays(t,o,l,f,y,x){for(const b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(t,o,f,y,x);o.id!==void 0&&this._featureMap.add(o.id,l,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,o,l,f){for(const y of l)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(t,this._featureMap,o,y,f)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const o in this.programConfigurations)this.programConfigurations[o].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function Hw(r,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[r]||[r.replace(`${t}-`,"").replace(/-/g,"_")]}function Ry(r,t,o){const l={color:{source:J,composite:Pt},number:{source:et,composite:J}},f=function(y){return{"line-pattern":{source:Er,composite:Er},"fill-pattern":{source:Er,composite:Er},"fill-extrusion-pattern":{source:Er,composite:Er}}[y]}(r);return f&&f[o]||l[t][o]}mt("ConstantBinder",pu),mt("CrossFadedConstantBinder",Vl),mt("SourceExpressionBinder",ts),mt("CrossFadedCompositeBinder",Rs),mt("CompositeExpressionBinder",uo),mt("ProgramConfiguration",Dy,{omit:["_buffers"]}),mt("ProgramConfigurationSet",Pa);const or=8192,xp=Math.pow(2,14)-1,Oy=-xp-1;function za(r){const t=or/r.extent,o=r.loadGeometry();for(let l=0;l<o.length;l++){const f=o[l];for(let y=0;y<f.length;y++){const x=f[y],b=Math.round(x.x*t),E=Math.round(x.y*t);x.x=ee(b,Oy,xp),x.y=ee(E,Oy,xp),(b<x.x||b>x.x+1||E<x.y||E>x.y+1)&&Oe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function Da(r,t){return{type:r.type,id:r.id,properties:r.properties,geometry:t?za(r):[]}}function ad(r,t,o,l,f){r.emplaceBack(2*t+(l+1)/2,2*o+(f+1)/2)}class bp{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Dl,this.indexArray=new yr,this.segments=new hr,this.programConfigurations=new Pa(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,l){const f=this.layers[0],y=[];let x=null,b=!1;f.type==="circle"&&(x=f.layout.get("circle-sort-key"),b=!x.isConstant());for(const{feature:E,id:C,index:P,sourceLayerIndex:D}of t){const B=this.layers[0]._featureFilter.needGeometry,V=Da(E,B);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),V,l))continue;const U=b?x.evaluate(V,{},l):void 0,Z={id:C,properties:E.properties,type:E.type,sourceLayerIndex:D,index:P,geometry:B?V.geometry:za(E),patterns:{},sortKey:U};y.push(Z)}b&&y.sort((E,C)=>E.sortKey-C.sortKey);for(const E of y){const{geometry:C,index:P,sourceLayerIndex:D}=E,B=t[P].feature;this.addFeature(E,C,P,l),o.featureIndex.insert(B,C,P,D,this.index)}}update(t,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,uu),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,o,l,f){for(const y of o)for(const x of y){const b=x.x,E=x.y;if(b<0||b>=or||E<0||E>=or)continue;const C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),P=C.vertexLength;ad(this.layoutVertexArray,b,E,-1,-1),ad(this.layoutVertexArray,b,E,1,-1),ad(this.layoutVertexArray,b,E,1,1),ad(this.layoutVertexArray,b,E,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+3,P+2),C.vertexLength+=4,C.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,{},f)}}function By(r,t){for(let o=0;o<r.length;o++)if(Nl(t,r[o]))return!0;for(let o=0;o<t.length;o++)if(Nl(r,t[o]))return!0;return!!wp(r,t)}function Gw(r,t,o){return!!Nl(r,t)||!!Ep(t,r,o)}function Fy(r,t){if(r.length===1)return Ny(t,r[0]);for(let o=0;o<t.length;o++){const l=t[o];for(let f=0;f<l.length;f++)if(Nl(r,l[f]))return!0}for(let o=0;o<r.length;o++)if(Ny(t,r[o]))return!0;for(let o=0;o<t.length;o++)if(wp(r,t[o]))return!0;return!1}function Zw(r,t,o){if(r.length>1){if(wp(r,t))return!0;for(let l=0;l<t.length;l++)if(Ep(t[l],r,o))return!0}for(let l=0;l<r.length;l++)if(Ep(r[l],t,o))return!0;return!1}function wp(r,t){if(r.length===0||t.length===0)return!1;for(let o=0;o<r.length-1;o++){const l=r[o],f=r[o+1];for(let y=0;y<t.length-1;y++)if(Ww(l,f,t[y],t[y+1]))return!0}return!1}function Ww(r,t,o,l){return Ge(r,o,l)!==Ge(t,o,l)&&Ge(r,t,o)!==Ge(r,t,l)}function Ep(r,t,o){const l=o*o;if(t.length===1)return r.distSqr(t[0])<l;for(let f=1;f<t.length;f++)if(Vy(r,t[f-1],t[f])<l)return!0;return!1}function Vy(r,t,o){const l=t.distSqr(o);if(l===0)return r.distSqr(t);const f=((r.x-t.x)*(o.x-t.x)+(r.y-t.y)*(o.y-t.y))/l;return r.distSqr(f<0?t:f>1?o:o.sub(t)._mult(f)._add(t))}function Ny(r,t){let o,l,f,y=!1;for(let x=0;x<r.length;x++){o=r[x];for(let b=0,E=o.length-1;b<o.length;E=b++)l=o[b],f=o[E],l.y>t.y!=f.y>t.y&&t.x<(f.x-l.x)*(t.y-l.y)/(f.y-l.y)+l.x&&(y=!y)}return y}function Nl(r,t){let o=!1;for(let l=0,f=r.length-1;l<r.length;f=l++){const y=r[l],x=r[f];y.y>t.y!=x.y>t.y&&t.x<(x.x-y.x)*(t.y-y.y)/(x.y-y.y)+y.x&&(o=!o)}return o}function Kw(r,t,o){const l=o[0],f=o[2];if(r.x<l.x&&t.x<l.x||r.x>f.x&&t.x>f.x||r.y<l.y&&t.y<l.y||r.y>f.y&&t.y>f.y)return!1;const y=Ge(r,t,o[0]);return y!==Ge(r,t,o[1])||y!==Ge(r,t,o[2])||y!==Ge(r,t,o[3])}function mu(r,t,o){const l=t.paint.get(r).value;return l.kind==="constant"?l.value:o.programConfigurations.get(t.id).getMaxValue(r)}function ld(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1])}function cd(r,t,o,l,f){if(!t[0]&&!t[1])return r;const y=A.convert(t)._mult(f);o==="viewport"&&y._rotate(-l);const x=[];for(let b=0;b<r.length;b++)x.push(r[b].sub(y));return x}let $y,jy;mt("CircleBucket",bp,{omit:["layers"]});var Xw={get paint(){return jy=jy||new d({"circle-radius":new At(le.paint_circle["circle-radius"]),"circle-color":new At(le.paint_circle["circle-color"]),"circle-blur":new At(le.paint_circle["circle-blur"]),"circle-opacity":new At(le.paint_circle["circle-opacity"]),"circle-translate":new wt(le.paint_circle["circle-translate"]),"circle-translate-anchor":new wt(le.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new wt(le.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new wt(le.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new At(le.paint_circle["circle-stroke-width"]),"circle-stroke-color":new At(le.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new At(le.paint_circle["circle-stroke-opacity"])})},get layout(){return $y=$y||new d({"circle-sort-key":new At(le.layout_circle["circle-sort-key"])})}},tn=1e-6,$l=typeof Float32Array<"u"?Float32Array:Array;function Sp(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Uy(r,t,o){var l=t[0],f=t[1],y=t[2],x=t[3],b=t[4],E=t[5],C=t[6],P=t[7],D=t[8],B=t[9],V=t[10],U=t[11],Z=t[12],Y=t[13],ae=t[14],we=t[15],de=o[0],xe=o[1],ze=o[2],qe=o[3];return r[0]=de*l+xe*b+ze*D+qe*Z,r[1]=de*f+xe*E+ze*B+qe*Y,r[2]=de*y+xe*C+ze*V+qe*ae,r[3]=de*x+xe*P+ze*U+qe*we,r[4]=(de=o[4])*l+(xe=o[5])*b+(ze=o[6])*D+(qe=o[7])*Z,r[5]=de*f+xe*E+ze*B+qe*Y,r[6]=de*y+xe*C+ze*V+qe*ae,r[7]=de*x+xe*P+ze*U+qe*we,r[8]=(de=o[8])*l+(xe=o[9])*b+(ze=o[10])*D+(qe=o[11])*Z,r[9]=de*f+xe*E+ze*B+qe*Y,r[10]=de*y+xe*C+ze*V+qe*ae,r[11]=de*x+xe*P+ze*U+qe*we,r[12]=(de=o[12])*l+(xe=o[13])*b+(ze=o[14])*D+(qe=o[15])*Z,r[13]=de*f+xe*E+ze*B+qe*Y,r[14]=de*y+xe*C+ze*V+qe*ae,r[15]=de*x+xe*P+ze*U+qe*we,r}Math.hypot||(Math.hypot=function(){for(var r=0,t=arguments.length;t--;)r+=arguments[t]*arguments[t];return Math.sqrt(r)});var gu,Jw=Uy;function ud(r,t,o){var l=t[0],f=t[1],y=t[2],x=t[3];return r[0]=o[0]*l+o[4]*f+o[8]*y+o[12]*x,r[1]=o[1]*l+o[5]*f+o[9]*y+o[13]*x,r[2]=o[2]*l+o[6]*f+o[10]*y+o[14]*x,r[3]=o[3]*l+o[7]*f+o[11]*y+o[15]*x,r}gu=new $l(4),$l!=Float32Array&&(gu[0]=0,gu[1]=0,gu[2]=0,gu[3]=0);class Yw extends v{constructor(t){super(t,Xw)}createBucket(t){return new bp(t)}queryRadius(t){const o=t;return mu("circle-radius",this,o)+mu("circle-stroke-width",this,o)+ld(this.paint.get("circle-translate"))}queryIntersectsFeature(t,o,l,f,y,x,b,E){const C=cd(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,b),P=this.paint.get("circle-radius").evaluate(o,l)+this.paint.get("circle-stroke-width").evaluate(o,l),D=this.paint.get("circle-pitch-alignment")==="map",B=D?C:function(U,Z){return U.map(Y=>qy(Y,Z))}(C,E),V=D?P*b:P;for(const U of f)for(const Z of U){const Y=D?Z:qy(Z,E);let ae=V;const we=ud([],[Z.x,Z.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ae*=we[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ae*=x.cameraToCenterDistance/we[3]),Gw(B,Y,ae))return!0}return!1}}function qy(r,t){const o=ud([],[r.x,r.y,0,1],t);return new A(o[0]/o[3],o[1]/o[3])}class Hy extends bp{}let Gy;mt("HeatmapBucket",Hy,{omit:["layers"]});var Qw={get paint(){return Gy=Gy||new d({"heatmap-radius":new At(le.paint_heatmap["heatmap-radius"]),"heatmap-weight":new At(le.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new wt(le.paint_heatmap["heatmap-intensity"]),"heatmap-color":new a(le.paint_heatmap["heatmap-color"]),"heatmap-opacity":new wt(le.paint_heatmap["heatmap-opacity"])})}};function Tp(r,{width:t,height:o},l,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==t*o*l)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${t*o*l}`)}else f=new Uint8Array(t*o*l);return r.width=t,r.height=o,r.data=f,r}function Zy(r,{width:t,height:o},l){if(t===r.width&&o===r.height)return;const f=Tp({},{width:t,height:o},l);Ip(r,f,{x:0,y:0},{x:0,y:0},{width:Math.min(r.width,t),height:Math.min(r.height,o)},l),r.width=t,r.height=o,r.data=f.data}function Ip(r,t,o,l,f,y){if(f.width===0||f.height===0)return t;if(f.width>r.width||f.height>r.height||o.x>r.width-f.width||o.y>r.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||l.x>t.width-f.width||l.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const x=r.data,b=t.data;if(x===b)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<f.height;E++){const C=((o.y+E)*r.width+o.x)*y,P=((l.y+E)*t.width+l.x)*y;for(let D=0;D<f.width*y;D++)b[P+D]=x[C+D]}return t}class yu{constructor(t,o){Tp(this,t,1,o)}resize(t){Zy(this,t,1)}clone(){return new yu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,l,f,y){Ip(t,o,l,f,y,1)}}class kn{constructor(t,o){Tp(this,t,4,o)}resize(t){Zy(this,t,4)}replace(t,o){o?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new kn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,o,l,f,y){Ip(t,o,l,f,y,4)}}function Wy(r){const t={},o=r.resolution||256,l=r.clips?r.clips.length:1,f=r.image||new kn({width:o,height:l});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);const y=(x,b,E)=>{t[r.evaluationKey]=E;const C=r.expression.evaluate(t);f.data[x+b+0]=Math.floor(255*C.r/C.a),f.data[x+b+1]=Math.floor(255*C.g/C.a),f.data[x+b+2]=Math.floor(255*C.b/C.a),f.data[x+b+3]=Math.floor(255*C.a)};if(r.clips)for(let x=0,b=0;x<l;++x,b+=4*o)for(let E=0,C=0;E<o;E++,C+=4){const P=E/(o-1),{start:D,end:B}=r.clips[x];y(b,C,D*(1-P)+B*P)}else for(let x=0,b=0;x<o;x++,b+=4)y(0,b,x/(o-1));return f}mt("AlphaImage",yu),mt("RGBAImage",kn);class e2 extends v{createBucket(t){return new Hy(t)}constructor(t){super(t,Qw),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Wy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Ky;var t2={get paint(){return Ky=Ky||new d({"hillshade-illumination-direction":new wt(le.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new wt(le.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new wt(le.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new wt(le.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new wt(le.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new wt(le.paint_hillshade["hillshade-accent-color"])})}};class i2 extends v{constructor(t){super(t,t2)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const r2=z([{name:"a_pos",components:2,type:"Int16"}],4),{members:n2}=r2;var Cp={exports:{}};function hd(r,t,o){o=o||2;var l,f,y,x,b,E,C,P=t&&t.length,D=P?t[0]*o:r.length,B=Xy(r,0,D,o,!0),V=[];if(!B||B.next===B.prev)return V;if(P&&(B=function(Z,Y,ae,we){var de,xe,ze,qe=[];for(de=0,xe=Y.length;de<xe;de++)(ze=Xy(Z,Y[de]*we,de<xe-1?Y[de+1]*we:Z.length,we,!1))===ze.next&&(ze.steiner=!0),qe.push(d2(ze));for(qe.sort(c2),de=0;de<qe.length;de++)ae=u2(qe[de],ae);return ae}(r,t,B,o)),r.length>80*o){l=y=r[0],f=x=r[1];for(var U=o;U<D;U+=o)(b=r[U])<l&&(l=b),(E=r[U+1])<f&&(f=E),b>y&&(y=b),E>x&&(x=E);C=(C=Math.max(y-l,x-f))!==0?32767/C:0}return _u(B,V,o,l,f,C,0),V}function Xy(r,t,o,l,f){var y,x;if(f===Mp(r,t,o,l)>0)for(y=t;y<o;y+=l)x=Qy(y,r[y],r[y+1],x);else for(y=o-l;y>=t;y-=l)x=Qy(y,r[y],r[y+1],x);return x&&dd(x,x.next)&&(xu(x),x=x.next),x}function Ra(r,t){if(!r)return r;t||(t=r);var o,l=r;do if(o=!1,l.steiner||!dd(l,l.next)&&er(l.prev,l,l.next)!==0)l=l.next;else{if(xu(l),(l=t=l.prev)===l.next)break;o=!0}while(o||l!==t);return t}function _u(r,t,o,l,f,y,x){if(r){!x&&y&&function(P,D,B,V){var U=P;do U.z===0&&(U.z=Ap(U.x,U.y,D,B,V)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==P);U.prevZ.nextZ=null,U.prevZ=null,function(Z){var Y,ae,we,de,xe,ze,qe,st,Ct=1;do{for(ae=Z,Z=null,xe=null,ze=0;ae;){for(ze++,we=ae,qe=0,Y=0;Y<Ct&&(qe++,we=we.nextZ);Y++);for(st=Ct;qe>0||st>0&&we;)qe!==0&&(st===0||!we||ae.z<=we.z)?(de=ae,ae=ae.nextZ,qe--):(de=we,we=we.nextZ,st--),xe?xe.nextZ=de:Z=de,de.prevZ=xe,xe=de;ae=we}xe.nextZ=null,Ct*=2}while(ze>1)}(U)}(r,l,f,y);for(var b,E,C=r;r.prev!==r.next;)if(b=r.prev,E=r.next,y?s2(r,l,f,y):o2(r))t.push(b.i/o|0),t.push(r.i/o|0),t.push(E.i/o|0),xu(r),r=E.next,C=E.next;else if((r=E)===C){x?x===1?_u(r=a2(Ra(r),t,o),t,o,l,f,y,2):x===2&&l2(r,t,o,l,f,y):_u(Ra(r),t,o,l,f,y,1);break}}}function o2(r){var t=r.prev,o=r,l=r.next;if(er(t,o,l)>=0)return!1;for(var f=t.x,y=o.x,x=l.x,b=t.y,E=o.y,C=l.y,P=f<y?f<x?f:x:y<x?y:x,D=b<E?b<C?b:C:E<C?E:C,B=f>y?f>x?f:x:y>x?y:x,V=b>E?b>C?b:C:E>C?E:C,U=l.next;U!==t;){if(U.x>=P&&U.x<=B&&U.y>=D&&U.y<=V&&jl(f,b,y,E,x,C,U.x,U.y)&&er(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function s2(r,t,o,l){var f=r.prev,y=r,x=r.next;if(er(f,y,x)>=0)return!1;for(var b=f.x,E=y.x,C=x.x,P=f.y,D=y.y,B=x.y,V=b<E?b<C?b:C:E<C?E:C,U=P<D?P<B?P:B:D<B?D:B,Z=b>E?b>C?b:C:E>C?E:C,Y=P>D?P>B?P:B:D>B?D:B,ae=Ap(V,U,t,o,l),we=Ap(Z,Y,t,o,l),de=r.prevZ,xe=r.nextZ;de&&de.z>=ae&&xe&&xe.z<=we;){if(de.x>=V&&de.x<=Z&&de.y>=U&&de.y<=Y&&de!==f&&de!==x&&jl(b,P,E,D,C,B,de.x,de.y)&&er(de.prev,de,de.next)>=0||(de=de.prevZ,xe.x>=V&&xe.x<=Z&&xe.y>=U&&xe.y<=Y&&xe!==f&&xe!==x&&jl(b,P,E,D,C,B,xe.x,xe.y)&&er(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;de&&de.z>=ae;){if(de.x>=V&&de.x<=Z&&de.y>=U&&de.y<=Y&&de!==f&&de!==x&&jl(b,P,E,D,C,B,de.x,de.y)&&er(de.prev,de,de.next)>=0)return!1;de=de.prevZ}for(;xe&&xe.z<=we;){if(xe.x>=V&&xe.x<=Z&&xe.y>=U&&xe.y<=Y&&xe!==f&&xe!==x&&jl(b,P,E,D,C,B,xe.x,xe.y)&&er(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function a2(r,t,o){var l=r;do{var f=l.prev,y=l.next.next;!dd(f,y)&&Jy(f,l,l.next,y)&&vu(f,y)&&vu(y,f)&&(t.push(f.i/o|0),t.push(l.i/o|0),t.push(y.i/o|0),xu(l),xu(l.next),l=r=y),l=l.next}while(l!==r);return Ra(l)}function l2(r,t,o,l,f,y){var x=r;do{for(var b=x.next.next;b!==x.prev;){if(x.i!==b.i&&f2(x,b)){var E=Yy(x,b);return x=Ra(x,x.next),E=Ra(E,E.next),_u(x,t,o,l,f,y,0),void _u(E,t,o,l,f,y,0)}b=b.next}x=x.next}while(x!==r)}function c2(r,t){return r.x-t.x}function u2(r,t){var o=function(f,y){var x,b=y,E=f.x,C=f.y,P=-1/0;do{if(C<=b.y&&C>=b.next.y&&b.next.y!==b.y){var D=b.x+(C-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(D<=E&&D>P&&(P=D,x=b.x<b.next.x?b:b.next,D===E))return x}b=b.next}while(b!==y);if(!x)return null;var B,V=x,U=x.x,Z=x.y,Y=1/0;b=x;do E>=b.x&&b.x>=U&&E!==b.x&&jl(C<Z?E:P,C,U,Z,C<Z?P:E,C,b.x,b.y)&&(B=Math.abs(C-b.y)/(E-b.x),vu(b,f)&&(B<Y||B===Y&&(b.x>x.x||b.x===x.x&&h2(x,b)))&&(x=b,Y=B)),b=b.next;while(b!==V);return x}(r,t);if(!o)return t;var l=Yy(o,r);return Ra(l,l.next),Ra(o,o.next)}function h2(r,t){return er(r.prev,r,t.prev)<0&&er(t.next,r,r.next)<0}function Ap(r,t,o,l,f){return(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-o)*f|0)|r<<8))|r<<4))|r<<2))|r<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-l)*f|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d2(r){var t=r,o=r;do(t.x<o.x||t.x===o.x&&t.y<o.y)&&(o=t),t=t.next;while(t!==r);return o}function jl(r,t,o,l,f,y,x,b){return(f-x)*(t-b)>=(r-x)*(y-b)&&(r-x)*(l-b)>=(o-x)*(t-b)&&(o-x)*(y-b)>=(f-x)*(l-b)}function f2(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!function(o,l){var f=o;do{if(f.i!==o.i&&f.next.i!==o.i&&f.i!==l.i&&f.next.i!==l.i&&Jy(f,f.next,o,l))return!0;f=f.next}while(f!==o);return!1}(r,t)&&(vu(r,t)&&vu(t,r)&&function(o,l){var f=o,y=!1,x=(o.x+l.x)/2,b=(o.y+l.y)/2;do f.y>b!=f.next.y>b&&f.next.y!==f.y&&x<(f.next.x-f.x)*(b-f.y)/(f.next.y-f.y)+f.x&&(y=!y),f=f.next;while(f!==o);return y}(r,t)&&(er(r.prev,r,t.prev)||er(r,t.prev,t))||dd(r,t)&&er(r.prev,r,r.next)>0&&er(t.prev,t,t.next)>0)}function er(r,t,o){return(t.y-r.y)*(o.x-t.x)-(t.x-r.x)*(o.y-t.y)}function dd(r,t){return r.x===t.x&&r.y===t.y}function Jy(r,t,o,l){var f=pd(er(r,t,o)),y=pd(er(r,t,l)),x=pd(er(o,l,r)),b=pd(er(o,l,t));return f!==y&&x!==b||!(f!==0||!fd(r,o,t))||!(y!==0||!fd(r,l,t))||!(x!==0||!fd(o,r,l))||!(b!==0||!fd(o,t,l))}function fd(r,t,o){return t.x<=Math.max(r.x,o.x)&&t.x>=Math.min(r.x,o.x)&&t.y<=Math.max(r.y,o.y)&&t.y>=Math.min(r.y,o.y)}function pd(r){return r>0?1:r<0?-1:0}function vu(r,t){return er(r.prev,r,r.next)<0?er(r,t,r.next)>=0&&er(r,r.prev,t)>=0:er(r,t,r.prev)<0||er(r,r.next,t)<0}function Yy(r,t){var o=new kp(r.i,r.x,r.y),l=new kp(t.i,t.x,t.y),f=r.next,y=t.prev;return r.next=t,t.prev=r,o.next=f,f.prev=o,l.next=o,o.prev=l,y.next=l,l.prev=y,l}function Qy(r,t,o,l){var f=new kp(r,t,o);return l?(f.next=l.next,f.prev=l,l.next.prev=f,l.next=f):(f.prev=f,f.next=f),f}function xu(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function kp(r,t,o){this.i=r,this.x=t,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Mp(r,t,o,l){for(var f=0,y=t,x=o-l;y<o;y+=l)f+=(r[x]-r[y])*(r[y+1]+r[x+1]),x=y;return f}Cp.exports=hd,Cp.exports.default=hd,hd.deviation=function(r,t,o,l){var f=t&&t.length,y=Math.abs(Mp(r,0,f?t[0]*o:r.length,o));if(f)for(var x=0,b=t.length;x<b;x++)y-=Math.abs(Mp(r,t[x]*o,x<b-1?t[x+1]*o:r.length,o));var E=0;for(x=0;x<l.length;x+=3){var C=l[x]*o,P=l[x+1]*o,D=l[x+2]*o;E+=Math.abs((r[C]-r[D])*(r[P+1]-r[C+1])-(r[C]-r[P])*(r[D+1]-r[C+1]))}return y===0&&E===0?0:Math.abs((E-y)/y)},hd.flatten=function(r){for(var t=r[0][0].length,o={vertices:[],holes:[],dimensions:t},l=0,f=0;f<r.length;f++){for(var y=0;y<r[f].length;y++)for(var x=0;x<t;x++)o.vertices.push(r[f][y][x]);f>0&&o.holes.push(l+=r[f-1].length)}return o};var e_=T(Cp.exports);function Lp(r,t,o){const l=o.patternDependencies;let f=!1;for(const y of t){const x=y.paint.get(`${r}-pattern`);x.isConstant()||(f=!0);const b=x.constantOr(null);b&&(f=!0,l[b.to]=!0,l[b.from]=!0)}return f}function Pp(r,t,o,l,f){const y=f.patternDependencies;for(const x of t){const b=x.paint.get(`${r}-pattern`).value;if(b.kind!=="constant"){let E=b.evaluate({zoom:l-1},o,{},f.availableImages),C=b.evaluate({zoom:l},o,{},f.availableImages),P=b.evaluate({zoom:l+1},o,{},f.availableImages);E=E&&E.name?E.name:E,C=C&&C.name?C.name:C,P=P&&P.name?P.name:P,y[E]=!0,y[C]=!0,y[P]=!0,o.patterns[x.id]={min:E,mid:C,max:P}}}return o}class zp{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ls,this.indexArray=new yr,this.indexArray2=new Ni,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new hr,this.segments2=new hr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,l){this.hasPattern=Lp("fill",this.layers,o);const f=this.layers[0].layout.get("fill-sort-key"),y=!f.isConstant(),x=[];for(const{feature:b,id:E,index:C,sourceLayerIndex:P}of t){const D=this.layers[0]._featureFilter.needGeometry,B=Da(b,D);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),B,l))continue;const V=y?f.evaluate(B,{},l,o.availableImages):void 0,U={id:E,properties:b.properties,type:b.type,sourceLayerIndex:P,index:C,geometry:D?B.geometry:za(b),patterns:{},sortKey:V};x.push(U)}y&&x.sort((b,E)=>b.sortKey-E.sortKey);for(const b of x){const{geometry:E,index:C,sourceLayerIndex:P}=b;if(this.hasPattern){const D=Pp("fill",this.layers,b,this.zoom,o);this.patternFeatures.push(D)}else this.addFeature(b,E,C,l,{});o.featureIndex.insert(t[C].feature,E,C,P,this.index)}}update(t,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,l)}addFeatures(t,o,l){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,o,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,n2),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,o,l,f,y){for(const x of dl(o,500)){let b=0;for(const V of x)b+=V.length;const E=this.segments.prepareSegment(b,this.layoutVertexArray,this.indexArray),C=E.vertexLength,P=[],D=[];for(const V of x){if(V.length===0)continue;V!==x[0]&&D.push(P.length/2);const U=this.segments2.prepareSegment(V.length,this.layoutVertexArray,this.indexArray2),Z=U.vertexLength;this.layoutVertexArray.emplaceBack(V[0].x,V[0].y),this.indexArray2.emplaceBack(Z+V.length-1,Z),P.push(V[0].x),P.push(V[0].y);for(let Y=1;Y<V.length;Y++)this.layoutVertexArray.emplaceBack(V[Y].x,V[Y].y),this.indexArray2.emplaceBack(Z+Y-1,Z+Y),P.push(V[Y].x),P.push(V[Y].y);U.vertexLength+=V.length,U.primitiveLength+=V.length}const B=e_(P,D);for(let V=0;V<B.length;V+=3)this.indexArray.emplaceBack(C+B[V],C+B[V+1],C+B[V+2]);E.vertexLength+=b,E.primitiveLength+=B.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,y,f)}}let t_,i_;mt("FillBucket",zp,{omit:["layers","patternFeatures"]});var p2={get paint(){return i_=i_||new d({"fill-antialias":new wt(le.paint_fill["fill-antialias"]),"fill-opacity":new At(le.paint_fill["fill-opacity"]),"fill-color":new At(le.paint_fill["fill-color"]),"fill-outline-color":new At(le.paint_fill["fill-outline-color"]),"fill-translate":new wt(le.paint_fill["fill-translate"]),"fill-translate-anchor":new wt(le.paint_fill["fill-translate-anchor"]),"fill-pattern":new _(le.paint_fill["fill-pattern"])})},get layout(){return t_=t_||new d({"fill-sort-key":new At(le.layout_fill["fill-sort-key"])})}};class m2 extends v{constructor(t){super(t,p2)}recalculate(t,o){super.recalculate(t,o);const l=this.paint._values["fill-outline-color"];l.value.kind==="constant"&&l.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new zp(t)}queryRadius(){return ld(this.paint.get("fill-translate"))}queryIntersectsFeature(t,o,l,f,y,x,b){return Fy(cd(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,b),f)}isTileClipped(){return!0}}const g2=z([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),y2=z([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_2}=g2;var Os={},v2=M,r_=Ul;function Ul(r,t,o,l,f){this.properties={},this.extent=o,this.type=0,this._pbf=r,this._geometry=-1,this._keys=l,this._values=f,r.readFields(x2,this,t)}function x2(r,t,o){r==1?t.id=o.readVarint():r==2?function(l,f){for(var y=l.readVarint()+l.pos;l.pos<y;){var x=f._keys[l.readVarint()],b=f._values[l.readVarint()];f.properties[x]=b}}(o,t):r==3?t.type=o.readVarint():r==4&&(t._geometry=o.pos)}function b2(r){for(var t,o,l=0,f=0,y=r.length,x=y-1;f<y;x=f++)l+=((o=r[x]).x-(t=r[f]).x)*(t.y+o.y);return l}Ul.types=["Unknown","Point","LineString","Polygon"],Ul.prototype.loadGeometry=function(){var r=this._pbf;r.pos=this._geometry;for(var t,o=r.readVarint()+r.pos,l=1,f=0,y=0,x=0,b=[];r.pos<o;){if(f<=0){var E=r.readVarint();l=7&E,f=E>>3}if(f--,l===1||l===2)y+=r.readSVarint(),x+=r.readSVarint(),l===1&&(t&&b.push(t),t=[]),t.push(new v2(y,x));else{if(l!==7)throw new Error("unknown command "+l);t&&t.push(t[0].clone())}}return t&&b.push(t),b},Ul.prototype.bbox=function(){var r=this._pbf;r.pos=this._geometry;for(var t=r.readVarint()+r.pos,o=1,l=0,f=0,y=0,x=1/0,b=-1/0,E=1/0,C=-1/0;r.pos<t;){if(l<=0){var P=r.readVarint();o=7&P,l=P>>3}if(l--,o===1||o===2)(f+=r.readSVarint())<x&&(x=f),f>b&&(b=f),(y+=r.readSVarint())<E&&(E=y),y>C&&(C=y);else if(o!==7)throw new Error("unknown command "+o)}return[x,E,b,C]},Ul.prototype.toGeoJSON=function(r,t,o){var l,f,y=this.extent*Math.pow(2,o),x=this.extent*r,b=this.extent*t,E=this.loadGeometry(),C=Ul.types[this.type];function P(V){for(var U=0;U<V.length;U++){var Z=V[U];V[U]=[360*(Z.x+x)/y-180,360/Math.PI*Math.atan(Math.exp((180-360*(Z.y+b)/y)*Math.PI/180))-90]}}switch(this.type){case 1:var D=[];for(l=0;l<E.length;l++)D[l]=E[l][0];P(E=D);break;case 2:for(l=0;l<E.length;l++)P(E[l]);break;case 3:for(E=function(V){var U=V.length;if(U<=1)return[V];for(var Z,Y,ae=[],we=0;we<U;we++){var de=b2(V[we]);de!==0&&(Y===void 0&&(Y=de<0),Y===de<0?(Z&&ae.push(Z),Z=[V[we]]):Z.push(V[we]))}return Z&&ae.push(Z),ae}(E),l=0;l<E.length;l++)for(f=0;f<E[l].length;f++)P(E[l][f])}E.length===1?E=E[0]:C="Multi"+C;var B={type:"Feature",geometry:{type:C,coordinates:E},properties:this.properties};return"id"in this&&(B.id=this.id),B};var w2=r_,n_=o_;function o_(r,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=r,this._keys=[],this._values=[],this._features=[],r.readFields(E2,this,t),this.length=this._features.length}function E2(r,t,o){r===15?t.version=o.readVarint():r===1?t.name=o.readString():r===5?t.extent=o.readVarint():r===2?t._features.push(o.pos):r===3?t._keys.push(o.readString()):r===4&&t._values.push(function(l){for(var f=null,y=l.readVarint()+l.pos;l.pos<y;){var x=l.readVarint()>>3;f=x===1?l.readString():x===2?l.readFloat():x===3?l.readDouble():x===4?l.readVarint64():x===5?l.readVarint():x===6?l.readSVarint():x===7?l.readBoolean():null}return f}(o))}o_.prototype.feature=function(r){if(r<0||r>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[r];var t=this._pbf.readVarint()+this._pbf.pos;return new w2(this._pbf,t,this.extent,this._keys,this._values)};var S2=n_;function T2(r,t,o){if(r===3){var l=new S2(o,o.readVarint()+o.pos);l.length&&(t[l.name]=l)}}Os.VectorTile=function(r,t){this.layers=r.readFields(T2,{},t)},Os.VectorTileFeature=r_,Os.VectorTileLayer=n_;const I2=Os.VectorTileFeature.types,Dp=Math.pow(2,13);function bu(r,t,o,l,f,y,x,b){r.emplaceBack(t,o,2*Math.floor(l*Dp)+x,f*Dp*2,y*Dp*2,Math.round(b))}class Rp{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new es,this.centroidVertexArray=new Qo,this.indexArray=new yr,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new hr,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,l){this.features=[],this.hasPattern=Lp("fill-extrusion",this.layers,o);for(const{feature:f,id:y,index:x,sourceLayerIndex:b}of t){const E=this.layers[0]._featureFilter.needGeometry,C=Da(f,E);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),C,l))continue;const P={id:y,sourceLayerIndex:b,index:x,geometry:E?C.geometry:za(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(Pp("fill-extrusion",this.layers,P,this.zoom,o)):this.addFeature(P,P.geometry,x,l,{}),o.featureIndex.insert(f,P.geometry,x,b,this.index,!0)}}addFeatures(t,o,l){for(const f of this.features){const{geometry:y}=f;this.addFeature(f,y,f.index,o,l)}}update(t,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,l)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,_2),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,y2.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,o,l,f,y){for(const x of dl(o,500)){const b={x:0,y:0,vertexCount:0};let E=0;for(const U of x)E+=U.length;let C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const U of x){if(U.length===0||A2(U))continue;let Z=0;for(let Y=0;Y<U.length;Y++){const ae=U[Y];if(Y>=1){const we=U[Y-1];if(!C2(ae,we)){C.vertexLength+4>hr.MAX_VERTEX_ARRAY_LENGTH&&(C=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const de=ae.sub(we)._perp()._unit(),xe=we.dist(ae);Z+xe>32768&&(Z=0),bu(this.layoutVertexArray,ae.x,ae.y,de.x,de.y,0,0,Z),bu(this.layoutVertexArray,ae.x,ae.y,de.x,de.y,0,1,Z),b.x+=2*ae.x,b.y+=2*ae.y,b.vertexCount+=2,Z+=xe,bu(this.layoutVertexArray,we.x,we.y,de.x,de.y,0,0,Z),bu(this.layoutVertexArray,we.x,we.y,de.x,de.y,0,1,Z),b.x+=2*we.x,b.y+=2*we.y,b.vertexCount+=2;const ze=C.vertexLength;this.indexArray.emplaceBack(ze,ze+2,ze+1),this.indexArray.emplaceBack(ze+1,ze+2,ze+3),C.vertexLength+=4,C.primitiveLength+=2}}}}if(C.vertexLength+E>hr.MAX_VERTEX_ARRAY_LENGTH&&(C=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),I2[t.type]!=="Polygon")continue;const P=[],D=[],B=C.vertexLength;for(const U of x)if(U.length!==0){U!==x[0]&&D.push(P.length/2);for(let Z=0;Z<U.length;Z++){const Y=U[Z];bu(this.layoutVertexArray,Y.x,Y.y,0,0,1,1,0),b.x+=Y.x,b.y+=Y.y,b.vertexCount+=1,P.push(Y.x),P.push(Y.y)}}const V=e_(P,D);for(let U=0;U<V.length;U+=3)this.indexArray.emplaceBack(B+V[U],B+V[U+2],B+V[U+1]);C.primitiveLength+=V.length/3,C.vertexLength+=E;for(let U=0;U<b.vertexCount;U++){const Z=Math.floor(b.x/b.vertexCount),Y=Math.floor(b.y/b.vertexCount);this.centroidVertexArray.emplaceBack(Z,Y)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,y,f)}}function C2(r,t){return r.x===t.x&&(r.x<0||r.x>or)||r.y===t.y&&(r.y<0||r.y>or)}function A2(r){return r.every(t=>t.x<0)||r.every(t=>t.x>or)||r.every(t=>t.y<0)||r.every(t=>t.y>or)}let s_;mt("FillExtrusionBucket",Rp,{omit:["layers","features"]});var k2={get paint(){return s_=s_||new d({"fill-extrusion-opacity":new wt(le["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new At(le["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new wt(le["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new wt(le["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new _(le["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new At(le["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new At(le["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new wt(le["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class M2 extends v{constructor(t){super(t,k2)}createBucket(t){return new Rp(t)}queryRadius(){return ld(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,o,l,f,y,x,b,E){const C=cd(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,b),P=this.paint.get("fill-extrusion-height").evaluate(o,l),D=this.paint.get("fill-extrusion-base").evaluate(o,l),B=function(U,Z,Y,ae){const we=[];for(const de of U){const xe=[de.x,de.y,0,1];ud(xe,xe,Z),we.push(new A(xe[0]/xe[3],xe[1]/xe[3]))}return we}(C,E),V=function(U,Z,Y,ae){const we=[],de=[],xe=ae[8]*Z,ze=ae[9]*Z,qe=ae[10]*Z,st=ae[11]*Z,Ct=ae[8]*Y,lt=ae[9]*Y,ot=ae[10]*Y,bt=ae[11]*Y;for(const gt of U){const ft=[],Fe=[];for(const Et of gt){const vt=Et.x,zt=Et.y,xi=ae[0]*vt+ae[4]*zt+ae[12],yi=ae[1]*vt+ae[5]*zt+ae[13],_r=ae[2]*vt+ae[6]*zt+ae[14],Gn=ae[3]*vt+ae[7]*zt+ae[15],Dr=_r+qe,Xi=Gn+st,rn=xi+Ct,nn=yi+lt,on=_r+ot,Ji=Gn+bt,vr=new A((xi+xe)/Xi,(yi+ze)/Xi);vr.z=Dr/Xi,ft.push(vr);const $r=new A(rn/Ji,nn/Ji);$r.z=on/Ji,Fe.push($r)}we.push(ft),de.push(Fe)}return[we,de]}(f,D,P,E);return function(U,Z,Y){let ae=1/0;Fy(Y,Z)&&(ae=a_(Y,Z[0]));for(let we=0;we<Z.length;we++){const de=Z[we],xe=U[we];for(let ze=0;ze<de.length-1;ze++){const qe=de[ze],st=[qe,de[ze+1],xe[ze+1],xe[ze],qe];By(Y,st)&&(ae=Math.min(ae,a_(Y,st)))}}return ae!==1/0&&ae}(V[0],V[1],B)}}function wu(r,t){return r.x*t.x+r.y*t.y}function a_(r,t){if(r.length===1){let o=0;const l=t[o++];let f;for(;!f||l.equals(f);)if(f=t[o++],!f)return 1/0;for(;o<t.length;o++){const y=t[o],x=r[0],b=f.sub(l),E=y.sub(l),C=x.sub(l),P=wu(b,b),D=wu(b,E),B=wu(E,E),V=wu(C,b),U=wu(C,E),Z=P*B-D*D,Y=(B*V-D*U)/Z,ae=(P*U-D*V)/Z,we=l.z*(1-Y-ae)+f.z*Y+y.z*ae;if(isFinite(we))return we}return 1/0}{let o=1/0;for(const l of t)o=Math.min(o,l.z);return o}}const L2=z([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:P2}=L2,z2=z([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:D2}=z2,R2=Os.VectorTileFeature.types,O2=Math.cos(Math.PI/180*37.5),l_=Math.pow(2,14)/.5;class Op{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(o=>o.id),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Rl,this.layoutVertexArray2=new cu,this.indexArray=new yr,this.programConfigurations=new Pa(t.layers,t.zoom),this.segments=new hr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(t,o,l){this.hasPattern=Lp("line",this.layers,o);const f=this.layers[0].layout.get("line-sort-key"),y=!f.isConstant(),x=[];for(const{feature:b,id:E,index:C,sourceLayerIndex:P}of t){const D=this.layers[0]._featureFilter.needGeometry,B=Da(b,D);if(!this.layers[0]._featureFilter.filter(new wi(this.zoom),B,l))continue;const V=y?f.evaluate(B,{},l):void 0,U={id:E,properties:b.properties,type:b.type,sourceLayerIndex:P,index:C,geometry:D?B.geometry:za(b),patterns:{},sortKey:V};x.push(U)}y&&x.sort((b,E)=>b.sortKey-E.sortKey);for(const b of x){const{geometry:E,index:C,sourceLayerIndex:P}=b;if(this.hasPattern){const D=Pp("line",this.layers,b,this.zoom,o);this.patternFeatures.push(D)}else this.addFeature(b,E,C,l,{});o.featureIndex.insert(t[C].feature,E,C,P,this.index)}}update(t,o,l){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,o,this.stateDependentLayers,l)}addFeatures(t,o,l){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,o,l)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,D2)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,P2),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,o,l,f,y){const x=this.layers[0].layout,b=x.get("line-join").evaluate(t,{}),E=x.get("line-cap"),C=x.get("line-miter-limit"),P=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const D of o)this.addLine(D,t,b,E,C,P);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,l,y,f)}addLine(t,o,l,f,y,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ae=0;ae<t.length-1;ae++)this.totalDistance+=t[ae].dist(t[ae+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=R2[o.type]==="Polygon";let E=t.length;for(;E>=2&&t[E-1].equals(t[E-2]);)E--;let C=0;for(;C<E-1&&t[C].equals(t[C+1]);)C++;if(E<(b?3:2))return;l==="bevel"&&(y=1.05);const P=this.overscaling<=16?15*or/(512*this.overscaling):0,D=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let B,V,U,Z,Y;this.e1=this.e2=-1,b&&(B=t[E-2],Y=t[C].sub(B)._unit()._perp());for(let ae=C;ae<E;ae++){if(U=ae===E-1?b?t[C+1]:void 0:t[ae+1],U&&t[ae].equals(U))continue;Y&&(Z=Y),B&&(V=B),B=t[ae],Y=U?U.sub(B)._unit()._perp():Z,Z=Z||Y;let we=Z.add(Y);we.x===0&&we.y===0||we._unit();const de=Z.x*Y.x+Z.y*Y.y,xe=we.x*Y.x+we.y*Y.y,ze=xe!==0?1/xe:1/0,qe=2*Math.sqrt(2-2*xe),st=xe<O2&&V&&U,Ct=Z.x*Y.y-Z.y*Y.x>0;if(st&&ae>C){const bt=B.dist(V);if(bt>2*P){const gt=B.sub(B.sub(V)._mult(P/bt)._round());this.updateDistance(V,gt),this.addCurrentVertex(gt,Z,0,0,D),V=gt}}const lt=V&&U;let ot=lt?l:b?"butt":f;if(lt&&ot==="round"&&(ze<x?ot="miter":ze<=2&&(ot="fakeround")),ot==="miter"&&ze>y&&(ot="bevel"),ot==="bevel"&&(ze>2&&(ot="flipbevel"),ze<y&&(ot="miter")),V&&this.updateDistance(V,B),ot==="miter")we._mult(ze),this.addCurrentVertex(B,we,0,0,D);else if(ot==="flipbevel"){if(ze>100)we=Y.mult(-1);else{const bt=ze*Z.add(Y).mag()/Z.sub(Y).mag();we._perp()._mult(bt*(Ct?-1:1))}this.addCurrentVertex(B,we,0,0,D),this.addCurrentVertex(B,we.mult(-1),0,0,D)}else if(ot==="bevel"||ot==="fakeround"){const bt=-Math.sqrt(ze*ze-1),gt=Ct?bt:0,ft=Ct?0:bt;if(V&&this.addCurrentVertex(B,Z,gt,ft,D),ot==="fakeround"){const Fe=Math.round(180*qe/Math.PI/20);for(let Et=1;Et<Fe;Et++){let vt=Et/Fe;if(vt!==.5){const xi=vt-.5;vt+=vt*xi*(vt-1)*((1.0904+de*(de*(3.55645-1.43519*de)-3.2452))*xi*xi+(.848013+de*(.215638*de-1.06021)))}const zt=Y.sub(Z)._mult(vt)._add(Z)._unit()._mult(Ct?-1:1);this.addHalfVertex(B,zt.x,zt.y,!1,Ct,0,D)}}U&&this.addCurrentVertex(B,Y,-gt,-ft,D)}else if(ot==="butt")this.addCurrentVertex(B,we,0,0,D);else if(ot==="square"){const bt=V?1:-1;this.addCurrentVertex(B,we,bt,bt,D)}else ot==="round"&&(V&&(this.addCurrentVertex(B,Z,0,0,D),this.addCurrentVertex(B,Z,1,1,D,!0)),U&&(this.addCurrentVertex(B,Y,-1,-1,D,!0),this.addCurrentVertex(B,Y,0,0,D)));if(st&&ae<E-1){const bt=B.dist(U);if(bt>2*P){const gt=B.add(U.sub(B)._mult(P/bt)._round());this.updateDistance(B,gt),this.addCurrentVertex(gt,Y,0,0,D),B=gt}}}}addCurrentVertex(t,o,l,f,y,x=!1){const b=o.y*f-o.x,E=-o.y-o.x*f;this.addHalfVertex(t,o.x+o.y*l,o.y-o.x*l,x,!1,l,y),this.addHalfVertex(t,b,E,x,!0,-f,y),this.distance>l_/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,o,l,f,y,x))}addHalfVertex({x:t,y:o},l,f,y,x,b,E){const C=.5*(this.lineClips?this.scaledDistance*(l_-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(y?1:0),(o<<1)+(x?1:0),Math.round(63*l)+128,Math.round(63*f)+128,1+(b===0?0:b<0?-1:1)|(63&C)<<2,C>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const P=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,P),E.primitiveLength++),x?this.e2=P:this.e1=P}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,o){this.distance+=t.dist(o),this.updateScaledDistance()}}let c_,u_;mt("LineBucket",Op,{omit:["layers","patternFeatures"]});var h_={get paint(){return u_=u_||new d({"line-opacity":new At(le.paint_line["line-opacity"]),"line-color":new At(le.paint_line["line-color"]),"line-translate":new wt(le.paint_line["line-translate"]),"line-translate-anchor":new wt(le.paint_line["line-translate-anchor"]),"line-width":new At(le.paint_line["line-width"]),"line-gap-width":new At(le.paint_line["line-gap-width"]),"line-offset":new At(le.paint_line["line-offset"]),"line-blur":new At(le.paint_line["line-blur"]),"line-dasharray":new i(le.paint_line["line-dasharray"]),"line-pattern":new _(le.paint_line["line-pattern"]),"line-gradient":new a(le.paint_line["line-gradient"])})},get layout(){return c_=c_||new d({"line-cap":new wt(le.layout_line["line-cap"]),"line-join":new At(le.layout_line["line-join"]),"line-miter-limit":new wt(le.layout_line["line-miter-limit"]),"line-round-limit":new wt(le.layout_line["line-round-limit"]),"line-sort-key":new At(le.layout_line["line-sort-key"])})}};class B2 extends At{possiblyEvaluate(t,o){return o=new wi(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(t,o)}evaluate(t,o,l,f){return o=Ie({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(t,o,l,f)}}let md;class F2 extends v{constructor(t){super(t,h_),this.gradientVersion=0,md||(md=new B2(h_.paint.properties["line-width"].specification),md.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const o=this.gradientExpression();this.stepInterpolant=!!function(l){return l._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof ma,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,o){super.recalculate(t,o),this.paint._values["line-floorwidth"]=md.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Op(t)}queryRadius(t){const o=t,l=d_(mu("line-width",this,o),mu("line-gap-width",this,o)),f=mu("line-offset",this,o);return l/2+Math.abs(f)+ld(this.paint.get("line-translate"))}queryIntersectsFeature(t,o,l,f,y,x,b){const E=cd(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,b),C=b/2*d_(this.paint.get("line-width").evaluate(o,l),this.paint.get("line-gap-width").evaluate(o,l)),P=this.paint.get("line-offset").evaluate(o,l);return P&&(f=function(D,B){const V=[];for(let U=0;U<D.length;U++){const Z=D[U],Y=[];for(let ae=0;ae<Z.length;ae++){const we=Z[ae-1],de=Z[ae],xe=Z[ae+1],ze=ae===0?new A(0,0):de.sub(we)._unit()._perp(),qe=ae===Z.length-1?new A(0,0):xe.sub(de)._unit()._perp(),st=ze._add(qe)._unit(),Ct=st.x*qe.x+st.y*qe.y;Ct!==0&&st._mult(1/Ct),Y.push(st._mult(B)._add(de))}V.push(Y)}return V}(f,P*b)),function(D,B,V){for(let U=0;U<B.length;U++){const Z=B[U];if(D.length>=3){for(let Y=0;Y<Z.length;Y++)if(Nl(D,Z[Y]))return!0}if(Zw(D,Z,V))return!0}return!1}(E,f,C)}isTileClipped(){return!0}}function d_(r,t){return t>0?t+2*r:r}const V2=z([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),N2=z([{name:"a_projected_pos",components:3,type:"Float32"}],4);z([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const $2=z([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);z([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const f_=z([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),j2=z([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function U2(r,t,o){return r.sections.forEach(l=>{l.text=function(f,y,x){const b=y.layout.get("text-transform").evaluate(x,{});return b==="uppercase"?f=f.toLocaleUpperCase():b==="lowercase"&&(f=f.toLocaleLowerCase()),So.applyArabicShaping&&(f=So.applyArabicShaping(f)),f}(l.text,t,o)}),r}z([{name:"triangle",components:3,type:"Uint16"}]),z([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),z([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),z([{type:"Float32",name:"offsetX"}]),z([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),z([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Eu={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var dr=24,p_=gi,m_=function(r,t,o,l,f){var y,x,b=8*f-l-1,E=(1<<b)-1,C=E>>1,P=-7,D=f-1,B=-1,V=r[t+D];for(D+=B,y=V&(1<<-P)-1,V>>=-P,P+=b;P>0;y=256*y+r[t+D],D+=B,P-=8);for(x=y&(1<<-P)-1,y>>=-P,P+=l;P>0;x=256*x+r[t+D],D+=B,P-=8);if(y===0)y=1-C;else{if(y===E)return x?NaN:1/0*(V?-1:1);x+=Math.pow(2,l),y-=C}return(V?-1:1)*x*Math.pow(2,y-l)},g_=function(r,t,o,l,f,y){var x,b,E,C=8*y-f-1,P=(1<<C)-1,D=P>>1,B=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,V=0,U=1,Z=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(b=isNaN(t)?1:0,x=P):(x=Math.floor(Math.log(t)/Math.LN2),t*(E=Math.pow(2,-x))<1&&(x--,E*=2),(t+=x+D>=1?B/E:B*Math.pow(2,1-D))*E>=2&&(x++,E/=2),x+D>=P?(b=0,x=P):x+D>=1?(b=(t*E-1)*Math.pow(2,f),x+=D):(b=t*Math.pow(2,D-1)*Math.pow(2,f),x=0));f>=8;r[o+V]=255&b,V+=U,b/=256,f-=8);for(x=x<<f|b,C+=f;C>0;r[o+V]=255&x,V+=U,x/=256,C-=8);r[o+V-U]|=128*Z};function gi(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}gi.Varint=0,gi.Fixed64=1,gi.Bytes=2,gi.Fixed32=5;var Bp=4294967296,y_=1/Bp,__=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function is(r){return r.type===gi.Bytes?r.readVarint()+r.pos:r.pos+1}function ql(r,t,o){return o?4294967296*t+(r>>>0):4294967296*(t>>>0)+(r>>>0)}function v_(r,t,o){var l=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));o.realloc(l);for(var f=o.pos-1;f>=r;f--)o.buf[f+l]=o.buf[f]}function q2(r,t){for(var o=0;o<r.length;o++)t.writeVarint(r[o])}function H2(r,t){for(var o=0;o<r.length;o++)t.writeSVarint(r[o])}function G2(r,t){for(var o=0;o<r.length;o++)t.writeFloat(r[o])}function Z2(r,t){for(var o=0;o<r.length;o++)t.writeDouble(r[o])}function W2(r,t){for(var o=0;o<r.length;o++)t.writeBoolean(r[o])}function K2(r,t){for(var o=0;o<r.length;o++)t.writeFixed32(r[o])}function X2(r,t){for(var o=0;o<r.length;o++)t.writeSFixed32(r[o])}function J2(r,t){for(var o=0;o<r.length;o++)t.writeFixed64(r[o])}function Y2(r,t){for(var o=0;o<r.length;o++)t.writeSFixed64(r[o])}function gd(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+16777216*r[t+3]}function Hl(r,t,o){r[o]=t,r[o+1]=t>>>8,r[o+2]=t>>>16,r[o+3]=t>>>24}function x_(r,t){return(r[t]|r[t+1]<<8|r[t+2]<<16)+(r[t+3]<<24)}gi.prototype={destroy:function(){this.buf=null},readFields:function(r,t,o){for(o=o||this.length;this.pos<o;){var l=this.readVarint(),f=l>>3,y=this.pos;this.type=7&l,r(f,t,this),this.pos===y&&this.skip(l)}return t},readMessage:function(r,t){return this.readFields(r,t,this.readVarint()+this.pos)},readFixed32:function(){var r=gd(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=x_(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=gd(this.buf,this.pos)+gd(this.buf,this.pos+4)*Bp;return this.pos+=8,r},readSFixed64:function(){var r=gd(this.buf,this.pos)+x_(this.buf,this.pos+4)*Bp;return this.pos+=8,r},readFloat:function(){var r=m_(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=m_(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var t,o,l=this.buf;return t=127&(o=l[this.pos++]),o<128?t:(t|=(127&(o=l[this.pos++]))<<7,o<128?t:(t|=(127&(o=l[this.pos++]))<<14,o<128?t:(t|=(127&(o=l[this.pos++]))<<21,o<128?t:function(f,y,x){var b,E,C=x.buf;if(b=(112&(E=C[x.pos++]))>>4,E<128||(b|=(127&(E=C[x.pos++]))<<3,E<128)||(b|=(127&(E=C[x.pos++]))<<10,E<128)||(b|=(127&(E=C[x.pos++]))<<17,E<128)||(b|=(127&(E=C[x.pos++]))<<24,E<128)||(b|=(1&(E=C[x.pos++]))<<31,E<128))return ql(f,b,y);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(o=l[this.pos]))<<28,r,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2==1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,t=this.pos;return this.pos=r,r-t>=12&&__?function(o,l,f){return __.decode(o.subarray(l,f))}(this.buf,t,r):function(o,l,f){for(var y="",x=l;x<f;){var b,E,C,P=o[x],D=null,B=P>239?4:P>223?3:P>191?2:1;if(x+B>f)break;B===1?P<128&&(D=P):B===2?(192&(b=o[x+1]))==128&&(D=(31&P)<<6|63&b)<=127&&(D=null):B===3?(E=o[x+2],(192&(b=o[x+1]))==128&&(192&E)==128&&((D=(15&P)<<12|(63&b)<<6|63&E)<=2047||D>=55296&&D<=57343)&&(D=null)):B===4&&(E=o[x+2],C=o[x+3],(192&(b=o[x+1]))==128&&(192&E)==128&&(192&C)==128&&((D=(15&P)<<18|(63&b)<<12|(63&E)<<6|63&C)<=65535||D>=1114112)&&(D=null)),D===null?(D=65533,B=1):D>65535&&(D-=65536,y+=String.fromCharCode(D>>>10&1023|55296),D=56320|1023&D),y+=String.fromCharCode(D),x+=B}return y}(this.buf,t,r)},readBytes:function(){var r=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,r);return this.pos=r,t},readPackedVarint:function(r,t){if(this.type!==gi.Bytes)return r.push(this.readVarint(t));var o=is(this);for(r=r||[];this.pos<o;)r.push(this.readVarint(t));return r},readPackedSVarint:function(r){if(this.type!==gi.Bytes)return r.push(this.readSVarint());var t=is(this);for(r=r||[];this.pos<t;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==gi.Bytes)return r.push(this.readBoolean());var t=is(this);for(r=r||[];this.pos<t;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==gi.Bytes)return r.push(this.readFloat());var t=is(this);for(r=r||[];this.pos<t;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==gi.Bytes)return r.push(this.readDouble());var t=is(this);for(r=r||[];this.pos<t;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==gi.Bytes)return r.push(this.readFixed32());var t=is(this);for(r=r||[];this.pos<t;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==gi.Bytes)return r.push(this.readSFixed32());var t=is(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==gi.Bytes)return r.push(this.readFixed64());var t=is(this);for(r=r||[];this.pos<t;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==gi.Bytes)return r.push(this.readSFixed64());var t=is(this);for(r=r||[];this.pos<t;)r.push(this.readSFixed64());return r},skip:function(r){var t=7&r;if(t===gi.Varint)for(;this.buf[this.pos++]>127;);else if(t===gi.Bytes)this.pos=this.readVarint()+this.pos;else if(t===gi.Fixed32)this.pos+=4;else{if(t!==gi.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(r,t){this.writeVarint(r<<3|t)},realloc:function(r){for(var t=this.length||16;t<this.pos+r;)t*=2;if(t!==this.length){var o=new Uint8Array(t);o.set(this.buf),this.buf=o,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),Hl(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),Hl(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),Hl(this.buf,-1&r,this.pos),Hl(this.buf,Math.floor(r*y_),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),Hl(this.buf,-1&r,this.pos),Hl(this.buf,Math.floor(r*y_),this.pos+4),this.pos+=8},writeVarint:function(r){(r=+r||0)>268435455||r<0?function(t,o){var l,f;if(t>=0?(l=t%4294967296|0,f=t/4294967296|0):(f=~(-t/4294967296),4294967295^(l=~(-t%4294967296))?l=l+1|0:(l=0,f=f+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(y,x,b){b.buf[b.pos++]=127&y|128,y>>>=7,b.buf[b.pos++]=127&y|128,y>>>=7,b.buf[b.pos++]=127&y|128,y>>>=7,b.buf[b.pos++]=127&y|128,b.buf[b.pos]=127&(y>>>=7)}(l,0,o),function(y,x){var b=(7&y)<<4;x.buf[x.pos++]|=b|((y>>>=3)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y|((y>>>=7)?128:0),y&&(x.buf[x.pos++]=127&y)))))}(f,o)}(r,this):(this.realloc(4),this.buf[this.pos++]=127&r|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=127&(r>>>=7)|(r>127?128:0),r<=127||(this.buf[this.pos++]=r>>>7&127))))},writeSVarint:function(r){this.writeVarint(r<0?2*-r-1:2*r)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(4*r.length),this.pos++;var t=this.pos;this.pos=function(l,f,y){for(var x,b,E=0;E<f.length;E++){if((x=f.charCodeAt(E))>55295&&x<57344){if(!b){x>56319||E+1===f.length?(l[y++]=239,l[y++]=191,l[y++]=189):b=x;continue}if(x<56320){l[y++]=239,l[y++]=191,l[y++]=189,b=x;continue}x=b-55296<<10|x-56320|65536,b=null}else b&&(l[y++]=239,l[y++]=191,l[y++]=189,b=null);x<128?l[y++]=x:(x<2048?l[y++]=x>>6|192:(x<65536?l[y++]=x>>12|224:(l[y++]=x>>18|240,l[y++]=x>>12&63|128),l[y++]=x>>6&63|128),l[y++]=63&x|128)}return y}(this.buf,r,this.pos);var o=this.pos-t;o>=128&&v_(t,o,this),this.pos=t-1,this.writeVarint(o),this.pos+=o},writeFloat:function(r){this.realloc(4),g_(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),g_(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var t=r.length;this.writeVarint(t),this.realloc(t);for(var o=0;o<t;o++)this.buf[this.pos++]=r[o]},writeRawMessage:function(r,t){this.pos++;var o=this.pos;r(t,this);var l=this.pos-o;l>=128&&v_(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeMessage:function(r,t,o){this.writeTag(r,gi.Bytes),this.writeRawMessage(t,o)},writePackedVarint:function(r,t){t.length&&this.writeMessage(r,q2,t)},writePackedSVarint:function(r,t){t.length&&this.writeMessage(r,H2,t)},writePackedBoolean:function(r,t){t.length&&this.writeMessage(r,W2,t)},writePackedFloat:function(r,t){t.length&&this.writeMessage(r,G2,t)},writePackedDouble:function(r,t){t.length&&this.writeMessage(r,Z2,t)},writePackedFixed32:function(r,t){t.length&&this.writeMessage(r,K2,t)},writePackedSFixed32:function(r,t){t.length&&this.writeMessage(r,X2,t)},writePackedFixed64:function(r,t){t.length&&this.writeMessage(r,J2,t)},writePackedSFixed64:function(r,t){t.length&&this.writeMessage(r,Y2,t)},writeBytesField:function(r,t){this.writeTag(r,gi.Bytes),this.writeBytes(t)},writeFixed32Field:function(r,t){this.writeTag(r,gi.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(r,t){this.writeTag(r,gi.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(r,t){this.writeTag(r,gi.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(r,t){this.writeTag(r,gi.Fixed64),this.writeSFixed64(t)},writeVarintField:function(r,t){this.writeTag(r,gi.Varint),this.writeVarint(t)},writeSVarintField:function(r,t){this.writeTag(r,gi.Varint),this.writeSVarint(t)},writeStringField:function(r,t){this.writeTag(r,gi.Bytes),this.writeString(t)},writeFloatField:function(r,t){this.writeTag(r,gi.Fixed32),this.writeFloat(t)},writeDoubleField:function(r,t){this.writeTag(r,gi.Fixed64),this.writeDouble(t)},writeBooleanField:function(r,t){this.writeVarintField(r,!!t)}};var Fp=T(p_);const Vp=3;function Q2(r,t,o){r===1&&o.readMessage(eE,t)}function eE(r,t,o){if(r===3){const{id:l,bitmap:f,width:y,height:x,left:b,top:E,advance:C}=o.readMessage(tE,{});t.push({id:l,bitmap:new yu({width:y+2*Vp,height:x+2*Vp},f),metrics:{width:y,height:x,left:b,top:E,advance:C}})}}function tE(r,t,o){r===1?t.id=o.readVarint():r===2?t.bitmap=o.readBytes():r===3?t.width=o.readVarint():r===4?t.height=o.readVarint():r===5?t.left=o.readSVarint():r===6?t.top=o.readSVarint():r===7&&(t.advance=o.readVarint())}const b_=Vp;function w_(r){let t=0,o=0;for(const x of r)t+=x.w*x.h,o=Math.max(o,x.w);r.sort((x,b)=>b.h-x.h);const l=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),o),h:1/0}];let f=0,y=0;for(const x of r)for(let b=l.length-1;b>=0;b--){const E=l[b];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,y=Math.max(y,x.y+x.h),f=Math.max(f,x.x+x.w),x.w===E.w&&x.h===E.h){const C=l.pop();b<l.length&&(l[b]=C)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(l.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:f,h:y,fill:t/(f*y)||0}}const mn=1;class Np{constructor(t,{pixelRatio:o,version:l,stretchX:f,stretchY:y,content:x,textFitWidth:b,textFitHeight:E}){this.paddedRect=t,this.pixelRatio=o,this.stretchX=f,this.stretchY=y,this.content=x,this.version=l,this.textFitWidth=b,this.textFitHeight=E}get tl(){return[this.paddedRect.x+mn,this.paddedRect.y+mn]}get br(){return[this.paddedRect.x+this.paddedRect.w-mn,this.paddedRect.y+this.paddedRect.h-mn]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*mn)/this.pixelRatio,(this.paddedRect.h-2*mn)/this.pixelRatio]}}class E_{constructor(t,o){const l={},f={};this.haveRenderCallbacks=[];const y=[];this.addImages(t,l,y),this.addImages(o,f,y);const{w:x,h:b}=w_(y),E=new kn({width:x||1,height:b||1});for(const C in t){const P=t[C],D=l[C].paddedRect;kn.copy(P.data,E,{x:0,y:0},{x:D.x+mn,y:D.y+mn},P.data)}for(const C in o){const P=o[C],D=f[C].paddedRect,B=D.x+mn,V=D.y+mn,U=P.data.width,Z=P.data.height;kn.copy(P.data,E,{x:0,y:0},{x:B,y:V},P.data),kn.copy(P.data,E,{x:0,y:Z-1},{x:B,y:V-1},{width:U,height:1}),kn.copy(P.data,E,{x:0,y:0},{x:B,y:V+Z},{width:U,height:1}),kn.copy(P.data,E,{x:U-1,y:0},{x:B-1,y:V},{width:1,height:Z}),kn.copy(P.data,E,{x:0,y:0},{x:B+U,y:V},{width:1,height:Z})}this.image=E,this.iconPositions=l,this.patternPositions=f}addImages(t,o,l){for(const f in t){const y=t[f],x={x:0,y:0,w:y.data.width+2*mn,h:y.data.height+2*mn};l.push(x),o[f]=new Np(x,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(t,o){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const l in t.updatedImages)this.patchUpdatedImage(this.iconPositions[l],t.getImage(l),o),this.patchUpdatedImage(this.patternPositions[l],t.getImage(l),o)}patchUpdatedImage(t,o,l){if(!t||!o||t.version===o.version)return;t.version=o.version;const[f,y]=t.tl;l.update(o.data,void 0,{x:f,y})}}var Bs;mt("ImagePosition",Np),mt("ImageAtlas",E_),m.ah=void 0,(Bs=m.ah||(m.ah={}))[Bs.none=0]="none",Bs[Bs.horizontal=1]="horizontal",Bs[Bs.vertical=2]="vertical",Bs[Bs.horizontalOnly=3]="horizontalOnly";const Su=-17;class Tu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,o){const l=new Tu;return l.scale=t||1,l.fontStack=o,l}static forImage(t){const o=new Tu;return o.imageName=t,o}}class Gl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,o){const l=new Gl;for(let f=0;f<t.sections.length;f++){const y=t.sections[f];y.image?l.addImageSection(y):l.addTextSection(y,o)}return l}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=function(t){let o="";for(let l=0;l<t.length;l++){const f=t.charCodeAt(l+1)||null,y=t.charCodeAt(l-1)||null;o+=f&&ed(f)&&!Eu[t[l+1]]||y&&ed(y)&&!Eu[t[l-1]]||!Eu[t[l]]?t[l]:Eu[t[l]]}return o}(this.text)}trim(){let t=0;for(let l=0;l<this.text.length&&_d[this.text.charCodeAt(l)];l++)t++;let o=this.text.length;for(let l=this.text.length-1;l>=0&&l>=t&&_d[this.text.charCodeAt(l)];l--)o--;this.text=this.text.substring(t,o),this.sectionIndex=this.sectionIndex.slice(t,o)}substring(t,o){const l=new Gl;return l.text=this.text.substring(t,o),l.sectionIndex=this.sectionIndex.slice(t,o),l.sections=this.sections,l}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((t,o)=>Math.max(t,this.sections[o].scale),0)}addTextSection(t,o){this.text+=t.text,this.sections.push(Tu.forText(t.scale,t.fontStack||o));const l=this.sections.length-1;for(let f=0;f<t.text.length;++f)this.sectionIndex.push(l)}addImageSection(t){const o=t.image?t.image.name:"";if(o.length===0)return void Oe("Can't add FormattedSection with an empty image.");const l=this.getNextImageSectionCharCode();l?(this.text+=String.fromCharCode(l),this.sections.push(Tu.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Oe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function yd(r,t,o,l,f,y,x,b,E,C,P,D,B,V,U){const Z=Gl.fromFeature(r,f);let Y;D===m.ah.vertical&&Z.verticalizePunctuation();const{processBidirectionalText:ae,processStyledBidirectionalText:we}=So;if(ae&&Z.sections.length===1){Y=[];const ze=ae(Z.toString(),$p(Z,C,y,t,l,V));for(const qe of ze){const st=new Gl;st.text=qe,st.sections=Z.sections;for(let Ct=0;Ct<qe.length;Ct++)st.sectionIndex.push(0);Y.push(st)}}else if(we){Y=[];const ze=we(Z.text,Z.sectionIndex,$p(Z,C,y,t,l,V));for(const qe of ze){const st=new Gl;st.text=qe[0],st.sectionIndex=qe[1],st.sections=Z.sections,Y.push(st)}}else Y=function(ze,qe){const st=[],Ct=ze.text;let lt=0;for(const ot of qe)st.push(ze.substring(lt,ot)),lt=ot;return lt<Ct.length&&st.push(ze.substring(lt,Ct.length)),st}(Z,$p(Z,C,y,t,l,V));const de=[],xe={positionedLines:de,text:Z.toString(),top:P[1],bottom:P[1],left:P[0],right:P[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(ze,qe,st,Ct,lt,ot,bt,gt,ft,Fe,Et,vt){let zt=0,xi=Su,yi=0,_r=0;const Gn=gt==="right"?1:gt==="left"?0:.5;let Dr=0;for(const Ji of lt){Ji.trim();const vr=Ji.getMaxScale(),$r=(vr-1)*dr,Rr={positionedGlyphs:[],lineOffset:0};ze.positionedLines[Dr]=Rr;const sn=Rr.positionedGlyphs;let Or=0;if(!Ji.length()){xi+=ot,++Dr;continue}for(let gn=0;gn<Ji.length();gn++){const si=Ji.getSection(gn),Ei=Ji.getSectionIndex(gn),Mi=Ji.getCharCode(gn);let wn=0,qi=null,Xl=null,Ao=null,ko=dr;const Zn=!(ft===m.ah.horizontal||!Et&&!su(Mi)||Et&&(_d[Mi]||(Xi=Mi,ct.Arabic(Xi)||ct["Arabic Supplement"](Xi)||ct["Arabic Extended-A"](Xi)||ct["Arabic Presentation Forms-A"](Xi)||ct["Arabic Presentation Forms-B"](Xi))));if(si.imageName){const Pn=Ct[si.imageName];if(!Pn)continue;Ao=si.imageName,ze.iconsInText=ze.iconsInText||!0,Xl=Pn.paddedRect;const Sr=Pn.displaySize;si.scale=si.scale*dr/vt,qi={width:Sr[0],height:Sr[1],left:mn,top:-b_,advance:Zn?Sr[1]:Sr[0]},wn=$r+(dr-Sr[1]*si.scale),ko=qi.advance;const rs=Zn?Sr[0]*si.scale-dr*vr:Sr[1]*si.scale-dr*vr;rs>0&&rs>Or&&(Or=rs)}else{const Pn=st[si.fontStack],Sr=Pn&&Pn[Mi];if(Sr&&Sr.rect)Xl=Sr.rect,qi=Sr.metrics;else{const rs=qe[si.fontStack],Mu=rs&&rs[Mi];if(!Mu)continue;qi=Mu.metrics}wn=(vr-si.scale)*dr}Zn?(ze.verticalizable=!0,sn.push({glyph:Mi,imageName:Ao,x:zt,y:xi+wn,vertical:Zn,scale:si.scale,fontStack:si.fontStack,sectionIndex:Ei,metrics:qi,rect:Xl}),zt+=ko*si.scale+Fe):(sn.push({glyph:Mi,imageName:Ao,x:zt,y:xi+wn,vertical:Zn,scale:si.scale,fontStack:si.fontStack,sectionIndex:Ei,metrics:qi,rect:Xl}),zt+=qi.advance*si.scale+Fe)}sn.length!==0&&(yi=Math.max(zt-Fe,yi),oE(sn,0,sn.length-1,Gn,Or)),zt=0;const Ln=ot*vr+Or;Rr.lineOffset=Math.max(Or,$r),xi+=Ln,_r=Math.max(Ln,_r),++Dr}var Xi;const rn=xi-Su,{horizontalAlign:nn,verticalAlign:on}=jp(bt);(function(Ji,vr,$r,Rr,sn,Or,Ln,gn,si){const Ei=(vr-$r)*sn;let Mi=0;Mi=Or!==Ln?-gn*Rr-Su:(-Rr*si+.5)*Ln;for(const wn of Ji)for(const qi of wn.positionedGlyphs)qi.x+=Ei,qi.y+=Mi})(ze.positionedLines,Gn,nn,on,yi,_r,ot,rn,lt.length),ze.top+=-on*rn,ze.bottom=ze.top+rn,ze.left+=-nn*yi,ze.right=ze.left+yi}(xe,t,o,l,Y,x,b,E,D,C,B,U),!function(ze){for(const qe of ze)if(qe.positionedGlyphs.length!==0)return!1;return!0}(de)&&xe}const _d={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},iE={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},rE={40:!0};function S_(r,t,o,l,f,y){if(t.imageName){const x=l[t.imageName];return x?x.displaySize[0]*t.scale*dr/y+f:0}{const x=o[t.fontStack],b=x&&x[r];return b?b.metrics.advance*t.scale+f:0}}function T_(r,t,o,l){const f=Math.pow(r-t,2);return l?r<t?f/2:2*f:f+Math.abs(o)*o}function nE(r,t,o){let l=0;return r===10&&(l-=1e4),o&&(l+=150),r!==40&&r!==65288||(l+=50),t!==41&&t!==65289||(l+=50),l}function I_(r,t,o,l,f,y){let x=null,b=T_(t,o,f,y);for(const E of l){const C=T_(t-E.x,o,f,y)+E.badness;C<=b&&(x=E,b=C)}return{index:r,x:t,priorBreak:x,badness:b}}function C_(r){return r?C_(r.priorBreak).concat(r.index):[]}function $p(r,t,o,l,f,y){if(!r)return[];const x=[],b=function(D,B,V,U,Z,Y){let ae=0;for(let we=0;we<D.length();we++){const de=D.getSection(we);ae+=S_(D.getCharCode(we),de,U,Z,B,Y)}return ae/Math.max(1,Math.ceil(ae/V))}(r,t,o,l,f,y),E=r.text.indexOf("")>=0;let C=0;for(let D=0;D<r.length();D++){const B=r.getSection(D),V=r.getCharCode(D);if(_d[V]||(C+=S_(V,B,l,f,t,y)),D<r.length()-1){const U=!((P=V)<11904||!(ct["Bopomofo Extended"](P)||ct.Bopomofo(P)||ct["CJK Compatibility Forms"](P)||ct["CJK Compatibility Ideographs"](P)||ct["CJK Compatibility"](P)||ct["CJK Radicals Supplement"](P)||ct["CJK Strokes"](P)||ct["CJK Symbols and Punctuation"](P)||ct["CJK Unified Ideographs Extension A"](P)||ct["CJK Unified Ideographs"](P)||ct["Enclosed CJK Letters and Months"](P)||ct["Halfwidth and Fullwidth Forms"](P)||ct.Hiragana(P)||ct["Ideographic Description Characters"](P)||ct["Kangxi Radicals"](P)||ct["Katakana Phonetic Extensions"](P)||ct.Katakana(P)||ct["Vertical Forms"](P)||ct["Yi Radicals"](P)||ct["Yi Syllables"](P)));(iE[V]||U||B.imageName||D!==r.length()-2&&rE[r.getCharCode(D+1)])&&x.push(I_(D+1,C,b,x,nE(V,r.getCharCode(D+1),U&&E),!1))}}var P;return C_(I_(r.length(),C,b,x,0,!0))}function jp(r){let t=.5,o=.5;switch(r){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(r){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:t,verticalAlign:o}}function oE(r,t,o,l,f){if(!l&&!f)return;const y=r[o],x=(r[o].x+y.metrics.advance*y.scale)*l;for(let b=t;b<=o;b++)r[b].x-=x,r[b].y+=f}function sE(r,t,o){const{horizontalAlign:l,verticalAlign:f}=jp(o),y=t[0]-r.displaySize[0]*l,x=t[1]-r.displaySize[1]*f;return{image:r,top:x,bottom:x+r.displaySize[1],left:y,right:y+r.displaySize[0]}}function A_(r){var t,o;let l=r.left,f=r.top,y=r.right-l,x=r.bottom-f;const b=(t=r.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",E=(o=r.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",C=(r.image.content[2]-r.image.content[0])/(r.image.content[3]-r.image.content[1]);if(E==="proportional"){if(b==="stretchOnly"&&y/x<C||b==="proportional"){const P=Math.ceil(x*C);l*=P/y,y=P}}else if(b==="proportional"&&E==="stretchOnly"&&C!==0&&y/x>C){const P=Math.ceil(y/C);f*=P/x,x=P}return{x1:l,y1:f,x2:l+y,y2:f+x}}function k_(r,t,o,l,f,y){const x=r.image;let b;if(x.content){const Y=x.content,ae=x.pixelRatio||1;b=[Y[0]/ae,Y[1]/ae,x.displaySize[0]-Y[2]/ae,x.displaySize[1]-Y[3]/ae]}const E=t.left*y,C=t.right*y;let P,D,B,V;o==="width"||o==="both"?(V=f[0]+E-l[3],D=f[0]+C+l[1]):(V=f[0]+(E+C-x.displaySize[0])/2,D=V+x.displaySize[0]);const U=t.top*y,Z=t.bottom*y;return o==="height"||o==="both"?(P=f[1]+U-l[0],B=f[1]+Z+l[2]):(P=f[1]+(U+Z-x.displaySize[1])/2,B=P+x.displaySize[1]),{image:x,top:P,right:D,bottom:B,left:V,collisionPadding:b}}const Iu=255,Co=128,Fs=Iu*Co;function M_(r,t){const{expression:o}=t;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new wi(r+1))};if(o.kind==="source")return{kind:"source"};{const{zoomStops:l,interpolationType:f}=o;let y=0;for(;y<l.length&&l[y]<=r;)y++;y=Math.max(0,y-1);let x=y;for(;x<l.length&&l[x]<r+1;)x++;x=Math.min(l.length-1,x);const b=l[y],E=l[x];return o.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:E,interpolationType:f}:{kind:"camera",minZoom:b,maxZoom:E,minSize:o.evaluate(new wi(b)),maxSize:o.evaluate(new wi(E)),interpolationType:f}}}function Up(r,t,o){let l="never";const f=r.get(t);return f?l=f:r.get(o)&&(l="always"),l}const aE=Os.VectorTileFeature.types,lE=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vd(r,t,o,l,f,y,x,b,E,C,P,D,B){const V=b?Math.min(Fs,Math.round(b[0])):0,U=b?Math.min(Fs,Math.round(b[1])):0;r.emplaceBack(t,o,Math.round(32*l),Math.round(32*f),y,x,(V<<1)+(E?1:0),U,16*C,16*P,256*D,256*B)}function qp(r,t,o){r.emplaceBack(t.x,t.y,o),r.emplaceBack(t.x,t.y,o),r.emplaceBack(t.x,t.y,o),r.emplaceBack(t.x,t.y,o)}function cE(r){for(const t of r.sections)if(au(t.text))return!0;return!1}class Hp{constructor(t){this.layoutVertexArray=new An,this.indexArray=new yr,this.programConfigurations=t,this.segments=new hr,this.dynamicLayoutVertexArray=new To,this.opacityVertexArray=new Ps,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ai}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,o,l,f){this.isEmpty()||(l&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,V2.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,N2.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,lE,!0),this.opacityVertexBuffer.itemSize=1),(l||f)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}mt("SymbolBuffers",Hp);class Gp{constructor(t,o,l){this.layoutVertexArray=new t,this.layoutAttributes=o,this.indexArray=new l,this.segments=new hr,this.collisionVertexArray=new Pr}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,$2.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}mt("CollisionBuffers",Gp);class Zl{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map(x=>x.id),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Sp([]),this.placementViewportMatrix=Sp([]);const o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=M_(this.zoom,o["text-size"]),this.iconSizeData=M_(this.zoom,o["icon-size"]);const l=this.layers[0].layout,f=l.get("symbol-sort-key"),y=l.get("symbol-z-order");this.canOverlap=Up(l,"text-overlap","text-allow-overlap")!=="never"||Up(l,"icon-overlap","icon-allow-overlap")!=="never"||l.get("text-ignore-placement")||l.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,l.get("symbol-placement")==="point"&&(this.writingModes=l.get("text-writing-mode").map(x=>m.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=t.sourceID}createArrays(){this.text=new Hp(new Pa(this.layers,this.zoom,t=>/^text/.test(t))),this.icon=new Hp(new Pa(this.layers,this.zoom,t=>/^icon/.test(t))),this.glyphOffsetArray=new ki,this.lineVertexArray=new en,this.symbolInstances=new In,this.textAnchorOffsets=new kr}calculateGlyphDependencies(t,o,l,f,y){for(let x=0;x<t.length;x++)if(o[t.charCodeAt(x)]=!0,(l||f)&&y){const b=Eu[t.charAt(x)];b&&(o[b.charCodeAt(0)]=!0)}}populate(t,o,l){const f=this.layers[0],y=f.layout,x=y.get("text-font"),b=y.get("text-field"),E=y.get("icon-image"),C=(b.value.kind!=="constant"||b.value.value instanceof un&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),P=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,D=y.get("symbol-sort-key");if(this.features=[],!C&&!P)return;const B=o.iconDependencies,V=o.glyphDependencies,U=o.availableImages,Z=new wi(this.zoom);for(const{feature:Y,id:ae,index:we,sourceLayerIndex:de}of t){const xe=f._featureFilter.needGeometry,ze=Da(Y,xe);if(!f._featureFilter.filter(Z,ze,l))continue;let qe,st;if(xe||(ze.geometry=za(Y)),C){const lt=f.getValueAndResolveTokens("text-field",ze,l,U),ot=un.factory(lt),bt=this.hasRTLText=this.hasRTLText||cE(ot);(!bt||So.getRTLTextPluginStatus()==="unavailable"||bt&&So.isParsed())&&(qe=U2(ot,f,ze))}if(P){const lt=f.getValueAndResolveTokens("icon-image",ze,l,U);st=lt instanceof vn?lt:vn.fromString(lt)}if(!qe&&!st)continue;const Ct=this.sortFeaturesByKey?D.evaluate(ze,{},l):void 0;if(this.features.push({id:ae,text:qe,icon:st,index:we,sourceLayerIndex:de,geometry:ze.geometry,properties:Y.properties,type:aE[Y.type],sortKey:Ct}),st&&(B[st.name]=!0),qe){const lt=x.evaluate(ze,{},l).join(","),ot=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.ah.vertical)>=0;for(const bt of qe.sections)if(bt.image)B[bt.image.name]=!0;else{const gt=ou(qe.toString()),ft=bt.fontStack||lt,Fe=V[ft]=V[ft]||{};this.calculateGlyphDependencies(bt.text,Fe,ot,this.allowVerticalPlacement,gt)}}}y.get("symbol-placement")==="line"&&(this.features=function(Y){const ae={},we={},de=[];let xe=0;function ze(lt){de.push(Y[lt]),xe++}function qe(lt,ot,bt){const gt=we[lt];return delete we[lt],we[ot]=gt,de[gt].geometry[0].pop(),de[gt].geometry[0]=de[gt].geometry[0].concat(bt[0]),gt}function st(lt,ot,bt){const gt=ae[ot];return delete ae[ot],ae[lt]=gt,de[gt].geometry[0].shift(),de[gt].geometry[0]=bt[0].concat(de[gt].geometry[0]),gt}function Ct(lt,ot,bt){const gt=bt?ot[0][ot[0].length-1]:ot[0][0];return`${lt}:${gt.x}:${gt.y}`}for(let lt=0;lt<Y.length;lt++){const ot=Y[lt],bt=ot.geometry,gt=ot.text?ot.text.toString():null;if(!gt){ze(lt);continue}const ft=Ct(gt,bt),Fe=Ct(gt,bt,!0);if(ft in we&&Fe in ae&&we[ft]!==ae[Fe]){const Et=st(ft,Fe,bt),vt=qe(ft,Fe,de[Et].geometry);delete ae[ft],delete we[Fe],we[Ct(gt,de[vt].geometry,!0)]=vt,de[Et].geometry=null}else ft in we?qe(ft,Fe,bt):Fe in ae?st(ft,Fe,bt):(ze(lt),ae[ft]=xe-1,we[Fe]=xe-1)}return de.filter(lt=>lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Y,ae)=>Y.sortKey-ae.sortKey)}update(t,o,l){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,o,this.layers,l),this.icon.programConfigurations.updatePaintArrays(t,o,this.layers,l))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,o){const l=this.lineVertexArray.length;if(t.segment!==void 0){let f=t.dist(o[t.segment+1]),y=t.dist(o[t.segment]);const x={};for(let b=t.segment+1;b<o.length;b++)x[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:f},b<o.length-1&&(f+=o[b+1].dist(o[b]));for(let b=t.segment||0;b>=0;b--)x[b]={x:o[b].x,y:o[b].y,tileUnitDistanceFromAnchor:y},b>0&&(y+=o[b-1].dist(o[b]));for(let b=0;b<o.length;b++){const E=x[b];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:l,lineLength:this.lineVertexArray.length-l}}addSymbols(t,o,l,f,y,x,b,E,C,P,D,B){const V=t.indexArray,U=t.layoutVertexArray,Z=t.segments.prepareSegment(4*o.length,U,V,this.canOverlap?x.sortKey:void 0),Y=this.glyphOffsetArray.length,ae=Z.vertexLength,we=this.allowVerticalPlacement&&b===m.ah.vertical?Math.PI/2:0,de=x.text&&x.text.sections;for(let xe=0;xe<o.length;xe++){const{tl:ze,tr:qe,bl:st,br:Ct,tex:lt,pixelOffsetTL:ot,pixelOffsetBR:bt,minFontScaleX:gt,minFontScaleY:ft,glyphOffset:Fe,isSDF:Et,sectionIndex:vt}=o[xe],zt=Z.vertexLength,xi=Fe[1];vd(U,E.x,E.y,ze.x,xi+ze.y,lt.x,lt.y,l,Et,ot.x,ot.y,gt,ft),vd(U,E.x,E.y,qe.x,xi+qe.y,lt.x+lt.w,lt.y,l,Et,bt.x,ot.y,gt,ft),vd(U,E.x,E.y,st.x,xi+st.y,lt.x,lt.y+lt.h,l,Et,ot.x,bt.y,gt,ft),vd(U,E.x,E.y,Ct.x,xi+Ct.y,lt.x+lt.w,lt.y+lt.h,l,Et,bt.x,bt.y,gt,ft),qp(t.dynamicLayoutVertexArray,E,we),V.emplaceBack(zt,zt+1,zt+2),V.emplaceBack(zt+1,zt+2,zt+3),Z.vertexLength+=4,Z.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Fe[0]),xe!==o.length-1&&vt===o[xe+1].sectionIndex||t.programConfigurations.populatePaintArrays(U.length,x,x.index,{},B,de&&de[vt])}t.placedSymbolArray.emplaceBack(E.x,E.y,Y,this.glyphOffsetArray.length-Y,ae,C,P,E.segment,l?l[0]:0,l?l[1]:0,f[0],f[1],b,0,!1,0,D)}_addCollisionDebugVertex(t,o,l,f,y,x){return o.emplaceBack(0,0),t.emplaceBack(l.x,l.y,f,y,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(t,o,l,f,y,x,b){const E=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),C=E.vertexLength,P=y.layoutVertexArray,D=y.collisionVertexArray,B=b.anchorX,V=b.anchorY;this._addCollisionDebugVertex(P,D,x,B,V,new A(t,o)),this._addCollisionDebugVertex(P,D,x,B,V,new A(l,o)),this._addCollisionDebugVertex(P,D,x,B,V,new A(l,f)),this._addCollisionDebugVertex(P,D,x,B,V,new A(t,f)),E.vertexLength+=4;const U=y.indexArray;U.emplaceBack(C,C+1),U.emplaceBack(C+1,C+2),U.emplaceBack(C+2,C+3),U.emplaceBack(C+3,C),E.primitiveLength+=4}addDebugCollisionBoxes(t,o,l,f){for(let y=t;y<o;y++){const x=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,f?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,l)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Gp(Lr,f_.members,Ni),this.iconCollisionBox=new Gp(Lr,f_.members,Ni);for(let t=0;t<this.symbolInstances.length;t++){const o=this.symbolInstances.get(t);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(t,o,l,f,y,x,b,E,C){const P={};for(let D=o;D<l;D++){const B=t.get(D);P.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},P.textFeatureIndex=B.featureIndex;break}for(let D=f;D<y;D++){const B=t.get(D);P.verticalTextBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},P.verticalTextFeatureIndex=B.featureIndex;break}for(let D=x;D<b;D++){const B=t.get(D);P.iconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},P.iconFeatureIndex=B.featureIndex;break}for(let D=E;D<C;D++){const B=t.get(D);P.verticalIconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},P.verticalIconFeatureIndex=B.featureIndex;break}return P}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,l.textBoxStartIndex,l.textBoxEndIndex,l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l.iconBoxStartIndex,l.iconBoxEndIndex,l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,o){const l=t.placedSymbolArray.get(o),f=l.vertexStartIndex+4*l.numGlyphs;for(let y=l.vertexStartIndex;y<f;y+=4)t.indexArray.emplaceBack(y,y+1,y+2),t.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const o=Math.sin(t),l=Math.cos(t),f=[],y=[],x=[];for(let b=0;b<this.symbolInstances.length;++b){x.push(b);const E=this.symbolInstances.get(b);f.push(0|Math.round(o*E.anchorX+l*E.anchorY)),y.push(E.featureIndex)}return x.sort((b,E)=>f[b]-f[E]||y[E]-y[b]),x}addToSortKeyRanges(t,o){const l=this.sortKeyRanges[this.sortKeyRanges.length-1];l&&l.sortKey===o?l.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const o of this.symbolInstanceIndexes){const l=this.symbolInstances.get(o);this.featureSortOrder.push(l.featureIndex),[l.rightJustifiedTextSymbolIndex,l.centerJustifiedTextSymbolIndex,l.leftJustifiedTextSymbolIndex].forEach((f,y,x)=>{f>=0&&x.indexOf(f)===y&&this.addIndicesForPlacedSymbol(this.text,f)}),l.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,l.verticalPlacedTextSymbolIndex),l.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.placedIconSymbolIndex),l.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,l.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let L_,P_;mt("SymbolBucket",Zl,{omit:["layers","collisionBoxArray","features","compareText"]}),Zl.MAX_GLYPHS=65535,Zl.addDynamicAttributes=qp;var Zp={get paint(){return P_=P_||new d({"icon-opacity":new At(le.paint_symbol["icon-opacity"]),"icon-color":new At(le.paint_symbol["icon-color"]),"icon-halo-color":new At(le.paint_symbol["icon-halo-color"]),"icon-halo-width":new At(le.paint_symbol["icon-halo-width"]),"icon-halo-blur":new At(le.paint_symbol["icon-halo-blur"]),"icon-translate":new wt(le.paint_symbol["icon-translate"]),"icon-translate-anchor":new wt(le.paint_symbol["icon-translate-anchor"]),"text-opacity":new At(le.paint_symbol["text-opacity"]),"text-color":new At(le.paint_symbol["text-color"],{runtimeType:pi,getOverride:r=>r.textColor,hasOverride:r=>!!r.textColor}),"text-halo-color":new At(le.paint_symbol["text-halo-color"]),"text-halo-width":new At(le.paint_symbol["text-halo-width"]),"text-halo-blur":new At(le.paint_symbol["text-halo-blur"]),"text-translate":new wt(le.paint_symbol["text-translate"]),"text-translate-anchor":new wt(le.paint_symbol["text-translate-anchor"])})},get layout(){return L_=L_||new d({"symbol-placement":new wt(le.layout_symbol["symbol-placement"]),"symbol-spacing":new wt(le.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new wt(le.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new At(le.layout_symbol["symbol-sort-key"]),"symbol-z-order":new wt(le.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new wt(le.layout_symbol["icon-allow-overlap"]),"icon-overlap":new wt(le.layout_symbol["icon-overlap"]),"icon-ignore-placement":new wt(le.layout_symbol["icon-ignore-placement"]),"icon-optional":new wt(le.layout_symbol["icon-optional"]),"icon-rotation-alignment":new wt(le.layout_symbol["icon-rotation-alignment"]),"icon-size":new At(le.layout_symbol["icon-size"]),"icon-text-fit":new wt(le.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new wt(le.layout_symbol["icon-text-fit-padding"]),"icon-image":new At(le.layout_symbol["icon-image"]),"icon-rotate":new At(le.layout_symbol["icon-rotate"]),"icon-padding":new At(le.layout_symbol["icon-padding"]),"icon-keep-upright":new wt(le.layout_symbol["icon-keep-upright"]),"icon-offset":new At(le.layout_symbol["icon-offset"]),"icon-anchor":new At(le.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new wt(le.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new wt(le.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new wt(le.layout_symbol["text-rotation-alignment"]),"text-field":new At(le.layout_symbol["text-field"]),"text-font":new At(le.layout_symbol["text-font"]),"text-size":new At(le.layout_symbol["text-size"]),"text-max-width":new At(le.layout_symbol["text-max-width"]),"text-line-height":new wt(le.layout_symbol["text-line-height"]),"text-letter-spacing":new At(le.layout_symbol["text-letter-spacing"]),"text-justify":new At(le.layout_symbol["text-justify"]),"text-radial-offset":new At(le.layout_symbol["text-radial-offset"]),"text-variable-anchor":new wt(le.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new At(le.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new At(le.layout_symbol["text-anchor"]),"text-max-angle":new wt(le.layout_symbol["text-max-angle"]),"text-writing-mode":new wt(le.layout_symbol["text-writing-mode"]),"text-rotate":new At(le.layout_symbol["text-rotate"]),"text-padding":new wt(le.layout_symbol["text-padding"]),"text-keep-upright":new wt(le.layout_symbol["text-keep-upright"]),"text-transform":new At(le.layout_symbol["text-transform"]),"text-offset":new At(le.layout_symbol["text-offset"]),"text-allow-overlap":new wt(le.layout_symbol["text-allow-overlap"]),"text-overlap":new wt(le.layout_symbol["text-overlap"]),"text-ignore-placement":new wt(le.layout_symbol["text-ignore-placement"]),"text-optional":new wt(le.layout_symbol["text-optional"])})}};class z_{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:Kr,this.defaultValue=t}evaluate(t){if(t.formattedSection){const o=this.defaultValue.property.overrides;if(o&&o.hasOverride(t.formattedSection))return o.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}mt("FormatSectionOverride",z_,{omit:["defaultValue"]});class xd extends v{constructor(t){super(t,Zp)}recalculate(t,o){if(super.recalculate(t,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const l=this.layout.get("text-writing-mode");if(l){const f=[];for(const y of l)f.indexOf(y)<0&&f.push(y);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,o,l,f){const y=this.layout.get(t).evaluate(o,{},l,f),x=this._unevaluatedLayout._values[t];return x.isDataDriven()||El(x.value)||!y?y:function(b,E){return E.replace(/{([^{}]+)}/g,(C,P)=>b&&P in b?String(b[P]):"")}(o.properties,y)}createBucket(t){return new Zl(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of Zp.paint.overridableProperties){if(!xd.hasPaintOverride(this.layout,t))continue;const o=this.paint.get(t),l=new z_(o),f=new Hc(l,o.property.specification);let y=null;y=o.value.kind==="constant"||o.value.kind==="source"?new Gc("source",f):new Zc("composite",f,o.value.zoomStops),this.paint._values[t]=new Hn(o.property,y,o.parameters)}}_handleOverridablePaintPropertyUpdate(t,o,l){return!(!this.layout||o.isDataDriven()||l.isDataDriven())&&xd.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,o){const l=t.get("text-field"),f=Zp.paint.properties[o];let y=!1;const x=b=>{for(const E of b)if(f.overrides&&f.overrides.hasOverride(E))return void(y=!0)};if(l.value.kind==="constant"&&l.value.value instanceof un)x(l.value.value.sections);else if(l.value.kind==="source"){const b=C=>{y||(C instanceof Uo&&nr(C.value)===no?x(C.value.sections):C instanceof ul?x(C.sections):C.eachChild(b))},E=l.value;E._styleExpression&&b(E._styleExpression.expression)}return y}}let D_;var uE={get paint(){return D_=D_||new d({"background-color":new wt(le.paint_background["background-color"]),"background-pattern":new i(le.paint_background["background-pattern"]),"background-opacity":new wt(le.paint_background["background-opacity"])})}};class hE extends v{constructor(t){super(t,uE)}}let R_;var dE={get paint(){return R_=R_||new d({"raster-opacity":new wt(le.paint_raster["raster-opacity"]),"raster-hue-rotate":new wt(le.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new wt(le.paint_raster["raster-brightness-min"]),"raster-brightness-max":new wt(le.paint_raster["raster-brightness-max"]),"raster-saturation":new wt(le.paint_raster["raster-saturation"]),"raster-contrast":new wt(le.paint_raster["raster-contrast"]),"raster-resampling":new wt(le.paint_raster["raster-resampling"]),"raster-fade-duration":new wt(le.paint_raster["raster-fade-duration"])})}};class fE extends v{constructor(t){super(t,dE)}}class pE extends v{constructor(t){super(t,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class mE{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Wp=63710088e-1;class Vs{constructor(t,o){if(isNaN(t)||isNaN(o))throw new Error(`Invalid LngLat object: (${t}, ${o})`);if(this.lng=+t,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Vs(ne(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const o=Math.PI/180,l=this.lat*o,f=t.lat*o,y=Math.sin(l)*Math.sin(f)+Math.cos(l)*Math.cos(f)*Math.cos((t.lng-this.lng)*o);return Wp*Math.acos(Math.min(y,1))}static convert(t){if(t instanceof Vs)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Vs(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Vs(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const O_=2*Math.PI*Wp;function B_(r){return O_*Math.cos(r*Math.PI/180)}function F_(r){return(180+r)/360}function V_(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function N_(r,t){return r/B_(t)}function Kp(r){return 360/Math.PI*Math.atan(Math.exp((180-360*r)*Math.PI/180))-90}class bd{constructor(t,o,l=0){this.x=+t,this.y=+o,this.z=+l}static fromLngLat(t,o=0){const l=Vs.convert(t);return new bd(F_(l.lng),V_(l.lat),N_(o,l.lat))}toLngLat(){return new Vs(360*this.x-180,Kp(this.y))}toAltitude(){return this.z*B_(Kp(this.y))}meterInMercatorCoordinateUnits(){return 1/O_*(t=Kp(this.y),1/Math.cos(t*Math.PI/180));var t}}function $_(r,t,o){var l=2*Math.PI*6378137/256/Math.pow(2,o);return[r*l-2*Math.PI*6378137/2,t*l-2*Math.PI*6378137/2]}class Xp{constructor(t,o,l){if(t<0||t>25||l<0||l>=Math.pow(2,t)||o<0||o>=Math.pow(2,t))throw new Error(`x=${o}, y=${l}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=o,this.y=l,this.key=Cu(0,t,t,o,l)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,o,l){const f=(x=this.y,b=this.z,E=$_(256*(y=this.x),256*(x=Math.pow(2,b)-x-1),b),C=$_(256*(y+1),256*(x+1),b),E[0]+","+E[1]+","+C[0]+","+C[1]);var y,x,b,E,C;const P=function(D,B,V){let U,Z="";for(let Y=D;Y>0;Y--)U=1<<Y-1,Z+=(B&U?1:0)+(V&U?2:0);return Z}(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(l==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,P).replace(/{bbox-epsg-3857}/g,f)}isChildOf(t){const o=this.z-t.z;return o>0&&t.x===this.x>>o&&t.y===this.y>>o}getTilePoint(t){const o=Math.pow(2,this.z);return new A((t.x*o-this.x)*or,(t.y*o-this.y)*or)}toString(){return`${this.z}/${this.x}/${this.y}`}}class j_{constructor(t,o){this.wrap=t,this.canonical=o,this.key=Cu(t,o.z,o.z,o.x,o.y)}}class Mn{constructor(t,o,l,f,y){if(t<l)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${l}`);this.overscaledZ=t,this.wrap=o,this.canonical=new Xp(l,+f,+y),this.key=Cu(o,t,l,f,y)}clone(){return new Mn(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const o=this.canonical.z-t;return t>this.canonical.z?new Mn(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Mn(t,this.wrap,t,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(t,o){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-t;return t>this.canonical.z?Cu(this.wrap*+o,t,this.canonical.z,this.canonical.x,this.canonical.y):Cu(this.wrap*+o,t,t,this.canonical.x>>l,this.canonical.y>>l)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const o=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>o&&t.canonical.y===this.canonical.y>>o}children(t){if(this.overscaledZ>=t)return[new Mn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const o=this.canonical.z+1,l=2*this.canonical.x,f=2*this.canonical.y;return[new Mn(o,this.wrap,o,l,f),new Mn(o,this.wrap,o,l+1,f),new Mn(o,this.wrap,o,l,f+1),new Mn(o,this.wrap,o,l+1,f+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new Mn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new Mn(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new j_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new bd(t.x-this.wrap,t.y))}}function Cu(r,t,o,l,f){(r*=2)<0&&(r=-1*r-1);const y=1<<o;return(y*y*r+y*f+l).toString(36)+o.toString(36)+t.toString(36)}mt("CanonicalTileID",Xp),mt("OverscaledTileID",Mn,{omit:["posMatrix"]});class U_{constructor(t,o,l,f=1,y=1,x=1,b=0){if(this.uid=t,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(l&&!["mapbox","terrarium","custom"].includes(l))return void Oe(`"${l}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;const E=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),l){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=y,this.blueFactor=x,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let C=0;C<E;C++)this.data[this._idx(-1,C)]=this.data[this._idx(0,C)],this.data[this._idx(E,C)]=this.data[this._idx(E-1,C)],this.data[this._idx(C,-1)]=this.data[this._idx(C,0)],this.data[this._idx(C,E)]=this.data[this._idx(C,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let C=0;C<E;C++)for(let P=0;P<E;P++){const D=this.get(C,P);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(t,o){const l=new Uint8Array(this.data.buffer),f=4*this._idx(t,o);return this.unpack(l[f],l[f+1],l[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,o){if(t<-1||t>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(t+1)}unpack(t,o,l){return t*this.redFactor+o*this.greenFactor+l*this.blueFactor-this.baseShift}getPixels(){return new kn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,o,l){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let f=o*this.dim,y=o*this.dim+this.dim,x=l*this.dim,b=l*this.dim+this.dim;switch(o){case-1:f=y-1;break;case 1:y=f+1}switch(l){case-1:x=b-1;break;case 1:b=x+1}const E=-o*this.dim,C=-l*this.dim;for(let P=x;P<b;P++)for(let D=f;D<y;D++)this.data[this._idx(D,P)]=t.data[this._idx(D+E,P+C)]}}mt("DEMData",U_);class q_{constructor(t){this._stringToNumber={},this._numberToString=[];for(let o=0;o<t.length;o++){const l=t[o];this._stringToNumber[l]=o,this._numberToString[o]=l}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class H_{constructor(t,o,l,f,y){this.type="Feature",this._vectorTileFeature=t,t._z=o,t._x=l,t._y=f,this.properties=t.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(t[o]=this[o]);return t}}class G_{constructor(t,o){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Aa(or,16,0),this.grid3D=new Aa(or,16,0),this.featureIndexArray=new Cn,this.promoteId=o}insert(t,o,l,f,y,x){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(l,f,y);const E=x?this.grid3D:this.grid;for(let C=0;C<o.length;C++){const P=o[C],D=[1/0,1/0,-1/0,-1/0];for(let B=0;B<P.length;B++){const V=P[B];D[0]=Math.min(D[0],V.x),D[1]=Math.min(D[1],V.y),D[2]=Math.max(D[2],V.x),D[3]=Math.max(D[3],V.y)}D[0]<or&&D[1]<or&&D[2]>=0&&D[3]>=0&&E.insert(b,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Os.VectorTile(new Fp(this.rawTileData)).layers,this.sourceLayerCoder=new q_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,o,l,f){this.loadVTLayers();const y=t.params||{},x=or/t.tileSize/t.scale,b=Wc(y.filter),E=t.queryGeometry,C=t.queryPadding*x,P=W_(E),D=this.grid.query(P.minX-C,P.minY-C,P.maxX+C,P.maxY+C),B=W_(t.cameraQueryGeometry),V=this.grid3D.query(B.minX-C,B.minY-C,B.maxX+C,B.maxY+C,(Y,ae,we,de)=>function(xe,ze,qe,st,Ct){for(const ot of xe)if(ze<=ot.x&&qe<=ot.y&&st>=ot.x&&Ct>=ot.y)return!0;const lt=[new A(ze,qe),new A(ze,Ct),new A(st,Ct),new A(st,qe)];if(xe.length>2){for(const ot of lt)if(Nl(xe,ot))return!0}for(let ot=0;ot<xe.length-1;ot++)if(Kw(xe[ot],xe[ot+1],lt))return!0;return!1}(t.cameraQueryGeometry,Y-C,ae-C,we+C,de+C));for(const Y of V)D.push(Y);D.sort(gE);const U={};let Z;for(let Y=0;Y<D.length;Y++){const ae=D[Y];if(ae===Z)continue;Z=ae;const we=this.featureIndexArray.get(ae);let de=null;this.loadMatchingFeature(U,we.bucketIndex,we.sourceLayerIndex,we.featureIndex,b,y.layers,y.availableImages,o,l,f,(xe,ze,qe)=>(de||(de=za(xe)),ze.queryIntersectsFeature(E,xe,qe,de,this.z,t.transform,x,t.pixelPosMatrix)))}return U}loadMatchingFeature(t,o,l,f,y,x,b,E,C,P,D){const B=this.bucketLayerIDs[o];if(x&&!function(Y,ae){for(let we=0;we<Y.length;we++)if(ae.indexOf(Y[we])>=0)return!0;return!1}(x,B))return;const V=this.sourceLayerCoder.decode(l),U=this.vtLayers[V].feature(f);if(y.needGeometry){const Y=Da(U,!0);if(!y.filter(new wi(this.tileID.overscaledZ),Y,this.tileID.canonical))return}else if(!y.filter(new wi(this.tileID.overscaledZ),U))return;const Z=this.getId(U,V);for(let Y=0;Y<B.length;Y++){const ae=B[Y];if(x&&x.indexOf(ae)<0)continue;const we=E[ae];if(!we)continue;let de={};Z&&P&&(de=P.getState(we.sourceLayer||"_geojsonTileLayer",Z));const xe=Ie({},C[ae]);xe.paint=Z_(xe.paint,we.paint,U,de,b),xe.layout=Z_(xe.layout,we.layout,U,de,b);const ze=!D||D(U,we,de);if(!ze)continue;const qe=new H_(U,this.z,this.x,this.y,Z);qe.layer=xe;let st=t[ae];st===void 0&&(st=t[ae]=[]),st.push({featureIndex:f,feature:qe,intersectionZ:ze})}}lookupSymbolFeatures(t,o,l,f,y,x,b,E){const C={};this.loadVTLayers();const P=Wc(y);for(const D of t)this.loadMatchingFeature(C,l,f,D,P,x,b,E,o);return C}hasLayer(t){for(const o of this.bucketLayerIDs)for(const l of o)if(t===l)return!0;return!1}getId(t,o){let l=t.id;return this.promoteId&&(l=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof l=="boolean"&&(l=Number(l))),l}}function Z_(r,t,o,l,f){return Me(r,(y,x)=>{const b=t instanceof zl?t.get(x):null;return b&&b.evaluate?b.evaluate(o,l,f):b})}function W_(r){let t=1/0,o=1/0,l=-1/0,f=-1/0;for(const y of r)t=Math.min(t,y.x),o=Math.min(o,y.y),l=Math.max(l,y.x),f=Math.max(f,y.y);return{minX:t,minY:o,maxX:l,maxY:f}}function gE(r,t){return t-r}function K_(r,t,o,l,f){const y=[];for(let x=0;x<r.length;x++){const b=r[x];let E;for(let C=0;C<b.length-1;C++){let P=b[C],D=b[C+1];P.x<t&&D.x<t||(P.x<t?P=new A(t,P.y+(t-P.x)/(D.x-P.x)*(D.y-P.y))._round():D.x<t&&(D=new A(t,P.y+(t-P.x)/(D.x-P.x)*(D.y-P.y))._round()),P.y<o&&D.y<o||(P.y<o?P=new A(P.x+(o-P.y)/(D.y-P.y)*(D.x-P.x),o)._round():D.y<o&&(D=new A(P.x+(o-P.y)/(D.y-P.y)*(D.x-P.x),o)._round()),P.x>=l&&D.x>=l||(P.x>=l?P=new A(l,P.y+(l-P.x)/(D.x-P.x)*(D.y-P.y))._round():D.x>=l&&(D=new A(l,P.y+(l-P.x)/(D.x-P.x)*(D.y-P.y))._round()),P.y>=f&&D.y>=f||(P.y>=f?P=new A(P.x+(f-P.y)/(D.y-P.y)*(D.x-P.x),f)._round():D.y>=f&&(D=new A(P.x+(f-P.y)/(D.y-P.y)*(D.x-P.x),f)._round()),E&&P.equals(E[E.length-1])||(E=[P],y.push(E)),E.push(D)))))}}return y}mt("FeatureIndex",G_,{omit:["rawTileData","sourceLayerCoder"]});class Ns extends A{constructor(t,o,l,f){super(t,o),this.angle=l,f!==void 0&&(this.segment=f)}clone(){return new Ns(this.x,this.y,this.angle,this.segment)}}function X_(r,t,o,l,f){if(t.segment===void 0||o===0)return!0;let y=t,x=t.segment+1,b=0;for(;b>-o/2;){if(x--,x<0)return!1;b-=r[x].dist(y),y=r[x]}b+=r[x].dist(r[x+1]),x++;const E=[];let C=0;for(;b<o/2;){const P=r[x],D=r[x+1];if(!D)return!1;let B=r[x-1].angleTo(P)-P.angleTo(D);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:b,angleDelta:B}),C+=B;b-E[0].distance>l;)C-=E.shift().angleDelta;if(C>f)return!1;x++,b+=P.dist(D)}return!0}function J_(r){let t=0;for(let o=0;o<r.length-1;o++)t+=r[o].dist(r[o+1]);return t}function Y_(r,t,o){return r?.6*t*o:0}function Q_(r,t){return Math.max(r?r.right-r.left:0,t?t.right-t.left:0)}function yE(r,t,o,l,f,y){const x=Y_(o,f,y),b=Q_(o,l)*y;let E=0;const C=J_(r)/2;for(let P=0;P<r.length-1;P++){const D=r[P],B=r[P+1],V=D.dist(B);if(E+V>C){const U=(C-E)/V,Z=Vr.number(D.x,B.x,U),Y=Vr.number(D.y,B.y,U),ae=new Ns(Z,Y,B.angleTo(D),P);return ae._round(),!x||X_(r,ae,b,x,t)?ae:void 0}E+=V}}function _E(r,t,o,l,f,y,x,b,E){const C=Y_(l,y,x),P=Q_(l,f),D=P*x,B=r[0].x===0||r[0].x===E||r[0].y===0||r[0].y===E;return t-D<t/4&&(t=D+t/4),e0(r,B?t/2*b%t:(P/2+2*y)*x*b%t,t,C,o,D,B,!1,E)}function e0(r,t,o,l,f,y,x,b,E){const C=y/2,P=J_(r);let D=0,B=t-o,V=[];for(let U=0;U<r.length-1;U++){const Z=r[U],Y=r[U+1],ae=Z.dist(Y),we=Y.angleTo(Z);for(;B+o<D+ae;){B+=o;const de=(B-D)/ae,xe=Vr.number(Z.x,Y.x,de),ze=Vr.number(Z.y,Y.y,de);if(xe>=0&&xe<E&&ze>=0&&ze<E&&B-C>=0&&B+C<=P){const qe=new Ns(xe,ze,we,U);qe._round(),l&&!X_(r,qe,y,l,f)||V.push(qe)}}D+=ae}return b||V.length||x||(V=e0(r,D/2,o,l,f,y,x,!0,E)),V}mt("Anchor",Ns);const Wl=mn;function t0(r,t,o,l){const f=[],y=r.image,x=y.pixelRatio,b=y.paddedRect.w-2*Wl,E=y.paddedRect.h-2*Wl;let C={x1:r.left,y1:r.top,x2:r.right,y2:r.bottom};const P=y.stretchX||[[0,b]],D=y.stretchY||[[0,E]],B=(Fe,Et)=>Fe+Et[1]-Et[0],V=P.reduce(B,0),U=D.reduce(B,0),Z=b-V,Y=E-U;let ae=0,we=V,de=0,xe=U,ze=0,qe=Z,st=0,Ct=Y;if(y.content&&l){const Fe=y.content,Et=Fe[2]-Fe[0],vt=Fe[3]-Fe[1];(y.textFitWidth||y.textFitHeight)&&(C=A_(r)),ae=wd(P,0,Fe[0]),de=wd(D,0,Fe[1]),we=wd(P,Fe[0],Fe[2]),xe=wd(D,Fe[1],Fe[3]),ze=Fe[0]-ae,st=Fe[1]-de,qe=Et-we,Ct=vt-xe}const lt=C.x1,ot=C.y1,bt=C.x2-lt,gt=C.y2-ot,ft=(Fe,Et,vt,zt)=>{const xi=Ed(Fe.stretch-ae,we,bt,lt),yi=Sd(Fe.fixed-ze,qe,Fe.stretch,V),_r=Ed(Et.stretch-de,xe,gt,ot),Gn=Sd(Et.fixed-st,Ct,Et.stretch,U),Dr=Ed(vt.stretch-ae,we,bt,lt),Xi=Sd(vt.fixed-ze,qe,vt.stretch,V),rn=Ed(zt.stretch-de,xe,gt,ot),nn=Sd(zt.fixed-st,Ct,zt.stretch,U),on=new A(xi,_r),Ji=new A(Dr,_r),vr=new A(Dr,rn),$r=new A(xi,rn),Rr=new A(yi/x,Gn/x),sn=new A(Xi/x,nn/x),Or=t*Math.PI/180;if(Or){const si=Math.sin(Or),Ei=Math.cos(Or),Mi=[Ei,-si,si,Ei];on._matMult(Mi),Ji._matMult(Mi),$r._matMult(Mi),vr._matMult(Mi)}const Ln=Fe.stretch+Fe.fixed,gn=Et.stretch+Et.fixed;return{tl:on,tr:Ji,bl:$r,br:vr,tex:{x:y.paddedRect.x+Wl+Ln,y:y.paddedRect.y+Wl+gn,w:vt.stretch+vt.fixed-Ln,h:zt.stretch+zt.fixed-gn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Rr,pixelOffsetBR:sn,minFontScaleX:qe/x/bt,minFontScaleY:Ct/x/gt,isSDF:o}};if(l&&(y.stretchX||y.stretchY)){const Fe=i0(P,Z,V),Et=i0(D,Y,U);for(let vt=0;vt<Fe.length-1;vt++){const zt=Fe[vt],xi=Fe[vt+1];for(let yi=0;yi<Et.length-1;yi++)f.push(ft(zt,Et[yi],xi,Et[yi+1]))}}else f.push(ft({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:E+1}));return f}function wd(r,t,o){let l=0;for(const f of r)l+=Math.max(t,Math.min(o,f[1]))-Math.max(t,Math.min(o,f[0]));return l}function i0(r,t,o){const l=[{fixed:-Wl,stretch:0}];for(const[f,y]of r){const x=l[l.length-1];l.push({fixed:f-x.stretch,stretch:x.stretch}),l.push({fixed:f-x.stretch,stretch:x.stretch+(y-f)})}return l.push({fixed:t+Wl,stretch:o}),l}function Ed(r,t,o,l){return r/t*o+l}function Sd(r,t,o,l){return r-t*o/l}class Td{constructor(t,o,l,f,y,x,b,E,C,P){var D;if(this.boxStartIndex=t.length,C){let B=x.top,V=x.bottom;const U=x.collisionPadding;U&&(B-=U[1],V+=U[3]);let Z=V-B;Z>0&&(Z=Math.max(10,Z),this.circleDiameter=Z)}else{const B=!((D=x.image)===null||D===void 0)&&D.content&&(x.image.textFitWidth||x.image.textFitHeight)?A_(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};B.y1=B.y1*b-E[0],B.y2=B.y2*b+E[2],B.x1=B.x1*b-E[3],B.x2=B.x2*b+E[1];const V=x.collisionPadding;if(V&&(B.x1-=V[0]*b,B.y1-=V[1]*b,B.x2+=V[2]*b,B.y2+=V[3]*b),P){const U=new A(B.x1,B.y1),Z=new A(B.x2,B.y1),Y=new A(B.x1,B.y2),ae=new A(B.x2,B.y2),we=P*Math.PI/180;U._rotate(we),Z._rotate(we),Y._rotate(we),ae._rotate(we),B.x1=Math.min(U.x,Z.x,Y.x,ae.x),B.x2=Math.max(U.x,Z.x,Y.x,ae.x),B.y1=Math.min(U.y,Z.y,Y.y,ae.y),B.y2=Math.max(U.y,Z.y,Y.y,ae.y)}t.emplaceBack(o.x,o.y,B.x1,B.y1,B.x2,B.y2,l,f,y)}this.boxEndIndex=t.length}}class vE{constructor(t=[],o=xE){if(this.data=t,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const t=this.data[0],o=this.data.pop();return this.length--,this.length>0&&(this.data[0]=o,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:o,compare:l}=this,f=o[t];for(;t>0;){const y=t-1>>1,x=o[y];if(l(f,x)>=0)break;o[t]=x,t=y}o[t]=f}_down(t){const{data:o,compare:l}=this,f=this.length>>1,y=o[t];for(;t<f;){let x=1+(t<<1),b=o[x];const E=x+1;if(E<this.length&&l(o[E],b)<0&&(x=E,b=o[E]),l(b,y)>=0)break;o[t]=b,t=x}o[t]=y}}function xE(r,t){return r<t?-1:r>t?1:0}function bE(r,t=1,o=!1){let l=1/0,f=1/0,y=-1/0,x=-1/0;const b=r[0];for(let V=0;V<b.length;V++){const U=b[V];(!V||U.x<l)&&(l=U.x),(!V||U.y<f)&&(f=U.y),(!V||U.x>y)&&(y=U.x),(!V||U.y>x)&&(x=U.y)}const E=Math.min(y-l,x-f);let C=E/2;const P=new vE([],wE);if(E===0)return new A(l,f);for(let V=l;V<y;V+=E)for(let U=f;U<x;U+=E)P.push(new Kl(V+C,U+C,C,r));let D=function(V){let U=0,Z=0,Y=0;const ae=V[0];for(let we=0,de=ae.length,xe=de-1;we<de;xe=we++){const ze=ae[we],qe=ae[xe],st=ze.x*qe.y-qe.x*ze.y;Z+=(ze.x+qe.x)*st,Y+=(ze.y+qe.y)*st,U+=3*st}return new Kl(Z/U,Y/U,0,V)}(r),B=P.length;for(;P.length;){const V=P.pop();(V.d>D.d||!D.d)&&(D=V,o&&console.log("found best %d after %d probes",Math.round(1e4*V.d)/1e4,B)),V.max-D.d<=t||(C=V.h/2,P.push(new Kl(V.p.x-C,V.p.y-C,C,r)),P.push(new Kl(V.p.x+C,V.p.y-C,C,r)),P.push(new Kl(V.p.x-C,V.p.y+C,C,r)),P.push(new Kl(V.p.x+C,V.p.y+C,C,r)),B+=4)}return o&&(console.log(`num probes: ${B}`),console.log(`best distance: ${D.d}`)),D.p}function wE(r,t){return t.max-r.max}function Kl(r,t,o,l){this.p=new A(r,t),this.h=o,this.d=function(f,y){let x=!1,b=1/0;for(let E=0;E<y.length;E++){const C=y[E];for(let P=0,D=C.length,B=D-1;P<D;B=P++){const V=C[P],U=C[B];V.y>f.y!=U.y>f.y&&f.x<(U.x-V.x)*(f.y-V.y)/(U.y-V.y)+V.x&&(x=!x),b=Math.min(b,Vy(f,V,U))}}return(x?1:-1)*Math.sqrt(b)}(this.p,l),this.max=this.d+this.h*Math.SQRT2}var zr;m.aq=void 0,(zr=m.aq||(m.aq={}))[zr.center=1]="center",zr[zr.left=2]="left",zr[zr.right=3]="right",zr[zr.top=4]="top",zr[zr.bottom=5]="bottom",zr[zr["top-left"]=6]="top-left",zr[zr["top-right"]=7]="top-right",zr[zr["bottom-left"]=8]="bottom-left",zr[zr["bottom-right"]=9]="bottom-right";const $s=7,Jp=Number.POSITIVE_INFINITY;function r0(r,t){return t[1]!==Jp?function(o,l,f){let y=0,x=0;switch(l=Math.abs(l),f=Math.abs(f),o){case"top-right":case"top-left":case"top":x=f-$s;break;case"bottom-right":case"bottom-left":case"bottom":x=-f+$s}switch(o){case"top-right":case"bottom-right":case"right":y=-l;break;case"top-left":case"bottom-left":case"left":y=l}return[y,x]}(r,t[0],t[1]):function(o,l){let f=0,y=0;l<0&&(l=0);const x=l/Math.SQRT2;switch(o){case"top-right":case"top-left":y=x-$s;break;case"bottom-right":case"bottom-left":y=-x+$s;break;case"bottom":y=-l+$s;break;case"top":y=l-$s}switch(o){case"top-right":case"bottom-right":f=-x;break;case"top-left":case"bottom-left":f=x;break;case"left":f=l;break;case"right":f=-l}return[f,y]}(r,t[0])}function n0(r,t,o){var l;const f=r.layout,y=(l=f.get("text-variable-anchor-offset"))===null||l===void 0?void 0:l.evaluate(t,{},o);if(y){const b=y.values,E=[];for(let C=0;C<b.length;C+=2){const P=E[C]=b[C],D=b[C+1].map(B=>B*dr);P.startsWith("top")?D[1]-=$s:P.startsWith("bottom")&&(D[1]+=$s),E[C+1]=D}return new Yr(E)}const x=f.get("text-variable-anchor");if(x){let b;b=r._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(t,{},o)*dr,Jp]:f.get("text-offset").evaluate(t,{},o).map(C=>C*dr);const E=[];for(const C of x)E.push(C,r0(C,b));return new Yr(E)}return null}function Yp(r){switch(r){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function EE(r,t,o,l,f,y,x,b,E,C,P){let D=y.textMaxSize.evaluate(t,{});D===void 0&&(D=x);const B=r.layers[0].layout,V=B.get("icon-offset").evaluate(t,{},P),U=s0(o.horizontal),Z=x/24,Y=r.tilePixelRatio*Z,ae=r.tilePixelRatio*D/24,we=r.tilePixelRatio*b,de=r.tilePixelRatio*B.get("symbol-spacing"),xe=B.get("text-padding")*r.tilePixelRatio,ze=function(Fe,Et,vt,zt=1){const xi=Fe.get("icon-padding").evaluate(Et,{},vt),yi=xi&&xi.values;return[yi[0]*zt,yi[1]*zt,yi[2]*zt,yi[3]*zt]}(B,t,P,r.tilePixelRatio),qe=B.get("text-max-angle")/180*Math.PI,st=B.get("text-rotation-alignment")!=="viewport"&&B.get("symbol-placement")!=="point",Ct=B.get("icon-rotation-alignment")==="map"&&B.get("symbol-placement")!=="point",lt=B.get("symbol-placement"),ot=de/2,bt=B.get("icon-text-fit");let gt;l&&bt!=="none"&&(r.allowVerticalPlacement&&o.vertical&&(gt=k_(l,o.vertical,bt,B.get("icon-text-fit-padding"),V,Z)),U&&(l=k_(l,U,bt,B.get("icon-text-fit-padding"),V,Z)));const ft=(Fe,Et)=>{Et.x<0||Et.x>=or||Et.y<0||Et.y>=or||function(vt,zt,xi,yi,_r,Gn,Dr,Xi,rn,nn,on,Ji,vr,$r,Rr,sn,Or,Ln,gn,si,Ei,Mi,wn,qi,Xl){const Ao=vt.addToLineVertexArray(zt,xi);let ko,Zn,Pn,Sr,rs=0,Mu=0,u0=0,h0=0,sm=-1,am=-1;const ns={};let d0=Fl("");if(vt.allowVerticalPlacement&&yi.vertical){const jr=Xi.layout.get("text-rotate").evaluate(Ei,{},qi)+90;Pn=new Td(rn,zt,nn,on,Ji,yi.vertical,vr,$r,Rr,jr),Dr&&(Sr=new Td(rn,zt,nn,on,Ji,Dr,Or,Ln,Rr,jr))}if(_r){const jr=Xi.layout.get("icon-rotate").evaluate(Ei,{}),zn=Xi.layout.get("icon-text-fit")!=="none",Oa=t0(_r,jr,wn,zn),fo=Dr?t0(Dr,jr,wn,zn):void 0;Zn=new Td(rn,zt,nn,on,Ji,_r,Or,Ln,!1,jr),rs=4*Oa.length;const Ba=vt.iconSizeData;let Mo=null;Ba.kind==="source"?(Mo=[Co*Xi.layout.get("icon-size").evaluate(Ei,{})],Mo[0]>Fs&&Oe(`${vt.layerIds[0]}: Value for "icon-size" is >= ${Iu}. Reduce your "icon-size".`)):Ba.kind==="composite"&&(Mo=[Co*Mi.compositeIconSizes[0].evaluate(Ei,{},qi),Co*Mi.compositeIconSizes[1].evaluate(Ei,{},qi)],(Mo[0]>Fs||Mo[1]>Fs)&&Oe(`${vt.layerIds[0]}: Value for "icon-size" is >= ${Iu}. Reduce your "icon-size".`)),vt.addSymbols(vt.icon,Oa,Mo,si,gn,Ei,m.ah.none,zt,Ao.lineStartIndex,Ao.lineLength,-1,qi),sm=vt.icon.placedSymbolArray.length-1,fo&&(Mu=4*fo.length,vt.addSymbols(vt.icon,fo,Mo,si,gn,Ei,m.ah.vertical,zt,Ao.lineStartIndex,Ao.lineLength,-1,qi),am=vt.icon.placedSymbolArray.length-1)}const f0=Object.keys(yi.horizontal);for(const jr of f0){const zn=yi.horizontal[jr];if(!ko){d0=Fl(zn.text);const fo=Xi.layout.get("text-rotate").evaluate(Ei,{},qi);ko=new Td(rn,zt,nn,on,Ji,zn,vr,$r,Rr,fo)}const Oa=zn.positionedLines.length===1;if(u0+=o0(vt,zt,zn,Gn,Xi,Rr,Ei,sn,Ao,yi.vertical?m.ah.horizontal:m.ah.horizontalOnly,Oa?f0:[jr],ns,sm,Mi,qi),Oa)break}yi.vertical&&(h0+=o0(vt,zt,yi.vertical,Gn,Xi,Rr,Ei,sn,Ao,m.ah.vertical,["vertical"],ns,am,Mi,qi));const IE=ko?ko.boxStartIndex:vt.collisionBoxArray.length,CE=ko?ko.boxEndIndex:vt.collisionBoxArray.length,AE=Pn?Pn.boxStartIndex:vt.collisionBoxArray.length,kE=Pn?Pn.boxEndIndex:vt.collisionBoxArray.length,ME=Zn?Zn.boxStartIndex:vt.collisionBoxArray.length,LE=Zn?Zn.boxEndIndex:vt.collisionBoxArray.length,PE=Sr?Sr.boxStartIndex:vt.collisionBoxArray.length,zE=Sr?Sr.boxEndIndex:vt.collisionBoxArray.length;let ho=-1;const Cd=(jr,zn)=>jr&&jr.circleDiameter?Math.max(jr.circleDiameter,zn):zn;ho=Cd(ko,ho),ho=Cd(Pn,ho),ho=Cd(Zn,ho),ho=Cd(Sr,ho);const p0=ho>-1?1:0;p0&&(ho*=Xl/dr),vt.glyphOffsetArray.length>=Zl.MAX_GLYPHS&&Oe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ei.sortKey!==void 0&&vt.addToSortKeyRanges(vt.symbolInstances.length,Ei.sortKey);const DE=n0(Xi,Ei,qi),[RE,OE]=function(jr,zn){const Oa=jr.length,fo=zn==null?void 0:zn.values;if((fo==null?void 0:fo.length)>0)for(let Ba=0;Ba<fo.length;Ba+=2){const Mo=fo[Ba+1];jr.emplaceBack(m.aq[fo[Ba]],Mo[0],Mo[1])}return[Oa,jr.length]}(vt.textAnchorOffsets,DE);vt.symbolInstances.emplaceBack(zt.x,zt.y,ns.right>=0?ns.right:-1,ns.center>=0?ns.center:-1,ns.left>=0?ns.left:-1,ns.vertical||-1,sm,am,d0,IE,CE,AE,kE,ME,LE,PE,zE,nn,u0,h0,rs,Mu,p0,0,vr,ho,RE,OE)}(r,Et,Fe,o,l,f,gt,r.layers[0],r.collisionBoxArray,t.index,t.sourceLayerIndex,r.index,Y,[xe,xe,xe,xe],st,E,we,ze,Ct,V,t,y,C,P,x)};if(lt==="line")for(const Fe of K_(t.geometry,0,0,or,or)){const Et=_E(Fe,de,qe,o.vertical||U,l,24,ae,r.overscaling,or);for(const vt of Et)U&&SE(r,U.text,ot,vt)||ft(Fe,vt)}else if(lt==="line-center"){for(const Fe of t.geometry)if(Fe.length>1){const Et=yE(Fe,qe,o.vertical||U,l,24,ae);Et&&ft(Fe,Et)}}else if(t.type==="Polygon")for(const Fe of dl(t.geometry,0)){const Et=bE(Fe,16);ft(Fe[0],new Ns(Et.x,Et.y,0))}else if(t.type==="LineString")for(const Fe of t.geometry)ft(Fe,new Ns(Fe[0].x,Fe[0].y,0));else if(t.type==="Point")for(const Fe of t.geometry)for(const Et of Fe)ft([Et],new Ns(Et.x,Et.y,0))}function o0(r,t,o,l,f,y,x,b,E,C,P,D,B,V,U){const Z=function(we,de,xe,ze,qe,st,Ct,lt){const ot=ze.layout.get("text-rotate").evaluate(st,{})*Math.PI/180,bt=[];for(const gt of de.positionedLines)for(const ft of gt.positionedGlyphs){if(!ft.rect)continue;const Fe=ft.rect||{};let Et=b_+1,vt=!0,zt=1,xi=0;const yi=(qe||lt)&&ft.vertical,_r=ft.metrics.advance*ft.scale/2;if(lt&&de.verticalizable&&(xi=gt.lineOffset/2-(ft.imageName?-(dr-ft.metrics.width*ft.scale)/2:(ft.scale-1)*dr)),ft.imageName){const si=Ct[ft.imageName];vt=si.sdf,zt=si.pixelRatio,Et=mn/zt}const Gn=qe?[ft.x+_r,ft.y]:[0,0];let Dr=qe?[0,0]:[ft.x+_r+xe[0],ft.y+xe[1]-xi],Xi=[0,0];yi&&(Xi=Dr,Dr=[0,0]);const rn=ft.metrics.isDoubleResolution?2:1,nn=(ft.metrics.left-Et)*ft.scale-_r+Dr[0],on=(-ft.metrics.top-Et)*ft.scale+Dr[1],Ji=nn+Fe.w/rn*ft.scale/zt,vr=on+Fe.h/rn*ft.scale/zt,$r=new A(nn,on),Rr=new A(Ji,on),sn=new A(nn,vr),Or=new A(Ji,vr);if(yi){const si=new A(-_r,_r-Su),Ei=-Math.PI/2,Mi=dr/2-_r,wn=new A(5-Su-Mi,-(ft.imageName?Mi:0)),qi=new A(...Xi);$r._rotateAround(Ei,si)._add(wn)._add(qi),Rr._rotateAround(Ei,si)._add(wn)._add(qi),sn._rotateAround(Ei,si)._add(wn)._add(qi),Or._rotateAround(Ei,si)._add(wn)._add(qi)}if(ot){const si=Math.sin(ot),Ei=Math.cos(ot),Mi=[Ei,-si,si,Ei];$r._matMult(Mi),Rr._matMult(Mi),sn._matMult(Mi),Or._matMult(Mi)}const Ln=new A(0,0),gn=new A(0,0);bt.push({tl:$r,tr:Rr,bl:sn,br:Or,tex:Fe,writingMode:de.writingMode,glyphOffset:Gn,sectionIndex:ft.sectionIndex,isSDF:vt,pixelOffsetTL:Ln,pixelOffsetBR:gn,minFontScaleX:0,minFontScaleY:0})}return bt}(0,o,b,f,y,x,l,r.allowVerticalPlacement),Y=r.textSizeData;let ae=null;Y.kind==="source"?(ae=[Co*f.layout.get("text-size").evaluate(x,{})],ae[0]>Fs&&Oe(`${r.layerIds[0]}: Value for "text-size" is >= ${Iu}. Reduce your "text-size".`)):Y.kind==="composite"&&(ae=[Co*V.compositeTextSizes[0].evaluate(x,{},U),Co*V.compositeTextSizes[1].evaluate(x,{},U)],(ae[0]>Fs||ae[1]>Fs)&&Oe(`${r.layerIds[0]}: Value for "text-size" is >= ${Iu}. Reduce your "text-size".`)),r.addSymbols(r.text,Z,ae,b,y,x,C,t,E.lineStartIndex,E.lineLength,B,U);for(const we of P)D[we]=r.text.placedSymbolArray.length-1;return 4*Z.length}function s0(r){for(const t in r)return r[t];return null}function SE(r,t,o,l){const f=r.compareText;if(t in f){const y=f[t];for(let x=y.length-1;x>=0;x--)if(l.dist(y[x])<o)return!0}else f[t]=[];return f[t].push(l),!1}const a0=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Qp{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[o,l]=new Uint8Array(t,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=l>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const y=a0[15&l];if(!y)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(t,2,1),[b]=new Uint32Array(t,4,1);return new Qp(b,x,y,t)}constructor(t,o=64,l=Float64Array,f){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=l,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const y=a0.indexOf(this.ArrayType),x=2*t*this.ArrayType.BYTES_PER_ELEMENT,b=t*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-b%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${l}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+b+E,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+x+b+E),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+b+E,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=t)}add(t,o){const l=this._pos>>1;return this.ids[l]=l,this.coords[this._pos++]=t,this.coords[this._pos++]=o,l}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return em(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,o,l,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:y,coords:x,nodeSize:b}=this,E=[0,y.length-1,0],C=[];for(;E.length;){const P=E.pop()||0,D=E.pop()||0,B=E.pop()||0;if(D-B<=b){for(let Y=B;Y<=D;Y++){const ae=x[2*Y],we=x[2*Y+1];ae>=t&&ae<=l&&we>=o&&we<=f&&C.push(y[Y])}continue}const V=B+D>>1,U=x[2*V],Z=x[2*V+1];U>=t&&U<=l&&Z>=o&&Z<=f&&C.push(y[V]),(P===0?t<=U:o<=Z)&&(E.push(B),E.push(V-1),E.push(1-P)),(P===0?l>=U:f>=Z)&&(E.push(V+1),E.push(D),E.push(1-P))}return C}within(t,o,l){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:y,nodeSize:x}=this,b=[0,f.length-1,0],E=[],C=l*l;for(;b.length;){const P=b.pop()||0,D=b.pop()||0,B=b.pop()||0;if(D-B<=x){for(let Y=B;Y<=D;Y++)c0(y[2*Y],y[2*Y+1],t,o)<=C&&E.push(f[Y]);continue}const V=B+D>>1,U=y[2*V],Z=y[2*V+1];c0(U,Z,t,o)<=C&&E.push(f[V]),(P===0?t-l<=U:o-l<=Z)&&(b.push(B),b.push(V-1),b.push(1-P)),(P===0?t+l>=U:o+l>=Z)&&(b.push(V+1),b.push(D),b.push(1-P))}return E}}function em(r,t,o,l,f,y){if(f-l<=o)return;const x=l+f>>1;l0(r,t,x,l,f,y),em(r,t,o,l,x-1,1-y),em(r,t,o,x+1,f,1-y)}function l0(r,t,o,l,f,y){for(;f>l;){if(f-l>600){const C=f-l+1,P=o-l+1,D=Math.log(C),B=.5*Math.exp(2*D/3),V=.5*Math.sqrt(D*B*(C-B)/C)*(P-C/2<0?-1:1);l0(r,t,o,Math.max(l,Math.floor(o-P*B/C+V)),Math.min(f,Math.floor(o+(C-P)*B/C+V)),y)}const x=t[2*o+y];let b=l,E=f;for(Au(r,t,l,o),t[2*f+y]>x&&Au(r,t,l,f);b<E;){for(Au(r,t,b,E),b++,E--;t[2*b+y]<x;)b++;for(;t[2*E+y]>x;)E--}t[2*l+y]===x?Au(r,t,l,E):(E++,Au(r,t,E,f)),E<=o&&(l=E+1),o<=E&&(f=E-1)}}function Au(r,t,o,l){tm(r,o,l),tm(t,2*o,2*l),tm(t,2*o+1,2*l+1)}function tm(r,t,o){const l=r[t];r[t]=r[o],r[o]=l}function c0(r,t,o,l){const f=r-o,y=t-l;return f*f+y*y}var im;m.be=void 0,(im=m.be||(m.be={})).create="create",im.load="load",im.fullLoad="fullLoad";let Id=null,ku=[];const rm=1e3/60,nm="loadTime",om="fullLoadTime",TE={mark(r){performance.mark(r)},frame(r){const t=r;Id!=null&&ku.push(t-Id),Id=t},clearMetrics(){Id=null,ku=[],performance.clearMeasures(nm),performance.clearMeasures(om);for(const r in m.be)performance.clearMarks(m.be[r])},getPerformanceMetrics(){performance.measure(nm,m.be.create,m.be.load),performance.measure(om,m.be.create,m.be.fullLoad);const r=performance.getEntriesByName(nm)[0].duration,t=performance.getEntriesByName(om)[0].duration,o=ku.length,l=1/(ku.reduce((y,x)=>y+x,0)/o/1e3),f=ku.filter(y=>y>rm).reduce((y,x)=>y+(x-rm)/rm,0);return{loadTime:r,fullLoadTime:t,fps:l,percentDroppedFrames:f/(o+f)*100,totalFrames:o}}};m.$=hr,m.A=$l,m.B=function(r){if(Ke==null){const t=r.navigator?r.navigator.userAgent:null;Ke=!!r.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Ke},m.C=class{constructor(r,t){this.target=r,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new mE(()=>this.process()),this.subscription=function(o,l,f,y){return o.addEventListener(l,f,!1),{unsubscribe:()=>{o.removeEventListener(l,f,!1)}}}(this.target,"message",o=>this.receive(o)),this.globalScope=rt(self)?r:window}registerMessageHandler(r,t){this.messageHandlers[r]=t}sendAsync(r,t){return new Promise((o,l)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[f]={resolve:o,reject:l},t&&t.signal.addEventListener("abort",()=>{delete this.resolveRejects[f];const b={id:f,type:"<cancel>",origin:location.origin,targetMapId:r.targetMapId,sourceMapId:this.mapId};this.target.postMessage(b)},{once:!0});const y=[],x=Object.assign(Object.assign({},r),{id:f,sourceMapId:this.mapId,origin:location.origin,data:ka(r.data,y)});this.target.postMessage(x,{transfer:y})})}receive(r){const t=r.data,o=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[o];const l=this.abortControllers[o];return delete this.abortControllers[o],void(l&&l.abort())}if(rt(self)||t.mustQueue)return this.tasks[o]=t,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,t)}}process(){if(this.taskQueue.length===0)return;const r=this.taskQueue.shift(),t=this.tasks[r];delete this.tasks[r],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(r,t)}processTask(r,t){return c(this,void 0,void 0,function*(){if(t.type==="<response>"){const f=this.resolveRejects[r];return delete this.resolveRejects[r],f?void(t.error?f.reject(qn(t.error)):f.resolve(qn(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(r,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const o=qn(t.data),l=new AbortController;this.abortControllers[r]=l;try{const f=yield this.messageHandlers[t.type](t.sourceMapId,o,l);this.completeTask(r,null,f)}catch(f){this.completeTask(r,f)}})}completeTask(r,t,o){const l=[];delete this.abortControllers[r];const f={id:r,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?ka(t):null,data:ka(o,l)};this.target.postMessage(f,{transfer:l})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.D=wt,m.E=Be,m.F=function(){var r=new $l(16);return $l!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r},m.G=fi,m.H=function(r,t,o){var l,f,y,x,b,E,C,P,D,B,V,U,Z=o[0],Y=o[1],ae=o[2];return t===r?(r[12]=t[0]*Z+t[4]*Y+t[8]*ae+t[12],r[13]=t[1]*Z+t[5]*Y+t[9]*ae+t[13],r[14]=t[2]*Z+t[6]*Y+t[10]*ae+t[14],r[15]=t[3]*Z+t[7]*Y+t[11]*ae+t[15]):(f=t[1],y=t[2],x=t[3],b=t[4],E=t[5],C=t[6],P=t[7],D=t[8],B=t[9],V=t[10],U=t[11],r[0]=l=t[0],r[1]=f,r[2]=y,r[3]=x,r[4]=b,r[5]=E,r[6]=C,r[7]=P,r[8]=D,r[9]=B,r[10]=V,r[11]=U,r[12]=l*Z+b*Y+D*ae+t[12],r[13]=f*Z+E*Y+B*ae+t[13],r[14]=y*Z+C*Y+V*ae+t[14],r[15]=x*Z+P*Y+U*ae+t[15]),r},m.I=Np,m.J=function(r,t,o){var l=o[0],f=o[1],y=o[2];return r[0]=t[0]*l,r[1]=t[1]*l,r[2]=t[2]*l,r[3]=t[3]*l,r[4]=t[4]*f,r[5]=t[5]*f,r[6]=t[6]*f,r[7]=t[7]*f,r[8]=t[8]*y,r[9]=t[9]*y,r[10]=t[10]*y,r[11]=t[11]*y,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},m.K=Uy,m.L=function(r,t){const o={};for(let l=0;l<t.length;l++){const f=t[l];f in r&&(o[f]=r[f])}return o},m.M=Vs,m.N=F_,m.O=V_,m.P=A,m.Q=Mn,m.R=kn,m.S=Te,m.T=Ms,m.U=ye,m.V=ti,m.W=or,m.X=z,m.Y=bd,m.Z=class extends G{},m._=c,m.a=Qi,m.a$=function(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r},m.a0=Xp,m.a1=$e,m.a2=r=>{const t=window.document.createElement("video");return t.muted=!0,new Promise(o=>{t.onloadstart=()=>{o(t)};for(const l of r){const f=window.document.createElement("source");pr(l)||(t.crossOrigin="Anonymous"),f.src=l,t.appendChild(f)}})},m.a3=function(){return Ee++},m.a4=Wt,m.a5=Zl,m.a6=Wc,m.a7=Da,m.a8=wi,m.a9=H_,m.aA=function(r){if(r.type==="custom")return new pE(r);switch(r.type){case"background":return new hE(r);case"circle":return new Yw(r);case"fill":return new m2(r);case"fill-extrusion":return new M2(r);case"heatmap":return new e2(r);case"hillshade":return new i2(r);case"line":return new F2(r);case"raster":return new fE(r);case"symbol":return new xd(r)}},m.aB=Ae,m.aC=function(r,t){if(!r)return[{command:"setStyle",args:[t]}];let o=[];try{if(!Ze(r.version,t.version))return[{command:"setStyle",args:[t]}];Ze(r.center,t.center)||o.push({command:"setCenter",args:[t.center]}),Ze(r.zoom,t.zoom)||o.push({command:"setZoom",args:[t.zoom]}),Ze(r.bearing,t.bearing)||o.push({command:"setBearing",args:[t.bearing]}),Ze(r.pitch,t.pitch)||o.push({command:"setPitch",args:[t.pitch]}),Ze(r.sprite,t.sprite)||o.push({command:"setSprite",args:[t.sprite]}),Ze(r.glyphs,t.glyphs)||o.push({command:"setGlyphs",args:[t.glyphs]}),Ze(r.transition,t.transition)||o.push({command:"setTransition",args:[t.transition]}),Ze(r.light,t.light)||o.push({command:"setLight",args:[t.light]}),Ze(r.terrain,t.terrain)||o.push({command:"setTerrain",args:[t.terrain]}),Ze(r.sky,t.sky)||o.push({command:"setSky",args:[t.sky]}),Ze(r.projection,t.projection)||o.push({command:"setProjection",args:[t.projection]});const l={},f=[];(function(x,b,E,C){let P;for(P in b=b||{},x=x||{})Object.prototype.hasOwnProperty.call(x,P)&&(Object.prototype.hasOwnProperty.call(b,P)||We(P,E,C));for(P in b)Object.prototype.hasOwnProperty.call(b,P)&&(Object.prototype.hasOwnProperty.call(x,P)?Ze(x[P],b[P])||(x[P].type==="geojson"&&b[P].type==="geojson"&&Tt(x,b,P)?je(E,{command:"setGeoJSONSourceData",args:[P,b[P].data]}):pt(P,b,E,C)):Qe(P,b,E))})(r.sources,t.sources,f,l);const y=[];r.layers&&r.layers.forEach(x=>{"source"in x&&l[x.source]?o.push({command:"removeLayer",args:[x.id]}):y.push(x)}),o=o.concat(f),function(x,b,E){b=b||[];const C=(x=x||[]).map(Lt),P=b.map(Lt),D=x.reduce(Ht,{}),B=b.reduce(Ht,{}),V=C.slice(),U=Object.create(null);let Z,Y,ae,we,de;for(let xe=0,ze=0;xe<C.length;xe++)Z=C[xe],Object.prototype.hasOwnProperty.call(B,Z)?ze++:(je(E,{command:"removeLayer",args:[Z]}),V.splice(V.indexOf(Z,ze),1));for(let xe=0,ze=0;xe<P.length;xe++)Z=P[P.length-1-xe],V[V.length-1-xe]!==Z&&(Object.prototype.hasOwnProperty.call(D,Z)?(je(E,{command:"removeLayer",args:[Z]}),V.splice(V.lastIndexOf(Z,V.length-ze),1)):ze++,we=V[V.length-xe],je(E,{command:"addLayer",args:[B[Z],we]}),V.splice(V.length-xe,0,Z),U[Z]=!0);for(let xe=0;xe<P.length;xe++)if(Z=P[xe],Y=D[Z],ae=B[Z],!U[Z]&&!Ze(Y,ae))if(Ze(Y.source,ae.source)&&Ze(Y["source-layer"],ae["source-layer"])&&Ze(Y.type,ae.type)){for(de in xt(Y.layout,ae.layout,E,Z,null,"setLayoutProperty"),xt(Y.paint,ae.paint,E,Z,null,"setPaintProperty"),Ze(Y.filter,ae.filter)||je(E,{command:"setFilter",args:[Z,ae.filter]}),Ze(Y.minzoom,ae.minzoom)&&Ze(Y.maxzoom,ae.maxzoom)||je(E,{command:"setLayerZoomRange",args:[Z,ae.minzoom,ae.maxzoom]}),Y)Object.prototype.hasOwnProperty.call(Y,de)&&de!=="layout"&&de!=="paint"&&de!=="filter"&&de!=="metadata"&&de!=="minzoom"&&de!=="maxzoom"&&(de.indexOf("paint.")===0?xt(Y[de],ae[de],E,Z,de.slice(6),"setPaintProperty"):Ze(Y[de],ae[de])||je(E,{command:"setLayerProperty",args:[Z,de,ae[de]]}));for(de in ae)Object.prototype.hasOwnProperty.call(ae,de)&&!Object.prototype.hasOwnProperty.call(Y,de)&&de!=="layout"&&de!=="paint"&&de!=="filter"&&de!=="metadata"&&de!=="minzoom"&&de!=="maxzoom"&&(de.indexOf("paint.")===0?xt(Y[de],ae[de],E,Z,de.slice(6),"setPaintProperty"):Ze(Y[de],ae[de])||je(E,{command:"setLayerProperty",args:[Z,de,ae[de]]}))}else je(E,{command:"removeLayer",args:[Z]}),we=V[V.lastIndexOf(Z)+1],je(E,{command:"addLayer",args:[ae,we]})}(y,t.layers,o)}catch(l){console.warn("Unable to compute style diff:",l),o=[{command:"setStyle",args:[t]}]}return o},m.aD=function(r){const t=[],o=r.id;return o===void 0&&t.push({message:`layers.${o}: missing required property "id"`}),r.render===void 0&&t.push({message:`layers.${o}: missing required method "render"`}),r.renderingMode&&r.renderingMode!=="2d"&&r.renderingMode!=="3d"&&t.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),t},m.aE=function r(t,o){if(Array.isArray(t)){if(!Array.isArray(o)||t.length!==o.length)return!1;for(let l=0;l<t.length;l++)if(!r(t[l],o[l]))return!1;return!0}if(typeof t=="object"&&t!==null&&o!==null){if(typeof o!="object"||Object.keys(t).length!==Object.keys(o).length)return!1;for(const l in t)if(!r(t[l],o[l]))return!1;return!0}return t===o},m.aF=Me,m.aG=pe,m.aH=class extends La{constructor(r,t){super(r,t),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1i(this.location,r))}},m.aI=sd,m.aJ=class extends La{constructor(r,t){super(r,t),this.current=qw}set(r){if(r[12]!==this.current[12]||r[0]!==this.current[0])return this.current=r,void this.gl.uniformMatrix4fv(this.location,!1,r);for(let t=1;t<16;t++)if(r[t]!==this.current[t]){this.current=r,this.gl.uniformMatrix4fv(this.location,!1,r);break}}},m.aK=Py,m.aL=class extends La{constructor(r,t){super(r,t),this.current=[0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]||(this.current=r,this.gl.uniform3f(this.location,r[0],r[1],r[2]))}},m.aM=class extends La{constructor(r,t){super(r,t),this.current=[0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]||(this.current=r,this.gl.uniform2f(this.location,r[0],r[1]))}},m.aN=zy,m.aO=function(r,t,o,l,f,y,x){var b=1/(t-o),E=1/(l-f),C=1/(y-x);return r[0]=-2*b,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*E,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*C,r[11]=0,r[12]=(t+o)*b,r[13]=(f+l)*E,r[14]=(x+y)*C,r[15]=1,r},m.aP=di,m.aQ=Jw,m.aR=class extends Ne{},m.aS=j2,m.aT=class extends ut{},m.aU=function(r){return r<=1?1:Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))},m.aV=Wy,m.aW=Qo,m.aX=class extends at{},m.aY=yr,m.aZ=function(r,t){return r[0]===t[0]&&r[1]===t[1]&&r[2]===t[2]&&r[3]===t[3]&&r[4]===t[4]&&r[5]===t[5]&&r[6]===t[6]&&r[7]===t[7]&&r[8]===t[8]&&r[9]===t[9]&&r[10]===t[10]&&r[11]===t[11]&&r[12]===t[12]&&r[13]===t[13]&&r[14]===t[14]&&r[15]===t[15]},m.a_=function(r,t){var o=r[0],l=r[1],f=r[2],y=r[3],x=r[4],b=r[5],E=r[6],C=r[7],P=r[8],D=r[9],B=r[10],V=r[11],U=r[12],Z=r[13],Y=r[14],ae=r[15],we=t[0],de=t[1],xe=t[2],ze=t[3],qe=t[4],st=t[5],Ct=t[6],lt=t[7],ot=t[8],bt=t[9],gt=t[10],ft=t[11],Fe=t[12],Et=t[13],vt=t[14],zt=t[15];return Math.abs(o-we)<=tn*Math.max(1,Math.abs(o),Math.abs(we))&&Math.abs(l-de)<=tn*Math.max(1,Math.abs(l),Math.abs(de))&&Math.abs(f-xe)<=tn*Math.max(1,Math.abs(f),Math.abs(xe))&&Math.abs(y-ze)<=tn*Math.max(1,Math.abs(y),Math.abs(ze))&&Math.abs(x-qe)<=tn*Math.max(1,Math.abs(x),Math.abs(qe))&&Math.abs(b-st)<=tn*Math.max(1,Math.abs(b),Math.abs(st))&&Math.abs(E-Ct)<=tn*Math.max(1,Math.abs(E),Math.abs(Ct))&&Math.abs(C-lt)<=tn*Math.max(1,Math.abs(C),Math.abs(lt))&&Math.abs(P-ot)<=tn*Math.max(1,Math.abs(P),Math.abs(ot))&&Math.abs(D-bt)<=tn*Math.max(1,Math.abs(D),Math.abs(bt))&&Math.abs(B-gt)<=tn*Math.max(1,Math.abs(B),Math.abs(gt))&&Math.abs(V-ft)<=tn*Math.max(1,Math.abs(V),Math.abs(ft))&&Math.abs(U-Fe)<=tn*Math.max(1,Math.abs(U),Math.abs(Fe))&&Math.abs(Z-Et)<=tn*Math.max(1,Math.abs(Z),Math.abs(Et))&&Math.abs(Y-vt)<=tn*Math.max(1,Math.abs(Y),Math.abs(vt))&&Math.abs(ae-zt)<=tn*Math.max(1,Math.abs(ae),Math.abs(zt))},m.aa=function(r){const t={};if(r.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,l,f,y)=>{const x=f||y;return t[l]=!x||x.toLowerCase(),""}),t["max-age"]){const o=parseInt(t["max-age"],10);isNaN(o)?delete t["max-age"]:t["max-age"]=o}return t},m.ab=function(r,t){const o=[];for(const l in r)l in t||o.push(l);return o},m.ac=ee,m.ad=function(r,t,o){var l=Math.sin(o),f=Math.cos(o),y=t[0],x=t[1],b=t[2],E=t[3],C=t[4],P=t[5],D=t[6],B=t[7];return t!==r&&(r[8]=t[8],r[9]=t[9],r[10]=t[10],r[11]=t[11],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[0]=y*f+C*l,r[1]=x*f+P*l,r[2]=b*f+D*l,r[3]=E*f+B*l,r[4]=C*f-y*l,r[5]=P*f-x*l,r[6]=D*f-b*l,r[7]=B*f-E*l,r},m.ae=function(r){var t=new $l(16);return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],t},m.af=ud,m.ag=function(r,t){let o=0,l=0;if(r.kind==="constant")l=r.layoutSize;else if(r.kind!=="source"){const{interpolationType:f,minZoom:y,maxZoom:x}=r,b=f?ee(hn.interpolationFactor(f,t,y,x),0,1):0;r.kind==="camera"?l=Vr.number(r.minSize,r.maxSize,b):o=b}return{uSizeT:o,uSize:l}},m.ai=function(r,{uSize:t,uSizeT:o},{lowerSize:l,upperSize:f}){return r.kind==="source"?l/Co:r.kind==="composite"?Vr.number(l/Co,f/Co,o):t},m.aj=qp,m.ak=function(r,t,o,l){const f=t.y-r.y,y=t.x-r.x,x=l.y-o.y,b=l.x-o.x,E=x*y-b*f;if(E===0)return null;const C=(b*(r.y-o.y)-x*(r.x-o.x))/E;return new A(r.x+C*y,r.y+C*f)},m.al=K_,m.am=By,m.an=Sp,m.ao=function(r){let t=1/0,o=1/0,l=-1/0,f=-1/0;for(const y of r)t=Math.min(t,y.x),o=Math.min(o,y.y),l=Math.max(l,y.x),f=Math.max(f,y.y);return[t,o,l,f]},m.ap=dr,m.ar=Up,m.as=function(r,t){var o=t[0],l=t[1],f=t[2],y=t[3],x=t[4],b=t[5],E=t[6],C=t[7],P=t[8],D=t[9],B=t[10],V=t[11],U=t[12],Z=t[13],Y=t[14],ae=t[15],we=o*b-l*x,de=o*E-f*x,xe=o*C-y*x,ze=l*E-f*b,qe=l*C-y*b,st=f*C-y*E,Ct=P*Z-D*U,lt=P*Y-B*U,ot=P*ae-V*U,bt=D*Y-B*Z,gt=D*ae-V*Z,ft=B*ae-V*Y,Fe=we*ft-de*gt+xe*bt+ze*ot-qe*lt+st*Ct;return Fe?(r[0]=(b*ft-E*gt+C*bt)*(Fe=1/Fe),r[1]=(f*gt-l*ft-y*bt)*Fe,r[2]=(Z*st-Y*qe+ae*ze)*Fe,r[3]=(B*qe-D*st-V*ze)*Fe,r[4]=(E*ot-x*ft-C*lt)*Fe,r[5]=(o*ft-f*ot+y*lt)*Fe,r[6]=(Y*xe-U*st-ae*de)*Fe,r[7]=(P*st-B*xe+V*de)*Fe,r[8]=(x*gt-b*ot+C*Ct)*Fe,r[9]=(l*ot-o*gt-y*Ct)*Fe,r[10]=(U*qe-Z*xe+ae*we)*Fe,r[11]=(D*xe-P*qe-V*we)*Fe,r[12]=(b*lt-x*bt-E*Ct)*Fe,r[13]=(o*bt-l*lt+f*Ct)*Fe,r[14]=(Z*de-U*ze-Y*we)*Fe,r[15]=(P*ze-D*de+B*we)*Fe,r):null},m.at=Yp,m.au=jp,m.av=Qp,m.aw=function(){const r={},t=le.$version;for(const o in le.$root){const l=le.$root[o];if(l.required){let f=null;f=o==="version"?t:l.type==="array"?[]:{},f!=null&&(r[o]=f)}}return r},m.ax=Yh,m.ay=Bi,m.az=function(r){r=r.slice();const t=Object.create(null);for(let o=0;o<r.length;o++)t[r[o].id]=r[o];for(let o=0;o<r.length;o++)"ref"in r[o]&&(r[o]=tt(r[o],t[r[o].ref]));return r},m.b=dt,m.b0=function(r,t,o){return r[0]=t[0]*o[0],r[1]=t[1]*o[1],r[2]=t[2]*o[2],r[3]=t[3]*o[3],r},m.b1=function(r,t){return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]*t[3]},m.b2=ne,m.b3=j_,m.b4=N_,m.b5=function(r,t,o,l,f){var y,x=1/Math.tan(t/2);return r[0]=x/o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,f!=null&&f!==1/0?(r[10]=(f+l)*(y=1/(l-f)),r[14]=2*f*l*y):(r[10]=-1,r[14]=-2*l),r},m.b6=function(r,t,o){var l=Math.sin(o),f=Math.cos(o),y=t[4],x=t[5],b=t[6],E=t[7],C=t[8],P=t[9],D=t[10],B=t[11];return t!==r&&(r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15]),r[4]=y*f+C*l,r[5]=x*f+P*l,r[6]=b*f+D*l,r[7]=E*f+B*l,r[8]=C*f-y*l,r[9]=P*f-x*l,r[10]=D*f-b*l,r[11]=B*f-E*l,r},m.b7=j,m.b8=oe,m.b9=function(r){return r*Math.PI/180},m.bA=Sl,m.bB=So,m.ba=function(r,t){return r[0]=t[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=t[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=t[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r},m.bb=class extends ${},m.bc=Wp,m.bd=TE,m.bf=Pi,m.bg=function(r,t){Qi.REGISTERED_PROTOCOLS[r]=t},m.bh=function(r){delete Qi.REGISTERED_PROTOCOLS[r]},m.bi=function(r,t){const o={};for(let f=0;f<r.length;f++){const y=t&&t[r[f].id]||mp(r[f]);t&&(t[r[f].id]=y);let x=o[y];x||(x=o[y]=[]),x.push(r[f])}const l=[];for(const f in o)l.push(o[f]);return l},m.bj=mt,m.bk=q_,m.bl=G_,m.bm=E_,m.bn=function(r){r.bucket.createArrays(),r.bucket.tilePixelRatio=or/(512*r.bucket.overscaling),r.bucket.compareText={},r.bucket.iconsNeedLinear=!1;const t=r.bucket.layers[0],o=t.layout,l=t._unevaluatedLayout._values,f={layoutIconSize:l["icon-size"].possiblyEvaluate(new wi(r.bucket.zoom+1),r.canonical),layoutTextSize:l["text-size"].possiblyEvaluate(new wi(r.bucket.zoom+1),r.canonical),textMaxSize:l["text-size"].possiblyEvaluate(new wi(18))};if(r.bucket.textSizeData.kind==="composite"){const{minZoom:C,maxZoom:P}=r.bucket.textSizeData;f.compositeTextSizes=[l["text-size"].possiblyEvaluate(new wi(C),r.canonical),l["text-size"].possiblyEvaluate(new wi(P),r.canonical)]}if(r.bucket.iconSizeData.kind==="composite"){const{minZoom:C,maxZoom:P}=r.bucket.iconSizeData;f.compositeIconSizes=[l["icon-size"].possiblyEvaluate(new wi(C),r.canonical),l["icon-size"].possiblyEvaluate(new wi(P),r.canonical)]}const y=o.get("text-line-height")*dr,x=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",b=o.get("text-keep-upright"),E=o.get("text-size");for(const C of r.bucket.features){const P=o.get("text-font").evaluate(C,{},r.canonical).join(","),D=E.evaluate(C,{},r.canonical),B=f.layoutTextSize.evaluate(C,{},r.canonical),V=f.layoutIconSize.evaluate(C,{},r.canonical),U={horizontal:{},vertical:void 0},Z=C.text;let Y,ae=[0,0];if(Z){const xe=Z.toString(),ze=o.get("text-letter-spacing").evaluate(C,{},r.canonical)*dr,qe=yp(xe)?ze:0,st=o.get("text-anchor").evaluate(C,{},r.canonical),Ct=n0(t,C,r.canonical);if(!Ct){const gt=o.get("text-radial-offset").evaluate(C,{},r.canonical);ae=gt?r0(st,[gt*dr,Jp]):o.get("text-offset").evaluate(C,{},r.canonical).map(ft=>ft*dr)}let lt=x?"center":o.get("text-justify").evaluate(C,{},r.canonical);const ot=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(C,{},r.canonical)*dr:1/0,bt=()=>{r.bucket.allowVerticalPlacement&&ou(xe)&&(U.vertical=yd(Z,r.glyphMap,r.glyphPositions,r.imagePositions,P,ot,y,st,"left",qe,ae,m.ah.vertical,!0,B,D))};if(!x&&Ct){const gt=new Set;if(lt==="auto")for(let Fe=0;Fe<Ct.values.length;Fe+=2)gt.add(Yp(Ct.values[Fe]));else gt.add(lt);let ft=!1;for(const Fe of gt)if(!U.horizontal[Fe])if(ft)U.horizontal[Fe]=U.horizontal[0];else{const Et=yd(Z,r.glyphMap,r.glyphPositions,r.imagePositions,P,ot,y,"center",Fe,qe,ae,m.ah.horizontal,!1,B,D);Et&&(U.horizontal[Fe]=Et,ft=Et.positionedLines.length===1)}bt()}else{lt==="auto"&&(lt=Yp(st));const gt=yd(Z,r.glyphMap,r.glyphPositions,r.imagePositions,P,ot,y,st,lt,qe,ae,m.ah.horizontal,!1,B,D);gt&&(U.horizontal[lt]=gt),bt(),ou(xe)&&x&&b&&(U.vertical=yd(Z,r.glyphMap,r.glyphPositions,r.imagePositions,P,ot,y,st,lt,qe,ae,m.ah.vertical,!1,B,D))}}let we=!1;if(C.icon&&C.icon.name){const xe=r.imageMap[C.icon.name];xe&&(Y=sE(r.imagePositions[C.icon.name],o.get("icon-offset").evaluate(C,{},r.canonical),o.get("icon-anchor").evaluate(C,{},r.canonical)),we=!!xe.sdf,r.bucket.sdfIcons===void 0?r.bucket.sdfIcons=we:r.bucket.sdfIcons!==we&&Oe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xe.pixelRatio!==r.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(r.bucket.iconsNeedLinear=!0))}const de=s0(U.horizontal)||U.vertical;r.bucket.iconsInText=!!de&&de.iconsInText,(de||Y)&&EE(r.bucket,C,U,Y,r.imageMap,f,B,V,ae,we,r.canonical)}r.showCollisionBoxes&&r.bucket.generateCollisionDebugBuffers()},m.bo=Op,m.bp=zp,m.bq=Rp,m.br=Os,m.bs=Fp,m.bt=class{constructor(r){this._marks={start:[r.url,"start"].join("#"),end:[r.url,"end"].join("#"),measure:r.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let r=performance.getEntriesByName(this._marks.measure);return r.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),r=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),r}},m.bu=function(r,t,o,l,f){return c(this,void 0,void 0,function*(){if(ye())try{return yield ti(r,t,o,l,f)}catch{}return function(y,x,b,E,C){const P=y.width,D=y.height;Ut&&Nt||(Ut=new OffscreenCanvas(P,D),Nt=Ut.getContext("2d",{willReadFrequently:!0})),Ut.width=P,Ut.height=D,Nt.drawImage(y,0,0,P,D);const B=Nt.getImageData(x,b,E,C);return Nt.clearRect(0,0,P,D),B.data}(r,t,o,l,f)})},m.bv=U_,m.bw=T,m.bx=M,m.by=p_,m.bz=function(r){return r.message===jt},m.c=Si,m.d=r=>c(void 0,void 0,void 0,function*(){if(r.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(r)],{type:"image/png"});try{return createImageBitmap(t)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),m.e=Ie,m.f=r=>new Promise((t,o)=>{const l=new Image;l.onload=()=>{t(l),URL.revokeObjectURL(l.src),l.onload=null,window.requestAnimationFrame(()=>{l.src=nt})},l.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(r)],{type:"image/png"});l.src=r.byteLength?URL.createObjectURL(f):nt}),m.g=Oi,m.h=(r,t)=>Br(Ie(r,{type:"json"}),t),m.i=rt,m.j=ge,m.k=ue,m.l=(r,t)=>Br(Ie(r,{type:"arrayBuffer"}),t),m.m=Br,m.n=function(r){return new Fp(r).readFields(Q2,[])},m.o=yu,m.p=w_,m.q=d,m.r=gp,m.s=pr,m.t=nu,m.u=ct,m.v=le,m.w=Oe,m.x=Ca,m.y=function([r,t,o]){return t+=90,t*=Math.PI/180,o*=Math.PI/180,{x:r*Math.cos(t)*Math.sin(o),y:r*Math.sin(t)*Math.sin(o),z:r*Math.cos(o)}},m.z=Vr}),h("worker",["./shared"],function(m){class c{constructor(F){this.keyCache={},F&&this.replace(F)}replace(F){this._layerConfigs={},this._layers={},this.update(F,[])}update(F,N){for(const ie of F){this._layerConfigs[ie.id]=ie;const fe=this._layers[ie.id]=m.aA(ie);fe._featureFilter=m.a6(fe.filter),this.keyCache[ie.id]&&delete this.keyCache[ie.id]}for(const ie of N)delete this.keyCache[ie],delete this._layerConfigs[ie],delete this._layers[ie];this.familiesBySource={};const q=m.bi(Object.values(this._layerConfigs),this.keyCache);for(const ie of q){const fe=ie.map(Re=>this._layers[Re.id]),_e=fe[0];if(_e.visibility==="none")continue;const be=_e.source||"";let he=this.familiesBySource[be];he||(he=this.familiesBySource[be]={});const ke=_e.sourceLayer||"_geojsonTileLayer";let Ue=he[ke];Ue||(Ue=he[ke]=[]),Ue.push(fe)}}}class T{constructor(F){const N={},q=[];for(const be in F){const he=F[be],ke=N[be]={};for(const Ue in he){const Re=he[+Ue];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;const De={x:0,y:0,w:Re.bitmap.width+2,h:Re.bitmap.height+2};q.push(De),ke[Ue]={rect:De,metrics:Re.metrics}}}const{w:ie,h:fe}=m.p(q),_e=new m.o({width:ie||1,height:fe||1});for(const be in F){const he=F[be];for(const ke in he){const Ue=he[+ke];if(!Ue||Ue.bitmap.width===0||Ue.bitmap.height===0)continue;const Re=N[be][ke].rect;m.o.copy(Ue.bitmap,_e,{x:0,y:0},{x:Re.x+1,y:Re.y+1},Ue.bitmap)}}this.image=_e,this.positions=N}}m.bj("GlyphAtlas",T);class M{constructor(F){this.tileID=new m.Q(F.tileID.overscaledZ,F.tileID.wrap,F.tileID.canonical.z,F.tileID.canonical.x,F.tileID.canonical.y),this.uid=F.uid,this.zoom=F.zoom,this.pixelRatio=F.pixelRatio,this.tileSize=F.tileSize,this.source=F.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=F.showCollisionBoxes,this.collectResourceTiming=!!F.collectResourceTiming,this.returnDependencies=!!F.returnDependencies,this.promoteId=F.promoteId,this.inFlightDependencies=[]}parse(F,N,q,ie){return m._(this,void 0,void 0,function*(){this.status="parsing",this.data=F,this.collisionBoxArray=new m.a4;const fe=new m.bk(Object.keys(F.layers).sort()),_e=new m.bl(this.tileID,this.promoteId);_e.bucketLayerIDs=[];const be={},he={featureIndex:_e,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:q},ke=N.familiesBySource[this.source];for(const Zt in ke){const Fi=F.layers[Zt];if(!Fi)continue;Fi.version===1&&m.w(`Vector tile source "${this.source}" layer "${Zt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const cr=fe.encode(Zt),Xr=[];for(let cn=0;cn<Fi.length;cn++){const ur=Fi.feature(cn),_s=_e.getId(ur,Zt);Xr.push({feature:ur,id:_s,index:cn,sourceLayerIndex:cr})}for(const cn of ke[Zt]){const ur=cn[0];ur.source!==this.source&&m.w(`layer.source = ${ur.source} does not equal this.source = ${this.source}`),ur.minzoom&&this.zoom<Math.floor(ur.minzoom)||ur.maxzoom&&this.zoom>=ur.maxzoom||ur.visibility!=="none"&&(k(cn,this.zoom,q),(be[ur.id]=ur.createBucket({index:_e.bucketLayerIDs.length,layers:cn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:cr,sourceID:this.source})).populate(Xr,he,this.tileID.canonical),_e.bucketLayerIDs.push(cn.map(_s=>_s.id)))}}const Ue=m.aF(he.glyphDependencies,Zt=>Object.keys(Zt).map(Number));this.inFlightDependencies.forEach(Zt=>Zt==null?void 0:Zt.abort()),this.inFlightDependencies=[];let Re=Promise.resolve({});if(Object.keys(Ue).length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),Re=ie.sendAsync({type:"GG",data:{stacks:Ue,source:this.source,tileID:this.tileID,type:"glyphs"}},Zt)}const De=Object.keys(he.iconDependencies);let It=Promise.resolve({});if(De.length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),It=ie.sendAsync({type:"GI",data:{icons:De,source:this.source,tileID:this.tileID,type:"icons"}},Zt)}const St=Object.keys(he.patternDependencies);let Jt=Promise.resolve({});if(St.length){const Zt=new AbortController;this.inFlightDependencies.push(Zt),Jt=ie.sendAsync({type:"GI",data:{icons:St,source:this.source,tileID:this.tileID,type:"patterns"}},Zt)}const[Rt,ii,mi]=yield Promise.all([Re,It,Jt]),Ii=new T(Rt),rr=new m.bm(ii,mi);for(const Zt in be){const Fi=be[Zt];Fi instanceof m.a5?(k(Fi.layers,this.zoom,q),m.bn({bucket:Fi,glyphMap:Rt,glyphPositions:Ii.positions,imageMap:ii,imagePositions:rr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Fi.hasPattern&&(Fi instanceof m.bo||Fi instanceof m.bp||Fi instanceof m.bq)&&(k(Fi.layers,this.zoom,q),Fi.addFeatures(he,this.tileID.canonical,rr.patternPositions))}return this.status="done",{buckets:Object.values(be).filter(Zt=>!Zt.isEmpty()),featureIndex:_e,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ii.image,imageAtlas:rr,glyphMap:this.returnDependencies?Rt:null,iconMap:this.returnDependencies?ii:null,glyphPositions:this.returnDependencies?Ii.positions:null}})}}function k(Q,F,N){const q=new m.a8(F);for(const ie of Q)ie.recalculate(q,N)}class A{constructor(F,N,q){this.actor=F,this.layerIndex=N,this.availableImages=q,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(F,N){return m._(this,void 0,void 0,function*(){const q=yield m.l(F.request,N);try{return{vectorTile:new m.br.VectorTile(new m.bs(q.data)),rawData:q.data,cacheControl:q.cacheControl,expires:q.expires}}catch(ie){const fe=new Uint8Array(q.data);let _e=`Unable to parse the tile at ${F.request.url}, `;throw _e+=fe[0]===31&&fe[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ie.message}`,new Error(_e)}})}loadTile(F){return m._(this,void 0,void 0,function*(){const N=F.uid,q=!!(F&&F.request&&F.request.collectResourceTiming)&&new m.bt(F.request),ie=new M(F);this.loading[N]=ie;const fe=new AbortController;ie.abort=fe;try{const _e=yield this.loadVectorTile(F,fe);if(delete this.loading[N],!_e)return null;const be=_e.rawData,he={};_e.expires&&(he.expires=_e.expires),_e.cacheControl&&(he.cacheControl=_e.cacheControl);const ke={};if(q){const Re=q.finish();Re&&(ke.resourceTiming=JSON.parse(JSON.stringify(Re)))}ie.vectorTile=_e.vectorTile;const Ue=ie.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[N]=ie,this.fetching[N]={rawTileData:be,cacheControl:he,resourceTiming:ke};try{const Re=yield Ue;return m.e({rawTileData:be.slice(0)},Re,he,ke)}finally{delete this.fetching[N]}}catch(_e){throw delete this.loading[N],ie.status="done",this.loaded[N]=ie,_e}})}reloadTile(F){return m._(this,void 0,void 0,function*(){const N=F.uid;if(!this.loaded||!this.loaded[N])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const q=this.loaded[N];if(q.showCollisionBoxes=F.showCollisionBoxes,q.status==="parsing"){const ie=yield q.parse(q.vectorTile,this.layerIndex,this.availableImages,this.actor);let fe;if(this.fetching[N]){const{rawTileData:_e,cacheControl:be,resourceTiming:he}=this.fetching[N];delete this.fetching[N],fe=m.e({rawTileData:_e.slice(0)},ie,be,he)}else fe=ie;return fe}if(q.status==="done"&&q.vectorTile)return q.parse(q.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(F){return m._(this,void 0,void 0,function*(){const N=this.loading,q=F.uid;N&&N[q]&&N[q].abort&&(N[q].abort.abort(),delete N[q])})}removeTile(F){return m._(this,void 0,void 0,function*(){this.loaded&&this.loaded[F.uid]&&delete this.loaded[F.uid]})}}class L{constructor(){this.loaded={}}loadTile(F){return m._(this,void 0,void 0,function*(){const{uid:N,encoding:q,rawImageData:ie,redFactor:fe,greenFactor:_e,blueFactor:be,baseShift:he}=F,ke=ie.width+2,Ue=ie.height+2,Re=m.b(ie)?new m.R({width:ke,height:Ue},yield m.bu(ie,-1,-1,ke,Ue)):ie,De=new m.bv(N,Re,q,fe,_e,be,he);return this.loaded=this.loaded||{},this.loaded[N]=De,De})}removeTile(F){const N=this.loaded,q=F.uid;N&&N[q]&&delete N[q]}}function H(Q,F){if(Q.length!==0){X(Q[0],F);for(var N=1;N<Q.length;N++)X(Q[N],!F)}}function X(Q,F){for(var N=0,q=0,ie=0,fe=Q.length,_e=fe-1;ie<fe;_e=ie++){var be=(Q[ie][0]-Q[_e][0])*(Q[_e][1]+Q[ie][1]),he=N+be;q+=Math.abs(N)>=Math.abs(be)?N-he+be:be-he+N,N=he}N+q>=0!=!!F&&Q.reverse()}var W=m.bw(function Q(F,N){var q,ie=F&&F.type;if(ie==="FeatureCollection")for(q=0;q<F.features.length;q++)Q(F.features[q],N);else if(ie==="GeometryCollection")for(q=0;q<F.geometries.length;q++)Q(F.geometries[q],N);else if(ie==="Feature")Q(F.geometry,N);else if(ie==="Polygon")H(F.coordinates,N);else if(ie==="MultiPolygon")for(q=0;q<F.coordinates.length;q++)H(F.coordinates[q],N);return F});const se=m.br.VectorTileFeature.prototype.toGeoJSON;var Te={exports:{}},ye=m.bx,j=m.br.VectorTileFeature,oe=ee;function ee(Q,F){this.options=F||{},this.features=Q,this.length=Q.length}function ne(Q,F){this.id=typeof Q.id=="number"?Q.id:void 0,this.type=Q.type,this.rawGeometry=Q.type===1?[Q.geometry]:Q.geometry,this.properties=Q.tags,this.extent=F||4096}ee.prototype.feature=function(Q){return new ne(this.features[Q],this.options.extent)},ne.prototype.loadGeometry=function(){var Q=this.rawGeometry;this.geometry=[];for(var F=0;F<Q.length;F++){for(var N=Q[F],q=[],ie=0;ie<N.length;ie++)q.push(new ye(N[ie][0],N[ie][1]));this.geometry.push(q)}return this.geometry},ne.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Q=this.geometry,F=1/0,N=-1/0,q=1/0,ie=-1/0,fe=0;fe<Q.length;fe++)for(var _e=Q[fe],be=0;be<_e.length;be++){var he=_e[be];F=Math.min(F,he.x),N=Math.max(N,he.x),q=Math.min(q,he.y),ie=Math.max(ie,he.y)}return[F,q,N,ie]},ne.prototype.toGeoJSON=j.prototype.toGeoJSON;var Ie=m.by,Ee=oe;function Me(Q){var F=new Ie;return function(N,q){for(var ie in N.layers)q.writeMessage(3,pe,N.layers[ie])}(Q,F),F.finish()}function pe(Q,F){var N;F.writeVarintField(15,Q.version||1),F.writeStringField(1,Q.name||""),F.writeVarintField(5,Q.extent||4096);var q={keys:[],values:[],keycache:{},valuecache:{}};for(N=0;N<Q.length;N++)q.feature=Q.feature(N),F.writeMessage(2,Ae,q);var ie=q.keys;for(N=0;N<ie.length;N++)F.writeStringField(3,ie[N]);var fe=q.values;for(N=0;N<fe.length;N++)F.writeMessage(4,Ke,fe[N])}function Ae(Q,F){var N=Q.feature;N.id!==void 0&&F.writeVarintField(1,N.id),F.writeMessage(2,Le,Q),F.writeVarintField(3,N.type),F.writeMessage(4,rt,N)}function Le(Q,F){var N=Q.feature,q=Q.keys,ie=Q.values,fe=Q.keycache,_e=Q.valuecache;for(var be in N.properties){var he=N.properties[be],ke=fe[be];if(he!==null){ke===void 0&&(q.push(be),fe[be]=ke=q.length-1),F.writeVarint(ke);var Ue=typeof he;Ue!=="string"&&Ue!=="boolean"&&Ue!=="number"&&(he=JSON.stringify(he));var Re=Ue+":"+he,De=_e[Re];De===void 0&&(ie.push(he),_e[Re]=De=ie.length-1),F.writeVarint(De)}}}function Oe(Q,F){return(F<<3)+(7&Q)}function Ge(Q){return Q<<1^Q>>31}function rt(Q,F){for(var N=Q.loadGeometry(),q=Q.type,ie=0,fe=0,_e=N.length,be=0;be<_e;be++){var he=N[be],ke=1;q===1&&(ke=he.length),F.writeVarint(Oe(1,ke));for(var Ue=q===3?he.length-1:he.length,Re=0;Re<Ue;Re++){Re===1&&q!==1&&F.writeVarint(Oe(2,Ue-1));var De=he[Re].x-ie,It=he[Re].y-fe;F.writeVarint(Ge(De)),F.writeVarint(Ge(It)),ie+=De,fe+=It}q===3&&F.writeVarint(Oe(7,1))}}function Ke(Q,F){var N=typeof Q;N==="string"?F.writeStringField(1,Q):N==="boolean"?F.writeBooleanField(7,Q):N==="number"&&(Q%1!=0?F.writeDoubleField(3,Q):Q<0?F.writeSVarintField(6,Q):F.writeVarintField(5,Q))}Te.exports=Me,Te.exports.fromVectorTileJs=Me,Te.exports.fromGeojsonVt=function(Q,F){F=F||{};var N={};for(var q in Q)N[q]=new Ee(Q[q].features,F),N[q].name=q,N[q].version=F.version,N[q].extent=F.extent;return Me({layers:N})},Te.exports.GeoJSONWrapper=Ee;var dt=m.bw(Te.exports);const nt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Q=>Q},ti=Math.fround||(Ut=new Float32Array(1),Q=>(Ut[0]=+Q,Ut[0]));var Ut;const Nt=3,jt=5,Si=6;class Qi{constructor(F){this.options=Object.assign(Object.create(nt),F),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(F){const{log:N,minZoom:q,maxZoom:ie}=this.options;N&&console.time("total time");const fe=`prepare ${F.length} points`;N&&console.time(fe),this.points=F;const _e=[];for(let he=0;he<F.length;he++){const ke=F[he];if(!ke.geometry)continue;const[Ue,Re]=ke.geometry.coordinates,De=ti(Pi(Ue)),It=ti(Bi(Re));_e.push(De,It,1/0,he,-1,1),this.options.reduce&&_e.push(0)}let be=this.trees[ie+1]=this._createTree(_e);N&&console.timeEnd(fe);for(let he=ie;he>=q;he--){const ke=+Date.now();be=this.trees[he]=this._createTree(this._cluster(be,he)),N&&console.log("z%d: %d clusters in %dms",he,be.numItems,+Date.now()-ke)}return N&&console.timeEnd("total time"),this}getClusters(F,N){let q=((F[0]+180)%360+360)%360-180;const ie=Math.max(-90,Math.min(90,F[1]));let fe=F[2]===180?180:((F[2]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)q=-180,fe=180;else if(q>fe){const Re=this.getClusters([q,ie,180,_e],N),De=this.getClusters([-180,ie,fe,_e],N);return Re.concat(De)}const be=this.trees[this._limitZoom(N)],he=be.range(Pi(q),Bi(_e),Pi(fe),Bi(ie)),ke=be.data,Ue=[];for(const Re of he){const De=this.stride*Re;Ue.push(ke[De+jt]>1?Oi(ke,De,this.clusterProps):this.points[ke[De+Nt]])}return Ue}getChildren(F){const N=this._getOriginId(F),q=this._getOriginZoom(F),ie="No cluster with the specified id.",fe=this.trees[q];if(!fe)throw new Error(ie);const _e=fe.data;if(N*this.stride>=_e.length)throw new Error(ie);const be=this.options.radius/(this.options.extent*Math.pow(2,q-1)),he=fe.within(_e[N*this.stride],_e[N*this.stride+1],be),ke=[];for(const Ue of he){const Re=Ue*this.stride;_e[Re+4]===F&&ke.push(_e[Re+jt]>1?Oi(_e,Re,this.clusterProps):this.points[_e[Re+Nt]])}if(ke.length===0)throw new Error(ie);return ke}getLeaves(F,N,q){const ie=[];return this._appendLeaves(ie,F,N=N||10,q=q||0,0),ie}getTile(F,N,q){const ie=this.trees[this._limitZoom(F)],fe=Math.pow(2,F),{extent:_e,radius:be}=this.options,he=be/_e,ke=(q-he)/fe,Ue=(q+1+he)/fe,Re={features:[]};return this._addTileFeatures(ie.range((N-he)/fe,ke,(N+1+he)/fe,Ue),ie.data,N,q,fe,Re),N===0&&this._addTileFeatures(ie.range(1-he/fe,ke,1,Ue),ie.data,fe,q,fe,Re),N===fe-1&&this._addTileFeatures(ie.range(0,ke,he/fe,Ue),ie.data,-1,q,fe,Re),Re.features.length?Re:null}getClusterExpansionZoom(F){let N=this._getOriginZoom(F)-1;for(;N<=this.options.maxZoom;){const q=this.getChildren(F);if(N++,q.length!==1)break;F=q[0].properties.cluster_id}return N}_appendLeaves(F,N,q,ie,fe){const _e=this.getChildren(N);for(const be of _e){const he=be.properties;if(he&&he.cluster?fe+he.point_count<=ie?fe+=he.point_count:fe=this._appendLeaves(F,he.cluster_id,q,ie,fe):fe<ie?fe++:F.push(be),F.length===q)break}return fe}_createTree(F){const N=new m.av(F.length/this.stride|0,this.options.nodeSize,Float32Array);for(let q=0;q<F.length;q+=this.stride)N.add(F[q],F[q+1]);return N.finish(),N.data=F,N}_addTileFeatures(F,N,q,ie,fe,_e){for(const be of F){const he=be*this.stride,ke=N[he+jt]>1;let Ue,Re,De;if(ke)Ue=fi(N,he,this.clusterProps),Re=N[he],De=N[he+1];else{const Jt=this.points[N[he+Nt]];Ue=Jt.properties;const[Rt,ii]=Jt.geometry.coordinates;Re=Pi(Rt),De=Bi(ii)}const It={type:1,geometry:[[Math.round(this.options.extent*(Re*fe-q)),Math.round(this.options.extent*(De*fe-ie))]],tags:Ue};let St;St=ke||this.options.generateId?N[he+Nt]:this.points[N[he+Nt]].id,St!==void 0&&(It.id=St),_e.features.push(It)}}_limitZoom(F){return Math.max(this.options.minZoom,Math.min(Math.floor(+F),this.options.maxZoom+1))}_cluster(F,N){const{radius:q,extent:ie,reduce:fe,minPoints:_e}=this.options,be=q/(ie*Math.pow(2,N)),he=F.data,ke=[],Ue=this.stride;for(let Re=0;Re<he.length;Re+=Ue){if(he[Re+2]<=N)continue;he[Re+2]=N;const De=he[Re],It=he[Re+1],St=F.within(he[Re],he[Re+1],be),Jt=he[Re+jt];let Rt=Jt;for(const ii of St){const mi=ii*Ue;he[mi+2]>N&&(Rt+=he[mi+jt])}if(Rt>Jt&&Rt>=_e){let ii,mi=De*Jt,Ii=It*Jt,rr=-1;const Zt=((Re/Ue|0)<<5)+(N+1)+this.points.length;for(const Fi of St){const cr=Fi*Ue;if(he[cr+2]<=N)continue;he[cr+2]=N;const Xr=he[cr+jt];mi+=he[cr]*Xr,Ii+=he[cr+1]*Xr,he[cr+4]=Zt,fe&&(ii||(ii=this._map(he,Re,!0),rr=this.clusterProps.length,this.clusterProps.push(ii)),fe(ii,this._map(he,cr)))}he[Re+4]=Zt,ke.push(mi/Rt,Ii/Rt,1/0,Zt,-1,Rt),fe&&ke.push(rr)}else{for(let ii=0;ii<Ue;ii++)ke.push(he[Re+ii]);if(Rt>1)for(const ii of St){const mi=ii*Ue;if(!(he[mi+2]<=N)){he[mi+2]=N;for(let Ii=0;Ii<Ue;Ii++)ke.push(he[mi+Ii])}}}}return ke}_getOriginId(F){return F-this.points.length>>5}_getOriginZoom(F){return(F-this.points.length)%32}_map(F,N,q){if(F[N+jt]>1){const _e=this.clusterProps[F[N+Si]];return q?Object.assign({},_e):_e}const ie=this.points[F[N+Nt]].properties,fe=this.options.map(ie);return q&&fe===ie?Object.assign({},fe):fe}}function Oi(Q,F,N){return{type:"Feature",id:Q[F+Nt],properties:fi(Q,F,N),geometry:{type:"Point",coordinates:[(q=Q[F],360*(q-.5)),Br(Q[F+1])]}};var q}function fi(Q,F,N){const q=Q[F+jt],ie=q>=1e4?`${Math.round(q/1e3)}k`:q>=1e3?Math.round(q/100)/10+"k":q,fe=Q[F+Si],_e=fe===-1?{}:Object.assign({},N[fe]);return Object.assign(_e,{cluster:!0,cluster_id:Q[F+Nt],point_count:q,point_count_abbreviated:ie})}function Pi(Q){return Q/360+.5}function Bi(Q){const F=Math.sin(Q*Math.PI/180),N=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return N<0?0:N>1?1:N}function Br(Q){const F=(180-360*Q)*Math.PI/180;return 360*Math.atan(Math.exp(F))/Math.PI-90}function pr(Q,F,N,q){for(var ie,fe=q,_e=N-F>>1,be=N-F,he=Q[F],ke=Q[F+1],Ue=Q[N],Re=Q[N+1],De=F+3;De<N;De+=3){var It=Fr(Q[De],Q[De+1],he,ke,Ue,Re);if(It>fe)ie=De,fe=It;else if(It===fe){var St=Math.abs(De-_e);St<be&&(ie=De,be=St)}}fe>q&&(ie-F>3&&pr(Q,F,ie,q),Q[ie+2]=fe,N-ie>3&&pr(Q,ie,N,q))}function Fr(Q,F,N,q,ie,fe){var _e=ie-N,be=fe-q;if(_e!==0||be!==0){var he=((Q-N)*_e+(F-q)*be)/(_e*_e+be*be);he>1?(N=ie,q=fe):he>0&&(N+=_e*he,q+=be*he)}return(_e=Q-N)*_e+(be=F-q)*be}function lr(Q,F,N,q){var ie={id:Q===void 0?null:Q,type:F,geometry:N,tags:q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(fe){var _e=fe.geometry,be=fe.type;if(be==="Point"||be==="MultiPoint"||be==="LineString")ue(fe,_e);else if(be==="Polygon"||be==="MultiLineString")for(var he=0;he<_e.length;he++)ue(fe,_e[he]);else if(be==="MultiPolygon")for(he=0;he<_e.length;he++)for(var ke=0;ke<_e[he].length;ke++)ue(fe,_e[he][ke])}(ie),ie}function ue(Q,F){for(var N=0;N<F.length;N+=3)Q.minX=Math.min(Q.minX,F[N]),Q.minY=Math.min(Q.minY,F[N+1]),Q.maxX=Math.max(Q.maxX,F[N]),Q.maxY=Math.max(Q.maxY,F[N+1])}function ge(Q,F,N,q){if(F.geometry){var ie=F.geometry.coordinates,fe=F.geometry.type,_e=Math.pow(N.tolerance/((1<<N.maxZoom)*N.extent),2),be=[],he=F.id;if(N.promoteId?he=F.properties[N.promoteId]:N.generateId&&(he=q||0),fe==="Point")Be(ie,be);else if(fe==="MultiPoint")for(var ke=0;ke<ie.length;ke++)Be(ie[ke],be);else if(fe==="LineString")le(ie,be,_e,!1);else if(fe==="MultiLineString"){if(N.lineMetrics){for(ke=0;ke<ie.length;ke++)le(ie[ke],be=[],_e,!1),Q.push(lr(he,"LineString",be,F.properties));return}He(ie,be,_e,!1)}else if(fe==="Polygon")He(ie,be,_e,!0);else{if(fe!=="MultiPolygon"){if(fe==="GeometryCollection"){for(ke=0;ke<F.geometry.geometries.length;ke++)ge(Q,{id:he,geometry:F.geometry.geometries[ke],properties:F.properties},N,q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ke=0;ke<ie.length;ke++){var Ue=[];He(ie[ke],Ue,_e,!0),be.push(Ue)}}Q.push(lr(he,fe,be,F.properties))}}function Be(Q,F){F.push(tt(Q[0])),F.push(Ze(Q[1])),F.push(0)}function le(Q,F,N,q){for(var ie,fe,_e=0,be=0;be<Q.length;be++){var he=tt(Q[be][0]),ke=Ze(Q[be][1]);F.push(he),F.push(ke),F.push(0),be>0&&(_e+=q?(ie*ke-he*fe)/2:Math.sqrt(Math.pow(he-ie,2)+Math.pow(ke-fe,2))),ie=he,fe=ke}var Ue=F.length-3;F[2]=1,pr(F,0,Ue,N),F[Ue+2]=1,F.size=Math.abs(_e),F.start=0,F.end=F.size}function He(Q,F,N,q){for(var ie=0;ie<Q.length;ie++){var fe=[];le(Q[ie],fe,N,q),F.push(fe)}}function tt(Q){return Q/360+.5}function Ze(Q){var F=Math.sin(Q*Math.PI/180),N=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return N<0?0:N>1?1:N}function je(Q,F,N,q,ie,fe,_e,be){if(q/=F,fe>=(N/=F)&&_e<q)return Q;if(_e<N||fe>=q)return null;for(var he=[],ke=0;ke<Q.length;ke++){var Ue=Q[ke],Re=Ue.geometry,De=Ue.type,It=ie===0?Ue.minX:Ue.minY,St=ie===0?Ue.maxX:Ue.maxY;if(It>=N&&St<q)he.push(Ue);else if(!(St<N||It>=q)){var Jt=[];if(De==="Point"||De==="MultiPoint")Qe(Re,Jt,N,q,ie);else if(De==="LineString")We(Re,Jt,N,q,ie,!1,be.lineMetrics);else if(De==="MultiLineString")Tt(Re,Jt,N,q,ie,!1);else if(De==="Polygon")Tt(Re,Jt,N,q,ie,!0);else if(De==="MultiPolygon")for(var Rt=0;Rt<Re.length;Rt++){var ii=[];Tt(Re[Rt],ii,N,q,ie,!0),ii.length&&Jt.push(ii)}if(Jt.length){if(be.lineMetrics&&De==="LineString"){for(Rt=0;Rt<Jt.length;Rt++)he.push(lr(Ue.id,De,Jt[Rt],Ue.tags));continue}De!=="LineString"&&De!=="MultiLineString"||(Jt.length===1?(De="LineString",Jt=Jt[0]):De="MultiLineString"),De!=="Point"&&De!=="MultiPoint"||(De=Jt.length===3?"Point":"MultiPoint"),he.push(lr(Ue.id,De,Jt,Ue.tags))}}}return he.length?he:null}function Qe(Q,F,N,q,ie){for(var fe=0;fe<Q.length;fe+=3){var _e=Q[fe+ie];_e>=N&&_e<=q&&(F.push(Q[fe]),F.push(Q[fe+1]),F.push(Q[fe+2]))}}function We(Q,F,N,q,ie,fe,_e){for(var be,he,ke=pt(Q),Ue=ie===0?Lt:Ht,Re=Q.start,De=0;De<Q.length-3;De+=3){var It=Q[De],St=Q[De+1],Jt=Q[De+2],Rt=Q[De+3],ii=Q[De+4],mi=ie===0?It:St,Ii=ie===0?Rt:ii,rr=!1;_e&&(be=Math.sqrt(Math.pow(It-Rt,2)+Math.pow(St-ii,2))),mi<N?Ii>N&&(he=Ue(ke,It,St,Rt,ii,N),_e&&(ke.start=Re+be*he)):mi>q?Ii<q&&(he=Ue(ke,It,St,Rt,ii,q),_e&&(ke.start=Re+be*he)):xt(ke,It,St,Jt),Ii<N&&mi>=N&&(he=Ue(ke,It,St,Rt,ii,N),rr=!0),Ii>q&&mi<=q&&(he=Ue(ke,It,St,Rt,ii,q),rr=!0),!fe&&rr&&(_e&&(ke.end=Re+be*he),F.push(ke),ke=pt(Q)),_e&&(Re+=be)}var Zt=Q.length-3;It=Q[Zt],St=Q[Zt+1],Jt=Q[Zt+2],(mi=ie===0?It:St)>=N&&mi<=q&&xt(ke,It,St,Jt),Zt=ke.length-3,fe&&Zt>=3&&(ke[Zt]!==ke[0]||ke[Zt+1]!==ke[1])&&xt(ke,ke[0],ke[1],ke[2]),ke.length&&F.push(ke)}function pt(Q){var F=[];return F.size=Q.size,F.start=Q.start,F.end=Q.end,F}function Tt(Q,F,N,q,ie,fe){for(var _e=0;_e<Q.length;_e++)We(Q[_e],F,N,q,ie,fe,!1)}function xt(Q,F,N,q){Q.push(F),Q.push(N),Q.push(q)}function Lt(Q,F,N,q,ie,fe){var _e=(fe-F)/(q-F);return Q.push(fe),Q.push(N+(ie-N)*_e),Q.push(1),_e}function Ht(Q,F,N,q,ie,fe){var _e=(fe-N)/(ie-N);return Q.push(F+(q-F)*_e),Q.push(fe),Q.push(1),_e}function $e(Q,F){for(var N=[],q=0;q<Q.length;q++){var ie,fe=Q[q],_e=fe.type;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")ie=Gt(fe.geometry,F);else if(_e==="MultiLineString"||_e==="Polygon"){ie=[];for(var be=0;be<fe.geometry.length;be++)ie.push(Gt(fe.geometry[be],F))}else if(_e==="MultiPolygon")for(ie=[],be=0;be<fe.geometry.length;be++){for(var he=[],ke=0;ke<fe.geometry[be].length;ke++)he.push(Gt(fe.geometry[be][ke],F));ie.push(he)}N.push(lr(fe.id,_e,ie,fe.tags))}return N}function Gt(Q,F){var N=[];N.size=Q.size,Q.start!==void 0&&(N.start=Q.start,N.end=Q.end);for(var q=0;q<Q.length;q+=3)N.push(Q[q]+F,Q[q+1],Q[q+2]);return N}function ai(Q,F){if(Q.transformed)return Q;var N,q,ie,fe=1<<Q.z,_e=Q.x,be=Q.y;for(N=0;N<Q.features.length;N++){var he=Q.features[N],ke=he.geometry,Ue=he.type;if(he.geometry=[],Ue===1)for(q=0;q<ke.length;q+=2)he.geometry.push(mr(ke[q],ke[q+1],F,fe,_e,be));else for(q=0;q<ke.length;q++){var Re=[];for(ie=0;ie<ke[q].length;ie+=2)Re.push(mr(ke[q][ie],ke[q][ie+1],F,fe,_e,be));he.geometry.push(Re)}}return Q.transformed=!0,Q}function mr(Q,F,N,q,ie,fe){return[Math.round(N*(Q*q-ie)),Math.round(N*(F*q-fe))]}function Kr(Q,F,N,q,ie){for(var fe=F===ie.maxZoom?0:ie.tolerance/((1<<F)*ie.extent),_e={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:N,y:q,z:F,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},be=0;be<Q.length;be++){_e.numFeatures++,Ye(_e,Q[be],fe,ie);var he=Q[be].minX,ke=Q[be].minY,Ue=Q[be].maxX,Re=Q[be].maxY;he<_e.minX&&(_e.minX=he),ke<_e.minY&&(_e.minY=ke),Ue>_e.maxX&&(_e.maxX=Ue),Re>_e.maxY&&(_e.maxY=Re)}return _e}function Ye(Q,F,N,q){var ie=F.geometry,fe=F.type,_e=[];if(fe==="Point"||fe==="MultiPoint")for(var be=0;be<ie.length;be+=3)_e.push(ie[be]),_e.push(ie[be+1]),Q.numPoints++,Q.numSimplified++;else if(fe==="LineString")Bt(_e,ie,Q,N,!1,!1);else if(fe==="MultiLineString"||fe==="Polygon")for(be=0;be<ie.length;be++)Bt(_e,ie[be],Q,N,fe==="Polygon",be===0);else if(fe==="MultiPolygon")for(var he=0;he<ie.length;he++){var ke=ie[he];for(be=0;be<ke.length;be++)Bt(_e,ke[be],Q,N,!0,be===0)}if(_e.length){var Ue=F.tags||null;if(fe==="LineString"&&q.lineMetrics){for(var Re in Ue={},F.tags)Ue[Re]=F.tags[Re];Ue.mapbox_clip_start=ie.start/ie.size,Ue.mapbox_clip_end=ie.end/ie.size}var De={geometry:_e,type:fe==="Polygon"||fe==="MultiPolygon"?3:fe==="LineString"||fe==="MultiLineString"?2:1,tags:Ue};F.id!==null&&(De.id=F.id),Q.features.push(De)}}function Bt(Q,F,N,q,ie,fe){var _e=q*q;if(q>0&&F.size<(ie?_e:q))N.numPoints+=F.length/3;else{for(var be=[],he=0;he<F.length;he+=3)(q===0||F[he+2]>_e)&&(N.numSimplified++,be.push(F[he]),be.push(F[he+1])),N.numPoints++;ie&&function(ke,Ue){for(var Re=0,De=0,It=ke.length,St=It-2;De<It;St=De,De+=2)Re+=(ke[De]-ke[St])*(ke[De+1]+ke[St+1]);if(Re>0===Ue)for(De=0,It=ke.length;De<It/2;De+=2){var Jt=ke[De],Rt=ke[De+1];ke[De]=ke[It-2-De],ke[De+1]=ke[It-1-De],ke[It-2-De]=Jt,ke[It-1-De]=Rt}}(be,fe),Q.push(be)}}function Dt(Q,F){var N=(F=this.options=function(ie,fe){for(var _e in fe)ie[_e]=fe[_e];return ie}(Object.create(this.options),F)).debug;if(N&&console.time("preprocess data"),F.maxZoom<0||F.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(F.promoteId&&F.generateId)throw new Error("promoteId and generateId cannot be used together.");var q=function(ie,fe){var _e=[];if(ie.type==="FeatureCollection")for(var be=0;be<ie.features.length;be++)ge(_e,ie.features[be],fe,be);else ge(_e,ie.type==="Feature"?ie:{geometry:ie},fe);return _e}(Q,F);this.tiles={},this.tileCoords=[],N&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",F.indexMaxZoom,F.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),q=function(ie,fe){var _e=fe.buffer/fe.extent,be=ie,he=je(ie,1,-1-_e,_e,0,-1,2,fe),ke=je(ie,1,1-_e,2+_e,0,-1,2,fe);return(he||ke)&&(be=je(ie,1,-_e,1+_e,0,-1,2,fe)||[],he&&(be=$e(he,1).concat(be)),ke&&(be=be.concat($e(ke,-1)))),be}(q,F),q.length&&this.splitTile(q,0,0,0),N&&(q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function pi(Q,F,N){return 32*((1<<Q)*N+F)+Q}function Ti(Q,F){return F?Q.properties[F]:Q.id}function Ft(Q,F){if(Q==null)return!0;if(Q.type==="Feature")return Ti(Q,F)!=null;if(Q.type==="FeatureCollection"){const N=new Set;for(const q of Q.features){const ie=Ti(q,F);if(ie==null||N.has(ie))return!1;N.add(ie)}return!0}return!1}function ro(Q,F){const N=new Map;if(Q!=null)if(Q.type==="Feature")N.set(Ti(Q,F),Q);else for(const q of Q.features)N.set(Ti(q,F),q);return N}Dt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Dt.prototype.splitTile=function(Q,F,N,q,ie,fe,_e){for(var be=[Q,F,N,q],he=this.options,ke=he.debug;be.length;){q=be.pop(),N=be.pop(),F=be.pop(),Q=be.pop();var Ue=1<<F,Re=pi(F,N,q),De=this.tiles[Re];if(!De&&(ke>1&&console.time("creation"),De=this.tiles[Re]=Kr(Q,F,N,q,he),this.tileCoords.push({z:F,x:N,y:q}),ke)){ke>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",F,N,q,De.numFeatures,De.numPoints,De.numSimplified),console.timeEnd("creation"));var It="z"+F;this.stats[It]=(this.stats[It]||0)+1,this.total++}if(De.source=Q,ie){if(F===he.maxZoom||F===ie)continue;var St=1<<ie-F;if(N!==Math.floor(fe/St)||q!==Math.floor(_e/St))continue}else if(F===he.indexMaxZoom||De.numPoints<=he.indexMaxPoints)continue;if(De.source=null,Q.length!==0){ke>1&&console.time("clipping");var Jt,Rt,ii,mi,Ii,rr,Zt=.5*he.buffer/he.extent,Fi=.5-Zt,cr=.5+Zt,Xr=1+Zt;Jt=Rt=ii=mi=null,Ii=je(Q,Ue,N-Zt,N+cr,0,De.minX,De.maxX,he),rr=je(Q,Ue,N+Fi,N+Xr,0,De.minX,De.maxX,he),Q=null,Ii&&(Jt=je(Ii,Ue,q-Zt,q+cr,1,De.minY,De.maxY,he),Rt=je(Ii,Ue,q+Fi,q+Xr,1,De.minY,De.maxY,he),Ii=null),rr&&(ii=je(rr,Ue,q-Zt,q+cr,1,De.minY,De.maxY,he),mi=je(rr,Ue,q+Fi,q+Xr,1,De.minY,De.maxY,he),rr=null),ke>1&&console.timeEnd("clipping"),be.push(Jt||[],F+1,2*N,2*q),be.push(Rt||[],F+1,2*N,2*q+1),be.push(ii||[],F+1,2*N+1,2*q),be.push(mi||[],F+1,2*N+1,2*q+1)}}},Dt.prototype.getTile=function(Q,F,N){var q=this.options,ie=q.extent,fe=q.debug;if(Q<0||Q>24)return null;var _e=1<<Q,be=pi(Q,F=(F%_e+_e)%_e,N);if(this.tiles[be])return ai(this.tiles[be],ie);fe>1&&console.log("drilling down to z%d-%d-%d",Q,F,N);for(var he,ke=Q,Ue=F,Re=N;!he&&ke>0;)ke--,Ue=Math.floor(Ue/2),Re=Math.floor(Re/2),he=this.tiles[pi(ke,Ue,Re)];return he&&he.source?(fe>1&&console.log("found parent tile z%d-%d-%d",ke,Ue,Re),fe>1&&console.time("drilling down"),this.splitTile(he.source,ke,Ue,Re,Q,F,N),fe>1&&console.timeEnd("drilling down"),this.tiles[be]?ai(this.tiles[be],ie):null):null};class no extends A{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(F,N){return m._(this,void 0,void 0,function*(){const q=F.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ie=this._geoJSONIndex.getTile(q.z,q.x,q.y);if(!ie)return null;const fe=new class{constructor(be){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=m.W,this.length=be.length,this._features=be}feature(be){return new class{constructor(he){this._feature=he,this.extent=m.W,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const ke of this._feature.geometry)he.push([new m.P(ke[0],ke[1])]);return he}{const he=[];for(const ke of this._feature.geometry){const Ue=[];for(const Re of ke)Ue.push(new m.P(Re[0],Re[1]));he.push(Ue)}return he}}toGeoJSON(he,ke,Ue){return se.call(this,he,ke,Ue)}}(this._features[be])}}(ie.features);let _e=dt(fe);return _e.byteOffset===0&&_e.byteLength===_e.buffer.byteLength||(_e=new Uint8Array(_e)),{vectorTile:fe,rawData:_e.buffer}})}loadData(F){return m._(this,void 0,void 0,function*(){var N;(N=this._pendingRequest)===null||N===void 0||N.abort();const q=!!(F&&F.request&&F.request.collectResourceTiming)&&new m.bt(F.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(F,this._pendingRequest),this._geoJSONIndex=F.cluster?new Qi(function({superclusterOptions:fe,clusterProperties:_e}){if(!_e||!fe)return fe;const be={},he={},ke={accumulated:null,zoom:0},Ue={properties:null},Re=Object.keys(_e);for(const De of Re){const[It,St]=_e[De],Jt=m.bA(St),Rt=m.bA(typeof It=="string"?[It,["accumulated"],["get",De]]:It);be[De]=Jt.value,he[De]=Rt.value}return fe.map=De=>{Ue.properties=De;const It={};for(const St of Re)It[St]=be[St].evaluate(ke,Ue);return It},fe.reduce=(De,It)=>{Ue.properties=It;for(const St of Re)ke.accumulated=De[St],De[St]=he[St].evaluate(ke,Ue)},fe}(F)).load((yield this._pendingData).features):new Dt(yield this._pendingData,F.geojsonVtOptions),this.loaded={};const ie={};if(q){const fe=q.finish();fe&&(ie.resourceTiming={},ie.resourceTiming[F.source]=JSON.parse(JSON.stringify(fe)))}return ie}catch(ie){if(delete this._pendingRequest,m.bz(ie))return{abandoned:!0};throw ie}})}getData(){return m._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(F){const N=this.loaded;return N&&N[F.uid]?super.reloadTile(F):this.loadTile(F)}loadAndProcessGeoJSON(F,N){return m._(this,void 0,void 0,function*(){let q=yield this.loadGeoJSON(F,N);if(delete this._pendingRequest,typeof q!="object")throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`);if(W(q,!0),F.filter){const ie=m.bA(F.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ie.result==="error")throw new Error(ie.value.map(_e=>`${_e.key}: ${_e.message}`).join(", "));q={type:"FeatureCollection",features:q.features.filter(_e=>ie.value.evaluate({zoom:0},_e))}}return q})}loadGeoJSON(F,N){return m._(this,void 0,void 0,function*(){const{promoteId:q}=F;if(F.request){const ie=yield m.h(F.request,N);return this._dataUpdateable=Ft(ie.data,q)?ro(ie.data,q):void 0,ie.data}if(typeof F.data=="string")try{const ie=JSON.parse(F.data);return this._dataUpdateable=Ft(ie,q)?ro(ie,q):void 0,ie}catch{throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`)}if(!F.dataDiff)throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${F.source}`);return function(ie,fe,_e){var be,he,ke,Ue;if(fe.removeAll&&ie.clear(),fe.remove)for(const Re of fe.remove)ie.delete(Re);if(fe.add)for(const Re of fe.add){const De=Ti(Re,_e);De!=null&&ie.set(De,Re)}if(fe.update)for(const Re of fe.update){let De=ie.get(Re.id);if(De==null)continue;const It=!Re.removeAllProperties&&(((be=Re.removeProperties)===null||be===void 0?void 0:be.length)>0||((he=Re.addOrUpdateProperties)===null||he===void 0?void 0:he.length)>0);if((Re.newGeometry||Re.removeAllProperties||It)&&(De=Object.assign({},De),ie.set(Re.id,De),It&&(De.properties=Object.assign({},De.properties))),Re.newGeometry&&(De.geometry=Re.newGeometry),Re.removeAllProperties)De.properties={};else if(((ke=Re.removeProperties)===null||ke===void 0?void 0:ke.length)>0)for(const St of Re.removeProperties)Object.prototype.hasOwnProperty.call(De.properties,St)&&delete De.properties[St];if(((Ue=Re.addOrUpdateProperties)===null||Ue===void 0?void 0:Ue.length)>0)for(const{key:St,value:Jt}of Re.addOrUpdateProperties)De.properties[St]=Jt}}(this._dataUpdateable,F.dataDiff,q),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(F){return m._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(F){return this._geoJSONIndex.getClusterExpansionZoom(F.clusterId)}getClusterChildren(F){return this._geoJSONIndex.getChildren(F.clusterId)}getClusterLeaves(F){return this._geoJSONIndex.getLeaves(F.clusterId,F.limit,F.offset)}}class gr{constructor(F){this.self=F,this.actor=new m.C(F),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(N,q)=>{if(this.externalWorkerSourceTypes[N])throw new Error(`Worker source with name "${N}" already registered.`);this.externalWorkerSourceTypes[N]=q},this.self.addProtocol=m.bg,this.self.removeProtocol=m.bh,this.self.registerRTLTextPlugin=N=>{if(m.bB.isParsed())throw new Error("RTL text plugin already registered.");m.bB.setMethods(N)},this.actor.registerMessageHandler("LDT",(N,q)=>this._getDEMWorkerSource(N,q.source).loadTile(q)),this.actor.registerMessageHandler("RDT",(N,q)=>m._(this,void 0,void 0,function*(){this._getDEMWorkerSource(N,q.source).removeTile(q)})),this.actor.registerMessageHandler("GCEZ",(N,q)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(N,q.type,q.source).getClusterExpansionZoom(q)})),this.actor.registerMessageHandler("GCC",(N,q)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(N,q.type,q.source).getClusterChildren(q)})),this.actor.registerMessageHandler("GCL",(N,q)=>m._(this,void 0,void 0,function*(){return this._getWorkerSource(N,q.type,q.source).getClusterLeaves(q)})),this.actor.registerMessageHandler("LD",(N,q)=>this._getWorkerSource(N,q.type,q.source).loadData(q)),this.actor.registerMessageHandler("GD",(N,q)=>this._getWorkerSource(N,q.type,q.source).getData()),this.actor.registerMessageHandler("LT",(N,q)=>this._getWorkerSource(N,q.type,q.source).loadTile(q)),this.actor.registerMessageHandler("RT",(N,q)=>this._getWorkerSource(N,q.type,q.source).reloadTile(q)),this.actor.registerMessageHandler("AT",(N,q)=>this._getWorkerSource(N,q.type,q.source).abortTile(q)),this.actor.registerMessageHandler("RMT",(N,q)=>this._getWorkerSource(N,q.type,q.source).removeTile(q)),this.actor.registerMessageHandler("RS",(N,q)=>m._(this,void 0,void 0,function*(){if(!this.workerSources[N]||!this.workerSources[N][q.type]||!this.workerSources[N][q.type][q.source])return;const ie=this.workerSources[N][q.type][q.source];delete this.workerSources[N][q.type][q.source],ie.removeSource!==void 0&&ie.removeSource(q)})),this.actor.registerMessageHandler("RM",N=>m._(this,void 0,void 0,function*(){delete this.layerIndexes[N],delete this.availableImages[N],delete this.workerSources[N],delete this.demWorkerSources[N]})),this.actor.registerMessageHandler("SR",(N,q)=>m._(this,void 0,void 0,function*(){this.referrer=q})),this.actor.registerMessageHandler("SRPS",(N,q)=>this._syncRTLPluginState(N,q)),this.actor.registerMessageHandler("IS",(N,q)=>m._(this,void 0,void 0,function*(){this.self.importScripts(q)})),this.actor.registerMessageHandler("SI",(N,q)=>this._setImages(N,q)),this.actor.registerMessageHandler("UL",(N,q)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(N).update(q.layers,q.removedIds)})),this.actor.registerMessageHandler("SL",(N,q)=>m._(this,void 0,void 0,function*(){this._getLayerIndex(N).replace(q)}))}_setImages(F,N){return m._(this,void 0,void 0,function*(){this.availableImages[F]=N;for(const q in this.workerSources[F]){const ie=this.workerSources[F][q];for(const fe in ie)ie[fe].availableImages=N}})}_syncRTLPluginState(F,N){return m._(this,void 0,void 0,function*(){if(m.bB.isParsed())return m.bB.getState();if(N.pluginStatus!=="loading")return m.bB.setState(N),N;const q=N.pluginURL;if(this.self.importScripts(q),m.bB.isParsed()){const ie={pluginStatus:"loaded",pluginURL:q};return m.bB.setState(ie),ie}throw m.bB.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${q}`)})}_getAvailableImages(F){let N=this.availableImages[F];return N||(N=[]),N}_getLayerIndex(F){let N=this.layerIndexes[F];return N||(N=this.layerIndexes[F]=new c),N}_getWorkerSource(F,N,q){if(this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][N]||(this.workerSources[F][N]={}),!this.workerSources[F][N][q]){const ie={sendAsync:(fe,_e)=>(fe.targetMapId=F,this.actor.sendAsync(fe,_e))};switch(N){case"vector":this.workerSources[F][N][q]=new A(ie,this._getLayerIndex(F),this._getAvailableImages(F));break;case"geojson":this.workerSources[F][N][q]=new no(ie,this._getLayerIndex(F),this._getAvailableImages(F));break;default:this.workerSources[F][N][q]=new this.externalWorkerSourceTypes[N](ie,this._getLayerIndex(F),this._getAvailableImages(F))}}return this.workerSources[F][N][q]}_getDEMWorkerSource(F,N){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][N]||(this.demWorkerSources[F][N]=new L),this.demWorkerSources[F][N]}}return m.i(self)&&(self.worker=new gr(self)),gr}),h("index",["exports","./shared"],function(m,c){var T="4.4.1";let M,k;const A={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:_=>new Promise((i,a)=>{const d=requestAnimationFrame(i);_.signal.addEventListener("abort",()=>{cancelAnimationFrame(d),a(c.c())})}),getImageData(_,i=0){return this.getImageCanvasContext(_).getImageData(-i,-i,_.width+2*i,_.height+2*i)},getImageCanvasContext(_){const i=window.document.createElement("canvas"),a=i.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return i.width=_.width,i.height=_.height,a.drawImage(_,0,0,_.width,_.height),a},resolveURL:_=>(M||(M=document.createElement("a")),M.href=_,M.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(k==null&&(k=matchMedia("(prefers-reduced-motion: reduce)")),k.matches)}};class L{static testProp(i){if(!L.docStyle)return i[0];for(let a=0;a<i.length;a++)if(i[a]in L.docStyle)return i[a];return i[0]}static create(i,a,d){const p=window.document.createElement(i);return a!==void 0&&(p.className=a),d&&d.appendChild(p),p}static createNS(i,a){return window.document.createElementNS(i,a)}static disableDrag(){L.docStyle&&L.selectProp&&(L.userSelect=L.docStyle[L.selectProp],L.docStyle[L.selectProp]="none")}static enableDrag(){L.docStyle&&L.selectProp&&(L.docStyle[L.selectProp]=L.userSelect)}static setTransform(i,a){i.style[L.transformProp]=a}static addEventListener(i,a,d,p={}){i.addEventListener(a,d,"passive"in p?p:p.capture)}static removeEventListener(i,a,d,p={}){i.removeEventListener(a,d,"passive"in p?p:p.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",L.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",L.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",L.suppressClickInternal,!0)},0)}static getScale(i){const a=i.getBoundingClientRect();return{x:a.width/i.offsetWidth||1,y:a.height/i.offsetHeight||1,boundingClientRect:a}}static getPoint(i,a,d){const p=a.boundingClientRect;return new c.P((d.clientX-p.left)/a.x-i.clientLeft,(d.clientY-p.top)/a.y-i.clientTop)}static mousePos(i,a){const d=L.getScale(i);return L.getPoint(i,d,a)}static touchPos(i,a){const d=[],p=L.getScale(i);for(let v=0;v<a.length;v++)d.push(L.getPoint(i,p,a[v]));return d}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}L.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,L.selectProp=L.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),L.transformProp=L.testProp(["transform","WebkitTransform"]);const H={supported:!1,testSupport:function(_){!se&&W&&(Te?ye(_):X=_)}};let X,W,se=!1,Te=!1;function ye(_){const i=_.createTexture();_.bindTexture(_.TEXTURE_2D,i);try{if(_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,W),_.isContextLost())return;H.supported=!0}catch{}_.deleteTexture(i),se=!0}var j;typeof document<"u"&&(W=document.createElement("img"),W.onload=()=>{X&&ye(X),X=null,Te=!0},W.onerror=()=>{se=!0,X=null},W.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(_){let i,a,d,p;_.resetRequestQueue=()=>{i=[],a=0,d=0,p={}},_.addThrottleControl=I=>{const z=d++;return p[z]=I,z},_.removeThrottleControl=I=>{delete p[I],w()},_.getImage=(I,z,O=!0)=>new Promise((R,$)=>{H.supported&&(I.headers||(I.headers={}),I.headers.accept="image/webp,*/*"),c.e(I,{type:"image"}),i.push({abortController:z,requestParameters:I,supportImageRefresh:O,state:"queued",onError:G=>{$(G)},onSuccess:G=>{R(G)}}),w()});const v=I=>c._(this,void 0,void 0,function*(){I.state="running";const{requestParameters:z,supportImageRefresh:O,onError:R,onSuccess:$,abortController:G}=I,K=O===!1&&!c.i(self)&&!c.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((ce,me)=>ce&&me==="accept",!0));a++;const re=K?S(z,G):c.m(z,G);try{const ce=yield re;delete I.abortController,I.state="completed",ce.data instanceof HTMLImageElement||c.b(ce.data)?$(ce):ce.data&&$({data:yield(J=ce.data,typeof createImageBitmap=="function"?c.d(J):c.f(J)),cacheControl:ce.cacheControl,expires:ce.expires})}catch(ce){delete I.abortController,R(ce)}finally{a--,w()}var J}),w=()=>{const I=(()=>{for(const z of Object.keys(p))if(p[z]())return!0;return!1})()?c.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:c.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=a;z<I&&i.length>0;z++){const O=i.shift();O.abortController.signal.aborted?z--:v(O)}},S=(I,z)=>new Promise((O,R)=>{const $=new Image,G=I.url,K=I.credentials;K&&K==="include"?$.crossOrigin="use-credentials":(K&&K==="same-origin"||!c.s(G))&&($.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{$.src="",R(c.c())}),$.fetchPriority="high",$.onload=()=>{$.onerror=$.onload=null,O({data:$})},$.onerror=()=>{$.onerror=$.onload=null,z.signal.aborted||R(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},$.src=G})}(j||(j={})),j.resetRequestQueue();class oe{constructor(i){this._transformRequestFn=i}transformRequest(i,a){return this._transformRequestFn&&this._transformRequestFn(i,a)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function ee(_){var i=new c.A(3);return i[0]=_[0],i[1]=_[1],i[2]=_[2],i}var ne,Ie=function(_,i,a){return _[0]=i[0]-a[0],_[1]=i[1]-a[1],_[2]=i[2]-a[2],_};ne=new c.A(3),c.A!=Float32Array&&(ne[0]=0,ne[1]=0,ne[2]=0);var Ee=function(_){var i=_[0],a=_[1];return i*i+a*a};function Me(_){const i=[];if(typeof _=="string")i.push({id:"default",url:_});else if(_&&_.length>0){const a=[];for(const{id:d,url:p}of _){const v=`${d}${p}`;a.indexOf(v)===-1&&(a.push(v),i.push({id:d,url:p}))}}return i}function pe(_,i,a){const d=_.split("?");return d[0]+=`${i}${a}`,d.join("?")}(function(){var _=new c.A(2);c.A!=Float32Array&&(_[0]=0,_[1]=0)})();class Ae{constructor(i,a,d,p){this.context=i,this.format=d,this.texture=i.gl.createTexture(),this.update(a,p)}update(i,a,d){const{width:p,height:v}=i,w=!(this.size&&this.size[0]===p&&this.size[1]===v||d),{context:S}=this,{gl:I}=S;if(this.useMipmap=!!(a&&a.useMipmap),I.bindTexture(I.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===I.RGBA&&(!a||a.premultiply!==!1)),w)this.size=[p,v],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.b(i)?I.texImage2D(I.TEXTURE_2D,0,this.format,this.format,I.UNSIGNED_BYTE,i):I.texImage2D(I.TEXTURE_2D,0,this.format,p,v,0,this.format,I.UNSIGNED_BYTE,i.data);else{const{x:z,y:O}=d||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||c.b(i)?I.texSubImage2D(I.TEXTURE_2D,0,z,O,I.RGBA,I.UNSIGNED_BYTE,i):I.texSubImage2D(I.TEXTURE_2D,0,z,O,p,v,I.RGBA,I.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&I.generateMipmap(I.TEXTURE_2D)}bind(i,a,d){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),d!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=v.LINEAR),i!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,i),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,d||i),this.filter=i),a!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,a),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,a),this.wrap=a)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Le(_){const{userImage:i}=_;return!!(i&&i.render&&i.render())&&(_.data.replace(new Uint8Array(i.data.buffer)),!0)}class Oe extends c.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new c.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:a,promiseResolve:d}of this.requestors)d(this._getImagesForIds(a));this.requestors=[]}}getImage(i){const a=this.images[i];if(a&&!a.data&&a.spriteData){const d=a.spriteData;a.data=new c.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),a.spriteData=null}return a}addImage(i,a){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,a)&&(this.images[i]=a)}_validate(i,a){let d=!0;const p=a.data||a.spriteData;return this._validateStretch(a.stretchX,p&&p.width)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchX" value`))),d=!1),this._validateStretch(a.stretchY,p&&p.height)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "stretchY" value`))),d=!1),this._validateContent(a.content,a)||(this.fire(new c.j(new Error(`Image "${i}" has invalid "content" value`))),d=!1),d}_validateStretch(i,a){if(!i)return!0;let d=0;for(const p of i){if(p[0]<d||p[1]<p[0]||a<p[1])return!1;d=p[1]}return!0}_validateContent(i,a){if(!i)return!0;if(i.length!==4)return!1;const d=a.spriteData,p=d&&d.width||a.data.width,v=d&&d.height||a.data.height;return!(i[0]<0||p<i[0]||i[1]<0||v<i[1]||i[2]<0||p<i[2]||i[3]<0||v<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,a,d=!0){const p=this.getImage(i);if(d&&(p.data.width!==a.data.width||p.data.height!==a.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${a.data.width}x${a.data.height}).`);a.version=p.version+1,this.images[i]=a,this.updatedImages[i]=!0}removeImage(i){const a=this.images[i];delete this.images[i],delete this.patterns[i],a.userImage&&a.userImage.onRemove&&a.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((a,d)=>{let p=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(p=!1);this.isLoaded()||p?a(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:a})})}_getImagesForIds(i){const a={};for(const d of i){let p=this.getImage(d);p||(this.fire(new c.k("styleimagemissing",{id:d})),p=this.getImage(d)),p?a[d]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:c.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return a}getPixelSize(){const{width:i,height:a}=this.atlasImage;return{width:i,height:a}}getPattern(i){const a=this.patterns[i],d=this.getImage(i);if(!d)return null;if(a&&a.position.version===d.version)return a.position;if(a)a.position.version=d.version;else{const p={w:d.data.width+2,h:d.data.height+2,x:0,y:0},v=new c.I(p,d);this.patterns[i]={bin:p,position:v}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const a=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ae(i,this.atlasImage,a.RGBA),this.atlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const v in this.patterns)i.push(this.patterns[v].bin);const{w:a,h:d}=c.p(i),p=this.atlasImage;p.resize({width:a||1,height:d||1});for(const v in this.patterns){const{bin:w}=this.patterns[v],S=w.x+1,I=w.y+1,z=this.getImage(v).data,O=z.width,R=z.height;c.R.copy(z,p,{x:0,y:0},{x:S,y:I},{width:O,height:R}),c.R.copy(z,p,{x:0,y:R-1},{x:S,y:I-1},{width:O,height:1}),c.R.copy(z,p,{x:0,y:0},{x:S,y:I+R},{width:O,height:1}),c.R.copy(z,p,{x:O-1,y:0},{x:S-1,y:I},{width:1,height:R}),c.R.copy(z,p,{x:0,y:0},{x:S+O,y:I},{width:1,height:R})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const a of i){if(this.callbackDispatchedThisFrame[a])continue;this.callbackDispatchedThisFrame[a]=!0;const d=this.getImage(a);d||c.w(`Image with ID: "${a}" was not found`),Le(d)&&this.updateImage(a,d)}}}const Ge=1e20;function rt(_,i,a,d,p,v,w,S,I){for(let z=i;z<i+d;z++)Ke(_,a*v+z,v,p,w,S,I);for(let z=a;z<a+p;z++)Ke(_,z*v+i,1,d,w,S,I)}function Ke(_,i,a,d,p,v,w){v[0]=0,w[0]=-Ge,w[1]=Ge,p[0]=_[i];for(let S=1,I=0,z=0;S<d;S++){p[S]=_[i+S*a];const O=S*S;do{const R=v[I];z=(p[S]-p[R]+O-R*R)/(S-R)/2}while(z<=w[I]&&--I>-1);I++,v[I]=S,w[I]=z,w[I+1]=Ge}for(let S=0,I=0;S<d;S++){for(;w[I+1]<S;)I++;const z=v[I],O=S-z;_[i+S*a]=p[z]+O*O}}class dt{constructor(i,a){this.requestManager=i,this.localIdeographFontFamily=a,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return c._(this,void 0,void 0,function*(){const a=[];for(const v in i)for(const w of i[v])a.push(this._getAndCacheGlyphsPromise(v,w));const d=yield Promise.all(a),p={};for(const{stack:v,id:w,glyph:S}of d)p[v]||(p[v]={}),p[v][w]=S&&{id:S.id,bitmap:S.bitmap.clone(),metrics:S.metrics};return p})}_getAndCacheGlyphsPromise(i,a){return c._(this,void 0,void 0,function*(){let d=this.entries[i];d||(d=this.entries[i]={glyphs:{},requests:{},ranges:{}});let p=d.glyphs[a];if(p!==void 0)return{stack:i,id:a,glyph:p};if(p=this._tinySDF(d,i,a),p)return d.glyphs[a]=p,{stack:i,id:a,glyph:p};const v=Math.floor(a/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[v])return{stack:i,id:a,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[v]){const S=dt.loadGlyphRange(i,v,this.url,this.requestManager);d.requests[v]=S}const w=yield d.requests[v];for(const S in w)this._doesCharSupportLocalGlyph(+S)||(d.glyphs[+S]=w[+S]);return d.ranges[v]=!0,{stack:i,id:a,glyph:w[a]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(c.u["CJK Unified Ideographs"](i)||c.u["Hangul Syllables"](i)||c.u.Hiragana(i)||c.u.Katakana(i))}_tinySDF(i,a,d){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(d))return;let v=i.tinySDF;if(!v){let S="400";/bold/i.test(a)?S="900":/medium/i.test(a)?S="500":/light/i.test(a)&&(S="200"),v=i.tinySDF=new dt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:S})}const w=v.draw(String.fromCharCode(d));return{id:d,bitmap:new c.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}dt.loadGlyphRange=function(_,i,a,d){return c._(this,void 0,void 0,function*(){const p=256*i,v=p+255,w=d.transformRequest(a.replace("{fontstack}",_).replace("{range}",`${p}-${v}`),"Glyphs"),S=yield c.l(w,new AbortController);if(!S||!S.data)throw new Error(`Could not load glyph range. range: ${i}, ${p}-${v}`);const I={};for(const z of c.n(S.data))I[z.id]=z;return I})},dt.TinySDF=class{constructor({fontSize:_=24,buffer:i=3,radius:a=8,cutoff:d=.25,fontFamily:p="sans-serif",fontWeight:v="normal",fontStyle:w="normal"}={}){this.buffer=i,this.cutoff=d,this.radius=a;const S=this.size=_+4*i,I=this._createCanvas(S),z=this.ctx=I.getContext("2d",{willReadFrequently:!0});z.font=`${w} ${v} ${_}px ${p}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(_){const i=document.createElement("canvas");return i.width=i.height=_,i}draw(_){const{width:i,actualBoundingBoxAscent:a,actualBoundingBoxDescent:d,actualBoundingBoxLeft:p,actualBoundingBoxRight:v}=this.ctx.measureText(_),w=Math.ceil(a),S=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-p))),I=Math.min(this.size-this.buffer,w+Math.ceil(d)),z=S+2*this.buffer,O=I+2*this.buffer,R=Math.max(z*O,0),$=new Uint8ClampedArray(R),G={data:$,width:z,height:O,glyphWidth:S,glyphHeight:I,glyphTop:w,glyphLeft:0,glyphAdvance:i};if(S===0||I===0)return G;const{ctx:K,buffer:re,gridInner:J,gridOuter:ce}=this;K.clearRect(re,re,S,I),K.fillText(_,re,re+w);const me=K.getImageData(re,re,S,I);ce.fill(Ge,0,R),J.fill(0,0,R);for(let te=0;te<I;te++)for(let ve=0;ve<S;ve++){const Se=me.data[4*(te*S+ve)+3]/255;if(Se===0)continue;const Pe=(te+re)*z+ve+re;if(Se===1)ce[Pe]=0,J[Pe]=Ge;else{const Ne=.5-Se;ce[Pe]=Ne>0?Ne*Ne:0,J[Pe]=Ne<0?Ne*Ne:0}}rt(ce,0,0,z,O,z,this.f,this.v,this.z),rt(J,re,re,S,I,z,this.f,this.v,this.z);for(let te=0;te<R;te++){const ve=Math.sqrt(ce[te])-Math.sqrt(J[te]);$[te]=Math.round(255-255*(ve/this.radius+this.cutoff))}return G}};class nt{constructor(){this.specification=c.v.light.position}possiblyEvaluate(i,a){return c.y(i.expression.evaluate(a))}interpolate(i,a,d){return{x:c.z.number(i.x,a.x,d),y:c.z.number(i.y,a.y,d),z:c.z.number(i.z,a.z,d)}}}let ti;class Ut extends c.E{constructor(i){super(),ti=ti||new c.q({anchor:new c.D(c.v.light.anchor),position:new nt,color:new c.D(c.v.light.color),intensity:new c.D(c.v.light.intensity)}),this._transitionable=new c.T(ti),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,a={}){if(!this._validate(c.r,i,a))for(const d in i){const p=i[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),p):this._transitionable.setValue(d,p)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,a,d){return(!d||d.validate!==!1)&&c.t(this,i.call(c.x,{value:a,style:{glyphs:!0,sprite:!0},styleSpec:c.v}))}}class Nt{constructor(i,a){this.width=i,this.height=a,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,a){const d=i.join(",")+String(a);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(i,a)),this.dashEntry[d]}getDashRanges(i,a,d){const p=[];let v=i.length%2==1?-i[i.length-1]*d:0,w=i[0]*d,S=!0;p.push({left:v,right:w,isDash:S,zeroLength:i[0]===0});let I=i[0];for(let z=1;z<i.length;z++){S=!S;const O=i[z];v=I*d,I+=O,w=I*d,p.push({left:v,right:w,isDash:S,zeroLength:O===0})}return p}addRoundDash(i,a,d){const p=a/2;for(let v=-d;v<=d;v++){const w=this.width*(this.nextRow+d+v);let S=0,I=i[S];for(let z=0;z<this.width;z++){z/I.right>1&&(I=i[++S]);const O=Math.abs(z-I.left),R=Math.abs(z-I.right),$=Math.min(O,R);let G;const K=v/d*(p+1);if(I.isDash){const re=p-Math.abs(K);G=Math.sqrt($*$+re*re)}else G=p-Math.sqrt($*$+K*K);this.data[w+z]=Math.max(0,Math.min(255,G+128))}}}addRegularDash(i){for(let S=i.length-1;S>=0;--S){const I=i[S],z=i[S+1];I.zeroLength?i.splice(S,1):z&&z.isDash===I.isDash&&(z.left=I.left,i.splice(S,1))}const a=i[0],d=i[i.length-1];a.isDash===d.isDash&&(a.left=d.left-this.width,d.right=a.right+this.width);const p=this.width*this.nextRow;let v=0,w=i[v];for(let S=0;S<this.width;S++){S/w.right>1&&(w=i[++v]);const I=Math.abs(S-w.left),z=Math.abs(S-w.right),O=Math.min(I,z);this.data[p+S]=Math.max(0,Math.min(255,(w.isDash?O:-O)+128))}}addDash(i,a){const d=a?7:0,p=2*d+1;if(this.nextRow+p>this.height)return c.w("LineAtlas out of space"),null;let v=0;for(let S=0;S<i.length;S++)v+=i[S];if(v!==0){const S=this.width/v,I=this.getDashRanges(i,this.width,S);a?this.addRoundDash(I,S,d):this.addRegularDash(I)}const w={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:v};return this.nextRow+=p,this.dirty=!0,w}bind(i){const a=i.gl;this.texture?(a.bindTexture(a.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,a.texSubImage2D(a.TEXTURE_2D,0,0,0,this.width,this.height,a.ALPHA,a.UNSIGNED_BYTE,this.data))):(this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texImage2D(a.TEXTURE_2D,0,a.ALPHA,this.width,this.height,0,a.ALPHA,a.UNSIGNED_BYTE,this.data))}}const jt="maplibre_preloaded_worker_pool";class Si{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Si.workerCount;)this.workers.push(new Worker(c.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(a=>{a.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[jt]}numActive(){return Object.keys(this.active).length}}const Qi=Math.floor(A.hardwareConcurrency/2);let Oi,fi;function Pi(){return Oi||(Oi=new Si),Oi}Si.workerCount=c.B(globalThis)?Math.max(Math.min(Qi,3),1):1;class Bi{constructor(i,a){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=a;const d=this.workerPool.acquire(a);for(let p=0;p<d.length;p++){const v=new c.C(d[p],a);v.name=`Worker ${p}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,a){const d=[];for(const p of this.actors)d.push(p.sendAsync({type:i,data:a}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(a=>{a.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,a){for(const d of this.actors)d.registerMessageHandler(i,a)}}function Br(){return fi||(fi=new Bi(Pi(),c.G),fi.registerMessageHandler("GR",(_,i,a)=>c.m(i,a))),fi}function pr(_,i){const a=c.F();return c.H(a,a,[1,1,0]),c.J(a,a,[.5*_.width,.5*_.height,1]),c.K(a,a,_.calculatePosMatrix(i.toUnwrapped()))}function Fr(_,i,a,d,p,v){const w=function(R,$,G){if(R)for(const K of R){const re=$[K];if(re&&re.source===G&&re.type==="fill-extrusion")return!0}else for(const K in $){const re=$[K];if(re.source===G&&re.type==="fill-extrusion")return!0}return!1}(p&&p.layers,i,_.id),S=v.maxPitchScaleFactor(),I=_.tilesIn(d,S,w);I.sort(lr);const z=[];for(const R of I)z.push({wrappedTileID:R.tileID.wrapped().key,queryResults:R.tile.queryRenderedFeatures(i,a,_._state,R.queryGeometry,R.cameraQueryGeometry,R.scale,p,v,S,pr(_.transform,R.tileID))});const O=function(R){const $={},G={};for(const K of R){const re=K.queryResults,J=K.wrappedTileID,ce=G[J]=G[J]||{};for(const me in re){const te=re[me],ve=ce[me]=ce[me]||{},Se=$[me]=$[me]||[];for(const Pe of te)ve[Pe.featureIndex]||(ve[Pe.featureIndex]=!0,Se.push(Pe))}}return $}(z);for(const R in O)O[R].forEach($=>{const G=$.feature,K=_.getFeatureState(G.layer["source-layer"],G.id);G.source=G.layer.source,G.layer["source-layer"]&&(G.sourceLayer=G.layer["source-layer"]),G.state=K});return O}function lr(_,i){const a=_.tileID,d=i.tileID;return a.overscaledZ-d.overscaledZ||a.canonical.y-d.canonical.y||a.wrap-d.wrap||a.canonical.x-d.canonical.x}function ue(_,i,a){return c._(this,void 0,void 0,function*(){let d=_;if(_.url?d=(yield c.h(i.transformRequest(_.url,"Source"),a)).data:yield A.frameAsync(a),!d)return null;const p=c.L(c.e(d,_),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(p.vectorLayerIds=d.vector_layers.map(v=>v.id)),p})}class ge{constructor(i,a){i&&(a?this.setSouthWest(i).setNorthEast(a):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof c.M?new c.M(i.lng,i.lat):c.M.convert(i),this}setSouthWest(i){return this._sw=i instanceof c.M?new c.M(i.lng,i.lat):c.M.convert(i),this}extend(i){const a=this._sw,d=this._ne;let p,v;if(i instanceof c.M)p=i,v=i;else{if(!(i instanceof ge))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(ge.convert(i)):this.extend(c.M.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(c.M.convert(i)):this;if(p=i._sw,v=i._ne,!p||!v)return this}return a||d?(a.lng=Math.min(p.lng,a.lng),a.lat=Math.min(p.lat,a.lat),d.lng=Math.max(v.lng,d.lng),d.lat=Math.max(v.lat,d.lat)):(this._sw=new c.M(p.lng,p.lat),this._ne=new c.M(v.lng,v.lat)),this}getCenter(){return new c.M((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new c.M(this.getWest(),this.getNorth())}getSouthEast(){return new c.M(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:a,lat:d}=c.M.convert(i);let p=this._sw.lng<=a&&a<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=a&&a>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&p}static convert(i){return i instanceof ge?i:i&&new ge(i)}static fromLngLat(i,a=0){const d=360*a/40075017,p=d/Math.cos(Math.PI/180*i.lat);return new ge(new c.M(i.lng-p,i.lat-d),new c.M(i.lng+p,i.lat+d))}}class Be{constructor(i,a,d){this.bounds=ge.convert(this.validateBounds(i)),this.minzoom=a||0,this.maxzoom=d||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const a=Math.pow(2,i.z),d=Math.floor(c.N(this.bounds.getWest())*a),p=Math.floor(c.O(this.bounds.getNorth())*a),v=Math.ceil(c.N(this.bounds.getEast())*a),w=Math.ceil(c.O(this.bounds.getSouth())*a);return i.x>=d&&i.x<v&&i.y>=p&&i.y<w}}class le extends c.E{constructor(i,a,d,p){if(super(),this.id=i,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,c.e(this,c.L(a,["url","scheme","tileSize","promoteId"])),this._options=c.e({type:"vector"},a),this._collectResourceTiming=a.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield ue(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(c.e(this,i),i.bounds&&(this.tileBounds=new Be(i.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new c.j(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return c.e({},this._options)}loadTile(i){return c._(this,void 0,void 0,function*(){const a=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(a,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};d.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((v,w)=>{i.reloadPromise={resolve:v,reject:w}})}else i.actor=this.dispatcher.getActor(),p="LT";i.abortController=new AbortController;try{const v=yield i.actor.sendAsync({type:p,data:d},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,v)}catch(v){if(delete i.abortController,i.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,a){if(a&&a.resourceTiming&&(i.resourceTiming=a.resourceTiming),a&&this.map._refreshExpiredTiles&&i.setExpiryData(a),i.loadVectorData(a,this.map.painter),i.reloadPromise){const d=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(d.resolve).catch(d.reject)}}abortTile(i){return c._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return c._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class He extends c.E{constructor(i,a,d,p){super(),this.id=i,this.dispatcher=d,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=c.e({type:"raster"},a),c.e(this,c.L(a,["url","scheme","tileSize"]))}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield ue(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(c.e(this,i),i.bounds&&(this.tileBounds=new Be(i.bounds,this.minzoom,this.maxzoom)),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new c.j(i))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return c.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return c._(this,void 0,void 0,function*(){const a=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const d=yield j.getImage(this.map._requestManager.transformRequest(a,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&i.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});const p=this.map.painter.context,v=p.gl,w=d.data;i.texture=this.map.painter.getTileTexture(w.width),i.texture?i.texture.update(w,{useMipmap:!0}):(i.texture=new Ae(p,w,v.RGBA,{useMipmap:!0}),i.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),p.extTextureFilterAnisotropic&&v.texParameterf(v.TEXTURE_2D,p.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,p.extTextureFilterAnisotropicMax)),i.state="loaded"}}catch(d){if(delete i.abortController,i.aborted)i.state="unloaded";else if(d)throw i.state="errored",d}})}abortTile(i){return c._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return c._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class tt extends He{constructor(i,a,d,p){super(i,a,d,p),this.type="raster-dem",this.maxzoom=22,this._options=c.e({type:"raster-dem"},a),this.encoding=a.encoding||"mapbox",this.redFactor=a.redFactor,this.greenFactor=a.greenFactor,this.blueFactor=a.blueFactor,this.baseShift=a.baseShift}loadTile(i){return c._(this,void 0,void 0,function*(){const a=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(a,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const p=yield j.getImage(d,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(p&&p.data){const v=p.data;this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&i.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const w=c.b(v)&&c.S()?v:yield this.readImageNow(v),S={type:this.type,uid:i.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const I=yield i.actor.sendAsync({type:"LDT",data:S});i.dem=I,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(p){if(delete i.abortController,i.aborted)i.state="unloaded";else if(p)throw i.state="errored",p}})}readImageNow(i){return c._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&c.U()){const a=i.width+2,d=i.height+2;try{return new c.R({width:a,height:d},yield c.V(i,-1,-1,a,d))}catch{}}return A.getImageData(i,1)})}_getNeighboringTiles(i){const a=i.canonical,d=Math.pow(2,a.z),p=(a.x-1+d)%d,v=a.x===0?i.wrap-1:i.wrap,w=(a.x+1+d)%d,S=a.x+1===d?i.wrap+1:i.wrap,I={};return I[new c.Q(i.overscaledZ,v,a.z,p,a.y).key]={backfilled:!1},I[new c.Q(i.overscaledZ,S,a.z,w,a.y).key]={backfilled:!1},a.y>0&&(I[new c.Q(i.overscaledZ,v,a.z,p,a.y-1).key]={backfilled:!1},I[new c.Q(i.overscaledZ,i.wrap,a.z,a.x,a.y-1).key]={backfilled:!1},I[new c.Q(i.overscaledZ,S,a.z,w,a.y-1).key]={backfilled:!1}),a.y+1<d&&(I[new c.Q(i.overscaledZ,v,a.z,p,a.y+1).key]={backfilled:!1},I[new c.Q(i.overscaledZ,i.wrap,a.z,a.x,a.y+1).key]={backfilled:!1},I[new c.Q(i.overscaledZ,S,a.z,w,a.y+1).key]={backfilled:!1}),I}unloadTile(i){return c._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class Ze extends c.E{constructor(i,a,d,p){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=d.getActor(),this.setEventedParent(p),this._data=a.data,this._options=c.e({},a),this._collectResourceTiming=a.collectResourceTiming,a.maxzoom!==void 0&&(this.maxzoom=a.maxzoom),a.type&&(this.type=a.type),a.attribution&&(this.attribution=a.attribution),this.promoteId=a.promoteId;const v=c.W/this.tileSize;this.workerOptions=c.e({source:this.id,cluster:a.cluster||!1,geojsonVtOptions:{buffer:(a.buffer!==void 0?a.buffer:128)*v,tolerance:(a.tolerance!==void 0?a.tolerance:.375)*v,extent:c.W,maxZoom:this.maxzoom,lineMetrics:a.lineMetrics||!1,generateId:a.generateId||!1},superclusterOptions:{maxZoom:a.clusterMaxZoom!==void 0?a.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,a.clusterMinPoints||2),extent:c.W,radius:(a.clusterRadius||50)*v,log:!1,generateId:a.generateId||!1},clusterProperties:a.clusterProperties,filter:a.filter},a.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return c._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return c._(this,void 0,void 0,function*(){const i=c.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,a,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:a,offset:d}})}_updateWorkerData(i){return c._(this,void 0,void 0,function*(){const a=c.e({type:this.type},this.workerOptions);i?a.dataDiff=i:typeof this._data=="string"?(a.request=this.map._requestManager.transformRequest(A.resolveURL(this._data),"Source"),a.request.collectResourceTiming=this._collectResourceTiming):a.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new c.k("dataloading",{dataType:"source"}));try{const d=yield this.actor.sendAsync({type:"LD",data:a});if(this._pendingLoads--,this._removed||d.abandoned)return void this.fire(new c.k("dataabort",{dataType:"source"}));let p=null;d.resourceTiming&&d.resourceTiming[this.id]&&(p=d.resourceTiming[this.id].slice(0));const v={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&c.e(v,{resourceTiming:p}),this.fire(new c.k("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new c.k("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(d){if(this._pendingLoads--,this._removed)return void this.fire(new c.k("dataabort",{dataType:"source"}));this.fire(new c.j(d))}})}loaded(){return this._pendingLoads===0}loadTile(i){return c._(this,void 0,void 0,function*(){const a=i.actor?"RT":"LT";i.actor=this.actor;const d={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;const p=yield this.actor.sendAsync({type:a,data:d},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(p,this.map.painter,a==="RT")})}abortTile(i){return c._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return c._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return c.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var je=c.X([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Qe extends c.E{constructor(i,a,d,p){super(),this.id=i,this.dispatcher=d,this.coordinates=a.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=a}load(i){return c._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new c.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const a=yield j.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,a&&a.data&&(this.image=a.data,i&&(this.coordinates=i),this._finishLoading())}catch(a){this._request=null,this._loaded=!0,this.fire(new c.j(a))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new c.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const a=i.map(c.Y.fromLngLat);this.tileID=function(p){let v=1/0,w=1/0,S=-1/0,I=-1/0;for(const $ of p)v=Math.min(v,$.x),w=Math.min(w,$.y),S=Math.max(S,$.x),I=Math.max(I,$.y);const z=Math.max(S-v,I-w),O=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),R=Math.pow(2,O);return new c.a0(O,Math.floor((v+S)/2*R),Math.floor((w+I)/2*R))}(a),this.minzoom=this.maxzoom=this.tileID.z;const d=a.map(p=>this.tileID.getTilePoint(p)._round());return this._boundsArray=new c.Z,this._boundsArray.emplaceBack(d[0].x,d[0].y,0,0),this._boundsArray.emplaceBack(d[1].x,d[1].y,c.W,0),this._boundsArray.emplaceBack(d[3].x,d[3].y,0,c.W),this._boundsArray.emplaceBack(d[2].x,d[2].y,c.W,c.W),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new c.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,a=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,je.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ae(i,this.image,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const v=this.tiles[p];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,d=!0)}d&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return c._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class We extends Qe{constructor(i,a,d,p){super(i,a,d,p),this.roundZoom=!0,this.type="video",this.options=a}load(){return c._(this,void 0,void 0,function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const a of i.urls)this.urls.push(this.map._requestManager.transformRequest(a,"Source").url);try{const a=yield c.a2(this.urls);if(this._loaded=!0,!a)return;this.video=a,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(a){this.fire(new c.j(a))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const a=this.video.seekable;i<a.start(0)||i>a.end(0)?this.fire(new c.j(new c.a1(`sources.${this.id}`,null,`Playback for this video can be set only between the ${a.start(0)} and ${a.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,a=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,je.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),a.texSubImage2D(a.TEXTURE_2D,0,0,0,a.RGBA,a.UNSIGNED_BYTE,this.video)):(this.texture=new Ae(i,this.video,a.RGBA),this.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE));let d=!1;for(const p in this.tiles){const v=this.tiles[p];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,d=!0)}d&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class pt extends Qe{constructor(i,a,d,p){super(i,a,d,p),a.coordinates?Array.isArray(a.coordinates)&&a.coordinates.length===4&&!a.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(w=>typeof w!="number"))||this.fire(new c.j(new c.a1(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new c.j(new c.a1(`sources.${i}`,null,'missing required property "coordinates"'))),a.animate&&typeof a.animate!="boolean"&&this.fire(new c.j(new c.a1(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),a.canvas?typeof a.canvas=="string"||a.canvas instanceof HTMLCanvasElement||this.fire(new c.j(new c.a1(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new c.j(new c.a1(`sources.${i}`,null,'missing required property "canvas"'))),this.options=a,this.animate=a.animate===void 0||a.animate}load(){return c._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new c.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const a=this.map.painter.context,d=a.gl;this.boundsBuffer||(this.boundsBuffer=a.createVertexBuffer(this._boundsArray,je.members)),this.boundsSegments||(this.boundsSegments=c.$.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ae(a,this.canvas,d.RGBA,{premultiply:!0});let p=!1;for(const v in this.tiles){const w=this.tiles[v];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new c.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const Tt={},xt=_=>{switch(_){case"geojson":return Ze;case"image":return Qe;case"raster":return He;case"raster-dem":return tt;case"vector":return le;case"video":return We;case"canvas":return pt}return Tt[_]},Lt="RTLPluginLoaded";class Ht extends c.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Br()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(a=>{throw this.status="error",a})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return c._(this,arguments,void 0,function*(a,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=A.resolveURL(a),!this.url)throw new Error(`requested url ${a} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return c._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new c.k(Lt))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let $e=null;function Gt(){return $e||($e=new Ht),$e}class ai{constructor(i,a){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=c.a3(),this.uses=0,this.tileSize=a,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const a=i+this.timeAdded;a<this.fadeEndTime||(this.fadeEndTime=a)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,a,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(p,v){const w={};if(!v)return w;for(const S of p){const I=S.layerIds.map(z=>v.getLayer(z)).filter(Boolean);if(I.length!==0){S.layers=I,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(z=>I.filter(O=>O.id===z)[0]));for(const z of I)w[z.id]=S}}return w}(i.buckets,a.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const v=this.buckets[p];if(v instanceof c.a5){if(this.hasSymbolBuckets=!0,!d)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const v=this.buckets[p];if(v instanceof c.a5&&v.hasRTLText){this.hasRTLText=!0,Gt().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const v=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,a.style.getLayer(p).queryRadius(v))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new c.a4}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const d in this.buckets){const p=this.buckets[d];p.uploadPending()&&p.upload(i)}const a=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ae(i,this.imageAtlas.image,a.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ae(i,this.glyphAtlasImage,a.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,a,d,p,v,w,S,I,z,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:v,scale:w,tileSize:this.tileSize,pixelPosMatrix:O,transform:I,params:S,queryPadding:this.queryPadding*z},i,a,d):{}}querySourceFeatures(i,a){const d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;const p=d.loadVTLayers(),v=a&&a.sourceLayer?a.sourceLayer:"",w=p._geojsonTileLayer||p[v];if(!w)return;const S=c.a6(a&&a.filter),{z:I,x:z,y:O}=this.tileID.canonical,R={z:I,x:z,y:O};for(let $=0;$<w.length;$++){const G=w.feature($);if(S.needGeometry){const J=c.a7(G,!0);if(!S.filter(new c.a8(this.tileID.overscaledZ),J,this.tileID.canonical))continue}else if(!S.filter(new c.a8(this.tileID.overscaledZ),G))continue;const K=d.getId(G,v),re=new c.a9(G,I,z,O,K);re.tile=R,i.push(re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const a=this.expirationTime;if(i.cacheControl){const d=c.aa(i.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const d=Date.now();let p=!1;if(this.expirationTime>d)p=!1;else if(a)if(this.expirationTime<a)p=!0;else{const v=this.expirationTime-a;v?this.expirationTime=d+Math.max(v,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const d=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!a.style.hasLayer(p))continue;const v=this.buckets[p],w=v.layers[0].sourceLayer||"_geojsonTileLayer",S=d[w],I=i[w];if(!S||!I||Object.keys(I).length===0)continue;v.update(I,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=a&&a.style&&a.style.getLayer(p);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<A.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=A.now()+i}setDependencies(i,a){const d={};for(const p of a)d[p]=!0;this.dependencies[i]=d}hasDependency(i,a){for(const d of i){const p=this.dependencies[d];if(p){for(const v of a)if(p[v])return!0}}return!1}}class mr{constructor(i,a){this.max=i,this.onRemove=a,this.reset()}reset(){for(const i in this.data)for(const a of this.data[i])a.timeout&&clearTimeout(a.timeout),this.onRemove(a.value);return this.data={},this.order=[],this}add(i,a,d){const p=i.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const v={value:a,timeout:void 0};if(d!==void 0&&(v.timeout=setTimeout(()=>{this.remove(i,v)},d)),this.data[p].push(v),this.order.push(p),this.order.length>this.max){const w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const a=this.data[i].shift();return a.timeout&&clearTimeout(a.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),a.value}getByKey(i){const a=this.data[i];return a?a[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,a){if(!this.has(i))return this;const d=i.wrapped().key,p=a===void 0?0:this.data[d].indexOf(a),v=this.data[d][p];return this.data[d].splice(p,1),v.timeout&&clearTimeout(v.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(v.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const a=this._getAndRemoveByKey(this.order[0]);a&&this.onRemove(a)}return this}filter(i){const a=[];for(const d in this.data)for(const p of this.data[d])i(p.value)||a.push(p);for(const d of a)this.remove(d.value.tileID,d)}}class Kr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,a,d){const p=String(a);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][p]=this.stateChanges[i][p]||{},c.e(this.stateChanges[i][p],d),this.deletedStates[i]===null){this.deletedStates[i]={};for(const v in this.state[i])v!==p&&(this.deletedStates[i][v]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][p]===null){this.deletedStates[i][p]={};for(const v in this.state[i][p])d[v]||(this.deletedStates[i][p][v]=null)}else for(const v in d)this.deletedStates[i]&&this.deletedStates[i][p]&&this.deletedStates[i][p][v]===null&&delete this.deletedStates[i][p][v]}removeFeatureState(i,a,d){if(this.deletedStates[i]===null)return;const p=String(a);if(this.deletedStates[i]=this.deletedStates[i]||{},d&&a!==void 0)this.deletedStates[i][p]!==null&&(this.deletedStates[i][p]=this.deletedStates[i][p]||{},this.deletedStates[i][p][d]=null);else if(a!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][p])for(d in this.deletedStates[i][p]={},this.stateChanges[i][p])this.deletedStates[i][p][d]=null;else this.deletedStates[i][p]=null;else this.deletedStates[i]=null}getState(i,a){const d=String(a),p=c.e({},(this.state[i]||{})[d],(this.stateChanges[i]||{})[d]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const v=this.deletedStates[i][a];if(v===null)return{};for(const w in v)delete p[w]}return p}initializeTileState(i,a){i.setFeatureState(this.state,a)}coalesceChanges(i,a){const d={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const v={};for(const w in this.stateChanges[p])this.state[p][w]||(this.state[p][w]={}),c.e(this.state[p][w],this.stateChanges[p][w]),v[w]=this.state[p][w];d[p]=v}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const v={};if(this.deletedStates[p]===null)for(const w in this.state[p])v[w]={},this.state[p][w]={};else for(const w in this.deletedStates[p]){if(this.deletedStates[p][w]===null)this.state[p][w]={};else for(const S of Object.keys(this.deletedStates[p][w]))delete this.state[p][w][S];v[w]=this.state[p][w]}d[p]=d[p]||{},c.e(d[p],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(const p in i)i[p].setFeatureState(d,a)}}class Ye extends c.E{constructor(i,a,d){super(),this.id=i,this.dispatcher=d,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,v,w,S)=>{const I=new(xt(v.type))(p,v,w,S);if(I.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${I.id}`);return I})(i,a,d,this),this._tiles={},this._cache=new mr(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Kr,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const a=this._tiles[i];if(a.state!=="loaded"&&a.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,a,d){return c._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,a,d)}catch(p){i.state="errored",p.status!==404?this._source.fire(new c.j(p,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new c.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const a in this._tiles){const d=this._tiles[a];d.upload(i),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Bt).map(i=>i.key)}getRenderableIds(i){const a=[];for(const d in this._tiles)this._isIdRenderable(d,i)&&a.push(this._tiles[d]);return i?a.sort((d,p)=>{const v=d.tileID,w=p.tileID,S=new c.P(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),I=new c.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-w.overscaledZ||I.y-S.y||I.x-S.x}).map(d=>d.tileID.key):a.map(d=>d.tileID).sort(Bt).map(d=>d.key)}hasRenderableParent(i){const a=this.findLoadedParent(i,0);return!!a&&this._isIdRenderable(a.tileID.key)}_isIdRenderable(i,a){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(a||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,a){return c._(this,void 0,void 0,function*(){const d=this._tiles[i];d&&(d.state!=="loading"&&(d.state=a),yield this._loadTile(d,i,a))})}_tileLoaded(i,a,d){i.timeAdded=A.now(),d==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(a,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new c.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const a=this.getRenderableIds();for(let p=0;p<a.length;p++){const v=a[p];if(i.neighboringTiles&&i.neighboringTiles[v]){const w=this.getTileByID(v);d(i,w),d(w,i)}}function d(p,v){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let w=v.tileID.canonical.x-p.tileID.canonical.x;const S=v.tileID.canonical.y-p.tileID.canonical.y,I=Math.pow(2,p.tileID.canonical.z),z=v.tileID.key;w===0&&S===0||Math.abs(S)>1||(Math.abs(w)>1&&(Math.abs(w+I)===1?w+=I:Math.abs(w-I)===1&&(w-=I)),v.dem&&p.dem&&(p.dem.backfillBorder(v.dem,w,S),p.neighboringTiles&&p.neighboringTiles[z]&&(p.neighboringTiles[z].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,a,d,p){for(const v in this._tiles){let w=this._tiles[v];if(p[v]||!w.hasData()||w.tileID.overscaledZ<=a||w.tileID.overscaledZ>d)continue;let S=w.tileID;for(;w&&w.tileID.overscaledZ>a+1;){const z=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[z.key],w&&w.hasData()&&(S=z)}let I=S;for(;I.overscaledZ>a;)if(I=I.scaledTo(I.overscaledZ-1),i[I.key]){p[S.key]=S;break}}}findLoadedParent(i,a){if(i.key in this._loadedParentTiles){const d=this._loadedParentTiles[i.key];return d&&d.tileID.overscaledZ>=a?d:null}for(let d=i.overscaledZ-1;d>=a;d--){const p=i.scaledTo(d),v=this._getLoadedTile(p);if(v)return v}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const a=this._tiles[i.key];return a&&a.hasData()?a:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const a=Math.ceil(i.width/this._source.tileSize)+1,d=Math.ceil(i.height/this._source.tileSize)+1,p=Math.floor(a*d*(this._maxTileCacheZoomLevels===null?c.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(v)}handleWrapJump(i){const a=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,a){const d={};for(const p in this._tiles){const v=this._tiles[p];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+a),d[v.tileID.key]=v}this._tiles=d;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(i,a,d,p,v,w){const S={},I={},z=Object.keys(i),O=A.now();for(const R of z){const $=i[R],G=this._tiles[R];if(!G||G.fadeEndTime!==0&&G.fadeEndTime<=O)continue;const K=this.findLoadedParent($,a),re=this.findLoadedSibling($),J=K||re||null;J&&(this._addTile(J.tileID),S[J.tileID.key]=J.tileID),I[R]=$}this._retainLoadedChildren(I,p,d,i);for(const R in S)i[R]||(this._coveredTiles[R]=!0,i[R]=S[R]);if(w){const R={},$={};for(const G of v)this._tiles[G.key].hasData()?R[G.key]=G:$[G.key]=G;for(const G in $){const K=$[G].children(this._source.maxzoom);this._tiles[K[0].key]&&this._tiles[K[1].key]&&this._tiles[K[2].key]&&this._tiles[K[3].key]&&(R[K[0].key]=i[K[0].key]=K[0],R[K[1].key]=i[K[1].key]=K[1],R[K[2].key]=i[K[2].key]=K[2],R[K[3].key]=i[K[3].key]=K[3],delete $[G])}for(const G in $){const K=$[G],re=this.findLoadedParent(K,this._source.minzoom),J=this.findLoadedSibling(K),ce=re||J||null;if(ce){R[ce.tileID.key]=i[ce.tileID.key]=ce.tileID;for(const me in R)R[me].isChildOf(ce.tileID)&&delete R[me]}}for(const G in this._tiles)R[G]||(this._coveredTiles[G]=!0)}}update(i,a){if(!this._sourceLoaded||this._paused)return;let d;this.transform=i,this.terrain=a,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new c.Q(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(d=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:a}),this._source.hasTile&&(d=d.filter(O=>this._source.hasTile(O)))):d=[];const p=i.coveringZoomLevel(this._source),v=Math.max(p-Ye.maxOverzooming,this._source.minzoom),w=Math.max(p+Ye.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const O={};for(const R of d)if(R.canonical.z>this._source.minzoom){const $=R.scaledTo(R.canonical.z-1);O[$.key]=$;const G=R.scaledTo(Math.max(this._source.minzoom,Math.min(R.canonical.z,5)));O[G.key]=G}d=d.concat(Object.values(O))}const S=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,S&&this.fire(new c.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const I=this._updateRetainedTiles(d,p);Dt(this._source.type)&&this._updateCoveredAndRetainedTiles(I,v,w,p,d,a);for(const O in I)this._tiles[O].clearFadeHold();const z=c.ab(this._tiles,I);for(const O of z){const R=this._tiles[O];R.hasSymbolBuckets&&!R.holdingForFade()?R.setHoldDuration(this.map._fadeDuration):R.hasSymbolBuckets&&!R.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,a){var d;const p={},v={},w=Math.max(a-Ye.maxOverzooming,this._source.minzoom),S=Math.max(a+Ye.maxUnderzooming,this._source.minzoom),I={};for(const z of i){const O=this._addTile(z);p[z.key]=z,O.hasData()||a<this._source.maxzoom&&(I[z.key]=z)}this._retainLoadedChildren(I,a,S,p);for(const z of i){let O=this._tiles[z.key];if(O.hasData())continue;if(a+1>this._source.maxzoom){const $=z.children(this._source.maxzoom)[0],G=this.getTile($);if(G&&G.hasData()){p[$.key]=$;continue}}else{const $=z.children(this._source.maxzoom);if(p[$[0].key]&&p[$[1].key]&&p[$[2].key]&&p[$[3].key])continue}let R=O.wasRequested();for(let $=z.overscaledZ-1;$>=w;--$){const G=z.scaledTo($);if(v[G.key])break;if(v[G.key]=!0,O=this.getTile(G),!O&&R&&(O=this._addTile(G)),O){const K=O.hasData();if((K||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||R)&&(p[G.key]=G),R=O.wasRequested(),K)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const a=[];let d,p=this._tiles[i].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){d=this._loadedParentTiles[p.key];break}a.push(p.key);const v=p.scaledTo(p.overscaledZ-1);if(d=this._getLoadedTile(v),d)break;p=v}for(const v of a)this._loadedParentTiles[v]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const a=this._tiles[i].tileID,d=this._getLoadedTile(a);this._loadedSiblingTiles[a.key]=d}}_addTile(i){let a=this._tiles[i.key];if(a)return a;a=this._cache.getAndRemove(i),a&&(this._setTileReloadTimer(i.key,a),a.tileID=i,this._state.initializeTileState(a,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,a)));const d=a;return a||(a=new ai(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(a,i.key,a.state)),a.uses++,this._tiles[i.key]=a,d||this._source.fire(new c.k("dataloading",{tile:a,coord:a.tileID,dataType:"source"})),a}_setTileReloadTimer(i,a){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const d=a.getExpiryTimeout();d&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},d))}_removeTile(i){const a=this._tiles[i];a&&(a.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),a.uses>0||(a.hasData()&&a.state!=="reloading"?this._cache.add(a.tileID,a,a.getExpiryTimeout()):(a.aborted=!0,this._abortTile(a),this._unloadTile(a))))}_dataHandler(i){const a=i.sourceDataType;i.dataType==="source"&&a==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&a==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,a,d){const p=[],v=this.transform;if(!v)return p;const w=d?v.getCameraQueryGeometry(i):i,S=i.map(K=>v.pointCoordinate(K,this.terrain)),I=w.map(K=>v.pointCoordinate(K,this.terrain)),z=this.getIds();let O=1/0,R=1/0,$=-1/0,G=-1/0;for(const K of I)O=Math.min(O,K.x),R=Math.min(R,K.y),$=Math.max($,K.x),G=Math.max(G,K.y);for(let K=0;K<z.length;K++){const re=this._tiles[z[K]];if(re.holdingForFade())continue;const J=re.tileID,ce=Math.pow(2,v.zoom-re.tileID.overscaledZ),me=a*re.queryPadding*c.W/re.tileSize/ce,te=[J.getTilePoint(new c.Y(O,R)),J.getTilePoint(new c.Y($,G))];if(te[0].x-me<c.W&&te[0].y-me<c.W&&te[1].x+me>=0&&te[1].y+me>=0){const ve=S.map(Pe=>J.getTilePoint(Pe)),Se=I.map(Pe=>J.getTilePoint(Pe));p.push({tile:re,tileID:J,queryGeometry:ve,cameraQueryGeometry:Se,scale:ce})}}return p}getVisibleCoordinates(i){const a=this.getRenderableIds(i).map(d=>this._tiles[d].tileID);for(const d of a)d.posMatrix=this.transform.calculatePosMatrix(d.toUnwrapped());return a}hasTransition(){if(this._source.hasTransition())return!0;if(Dt(this._source.type)){const i=A.now();for(const a in this._tiles)if(this._tiles[a].fadeEndTime>=i)return!0}return!1}setFeatureState(i,a,d){this._state.updateState(i=i||"_geojsonTileLayer",a,d)}removeFeatureState(i,a,d){this._state.removeFeatureState(i=i||"_geojsonTileLayer",a,d)}getFeatureState(i,a){return this._state.getState(i=i||"_geojsonTileLayer",a)}setDependencies(i,a,d){const p=this._tiles[i];p&&p.setDependencies(a,d)}reloadTilesForDependencies(i,a){for(const d in this._tiles)this._tiles[d].hasDependency(i,a)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(i,a))}}function Bt(_,i){const a=Math.abs(2*_.wrap)-+(_.wrap<0),d=Math.abs(2*i.wrap)-+(i.wrap<0);return _.overscaledZ-i.overscaledZ||d-a||i.canonical.y-_.canonical.y||i.canonical.x-_.canonical.x}function Dt(_){return _==="raster"||_==="image"||_==="video"}Ye.maxOverzooming=10,Ye.maxUnderzooming=3;class pi{constructor(i,a){this.reset(i,a)}reset(i,a){this.points=i||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(a||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=c.ac(i,0,1);let a=1,d=this._distances[a];const p=i*this.paddedLength+this.padding;for(;d<p&&a<this._distances.length;)d=this._distances[++a];const v=a-1,w=this._distances[v],S=d-w,I=S>0?(p-w)/S:0;return this.points[v].mult(1-I).add(this.points[a].mult(I))}}function Ti(_,i){let a=!0;return _==="always"||_!=="never"&&i!=="never"||(a=!1),a}class Ft{constructor(i,a,d){const p=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(i/d),this.yCellCount=Math.ceil(a/d);for(let w=0;w<this.xCellCount*this.yCellCount;w++)p.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=a,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/a,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,a,d,p,v){this._forEachCell(a,d,p,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(a),this.bboxes.push(d),this.bboxes.push(p),this.bboxes.push(v)}insertCircle(i,a,d,p){this._forEachCell(a-p,d-p,a+p,d+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(a),this.circles.push(d),this.circles.push(p)}_insertBoxCell(i,a,d,p,v,w){this.boxCells[v].push(w)}_insertCircleCell(i,a,d,p,v,w){this.circleCells[v].push(w)}_query(i,a,d,p,v,w,S){if(d<0||i>this.width||p<0||a>this.height)return[];const I=[];if(i<=0&&a<=0&&this.width<=d&&this.height<=p){if(v)return[{key:null,x1:i,y1:a,x2:d,y2:p}];for(let z=0;z<this.boxKeys.length;z++)I.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const O=this.circles[3*z],R=this.circles[3*z+1],$=this.circles[3*z+2];I.push({key:this.circleKeys[z],x1:O-$,y1:R-$,x2:O+$,y2:R+$})}}else this._forEachCell(i,a,d,p,this._queryCell,I,{hitTest:v,overlapMode:w,seenUids:{box:{},circle:{}}},S);return I}query(i,a,d,p){return this._query(i,a,d,p,!1,null)}hitTest(i,a,d,p,v,w){return this._query(i,a,d,p,!0,v,w).length>0}hitTestCircle(i,a,d,p,v){const w=i-d,S=i+d,I=a-d,z=a+d;if(S<0||w>this.width||z<0||I>this.height)return!1;const O=[];return this._forEachCell(w,I,S,z,this._queryCellCircle,O,{hitTest:!0,overlapMode:p,circle:{x:i,y:a,radius:d},seenUids:{box:{},circle:{}}},v),O.length>0}_queryCell(i,a,d,p,v,w,S,I){const{seenUids:z,hitTest:O,overlapMode:R}=S,$=this.boxCells[v];if($!==null){const K=this.bboxes;for(const re of $)if(!z.box[re]){z.box[re]=!0;const J=4*re,ce=this.boxKeys[re];if(i<=K[J+2]&&a<=K[J+3]&&d>=K[J+0]&&p>=K[J+1]&&(!I||I(ce))&&(!O||!Ti(R,ce.overlapMode))&&(w.push({key:ce,x1:K[J],y1:K[J+1],x2:K[J+2],y2:K[J+3]}),O))return!0}}const G=this.circleCells[v];if(G!==null){const K=this.circles;for(const re of G)if(!z.circle[re]){z.circle[re]=!0;const J=3*re,ce=this.circleKeys[re];if(this._circleAndRectCollide(K[J],K[J+1],K[J+2],i,a,d,p)&&(!I||I(ce))&&(!O||!Ti(R,ce.overlapMode))){const me=K[J],te=K[J+1],ve=K[J+2];if(w.push({key:ce,x1:me-ve,y1:te-ve,x2:me+ve,y2:te+ve}),O)return!0}}}return!1}_queryCellCircle(i,a,d,p,v,w,S,I){const{circle:z,seenUids:O,overlapMode:R}=S,$=this.boxCells[v];if($!==null){const K=this.bboxes;for(const re of $)if(!O.box[re]){O.box[re]=!0;const J=4*re,ce=this.boxKeys[re];if(this._circleAndRectCollide(z.x,z.y,z.radius,K[J+0],K[J+1],K[J+2],K[J+3])&&(!I||I(ce))&&!Ti(R,ce.overlapMode))return w.push(!0),!0}}const G=this.circleCells[v];if(G!==null){const K=this.circles;for(const re of G)if(!O.circle[re]){O.circle[re]=!0;const J=3*re,ce=this.circleKeys[re];if(this._circlesCollide(K[J],K[J+1],K[J+2],z.x,z.y,z.radius)&&(!I||I(ce))&&!Ti(R,ce.overlapMode))return w.push(!0),!0}}}_forEachCell(i,a,d,p,v,w,S,I){const z=this._convertToXCellCoord(i),O=this._convertToYCellCoord(a),R=this._convertToXCellCoord(d),$=this._convertToYCellCoord(p);for(let G=z;G<=R;G++)for(let K=O;K<=$;K++)if(v.call(this,i,a,d,p,this.xCellCount*K+G,w,S,I))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,a,d,p,v,w){const S=p-i,I=v-a,z=d+w;return z*z>S*S+I*I}_circleAndRectCollide(i,a,d,p,v,w,S){const I=(w-p)/2,z=Math.abs(i-(p+I));if(z>I+d)return!1;const O=(S-v)/2,R=Math.abs(a-(v+O));if(R>O+d)return!1;if(z<=I||R<=O)return!0;const $=z-I,G=R-O;return $*$+G*G<=d*d}}function ro(_,i,a,d,p){const v=c.F();return i?(c.J(v,v,[1/p,1/p,1]),a||c.ad(v,v,d.angle)):c.K(v,d.labelPlaneMatrix,_),v}function no(_,i,a,d,p){if(i){const v=c.ae(_);return c.J(v,v,[p,p,1]),a||c.ad(v,v,-d.angle),v}return d.glCoordMatrix}function gr(_,i,a){let d;a?(d=[_.x,_.y,a(_.x,_.y),1],c.af(d,d,i)):(d=[_.x,_.y,0,1],function(v,w,S){const I=w[0],z=w[1];v[0]=S[0]*I+S[4]*z+S[12],v[1]=S[1]*I+S[5]*z+S[13],v[3]=S[3]*I+S[7]*z+S[15]}(d,d,i));const p=d[3];return{point:new c.P(d[0]/p,d[1]/p),signedDistanceFromCamera:p,isOccluded:!1}}function Q(_,i){return .5+_/i*.5}function F(_,i){return _.x>=-i[0]&&_.x<=i[0]&&_.y>=-i[1]&&_.y<=i[1]}function N(_,i,a,d,p,v,w,S,I,z,O,R,$,G,K){const re=d?_.textSizeData:_.iconSizeData,J=c.ag(re,a.transform.zoom),ce=[256/a.width*2+1,256/a.height*2+1],me=d?_.text.dynamicLayoutVertexArray:_.icon.dynamicLayoutVertexArray;me.clear();const te=_.lineVertexArray,ve=d?_.text.placedSymbolArray:_.icon.placedSymbolArray,Se=a.transform.width/a.transform.height;let Pe=!1;for(let Ne=0;Ne<ve.length;Ne++){const Xe=ve.get(Ne);if(Xe.hidden||Xe.writingMode===c.ah.vertical&&!Pe){It(Xe.numGlyphs,me);continue}Pe=!1;const ut=gr(new c.P(Xe.anchorX,Xe.anchorY),i,K);if(!F(ut.point,ce)){It(Xe.numGlyphs,me);continue}const ht=Q(a.transform.cameraToCenterDistance,ut.signedDistanceFromCamera),Je=c.ai(re,J,Xe),et=w?Je/ht:Je*ht,yt={getElevation:K,labelPlaneMatrix:p,lineVertexArray:te,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:z,tileAnchorPoint:new c.P(Xe.anchorX,Xe.anchorY),unwrappedTileID:O,width:R,height:$,translation:G},Ot=fe(yt,Xe,et,!1,S,i,v,_.glyphOffsetArray,me,Se,I);Pe=Ot.useVertical,(Ot.notEnoughRoom||Pe||Ot.needsFlipping&&fe(yt,Xe,et,!0,S,i,v,_.glyphOffsetArray,me,Se,I).notEnoughRoom)&&It(Xe.numGlyphs,me)}d?_.text.dynamicLayoutVertexBuffer.updateData(me):_.icon.dynamicLayoutVertexBuffer.updateData(me)}function q(_,i,a,d,p,v,w,S){const I=v.glyphStartIndex+v.numGlyphs,z=v.lineStartIndex,O=v.lineStartIndex+v.lineLength,R=i.getoffsetX(v.glyphStartIndex),$=i.getoffsetX(I-1),G=Re(_*R,a,d,p,v.segment,z,O,S,w);if(!G)return null;const K=Re(_*$,a,d,p,v.segment,z,O,S,w);return K?S.projectionCache.anyProjectionOccluded?null:{first:G,last:K}:null}function ie(_,i,a,d){return _===c.ah.horizontal&&Math.abs(a.y-i.y)>Math.abs(a.x-i.x)*d?{useVertical:!0}:(_===c.ah.vertical?i.y<a.y:i.x>a.x)?{needsFlipping:!0}:null}function fe(_,i,a,d,p,v,w,S,I,z,O){const R=a/24,$=i.lineOffsetX*R,G=i.lineOffsetY*R;let K;if(i.numGlyphs>1){const re=i.glyphStartIndex+i.numGlyphs,J=i.lineStartIndex,ce=i.lineStartIndex+i.lineLength,me=q(R,S,$,G,d,i,O,_);if(!me)return{notEnoughRoom:!0};const te=gr(me.first.point,w,_.getElevation).point,ve=gr(me.last.point,w,_.getElevation).point;if(p&&!d){const Se=ie(i.writingMode,te,ve,z);if(Se)return Se}K=[me.first];for(let Se=i.glyphStartIndex+1;Se<re-1;Se++)K.push(Re(R*S.getoffsetX(Se),$,G,d,i.segment,J,ce,_,O));K.push(me.last)}else{if(p&&!d){const J=gr(_.tileAnchorPoint,v,_.getElevation).point,ce=i.lineStartIndex+i.segment+1,me=new c.P(_.lineVertexArray.getx(ce),_.lineVertexArray.gety(ce)),te=gr(me,v,_.getElevation),ve=te.signedDistanceFromCamera>0?te.point:function(Pe,Ne,Xe,ut,ht,Je){return _e(Pe,Ne,Xe,1,ht,Je)}(_.tileAnchorPoint,me,J,0,v,_),Se=ie(i.writingMode,J,ve,z);if(Se)return Se}const re=Re(R*S.getoffsetX(i.glyphStartIndex),$,G,d,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,_,O);if(!re||_.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};K=[re]}for(const re of K)c.aj(I,re.point,re.angle);return{}}function _e(_,i,a,d,p,v){const w=_.add(_.sub(i)._unit()),S=p!==void 0?gr(w,p,v.getElevation).point:he(w.x,w.y,v).point,I=a.sub(S);return a.add(I._mult(d/I.mag()))}function be(_,i,a){const d=i.projectionCache;if(d.projections[_])return d.projections[_];const p=new c.P(i.lineVertexArray.getx(_),i.lineVertexArray.gety(_)),v=he(p.x,p.y,i);if(v.signedDistanceFromCamera>0)return d.projections[_]=v.point,d.anyProjectionOccluded=d.anyProjectionOccluded||v.isOccluded,v.point;const w=_-a.direction;return function(S,I,z,O,R){return _e(S,I,z,O,void 0,R)}(a.distanceFromAnchor===0?i.tileAnchorPoint:new c.P(i.lineVertexArray.getx(w),i.lineVertexArray.gety(w)),p,a.previousVertex,a.absOffsetX-a.distanceFromAnchor+1,i)}function he(_,i,a){const d=_+a.translation[0],p=i+a.translation[1];let v;return!a.pitchWithMap&&a.projection.useSpecialProjectionForSymbols?(v=a.projection.projectTileCoordinates(d,p,a.unwrappedTileID,a.getElevation),v.point.x=(.5*v.point.x+.5)*a.width,v.point.y=(.5*-v.point.y+.5)*a.height):(v=gr(new c.P(d,p),a.labelPlaneMatrix,a.getElevation),v.isOccluded=!1),v}function ke(_,i,a){return _._unit()._perp()._mult(i*a)}function Ue(_,i,a,d,p,v,w,S,I){if(S.projectionCache.offsets[_])return S.projectionCache.offsets[_];const z=a.add(i);if(_+I.direction<d||_+I.direction>=p)return S.projectionCache.offsets[_]=z,z;const O=be(_+I.direction,S,I),R=ke(O.sub(a),w,I.direction),$=a.add(R),G=O.add(R);return S.projectionCache.offsets[_]=c.ak(v,z,$,G)||z,S.projectionCache.offsets[_]}function Re(_,i,a,d,p,v,w,S,I){const z=d?_-i:_+i;let O=z>0?1:-1,R=0;d&&(O*=-1,R=Math.PI),O<0&&(R+=Math.PI);let $,G=O>0?v+p:v+p+1;S.projectionCache.cachedAnchorPoint?$=S.projectionCache.cachedAnchorPoint:($=he(S.tileAnchorPoint.x,S.tileAnchorPoint.y,S).point,S.projectionCache.cachedAnchorPoint=$);let K,re,J=$,ce=$,me=0,te=0;const ve=Math.abs(z),Se=[];let Pe;for(;me+te<=ve;){if(G+=O,G<v||G>=w)return null;me+=te,ce=J,re=K;const ut={absOffsetX:ve,direction:O,distanceFromAnchor:me,previousVertex:ce};if(J=be(G,S,ut),a===0)Se.push(ce),Pe=J.sub(ce);else{let ht;const Je=J.sub(ce);ht=Je.mag()===0?ke(be(G+O,S,ut).sub(J),a,O):ke(Je,a,O),re||(re=ce.add(ht)),K=Ue(G,ht,J,v,w,re,a,S,ut),Se.push(re),Pe=K.sub(re)}te=Pe.mag()}const Ne=Pe._mult((ve-me)/te)._add(re||ce),Xe=R+Math.atan2(J.y-ce.y,J.x-ce.x);return Se.push(Ne),{point:Ne,angle:I?Xe:0,path:Se}}const De=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function It(_,i){for(let a=0;a<_;a++){const d=i.length;i.resize(d+4),i.float32.set(De,3*d)}}const St=100;class Jt{constructor(i,a,d=new Ft(i.width+200,i.height+200,25),p=new Ft(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=a,this.grid=d,this.ignoredGrid=p,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+St,this.screenBottomBoundary=i.height+St,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,a,d,p,v,w,S,I,z,O,R){const $=i.anchorPointX+I[0],G=i.anchorPointY+I[1],K=this.projectAndGetPerspectiveRatio(p,$,G,v,O),re=this._projectCollisionBox(i,d,p,v,w,S,I,K,O,R),[J,ce,me,te]=re.box;return this.mapProjection.useSpecialProjectionForSymbols&&(w?re.allPointsOccluded:this.mapProjection.isOccluded($,G,v))||K.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(J,ce,me,te)||a!=="always"&&this.grid.hitTest(J,ce,me,te,a,z)?{box:[J,ce,me,te],placeable:!1,offscreen:!1}:{box:[J,ce,me,te],placeable:!0,offscreen:this.isOffscreen(J,ce,me,te)}}placeCollisionCircles(i,a,d,p,v,w,S,I,z,O,R,$,G,K,re,J){const ce=[],me=new c.P(a.anchorX,a.anchorY),te=this.getPerspectiveRatio(w,me.x,me.y,S,J),ve=(R?v/te:v*te)/c.ap,Se={getElevation:J,labelPlaneMatrix:I,lineVertexArray:d,pitchWithMap:R,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:me,unwrappedTileID:S,width:this.transform.width,height:this.transform.height,translation:re},Pe=q(ve,p,a.lineOffsetX*ve,a.lineOffsetY*ve,!1,a,!1,Se);let Ne=!1,Xe=!1,ut=!0;if(Pe){const ht=.5*G*te+K,Je=new c.P(-100,-100),et=new c.P(this.screenRightBoundary,this.screenBottomBoundary),yt=new pi,Ot=Pe.first,it=Pe.last;let at=[];for(let Wt=Ot.path.length-1;Wt>=1;Wt--)at.push(Ot.path[Wt]);for(let Wt=1;Wt<it.path.length;Wt++)at.push(it.path[Wt]);const Pt=2.5*ht;if(z){const Wt=this.projectPathToScreenSpace(at,Se,z);at=Wt.some(Yt=>Yt.signedDistanceFromCamera<=0)?[]:Wt.map(Yt=>Yt.point)}let Ci=[];if(at.length>0){const Wt=at[0].clone(),Yt=at[0].clone();for(let Ai=1;Ai<at.length;Ai++)Wt.x=Math.min(Wt.x,at[Ai].x),Wt.y=Math.min(Wt.y,at[Ai].y),Yt.x=Math.max(Yt.x,at[Ai].x),Yt.y=Math.max(Yt.y,at[Ai].y);Ci=Wt.x>=Je.x&&Yt.x<=et.x&&Wt.y>=Je.y&&Yt.y<=et.y?[at]:Yt.x<Je.x||Wt.x>et.x||Yt.y<Je.y||Wt.y>et.y?[]:c.al([at],Je.x,Je.y,et.x,et.y)}for(const Wt of Ci){yt.reset(Wt,.25*ht);let Yt=0;Yt=yt.length<=.5*ht?1:Math.ceil(yt.paddedLength/Pt)+1;for(let Ai=0;Ai<Yt;Ai++){const Ar=Ai/Math.max(Yt-1,1),In=yt.lerp(Ar),ki=In.x+St,en=In.y+St;ce.push(ki,en,ht,0);const Nr=ki-ht,kr=en-ht,Mr=ki+ht,Cn=en+ht;if(ut=ut&&this.isOffscreen(Nr,kr,Mr,Cn),Xe=Xe||this.isInsideGrid(Nr,kr,Mr,Cn),i!=="always"&&this.grid.hitTestCircle(ki,en,ht,i,$)&&(Ne=!0,!O))return{circles:[],offscreen:!1,collisionDetected:Ne}}}}return{circles:!O&&Ne||!Xe||te<this.perspectiveRatioCutoff?[]:ce,offscreen:ut,collisionDetected:Ne}}projectPathToScreenSpace(i,a,d){return i.map(p=>gr(p,d,a.getElevation))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const a=[];let d=1/0,p=1/0,v=-1/0,w=-1/0;for(const O of i){const R=new c.P(O.x+St,O.y+St);d=Math.min(d,R.x),p=Math.min(p,R.y),v=Math.max(v,R.x),w=Math.max(w,R.y),a.push(R)}const S=this.grid.query(d,p,v,w).concat(this.ignoredGrid.query(d,p,v,w)),I={},z={};for(const O of S){const R=O.key;if(I[R.bucketInstanceId]===void 0&&(I[R.bucketInstanceId]={}),I[R.bucketInstanceId][R.featureIndex])continue;const $=[new c.P(O.x1,O.y1),new c.P(O.x2,O.y1),new c.P(O.x2,O.y2),new c.P(O.x1,O.y2)];c.am(a,$)&&(I[R.bucketInstanceId][R.featureIndex]=!0,z[R.bucketInstanceId]===void 0&&(z[R.bucketInstanceId]=[]),z[R.bucketInstanceId].push(R.featureIndex))}return z}insertCollisionBox(i,a,d,p,v,w){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:v,collisionGroupID:w,overlapMode:a},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,a,d,p,v,w){const S=d?this.ignoredGrid:this.grid,I={bucketInstanceId:p,featureIndex:v,collisionGroupID:w,overlapMode:a};for(let z=0;z<i.length;z+=4)S.insertCircle(I,i[z],i[z+1],i[z+2])}projectAndGetPerspectiveRatio(i,a,d,p,v){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(a,d,p,v):gr(new c.P(a,d),i,v);return{point:new c.P((w.point.x+1)/2*this.transform.width+St,(1-w.point.y)/2*this.transform.height+St),perspectiveRatio:.5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5,isOccluded:w.isOccluded,signedDistanceFromCamera:w.signedDistanceFromCamera}}getPerspectiveRatio(i,a,d,p,v){const w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(a,d,p,v):gr(new c.P(a,d),i,v);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(i,a,d,p){return d<St||i>=this.screenRightBoundary||p<St||a>this.screenBottomBoundary}isInsideGrid(i,a,d,p){return d>=0&&i<this.gridRightBoundary&&p>=0&&a<this.gridBottomBoundary}getViewportMatrix(){const i=c.an([]);return c.H(i,i,[-100,-100,0]),i}_projectCollisionBox(i,a,d,p,v,w,S,I,z,O){const R=a*I.perspectiveRatio;let $=new c.P(1,0),G=new c.P(0,1);const K=new c.P(i.anchorPointX+S[0],i.anchorPointY+S[1]);if(w&&!v){const ht=this.projectAndGetPerspectiveRatio(d,K.x+1,K.y,p,z).point.sub(I.point).unit(),Je=Math.atan(ht.y/ht.x)+(ht.x<0?Math.PI:0),et=Math.sin(Je),yt=Math.cos(Je);$=new c.P(yt,et),G=new c.P(-et,yt)}else if(!w&&v){const ht=-this.transform.angle,Je=Math.sin(ht),et=Math.cos(ht);$=new c.P(et,Je),G=new c.P(-Je,et)}let re=I.point,J=R;if(v){re=K;const ht=this.transform.zoom-Math.floor(this.transform.zoom);J=Math.pow(2,-ht),J*=this.mapProjection.getPitchedTextCorrection(this.transform,K,p),O||(J*=c.ac(.5+I.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}O&&(re=re.add($.mult(O.x*J)).add(G.mult(O.y*J)));const ce=i.x1*J,me=i.x2*J,te=(ce+me)/2,ve=i.y1*J,Se=i.y2*J,Pe=(ve+Se)/2,Ne=[{offsetX:ce,offsetY:ve},{offsetX:te,offsetY:ve},{offsetX:me,offsetY:ve},{offsetX:me,offsetY:Pe},{offsetX:me,offsetY:Se},{offsetX:te,offsetY:Se},{offsetX:ce,offsetY:Se},{offsetX:ce,offsetY:Pe}];let Xe=[];for(const{offsetX:ht,offsetY:Je}of Ne)Xe.push(new c.P(re.x+$.x*ht+G.x*Je,re.y+$.y*ht+G.y*Je));let ut=!1;if(v){const ht=Xe.map(Je=>this.projectAndGetPerspectiveRatio(d,Je.x,Je.y,p,z));ut=ht.some(Je=>!Je.isOccluded),Xe=ht.map(Je=>Je.point)}else ut=!0;return{box:c.ao(Xe),allPointsOccluded:!ut}}}function Rt(_,i,a){return i*(c.W/(_.tileSize*Math.pow(2,a-_.tileID.overscaledZ)))}class ii{constructor(i,a,d,p){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?a:-a))):p&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class mi{constructor(i,a,d,p,v){this.text=new ii(i?i.text:null,a,d,v),this.icon=new ii(i?i.icon:null,a,p,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ii{constructor(i,a,d){this.text=i,this.icon=a,this.skipFade=d}}class rr{constructor(){this.invProjMatrix=c.F(),this.viewportMatrix=c.F(),this.circles=[]}}class Zt{constructor(i,a,d,p,v){this.bucketInstanceId=i,this.featureIndex=a,this.sourceLayerIndex=d,this.bucketIndex=p,this.tileID=v}}class Fi{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const a=++this.maxGroupID;this.collisionGroups[i]={ID:a,predicate:d=>d.collisionGroupID===a}}return this.collisionGroups[i]}}function cr(_,i,a,d,p){const{horizontalAlign:v,verticalAlign:w}=c.au(_);return new c.P(-(v-.5)*i+d[0]*p,-(w-.5)*a+d[1]*p)}class Xr{constructor(i,a,d,p,v,w){this.transform=i.clone(),this.terrain=d,this.collisionIndex=new Jt(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Fi(v),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const a=this.terrain;return a?(d,p)=>a.getElevation(i,d,p):null}getBucketParts(i,a,d,p){const v=d.getBucket(a),w=d.latestFeatureIndex;if(!v||!w||a.id!==v.layerIds[0])return;const S=d.collisionBoxArray,I=v.layers[0].layout,z=v.layers[0].paint,O=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),R=d.tileSize/c.W,$=d.tileID.toUnwrapped(),G=this.transform.calculatePosMatrix($),K=I.get("text-pitch-alignment")==="map",re=I.get("text-rotation-alignment")==="map",J=Rt(d,1,this.transform.zoom),ce=this.collisionIndex.mapProjection.translatePosition(this.transform,d,z.get("text-translate"),z.get("text-translate-anchor")),me=this.collisionIndex.mapProjection.translatePosition(this.transform,d,z.get("icon-translate"),z.get("icon-translate-anchor")),te=ro(G,K,re,this.transform,J);let ve=null;if(K){const Pe=no(G,K,re,this.transform,J);ve=c.K([],this.transform.labelPlaneMatrix,Pe)}this.retainedQueryData[v.bucketInstanceId]=new Zt(v.bucketInstanceId,w,v.sourceLayerIndex,v.index,d.tileID);const Se={bucket:v,layout:I,translationText:ce,translationIcon:me,posMatrix:G,unwrappedTileID:$,textLabelPlaneMatrix:te,labelToScreenMatrix:ve,scale:O,textPixelRatio:R,holdingForFade:d.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:c.ag(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(p)for(const Pe of v.sortKeyRanges){const{sortKey:Ne,symbolInstanceStart:Xe,symbolInstanceEnd:ut}=Pe;i.push({sortKey:Ne,symbolInstanceStart:Xe,symbolInstanceEnd:ut,parameters:Se})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:Se})}attemptAnchorPlacement(i,a,d,p,v,w,S,I,z,O,R,$,G,K,re,J,ce,me,te){const ve=c.aq[i.textAnchor],Se=[i.textOffset0,i.textOffset1],Pe=cr(ve,d,p,Se,v),Ne=this.collisionIndex.placeCollisionBox(a,$,I,z,O,S,w,J,R.predicate,te,Pe);if((!me||this.collisionIndex.placeCollisionBox(me,$,I,z,O,S,w,ce,R.predicate,te,Pe).placeable)&&Ne.placeable){let Xe;if(this.prevPlacement&&this.prevPlacement.variableOffsets[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID]&&this.prevPlacement.placements[G.crossTileID].text&&(Xe=this.prevPlacement.variableOffsets[G.crossTileID].anchor),G.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[G.crossTileID]={textOffset:Se,width:d,height:p,anchor:ve,textBoxScale:v,prevAnchor:Xe},this.markUsedJustification(K,ve,G,re),K.allowVerticalPlacement&&(this.markUsedOrientation(K,re,G),this.placedOrientations[G.crossTileID]=re),{shift:Pe,placedGlyphBoxes:Ne}}}placeLayerBucketPart(i,a,d){const{bucket:p,layout:v,translationText:w,translationIcon:S,posMatrix:I,unwrappedTileID:z,textLabelPlaneMatrix:O,labelToScreenMatrix:R,textPixelRatio:$,holdingForFade:G,collisionBoxArray:K,partiallyEvaluatedTextSize:re,collisionGroup:J}=i.parameters,ce=v.get("text-optional"),me=v.get("icon-optional"),te=c.ar(v,"text-overlap","text-allow-overlap"),ve=te==="always",Se=c.ar(v,"icon-overlap","icon-allow-overlap"),Pe=Se==="always",Ne=v.get("text-rotation-alignment")==="map",Xe=v.get("text-pitch-alignment")==="map",ut=v.get("icon-text-fit")!=="none",ht=v.get("symbol-z-order")==="viewport-y",Je=ve&&(Pe||!p.hasIconData()||me),et=Pe&&(ve||!p.hasTextData()||ce);!p.collisionArrays&&K&&p.deserializeCollisionBoxes(K);const yt=this._getTerrainElevationFunc(this.retainedQueryData[p.bucketInstanceId].tileID),Ot=(it,at,Pt)=>{var Ci,Wt;if(a[it.crossTileID])return;if(G)return void(this.placements[it.crossTileID]=new Ii(!1,!1,!1));let Yt=!1,Ai=!1,Ar=!0,In=null,ki={box:null,placeable:!1,offscreen:null},en={box:null,placeable:!1,offscreen:null},Nr=null,kr=null,Mr=null,Cn=0,Qo=0,Dl=0;at.textFeatureIndex?Cn=at.textFeatureIndex:it.useRuntimeCollisionCircles&&(Cn=it.featureIndex),at.verticalTextFeatureIndex&&(Qo=at.verticalTextFeatureIndex);const Ls=at.textBox;if(Ls){const Er=Lr=>{let Pr=c.ah.horizontal;if(p.allowVerticalPlacement&&!Lr&&this.prevPlacement){const yr=this.prevPlacement.placedOrientations[it.crossTileID];yr&&(this.placedOrientations[it.crossTileID]=yr,Pr=yr,this.markUsedOrientation(p,Pr,it))}return Pr},An=(Lr,Pr)=>{if(p.allowVerticalPlacement&&it.numVerticalGlyphVertices>0&&at.verticalTextBox){for(const yr of p.writingModes)if(yr===c.ah.vertical?(ki=Pr(),en=ki):ki=Lr(),ki&&ki.placeable)break}else ki=Lr()},To=it.textAnchorOffsetStartIndex,Ps=it.textAnchorOffsetEndIndex;if(Ps===To){const Lr=(Pr,yr)=>{const Ni=this.collisionIndex.placeCollisionBox(Pr,te,$,I,z,Xe,Ne,w,J.predicate,yt);return Ni&&Ni.placeable&&(this.markUsedOrientation(p,yr,it),this.placedOrientations[it.crossTileID]=yr),Ni};An(()=>Lr(Ls,c.ah.horizontal),()=>{const Pr=at.verticalTextBox;return p.allowVerticalPlacement&&it.numVerticalGlyphVertices>0&&Pr?Lr(Pr,c.ah.vertical):{box:null,offscreen:null}}),Er(ki&&ki.placeable)}else{let Lr=c.aq[(Wt=(Ci=this.prevPlacement)===null||Ci===void 0?void 0:Ci.variableOffsets[it.crossTileID])===null||Wt===void 0?void 0:Wt.anchor];const Pr=(Ni,zs,uu)=>{const hr=Ni.x2-Ni.x1,rd=Ni.y2-Ni.y1,Ol=it.textBoxScale,Bl=ut&&Se==="never"?zs:null;let Io=null,nd=te==="never"?1:2,hu="never";Lr&&nd++;for(let du=0;du<nd;du++){for(let fu=To;fu<Ps;fu++){const Fl=p.textAnchorOffsets.get(fu);if(Lr&&Fl.textAnchor!==Lr)continue;const Ds=this.attemptAnchorPlacement(Fl,Ni,hr,rd,Ol,Ne,Xe,$,I,z,J,hu,it,p,uu,w,S,Bl,yt);if(Ds&&(Io=Ds.placedGlyphBoxes,Io&&Io.placeable))return Yt=!0,In=Ds.shift,Io}Lr?Lr=null:hu=te}return d&&!Io&&(Io={box:this.collisionIndex.placeCollisionBox(Ls,"always",$,I,z,Xe,Ne,w,J.predicate,yt,new c.P(0,0)).box,offscreen:!1,placeable:!1}),Io};An(()=>Pr(Ls,at.iconBox,c.ah.horizontal),()=>{const Ni=at.verticalTextBox;return p.allowVerticalPlacement&&(!ki||!ki.placeable)&&it.numVerticalGlyphVertices>0&&Ni?Pr(Ni,at.verticalIconBox,c.ah.vertical):{box:null,occluded:!0,offscreen:null}}),ki&&(Yt=ki.placeable,Ar=ki.offscreen);const yr=Er(ki&&ki.placeable);if(!Yt&&this.prevPlacement){const Ni=this.prevPlacement.variableOffsets[it.crossTileID];Ni&&(this.variableOffsets[it.crossTileID]=Ni,this.markUsedJustification(p,Ni.anchor,it,yr))}}}if(Nr=ki,Yt=Nr&&Nr.placeable,Ar=Nr&&Nr.offscreen,it.useRuntimeCollisionCircles){const Er=p.text.placedSymbolArray.get(it.centerJustifiedTextSymbolIndex),An=c.ai(p.textSizeData,re,Er),To=v.get("text-padding");kr=this.collisionIndex.placeCollisionCircles(te,Er,p.lineVertexArray,p.glyphOffsetArray,An,I,z,O,R,d,Xe,J.predicate,it.collisionCircleDiameter,To,w,yt),kr.circles.length&&kr.collisionDetected&&!d&&c.w("Collisions detected, but collision boxes are not shown"),Yt=ve||kr.circles.length>0&&!kr.collisionDetected,Ar=Ar&&kr.offscreen}if(at.iconFeatureIndex&&(Dl=at.iconFeatureIndex),at.iconBox){const Er=An=>this.collisionIndex.placeCollisionBox(An,Se,$,I,z,Xe,Ne,S,J.predicate,yt,ut&&In?In:void 0);en&&en.placeable&&at.verticalIconBox?(Mr=Er(at.verticalIconBox),Ai=Mr.placeable):(Mr=Er(at.iconBox),Ai=Mr.placeable),Ar=Ar&&Mr.offscreen}const es=ce||it.numHorizontalGlyphVertices===0&&it.numVerticalGlyphVertices===0,Rl=me||it.numIconVertices===0;es||Rl?Rl?es||(Ai=Ai&&Yt):Yt=Ai&&Yt:Ai=Yt=Ai&&Yt;const cu=Ai&&Mr.placeable;if(Yt&&Nr.placeable&&this.collisionIndex.insertCollisionBox(Nr.box,te,v.get("text-ignore-placement"),p.bucketInstanceId,en&&en.placeable&&Qo?Qo:Cn,J.ID),cu&&this.collisionIndex.insertCollisionBox(Mr.box,Se,v.get("icon-ignore-placement"),p.bucketInstanceId,Dl,J.ID),kr&&Yt&&this.collisionIndex.insertCollisionCircles(kr.circles,te,v.get("text-ignore-placement"),p.bucketInstanceId,Cn,J.ID),d&&this.storeCollisionData(p.bucketInstanceId,Pt,at,Nr,Mr,kr),it.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[it.crossTileID]=new Ii(Yt||Je,Ai||et,Ar||p.justReloaded),a[it.crossTileID]=!0};if(ht){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const it=p.getSortedSymbolIndexes(this.transform.angle);for(let at=it.length-1;at>=0;--at){const Pt=it[at];Ot(p.symbolInstances.get(Pt),p.collisionArrays[Pt],Pt)}}else for(let it=i.symbolInstanceStart;it<i.symbolInstanceEnd;it++)Ot(p.symbolInstances.get(it),p.collisionArrays[it],it);if(d&&p.bucketInstanceId in this.collisionCircleArrays){const it=this.collisionCircleArrays[p.bucketInstanceId];c.as(it.invProjMatrix,I),it.viewportMatrix=this.collisionIndex.getViewportMatrix()}p.justReloaded=!1}storeCollisionData(i,a,d,p,v,w){if(d.textBox||d.iconBox){let S,I;this.collisionBoxArrays.has(i)?S=this.collisionBoxArrays.get(i):(S=new Map,this.collisionBoxArrays.set(i,S)),S.has(a)?I=S.get(a):(I={text:null,icon:null},S.set(a,I)),d.textBox&&(I.text=p.box),d.iconBox&&(I.icon=v.box)}if(w){let S=this.collisionCircleArrays[i];S===void 0&&(S=this.collisionCircleArrays[i]=new rr);for(let I=0;I<w.circles.length;I+=4)S.circles.push(w.circles[I+0]),S.circles.push(w.circles[I+1]),S.circles.push(w.circles[I+2]),S.circles.push(w.collisionDetected?1:0)}}markUsedJustification(i,a,d,p){let v;v=p===c.ah.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[c.at(a)];const w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(const S of w)S>=0&&(i.text.placedSymbolArray.get(S).crossTileID=v>=0&&S!==v?0:d.crossTileID)}markUsedOrientation(i,a,d){const p=a===c.ah.horizontal||a===c.ah.horizontalOnly?a:0,v=a===c.ah.vertical?a:0,w=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(const S of w)i.text.placedSymbolArray.get(S).placedOrientation=p;d.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const a=this.prevPlacement;let d=!1;this.prevZoomAdjustment=a?a.zoomAdjustment(this.transform.zoom):0;const p=a?a.symbolFadeChange(i):1,v=a?a.opacities:{},w=a?a.variableOffsets:{},S=a?a.placedOrientations:{};for(const I in this.placements){const z=this.placements[I],O=v[I];O?(this.opacities[I]=new mi(O,p,z.text,z.icon),d=d||z.text!==O.text.placed||z.icon!==O.icon.placed):(this.opacities[I]=new mi(null,p,z.text,z.icon,z.skipFade),d=d||z.text||z.icon)}for(const I in v){const z=v[I];if(!this.opacities[I]){const O=new mi(z,p,!1,!1);O.isHidden()||(this.opacities[I]=O,d=d||z.text.placed||z.icon.placed)}}for(const I in w)this.variableOffsets[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.variableOffsets[I]=w[I]);for(const I in S)this.placedOrientations[I]||!this.opacities[I]||this.opacities[I].isHidden()||(this.placedOrientations[I]=S[I]);if(a&&a.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=a?a.lastPlacementChangeTime:i)}updateLayerOpacities(i,a){const d={};for(const p of a){const v=p.getBucket(i);v&&p.latestFeatureIndex&&i.id===v.layerIds[0]&&this.updateBucketOpacities(v,p.tileID,d,p.collisionBoxArray)}}updateBucketOpacities(i,a,d,p){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0],w=v.layout,S=new mi(null,0,!1,!1,!0),I=w.get("text-allow-overlap"),z=w.get("icon-allow-overlap"),O=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),R=w.get("text-rotation-alignment")==="map",$=w.get("text-pitch-alignment")==="map",G=w.get("icon-text-fit")!=="none",K=new mi(null,0,I&&(z||!i.hasIconData()||w.get("icon-optional")),z&&(I||!i.hasTextData()||w.get("text-optional")),!0);!i.collisionArrays&&p&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(p);const re=(ce,me,te)=>{for(let ve=0;ve<me/4;ve++)ce.opacityVertexArray.emplaceBack(te);ce.hasVisibleVertices=ce.hasVisibleVertices||te!==ha},J=this.collisionBoxArrays.get(i.bucketInstanceId);for(let ce=0;ce<i.symbolInstances.length;ce++){const me=i.symbolInstances.get(ce),{numHorizontalGlyphVertices:te,numVerticalGlyphVertices:ve,crossTileID:Se}=me;let Pe=this.opacities[Se];d[Se]?Pe=S:Pe||(Pe=K,this.opacities[Se]=Pe),d[Se]=!0;const Ne=me.numIconVertices>0,Xe=this.placedOrientations[me.crossTileID],ut=Xe===c.ah.vertical,ht=Xe===c.ah.horizontal||Xe===c.ah.horizontalOnly;if(te>0||ve>0){const et=Jr(Pe.text);re(i.text,te,ut?ha:et),re(i.text,ve,ht?ha:et);const yt=Pe.text.isHidden();[me.rightJustifiedTextSymbolIndex,me.centerJustifiedTextSymbolIndex,me.leftJustifiedTextSymbolIndex].forEach(at=>{at>=0&&(i.text.placedSymbolArray.get(at).hidden=yt||ut?1:0)}),me.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(me.verticalPlacedTextSymbolIndex).hidden=yt||ht?1:0);const Ot=this.variableOffsets[me.crossTileID];Ot&&this.markUsedJustification(i,Ot.anchor,me,Xe);const it=this.placedOrientations[me.crossTileID];it&&(this.markUsedJustification(i,"left",me,it),this.markUsedOrientation(i,it,me))}if(Ne){const et=Jr(Pe.icon),yt=!(G&&me.verticalPlacedIconSymbolIndex&&ut);me.placedIconSymbolIndex>=0&&(re(i.icon,me.numIconVertices,yt?et:ha),i.icon.placedSymbolArray.get(me.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),me.verticalPlacedIconSymbolIndex>=0&&(re(i.icon,me.numVerticalIconVertices,yt?ha:et),i.icon.placedSymbolArray.get(me.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}const Je=J&&J.has(ce)?J.get(ce):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const et=i.collisionArrays[ce];if(et){let yt=new c.P(0,0);if(et.textBox||et.verticalTextBox){let Ot=!0;if(O){const it=this.variableOffsets[Se];it?(yt=cr(it.anchor,it.width,it.height,it.textOffset,it.textBoxScale),R&&yt._rotate($?this.transform.angle:-this.transform.angle)):Ot=!1}if(et.textBox||et.verticalTextBox){let it;et.textBox&&(it=ut),et.verticalTextBox&&(it=ht),cn(i.textCollisionBox.collisionVertexArray,Pe.text.placed,!Ot||it,Je.text,yt.x,yt.y)}}if(et.iconBox||et.verticalIconBox){const Ot=!!(!ht&&et.verticalIconBox);let it;et.iconBox&&(it=Ot),et.verticalIconBox&&(it=!Ot),cn(i.iconCollisionBox.collisionVertexArray,Pe.icon.placed,it,Je.icon,G?yt.x:0,G?yt.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const ce=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=ce.invProjMatrix,i.placementViewportMatrix=ce.viewportMatrix,i.collisionCircleArray=ce.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,a){const d=this.zoomAtLastRecencyCheck===a?1-this.zoomAdjustment(a):1;return this.zoomAtLastRecencyCheck=a,this.commitTime+this.fadeDuration*d>i}setStale(){this.stale=!0}}function cn(_,i,a,d,p,v){d&&d.length!==0||(d=[0,0,0,0]);const w=d[0]-St,S=d[1]-St,I=d[2]-St,z=d[3]-St;_.emplaceBack(i?1:0,a?1:0,p||0,v||0,w,S),_.emplaceBack(i?1:0,a?1:0,p||0,v||0,I,S),_.emplaceBack(i?1:0,a?1:0,p||0,v||0,I,z),_.emplaceBack(i?1:0,a?1:0,p||0,v||0,w,z)}const ur=Math.pow(2,25),_s=Math.pow(2,24),Jf=Math.pow(2,17),di=Math.pow(2,16),wc=Math.pow(2,9),Ec=Math.pow(2,8),un=Math.pow(2,1);function Jr(_){if(_.opacity===0&&!_.placed)return 0;if(_.opacity===1&&_.placed)return 4294967295;const i=_.placed?1:0,a=Math.floor(127*_.opacity);return a*ur+i*_s+a*Jf+i*di+a*wc+i*Ec+a*un+i}const ha=0;function Yr(){return{isOccluded:(_,i,a)=>!1,getPitchedTextCorrection:(_,i,a)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(_,i,a,d){throw new Error("Not implemented.")},translatePosition:(_,i,a,d)=>function(p,v,w,S,I=!1){if(!w[0]&&!w[1])return[0,0];const z=I?S==="map"?p.angle:0:S==="viewport"?-p.angle:0;if(z){const O=Math.sin(z),R=Math.cos(z);w=[w[0]*R-w[1]*O,w[0]*O+w[1]*R]}return[I?w[0]:Rt(v,w[0],p.zoom),I?w[1]:Rt(v,w[1],p.zoom)]}(_,i,a,d),getCircleRadiusCorrection:_=>1}}class vn{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,a,d,p,v){const w=this._bucketParts;for(;this._currentTileIndex<i.length;)if(a.getBucketParts(w,p,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((S,I)=>S.sortKey-I.sortKey));this._currentPartIndex<w.length;)if(a.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,v())return!0;return!1}}class xh{constructor(i,a,d,p,v,w,S,I){this.placement=new Xr(i,Yr(),a,w,S,I),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,a,d){const p=A.now(),v=()=>!this._forceFullPlacement&&A.now()-p>2;for(;this._currentPlacementIndex>=0;){const w=a[i[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=S)&&(!w.maxzoom||w.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new vn(w)),this._inProgressLayer.continuePlacement(d[w.source],this.placement,this._showCollisionBoxes,w,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const oo=512/c.W/2;class nr{constructor(i,a,d){this.tileID=i,this.bucketInstanceId=d,this._symbolsByKey={};const p=new Map;for(let v=0;v<a.length;v++){const w=a.get(v),S=w.key,I=p.get(S);I?I.push(w):p.set(S,[w])}for(const[v,w]of p){const S={positions:w.map(I=>({x:Math.floor(I.anchorX*oo),y:Math.floor(I.anchorY*oo)})),crossTileIDs:w.map(I=>I.crossTileID)};if(S.positions.length>128){const I=new c.av(S.positions.length,16,Uint16Array);for(const{x:z,y:O}of S.positions)I.add(z,O);I.finish(),delete S.positions,S.index=I}this._symbolsByKey[v]=S}}getScaledCoordinates(i,a){const{x:d,y:p,z:v}=this.tileID.canonical,{x:w,y:S,z:I}=a.canonical,z=oo/Math.pow(2,I-v),O=(S*c.W+i.anchorY)*z,R=p*c.W*oo;return{x:Math.floor((w*c.W+i.anchorX)*z-d*c.W*oo),y:Math.floor(O-R)}}findMatches(i,a,d){const p=this.tileID.canonical.z<a.canonical.z?1:Math.pow(2,this.tileID.canonical.z-a.canonical.z);for(let v=0;v<i.length;v++){const w=i.get(v);if(w.crossTileID)continue;const S=this._symbolsByKey[w.key];if(!S)continue;const I=this.getScaledCoordinates(w,a);if(S.index){const z=S.index.range(I.x-p,I.y-p,I.x+p,I.y+p).sort();for(const O of z){const R=S.crossTileIDs[O];if(!d[R]){d[R]=!0,w.crossTileID=R;break}}}else if(S.positions)for(let z=0;z<S.positions.length;z++){const O=S.positions[z],R=S.crossTileIDs[z];if(Math.abs(O.x-I.x)<=p&&Math.abs(O.y-I.y)<=p&&!d[R]){d[R]=!0,w.crossTileID=R;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class da{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Uo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const a=Math.round((i-this.lng)/360);if(a!==0)for(const d in this.indexes){const p=this.indexes[d],v={};for(const w in p){const S=p[w];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+a),v[S.tileID.key]=S}this.indexes[d]=v}this.lng=i}addBucket(i,a,d){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===a.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let v=0;v<a.symbolInstances.length;v++)a.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const p=this.usedCrossTileIDs[i.overscaledZ];for(const v in this.indexes){const w=this.indexes[v];if(Number(v)>i.overscaledZ)for(const S in w){const I=w[S];I.tileID.isChildOf(i)&&I.findMatches(a.symbolInstances,i,p)}else{const S=w[i.scaledTo(Number(v)).key];S&&S.findMatches(a.symbolInstances,i,p)}}for(let v=0;v<a.symbolInstances.length;v++){const w=a.symbolInstances.get(v);w.crossTileID||(w.crossTileID=d.generate(),p[w.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new nr(i,a.symbolInstances,a.bucketInstanceId),!0}removeBucketCrossTileIDs(i,a){for(const d of a.getCrossTileIDsLists())for(const p of d)delete this.usedCrossTileIDs[i][p]}removeStaleBuckets(i){let a=!1;for(const d in this.indexes){const p=this.indexes[d];for(const v in p)i[p[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,p[v]),delete p[v],a=!0)}return a}}class Wi{constructor(){this.layerIndexes={},this.crossTileIDs=new da,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,a,d){let p=this.layerIndexes[i.id];p===void 0&&(p=this.layerIndexes[i.id]=new Uo);let v=!1;const w={};p.handleWrapJump(d);for(const S of a){const I=S.getBucket(i);I&&i.id===I.layerIds[0]&&(I.bucketInstanceId||(I.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(S.tileID,I,this.crossTileIDs)&&(v=!0),w[I.bucketInstanceId]=!0)}return p.removeStaleBuckets(w)&&(v=!0),v}pruneUnusedLayers(i){const a={};i.forEach(d=>{a[d]=!0});for(const d in this.layerIndexes)a[d]||delete this.layerIndexes[d]}}const qo=(_,i)=>c.t(_,i&&i.filter(a=>a.identifier!=="source.canvas")),Tn=c.aw();class il extends c.E{constructor(i,a={}){super(),this._rtlPluginLoaded=()=>{for(const d in this.sourceCaches){const p=this.sourceCaches[d].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[d].reload()}},this.map=i,this.dispatcher=new Bi(Pi(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(d,p)=>this.getGlyphs(d,p)),this.dispatcher.registerMessageHandler("GI",(d,p)=>this.getImages(d,p)),this.imageManager=new Oe,this.imageManager.setEventedParent(this),this.glyphManager=new dt(i._requestManager,a.localIdeographFontFamily),this.lineAtlas=new Nt(256,512),this.crossTileSymbolIndex=new Wi,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new c.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",c.ay()),Gt().on(Lt,this._rtlPluginLoaded),this.on("data",d=>{if(d.dataType!=="source"||d.sourceDataType!=="metadata")return;const p=this.sourceCaches[d.sourceId];if(!p)return;const v=p.getSource();if(v&&v.vectorLayerIds)for(const w in this._layers){const S=this._layers[w];S.source===v.id&&this._validateLayer(S)}})}loadURL(i,a={},d){this.fire(new c.k("dataloading",{dataType:"style"})),a.validate=typeof a.validate!="boolean"||a.validate;const p=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController,c.h(p,this._loadStyleRequest).then(v=>{this._loadStyleRequest=null,this._load(v.data,a,d)}).catch(v=>{this._loadStyleRequest=null,v&&this.fire(new c.j(v))})}loadJSON(i,a={},d){this.fire(new c.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,a.validate=a.validate!==!1,this._load(i,a,d)}).catch(()=>{})}loadEmpty(){this.fire(new c.k("dataloading",{dataType:"style"})),this._load(Tn,{validate:!1})}_load(i,a,d){var p;const v=a.transformStyle?a.transformStyle(d,i):i;if(!a.validate||!qo(this,c.x(v))){this._loaded=!0,this.stylesheet=v;for(const w in v.sources)this.addSource(w,v.sources[w],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs),this._createLayers(),this.light=new Ut(this.stylesheet.light),this.map.setTerrain((p=this.stylesheet.terrain)!==null&&p!==void 0?p:null),this.fire(new c.k("data",{dataType:"style"})),this.fire(new c.k("style.load"))}}_createLayers(){const i=c.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(a=>a.id),this._layers={},this._serializedLayers=null;for(const a of i){const d=c.aA(a);d.setEventedParent(this,{layer:{id:a.id}}),this._layers[a.id]=d}}_loadSprite(i,a=!1,d=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,w,S,I){return c._(this,void 0,void 0,function*(){const z=Me(v),O=S>1?"@2x":"",R={},$={};for(const{id:G,url:K}of z){const re=w.transformRequest(pe(K,O,".json"),"SpriteJSON");R[G]=c.h(re,I);const J=w.transformRequest(pe(K,O,".png"),"SpriteImage");$[G]=j.getImage(J,I)}return yield Promise.all([...Object.values(R),...Object.values($)]),function(G,K){return c._(this,void 0,void 0,function*(){const re={};for(const J in G){re[J]={};const ce=A.getImageCanvasContext((yield K[J]).data),me=(yield G[J]).data;for(const te in me){const{width:ve,height:Se,x:Pe,y:Ne,sdf:Xe,pixelRatio:ut,stretchX:ht,stretchY:Je,content:et,textFitWidth:yt,textFitHeight:Ot}=me[te];re[J][te]={data:null,pixelRatio:ut,sdf:Xe,stretchX:ht,stretchY:Je,content:et,textFitWidth:yt,textFitHeight:Ot,spriteData:{width:ve,height:Se,x:Pe,y:Ne,context:ce}}}}return re})}(R,$)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(const w in v){this._spritesImagesIds[w]=[];const S=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(I=>!(I in v)):[];for(const I of S)this.imageManager.removeImage(I),this._changedImages[I]=!0;for(const I in v[w]){const z=w==="default"?I:`${w}:${I}`;this._spritesImagesIds[w].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,v[w][I],!1):this.imageManager.addImage(z,v[w][I]),a&&(this._changedImages[z]=!0)}}}).catch(v=>{this._spriteRequest=null,p=v,this.fire(new c.j(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),a&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"})),d&&d(p)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}_validateLayer(i){const a=this.sourceCaches[i.source];if(!a)return;const d=i.sourceLayer;if(!d)return;const p=a.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(d)===-1)&&this.fire(new c.j(new Error(`Source layer "${d}" does not exist on source "${p.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i){const a=this._serializedAllLayers();if(!i||i.length===0)return Object.values(a);const d=[];for(const p of i)a[p]&&d.push(a[p]);return d}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const a=Object.keys(this._layers);for(const d of a){const p=this._layers[d];p.type!=="custom"&&(i[d]=p.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const a=this._changed;if(a){const p=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(p.length||v.length)&&this._updateWorkerLayers(p,v);for(const w in this._updatedSources){const S=this._updatedSources[w];if(S==="reload")this._reloadSource(w);else{if(S!=="clear")throw new Error(`Invalid action ${S}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const w in this._updatedPaintProps)this._layers[w].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const d={};for(const p in this.sourceCaches){const v=this.sourceCaches[p];d[p]=v.used,v.used=!1}for(const p of this._order){const v=this._layers[p];v.recalculate(i,this._availableImages),!v.isHidden(i.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const p in d){const v=this.sourceCaches[p];!!d[p]!=!!v.used&&v.fire(new c.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(i),this.z=i.zoom,a&&this.fire(new c.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const a in this.sourceCaches)this.sourceCaches[a].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,a){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i),removedIds:a})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,a={}){var d;this._checkLoaded();const p=this.serialize();if(i=a.transformStyle?a.transformStyle(p,i):i,((d=a.validate)===null||d===void 0||d)&&qo(this,c.x(i)))return!1;(i=c.aB(i)).layers=c.az(i.layers);const v=c.aC(p,i),w=this._getOperationsToPerform(v);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(const S of w.operations)S();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const a=[],d=[];for(const p of i)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":a.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":a.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":a.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":a.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":a.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":a.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":a.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":a.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":a.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":a.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":a.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":a.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":a.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setTransition":a.push(()=>{});break;default:d.push(p.command)}return{operations:a,unimplemented:d}}addImage(i,a){if(this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,a),this._afterImageUpdated(i)}updateImage(i,a){this.imageManager.updateImage(i,a)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new c.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,a,d={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!a.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(a).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(a.type)>=0&&this._validate(c.x.source,`sources.${i}`,a,null,d))return;this.map&&this.map._collectResourceTiming&&(a.collectResourceTiming=!0);const p=this.sourceCaches[i]=new Ye(i,a,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:i})),p.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const d in this._layers)if(this._layers[d].source===i)return this.fire(new c.j(new Error(`Source "${i}" cannot be removed while layer "${d}" is using it.`)));const a=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],a.fire(new c.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),a.setEventedParent(null),a.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,a){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const d=this.sourceCaches[i].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(a),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,a,d={}){this._checkLoaded();const p=i.id;if(this.getLayer(p))return void this.fire(new c.j(new Error(`Layer "${p}" already exists on this map.`)));let v;if(i.type==="custom"){if(qo(this,c.aD(i)))return;v=c.aA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(p,i.source),i=c.aB(i),i=c.e(i,{source:p})),this._validate(c.x.layer,`layers.${p}`,i,{arrayIndex:-1},d))return;v=c.aA(i),this._validateLayer(v),v.setEventedParent(this,{layer:{id:p}})}const w=a?this._order.indexOf(a):this._order.length;if(a&&w===-1)this.fire(new c.j(new Error(`Cannot add layer "${p}" before non-existing layer "${a}".`)));else{if(this._order.splice(w,0,p),this._layerOrderChanged=!0,this._layers[p]=v,this._removedLayers[p]&&v.source&&v.type!=="custom"){const S=this._removedLayers[p];delete this._removedLayers[p],S.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(i,a){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new c.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===a)return;const d=this._order.indexOf(i);this._order.splice(d,1);const p=a?this._order.indexOf(a):this._order.length;a&&p===-1?this.fire(new c.j(new Error(`Cannot move layer "${i}" before non-existing layer "${a}".`))):(this._order.splice(p,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const a=this._layers[i];if(!a)return void this.fire(new c.j(new Error(`Cannot remove non-existing layer "${i}".`)));a.setEventedParent(null);const d=this._order.indexOf(i);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=a,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],a.onRemove&&a.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,a,d){this._checkLoaded();const p=this.getLayer(i);p?p.minzoom===a&&p.maxzoom===d||(a!=null&&(p.minzoom=a),d!=null&&(p.maxzoom=d),this._updateLayer(p)):this.fire(new c.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,a,d={}){this._checkLoaded();const p=this.getLayer(i);if(p){if(!c.aE(p.filter,a))return a==null?(p.filter=void 0,void this._updateLayer(p)):void(this._validate(c.x.filter,`layers.${p.id}.filter`,a,null,d)||(p.filter=c.aB(a),this._updateLayer(p)))}else this.fire(new c.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return c.aB(this.getLayer(i).filter)}setLayoutProperty(i,a,d,p={}){this._checkLoaded();const v=this.getLayer(i);v?c.aE(v.getLayoutProperty(a),d)||(v.setLayoutProperty(a,d,p),this._updateLayer(v)):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,a){const d=this.getLayer(i);if(d)return d.getLayoutProperty(a);this.fire(new c.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,a,d,p={}){this._checkLoaded();const v=this.getLayer(i);v?c.aE(v.getPaintProperty(a),d)||(v.setPaintProperty(a,d,p)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new c.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,a){return this.getLayer(i).getPaintProperty(a)}setFeatureState(i,a){this._checkLoaded();const d=i.source,p=i.sourceLayer,v=this.sourceCaches[d];if(v===void 0)return void this.fire(new c.j(new Error(`The source '${d}' does not exist in the map's style.`)));const w=v.getSource().type;w==="geojson"&&p?this.fire(new c.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||p?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),v.setFeatureState(p,i.id,a)):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,a){this._checkLoaded();const d=i.source,p=this.sourceCaches[d];if(p===void 0)return void this.fire(new c.j(new Error(`The source '${d}' does not exist in the map's style.`)));const v=p.getSource().type,w=v==="vector"?i.sourceLayer:void 0;v!=="vector"||w?a&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new c.j(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(w,i.id,a):this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const a=i.source,d=i.sourceLayer,p=this.sourceCaches[a];if(p!==void 0)return p.getSource().type!=="vector"||d?(i.id===void 0&&this.fire(new c.j(new Error("The feature id parameter must be provided."))),p.getFeatureState(d,i.id)):void this.fire(new c.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new c.j(new Error(`The source '${a}' does not exist in the map's style.`)))}getTransition(){return c.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=c.aF(this.sourceCaches,v=>v.serialize()),a=this._serializeByIds(this._order),d=this.map.getTerrain()||void 0,p=this.stylesheet;return c.aG({version:p.version,name:p.name,metadata:p.metadata,light:p.light,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,sources:i,layers:a,terrain:d},v=>v!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const a=w=>this._layers[w].type==="fill-extrusion",d={},p=[];for(let w=this._order.length-1;w>=0;w--){const S=this._order[w];if(a(S)){d[S]=w;for(const I of i){const z=I[S];if(z)for(const O of z)p.push(O)}}}p.sort((w,S)=>S.intersectionZ-w.intersectionZ);const v=[];for(let w=this._order.length-1;w>=0;w--){const S=this._order[w];if(a(S))for(let I=p.length-1;I>=0;I--){const z=p[I].feature;if(d[z.layer.id]<w)break;v.push(z),p.pop()}else for(const I of i){const z=I[S];if(z)for(const O of z)v.push(O.feature)}}return v}queryRenderedFeatures(i,a,d){a&&a.filter&&this._validate(c.x.filter,"queryRenderedFeatures.filter",a.filter,null,a);const p={};if(a&&a.layers){if(!Array.isArray(a.layers))return this.fire(new c.j(new Error("parameters.layers must be an Array."))),[];for(const S of a.layers){const I=this._layers[S];if(!I)return this.fire(new c.j(new Error(`The layer '${S}' does not exist in the map's style and cannot be queried for features.`))),[];p[I.source]=!0}}const v=[];a.availableImages=this._availableImages;const w=this._serializedAllLayers();for(const S in this.sourceCaches)a.layers&&!p[S]||v.push(Fr(this.sourceCaches[S],this._layers,w,i,a,d));return this.placement&&v.push(function(S,I,z,O,R,$,G){const K={},re=$.queryRenderedSymbols(O),J=[];for(const ce of Object.keys(re).map(Number))J.push(G[ce]);J.sort(lr);for(const ce of J){const me=ce.featureIndex.lookupSymbolFeatures(re[ce.bucketInstanceId],I,ce.bucketIndex,ce.sourceLayerIndex,R.filter,R.layers,R.availableImages,S);for(const te in me){const ve=K[te]=K[te]||[],Se=me[te];Se.sort((Pe,Ne)=>{const Xe=ce.featureSortOrder;if(Xe){const ut=Xe.indexOf(Pe.featureIndex);return Xe.indexOf(Ne.featureIndex)-ut}return Ne.featureIndex-Pe.featureIndex});for(const Pe of Se)ve.push(Pe)}}for(const ce in K)K[ce].forEach(me=>{const te=me.feature,ve=z[S[ce].source].getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=ve});return K}(this._layers,w,this.sourceCaches,i,a,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(i,a){a&&a.filter&&this._validate(c.x.filter,"querySourceFeatures.filter",a.filter,null,a);const d=this.sourceCaches[i];return d?function(p,v){const w=p.getRenderableIds().map(z=>p.getTileByID(z)),S=[],I={};for(let z=0;z<w.length;z++){const O=w[z],R=O.tileID.canonical.key;I[R]||(I[R]=!0,O.querySourceFeatures(S,v))}return S}(d,a):[]}getLight(){return this.light.getLight()}setLight(i,a={}){this._checkLoaded();const d=this.light.getLight();let p=!1;for(const w in i)if(!c.aE(i[w],d[w])){p=!0;break}if(!p)return;const v={now:A.now(),transition:c.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,a),this.light.updateTransitions(v)}_validate(i,a,d,p,v={}){return(!v||v.validate!==!1)&&qo(this,i.call(c.x,c.e({key:a,style:this.serialize(),value:d,styleSpec:c.v},p)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Gt().off(Lt,this._rtlPluginLoaded);for(const a in this._layers)this._layers[a].setEventedParent(null);for(const a in this.sourceCaches){const d=this.sourceCaches[a];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const a in this.sourceCaches)this.sourceCaches[a].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,a,d,p,v=!1){let w=!1,S=!1;const I={};for(const z of this._order){const O=this._layers[z];if(O.type!=="symbol")continue;if(!I[O.source]){const $=this.sourceCaches[O.source];I[O.source]=$.getRenderableIds(!0).map(G=>$.getTileByID(G)).sort((G,K)=>K.tileID.overscaledZ-G.tileID.overscaledZ||(G.tileID.isLessThan(K.tileID)?-1:1))}const R=this.crossTileSymbolIndex.addLayer(O,I[O.source],i.center.lng);w=w||R}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(A.now(),i.zoom))&&(this.pauseablePlacement=new xh(i,this.map.terrain,this._order,v,a,d,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,I),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(A.now()),S=!0),w&&this.pauseablePlacement.placement.setStale()),S||w)for(const z of this._order){const O=this._layers[z];O.type==="symbol"&&this.placement.updateLayerOpacities(O,I[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(A.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,a){return c._(this,void 0,void 0,function*(){const d=yield this.imageManager.getImages(a.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,a.icons),d})}getGlyphs(i,a){return c._(this,void 0,void 0,function*(){const d=yield this.glyphManager.getGlyphs(a.stacks),p=this.sourceCaches[a.source];return p&&p.setDependencies(a.tileID.key,a.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,a={}){this._checkLoaded(),i&&this._validate(c.x.glyphs,"glyphs",i,null,a)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,a,d={},p){this._checkLoaded();const v=[{id:i,url:a}],w=[...Me(this.stylesheet.sprite),...v];this._validate(c.x.sprite,"sprite",w,null,d)||(this.stylesheet.sprite=w,this._loadSprite(v,!0,p))}removeSprite(i){this._checkLoaded();const a=Me(this.stylesheet.sprite);if(a.find(d=>d.id===i)){if(this._spritesImagesIds[i])for(const d of this._spritesImagesIds[i])this.imageManager.removeImage(d),this._changedImages[d]=!0;a.splice(a.findIndex(d=>d.id===i),1),this.stylesheet.sprite=a.length>0?a:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new c.k("data",{dataType:"style"}))}else this.fire(new c.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Me(this.stylesheet.sprite)}setSprite(i,a={},d){this._checkLoaded(),i&&this._validate(c.x.sprite,"sprite",i,null,a)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,d):(this._unloadSprite(),d&&d(null)))}}var Un=c.X([{name:"a_pos",type:"Int16",components:2}]),Sc="attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_depth;void main() {float extent=8192.0;float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/extent;gl_Position=u_matrix*vec4(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}";const vs={prelude:ci(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:ci(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:ci(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:ci(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:ci("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:ci(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:ci(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:ci("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:ci("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:ci("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:ci(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:ci(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:ci(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:ci(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:ci(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:ci(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:ci(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:ci(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:ci(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:ci(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:ci(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:ci(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:ci(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:ci(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:ci("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Sc),terrainDepth:ci("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Sc),terrainCoords:ci("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Sc)};function ci(_,i){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=i.match(/attribute ([\w]+) ([\w]+)/g),p=_.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=v?v.concat(p):p,S={};return{fragmentSource:_=_.replace(a,(I,z,O,R,$)=>(S[$]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${$}
varying ${O} ${R} ${$};
#else
uniform ${O} ${R} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${O} ${R} ${$} = u_${$};
#endif
`)),vertexSource:i=i.replace(a,(I,z,O,R,$)=>{const G=R==="float"?"vec2":"vec4",K=$.match(/color/)?"color":G;return S[$]?z==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
attribute ${O} ${G} a_${$};
varying ${O} ${R} ${$};
#else
uniform ${O} ${R} u_${$};
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${O} ${R} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${K}(a_${$}, u_${$}_t);
#else
    ${O} ${R} ${$} = u_${$};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
attribute ${O} ${G} a_${$};
#else
uniform ${O} ${R} u_${$};
#endif
`:K==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${O} ${R} ${$} = a_${$};
#else
    ${O} ${R} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${O} ${R} ${$} = unpack_mix_${K}(a_${$}, u_${$}_t);
#else
    ${O} ${R} ${$} = u_${$};
#endif
`}),staticAttributes:d,staticUniforms:w}}class rl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,a,d,p,v,w,S,I,z){this.context=i;let O=this.boundPaintVertexBuffers.length!==p.length;for(let R=0;!O&&R<p.length;R++)this.boundPaintVertexBuffers[R]!==p[R]&&(O=!0);!this.vao||this.boundProgram!==a||this.boundLayoutVertexBuffer!==d||O||this.boundIndexBuffer!==v||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==S||this.boundDynamicVertexBuffer2!==I||this.boundDynamicVertexBuffer3!==z?this.freshBind(a,d,p,v,w,S,I,z):(i.bindVertexArray.set(this.vao),S&&S.bind(),v&&v.dynamicDraw&&v.bind(),I&&I.bind(),z&&z.bind())}freshBind(i,a,d,p,v,w,S,I){const z=i.numAttributes,O=this.context,R=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=a,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=p,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=S,this.boundDynamicVertexBuffer3=I,a.enableAttributes(R,i);for(const $ of d)$.enableAttributes(R,i);w&&w.enableAttributes(R,i),S&&S.enableAttributes(R,i),I&&I.enableAttributes(R,i),a.bind(),a.setVertexAttribPointers(R,i,v);for(const $ of d)$.bind(),$.setVertexAttribPointers(R,i,v);w&&(w.bind(),w.setVertexAttribPointers(R,i,v)),p&&p.bind(),S&&(S.bind(),S.setVertexAttribPointers(R,i,v)),I&&(I.bind(),I.setVertexAttribPointers(R,i,v)),O.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}function xs(_){const i=[];for(let a=0;a<_.length;a++){if(_[a]===null)continue;const d=_[a].split(" ");i.push(d.pop())}return i}class Tc{constructor(i,a,d,p,v,w){const S=i.gl;this.program=S.createProgram();const I=xs(a.staticAttributes),z=d?d.getBinderAttributes():[],O=I.concat(z),R=vs.prelude.staticUniforms?xs(vs.prelude.staticUniforms):[],$=a.staticUniforms?xs(a.staticUniforms):[],G=d?d.getBinderUniforms():[],K=R.concat($).concat(G),re=[];for(const Pe of K)re.indexOf(Pe)<0&&re.push(Pe);const J=d?d.defines():[];v&&J.push("#define OVERDRAW_INSPECTOR;"),w&&J.push("#define TERRAIN3D;");const ce=J.concat(vs.prelude.fragmentSource,a.fragmentSource).join(`
`),me=J.concat(vs.prelude.vertexSource,a.vertexSource).join(`
`),te=S.createShader(S.FRAGMENT_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);if(S.shaderSource(te,ce),S.compileShader(te),!S.getShaderParameter(te,S.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${S.getShaderInfoLog(te)}`);S.attachShader(this.program,te);const ve=S.createShader(S.VERTEX_SHADER);if(S.isContextLost())return void(this.failedToCreate=!0);if(S.shaderSource(ve,me),S.compileShader(ve),!S.getShaderParameter(ve,S.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${S.getShaderInfoLog(ve)}`);S.attachShader(this.program,ve),this.attributes={};const Se={};this.numAttributes=O.length;for(let Pe=0;Pe<this.numAttributes;Pe++)O[Pe]&&(S.bindAttribLocation(this.program,Pe,O[Pe]),this.attributes[O[Pe]]=Pe);if(S.linkProgram(this.program),!S.getProgramParameter(this.program,S.LINK_STATUS))throw new Error(`Program failed to link: ${S.getProgramInfoLog(this.program)}`);S.deleteShader(ve),S.deleteShader(te);for(let Pe=0;Pe<re.length;Pe++){const Ne=re[Pe];if(Ne&&!Se[Ne]){const Xe=S.getUniformLocation(this.program,Ne);Xe&&(Se[Ne]=Xe)}}this.fixedUniforms=p(i,Se),this.terrainUniforms=((Pe,Ne)=>({u_depth:new c.aH(Pe,Ne.u_depth),u_terrain:new c.aH(Pe,Ne.u_terrain),u_terrain_dim:new c.aI(Pe,Ne.u_terrain_dim),u_terrain_matrix:new c.aJ(Pe,Ne.u_terrain_matrix),u_terrain_unpack:new c.aK(Pe,Ne.u_terrain_unpack),u_terrain_exaggeration:new c.aI(Pe,Ne.u_terrain_exaggeration)}))(i,Se),this.binderUniforms=d?d.getUniforms(i,Se):[]}draw(i,a,d,p,v,w,S,I,z,O,R,$,G,K,re,J,ce,me){const te=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(d),i.setStencilMode(p),i.setColorMode(v),i.setCullFace(w),I){i.activeTexture.set(te.TEXTURE2),te.bindTexture(te.TEXTURE_2D,I.depthTexture),i.activeTexture.set(te.TEXTURE3),te.bindTexture(te.TEXTURE_2D,I.texture);for(const Se in this.terrainUniforms)this.terrainUniforms[Se].set(I[Se])}for(const Se in this.fixedUniforms)this.fixedUniforms[Se].set(S[Se]);re&&re.setUniforms(i,this.binderUniforms,G,{zoom:K});let ve=0;switch(a){case te.LINES:ve=2;break;case te.TRIANGLES:ve=3;break;case te.LINE_STRIP:ve=1}for(const Se of $.get()){const Pe=Se.vaos||(Se.vaos={});(Pe[z]||(Pe[z]=new rl)).bind(i,this,O,re?re.getPaintVertexBuffers():[],R,Se.vertexOffset,J,ce,me),te.drawElements(a,Se.primitiveLength*ve,te.UNSIGNED_SHORT,Se.primitiveOffset*ve*2)}}}function nl(_,i,a){const d=1/Rt(a,1,i.transform.tileZoom),p=Math.pow(2,a.tileID.overscaledZ),v=a.tileSize*Math.pow(2,i.transform.tileZoom)/p,w=v*(a.tileID.canonical.x+a.tileID.wrap*p),S=v*a.tileID.canonical.y;return{u_image:0,u_texsize:a.imageAtlasTexture.size,u_scale:[d,_.fromScale,_.toScale],u_fade:_.t,u_pixel_coord_upper:[w>>16,S>>16],u_pixel_coord_lower:[65535&w,65535&S]}}const fa=(_,i,a,d)=>{const p=i.style.light,v=p.properties.get("position"),w=[v.x,v.y,v.z],S=function(){var z=new c.A(9);return c.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();p.properties.get("anchor")==="viewport"&&function(z,O){var R=Math.sin(O),$=Math.cos(O);z[0]=$,z[1]=R,z[2]=0,z[3]=-R,z[4]=$,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(S,-i.transform.angle),function(z,O,R){var $=O[0],G=O[1],K=O[2];z[0]=$*R[0]+G*R[3]+K*R[6],z[1]=$*R[1]+G*R[4]+K*R[7],z[2]=$*R[2]+G*R[5]+K*R[8]}(w,w,S);const I=p.properties.get("color");return{u_matrix:_,u_lightpos:w,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[I.r,I.g,I.b],u_vertical_gradient:+a,u_opacity:d}},Ic=(_,i,a,d,p,v,w)=>c.e(fa(_,i,a,d),nl(v,i,w),{u_height_factor:-Math.pow(2,p.overscaledZ)/w.tileSize/8}),ol=_=>({u_matrix:_}),pa=(_,i,a,d)=>c.e(ol(_),nl(a,i,d)),sl=(_,i)=>({u_matrix:_,u_world:i}),ma=(_,i,a,d,p)=>c.e(pa(_,i,a,d),{u_world:p}),Yf=(_,i,a,d)=>{const p=_.transform;let v,w;if(d.paint.get("circle-pitch-alignment")==="map"){const S=Rt(a,1,p.zoom);v=!0,w=[S,S]}else v=!1,w=p.pixelsToGLUnits;return{u_camera_to_center_distance:p.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:_.translatePosMatrix(i.posMatrix,a,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:_.pixelRatio,u_extrude_scale:w}},Qf=(_,i,a)=>({u_matrix:_,u_inv_matrix:i,u_camera_to_center_distance:a.cameraToCenterDistance,u_viewport_size:[a.width,a.height]}),Cc=(_,i,a=1)=>({u_matrix:_,u_color:i,u_overlay:0,u_overlay_scale:a}),bh=_=>({u_matrix:_}),Ho=(_,i,a,d)=>({u_matrix:_,u_extrude_scale:Rt(i,1,a),u_intensity:d});function al(_,i){const a=Math.pow(2,i.canonical.z),d=i.canonical.y;return[new c.Y(0,d/a).toLngLat().lat,new c.Y(0,(d+1)/a).toLngLat().lat]}const Vr=(_,i,a,d)=>{const p=_.transform;return{u_matrix:Mc(_,i,a,d),u_ratio:1/Rt(i,1,p.zoom),u_device_pixel_ratio:_.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},hn=(_,i,a,d,p)=>c.e(Vr(_,i,a,p),{u_image:0,u_image_height:d}),Ac=(_,i,a,d,p)=>{const v=_.transform,w=kc(i,v);return{u_matrix:Mc(_,i,a,p),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Rt(i,1,v.zoom),u_device_pixel_ratio:_.pixelRatio,u_image:0,u_scale:[w,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},ll=(_,i,a,d,p,v)=>{const w=_.lineAtlas,S=kc(i,_.transform),I=a.layout.get("line-cap")==="round",z=w.getDash(d.from,I),O=w.getDash(d.to,I),R=z.width*p.fromScale,$=O.width*p.toScale;return c.e(Vr(_,i,a,v),{u_patternscale_a:[S/R,-z.height/2],u_patternscale_b:[S/$,-O.height/2],u_sdfgamma:w.width/(256*Math.min(R,$)*_.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:O.y,u_mix:p.t})};function kc(_,i){return 1/Rt(_,1,i.tileZoom)}function Mc(_,i,a,d){return _.translatePosMatrix(d?d.posMatrix:i.tileID.posMatrix,i,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"))}const bs=(_,i,a,d,p)=>{return{u_matrix:_,u_tl_parent:i,u_scale_parent:a,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(w=p.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(v=p.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:ep(p.paint.get("raster-hue-rotate"))};var v,w};function ep(_){_*=Math.PI/180;const i=Math.sin(_),a=Math.cos(_);return[(2*a+1)/3,(-Math.sqrt(3)*i-a+1)/3,(Math.sqrt(3)*i-a+1)/3]}const wh=(_,i,a,d,p,v,w,S,I,z,O,R,$,G)=>{const K=w.transform;return{u_is_size_zoom_constant:+(_==="constant"||_==="source"),u_is_size_feature_constant:+(_==="constant"||_==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:K.cameraToCenterDistance,u_pitch:K.pitch/360*2*Math.PI,u_rotate_symbol:+a,u_aspect_ratio:K.width/K.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:I,u_coord_matrix:z,u_is_text:+R,u_pitch_with_map:+d,u_is_along_line:p,u_is_variable_anchor:v,u_texsize:$,u_texture:0,u_translation:O,u_pitched_scale:G}},Eh=(_,i,a,d,p,v,w,S,I,z,O,R,$,G,K)=>{const re=w.transform;return c.e(wh(_,i,a,d,p,v,w,S,I,z,O,R,$,K),{u_gamma_scale:d?Math.cos(re._pitch)*re.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+G})},tp=(_,i,a,d,p,v,w,S,I,z,O,R,$,G)=>c.e(Eh(_,i,a,d,p,v,w,S,I,z,O,!0,R,!0,G),{u_texsize_icon:$,u_texture_icon:1}),ip=(_,i,a)=>({u_matrix:_,u_opacity:i,u_color:a}),rp=(_,i,a,d,p,v)=>c.e(function(w,S,I,z){const O=I.imageManager.getPattern(w.from.toString()),R=I.imageManager.getPattern(w.to.toString()),{width:$,height:G}=I.imageManager.getPixelSize(),K=Math.pow(2,z.tileID.overscaledZ),re=z.tileSize*Math.pow(2,I.transform.tileZoom)/K,J=re*(z.tileID.canonical.x+z.tileID.wrap*K),ce=re*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[$,G],u_mix:S.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/Rt(z,1,I.transform.tileZoom),u_pixel_coord_upper:[J>>16,ce>>16],u_pixel_coord_lower:[65535&J,65535&ce]}}(d,v,a,p),{u_matrix:_,u_opacity:i}),cl={fillExtrusion:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_lightpos:new c.aL(_,i.u_lightpos),u_lightintensity:new c.aI(_,i.u_lightintensity),u_lightcolor:new c.aL(_,i.u_lightcolor),u_vertical_gradient:new c.aI(_,i.u_vertical_gradient),u_opacity:new c.aI(_,i.u_opacity)}),fillExtrusionPattern:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_lightpos:new c.aL(_,i.u_lightpos),u_lightintensity:new c.aI(_,i.u_lightintensity),u_lightcolor:new c.aL(_,i.u_lightcolor),u_vertical_gradient:new c.aI(_,i.u_vertical_gradient),u_height_factor:new c.aI(_,i.u_height_factor),u_image:new c.aH(_,i.u_image),u_texsize:new c.aM(_,i.u_texsize),u_pixel_coord_upper:new c.aM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(_,i.u_pixel_coord_lower),u_scale:new c.aL(_,i.u_scale),u_fade:new c.aI(_,i.u_fade),u_opacity:new c.aI(_,i.u_opacity)}),fill:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix)}),fillPattern:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_image:new c.aH(_,i.u_image),u_texsize:new c.aM(_,i.u_texsize),u_pixel_coord_upper:new c.aM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(_,i.u_pixel_coord_lower),u_scale:new c.aL(_,i.u_scale),u_fade:new c.aI(_,i.u_fade)}),fillOutline:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_world:new c.aM(_,i.u_world)}),fillOutlinePattern:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_world:new c.aM(_,i.u_world),u_image:new c.aH(_,i.u_image),u_texsize:new c.aM(_,i.u_texsize),u_pixel_coord_upper:new c.aM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(_,i.u_pixel_coord_lower),u_scale:new c.aL(_,i.u_scale),u_fade:new c.aI(_,i.u_fade)}),circle:(_,i)=>({u_camera_to_center_distance:new c.aI(_,i.u_camera_to_center_distance),u_scale_with_map:new c.aH(_,i.u_scale_with_map),u_pitch_with_map:new c.aH(_,i.u_pitch_with_map),u_extrude_scale:new c.aM(_,i.u_extrude_scale),u_device_pixel_ratio:new c.aI(_,i.u_device_pixel_ratio),u_matrix:new c.aJ(_,i.u_matrix)}),collisionBox:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_pixel_extrude_scale:new c.aM(_,i.u_pixel_extrude_scale)}),collisionCircle:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_inv_matrix:new c.aJ(_,i.u_inv_matrix),u_camera_to_center_distance:new c.aI(_,i.u_camera_to_center_distance),u_viewport_size:new c.aM(_,i.u_viewport_size)}),debug:(_,i)=>({u_color:new c.aN(_,i.u_color),u_matrix:new c.aJ(_,i.u_matrix),u_overlay:new c.aH(_,i.u_overlay),u_overlay_scale:new c.aI(_,i.u_overlay_scale)}),clippingMask:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix)}),heatmap:(_,i)=>({u_extrude_scale:new c.aI(_,i.u_extrude_scale),u_intensity:new c.aI(_,i.u_intensity),u_matrix:new c.aJ(_,i.u_matrix)}),heatmapTexture:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_world:new c.aM(_,i.u_world),u_image:new c.aH(_,i.u_image),u_color_ramp:new c.aH(_,i.u_color_ramp),u_opacity:new c.aI(_,i.u_opacity)}),hillshade:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_image:new c.aH(_,i.u_image),u_latrange:new c.aM(_,i.u_latrange),u_light:new c.aM(_,i.u_light),u_shadow:new c.aN(_,i.u_shadow),u_highlight:new c.aN(_,i.u_highlight),u_accent:new c.aN(_,i.u_accent)}),hillshadePrepare:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_image:new c.aH(_,i.u_image),u_dimension:new c.aM(_,i.u_dimension),u_zoom:new c.aI(_,i.u_zoom),u_unpack:new c.aK(_,i.u_unpack)}),line:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_ratio:new c.aI(_,i.u_ratio),u_device_pixel_ratio:new c.aI(_,i.u_device_pixel_ratio),u_units_to_pixels:new c.aM(_,i.u_units_to_pixels)}),lineGradient:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_ratio:new c.aI(_,i.u_ratio),u_device_pixel_ratio:new c.aI(_,i.u_device_pixel_ratio),u_units_to_pixels:new c.aM(_,i.u_units_to_pixels),u_image:new c.aH(_,i.u_image),u_image_height:new c.aI(_,i.u_image_height)}),linePattern:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_texsize:new c.aM(_,i.u_texsize),u_ratio:new c.aI(_,i.u_ratio),u_device_pixel_ratio:new c.aI(_,i.u_device_pixel_ratio),u_image:new c.aH(_,i.u_image),u_units_to_pixels:new c.aM(_,i.u_units_to_pixels),u_scale:new c.aL(_,i.u_scale),u_fade:new c.aI(_,i.u_fade)}),lineSDF:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_ratio:new c.aI(_,i.u_ratio),u_device_pixel_ratio:new c.aI(_,i.u_device_pixel_ratio),u_units_to_pixels:new c.aM(_,i.u_units_to_pixels),u_patternscale_a:new c.aM(_,i.u_patternscale_a),u_patternscale_b:new c.aM(_,i.u_patternscale_b),u_sdfgamma:new c.aI(_,i.u_sdfgamma),u_image:new c.aH(_,i.u_image),u_tex_y_a:new c.aI(_,i.u_tex_y_a),u_tex_y_b:new c.aI(_,i.u_tex_y_b),u_mix:new c.aI(_,i.u_mix)}),raster:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_tl_parent:new c.aM(_,i.u_tl_parent),u_scale_parent:new c.aI(_,i.u_scale_parent),u_buffer_scale:new c.aI(_,i.u_buffer_scale),u_fade_t:new c.aI(_,i.u_fade_t),u_opacity:new c.aI(_,i.u_opacity),u_image0:new c.aH(_,i.u_image0),u_image1:new c.aH(_,i.u_image1),u_brightness_low:new c.aI(_,i.u_brightness_low),u_brightness_high:new c.aI(_,i.u_brightness_high),u_saturation_factor:new c.aI(_,i.u_saturation_factor),u_contrast_factor:new c.aI(_,i.u_contrast_factor),u_spin_weights:new c.aL(_,i.u_spin_weights)}),symbolIcon:(_,i)=>({u_is_size_zoom_constant:new c.aH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(_,i.u_is_size_feature_constant),u_size_t:new c.aI(_,i.u_size_t),u_size:new c.aI(_,i.u_size),u_camera_to_center_distance:new c.aI(_,i.u_camera_to_center_distance),u_pitch:new c.aI(_,i.u_pitch),u_rotate_symbol:new c.aH(_,i.u_rotate_symbol),u_aspect_ratio:new c.aI(_,i.u_aspect_ratio),u_fade_change:new c.aI(_,i.u_fade_change),u_matrix:new c.aJ(_,i.u_matrix),u_label_plane_matrix:new c.aJ(_,i.u_label_plane_matrix),u_coord_matrix:new c.aJ(_,i.u_coord_matrix),u_is_text:new c.aH(_,i.u_is_text),u_pitch_with_map:new c.aH(_,i.u_pitch_with_map),u_is_along_line:new c.aH(_,i.u_is_along_line),u_is_variable_anchor:new c.aH(_,i.u_is_variable_anchor),u_texsize:new c.aM(_,i.u_texsize),u_texture:new c.aH(_,i.u_texture),u_translation:new c.aM(_,i.u_translation),u_pitched_scale:new c.aI(_,i.u_pitched_scale)}),symbolSDF:(_,i)=>({u_is_size_zoom_constant:new c.aH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(_,i.u_is_size_feature_constant),u_size_t:new c.aI(_,i.u_size_t),u_size:new c.aI(_,i.u_size),u_camera_to_center_distance:new c.aI(_,i.u_camera_to_center_distance),u_pitch:new c.aI(_,i.u_pitch),u_rotate_symbol:new c.aH(_,i.u_rotate_symbol),u_aspect_ratio:new c.aI(_,i.u_aspect_ratio),u_fade_change:new c.aI(_,i.u_fade_change),u_matrix:new c.aJ(_,i.u_matrix),u_label_plane_matrix:new c.aJ(_,i.u_label_plane_matrix),u_coord_matrix:new c.aJ(_,i.u_coord_matrix),u_is_text:new c.aH(_,i.u_is_text),u_pitch_with_map:new c.aH(_,i.u_pitch_with_map),u_is_along_line:new c.aH(_,i.u_is_along_line),u_is_variable_anchor:new c.aH(_,i.u_is_variable_anchor),u_texsize:new c.aM(_,i.u_texsize),u_texture:new c.aH(_,i.u_texture),u_gamma_scale:new c.aI(_,i.u_gamma_scale),u_device_pixel_ratio:new c.aI(_,i.u_device_pixel_ratio),u_is_halo:new c.aH(_,i.u_is_halo),u_translation:new c.aM(_,i.u_translation),u_pitched_scale:new c.aI(_,i.u_pitched_scale)}),symbolTextAndIcon:(_,i)=>({u_is_size_zoom_constant:new c.aH(_,i.u_is_size_zoom_constant),u_is_size_feature_constant:new c.aH(_,i.u_is_size_feature_constant),u_size_t:new c.aI(_,i.u_size_t),u_size:new c.aI(_,i.u_size),u_camera_to_center_distance:new c.aI(_,i.u_camera_to_center_distance),u_pitch:new c.aI(_,i.u_pitch),u_rotate_symbol:new c.aH(_,i.u_rotate_symbol),u_aspect_ratio:new c.aI(_,i.u_aspect_ratio),u_fade_change:new c.aI(_,i.u_fade_change),u_matrix:new c.aJ(_,i.u_matrix),u_label_plane_matrix:new c.aJ(_,i.u_label_plane_matrix),u_coord_matrix:new c.aJ(_,i.u_coord_matrix),u_is_text:new c.aH(_,i.u_is_text),u_pitch_with_map:new c.aH(_,i.u_pitch_with_map),u_is_along_line:new c.aH(_,i.u_is_along_line),u_is_variable_anchor:new c.aH(_,i.u_is_variable_anchor),u_texsize:new c.aM(_,i.u_texsize),u_texsize_icon:new c.aM(_,i.u_texsize_icon),u_texture:new c.aH(_,i.u_texture),u_texture_icon:new c.aH(_,i.u_texture_icon),u_gamma_scale:new c.aI(_,i.u_gamma_scale),u_device_pixel_ratio:new c.aI(_,i.u_device_pixel_ratio),u_is_halo:new c.aH(_,i.u_is_halo),u_translation:new c.aM(_,i.u_translation),u_pitched_scale:new c.aI(_,i.u_pitched_scale)}),background:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_opacity:new c.aI(_,i.u_opacity),u_color:new c.aN(_,i.u_color)}),backgroundPattern:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_opacity:new c.aI(_,i.u_opacity),u_image:new c.aH(_,i.u_image),u_pattern_tl_a:new c.aM(_,i.u_pattern_tl_a),u_pattern_br_a:new c.aM(_,i.u_pattern_br_a),u_pattern_tl_b:new c.aM(_,i.u_pattern_tl_b),u_pattern_br_b:new c.aM(_,i.u_pattern_br_b),u_texsize:new c.aM(_,i.u_texsize),u_mix:new c.aI(_,i.u_mix),u_pattern_size_a:new c.aM(_,i.u_pattern_size_a),u_pattern_size_b:new c.aM(_,i.u_pattern_size_b),u_scale_a:new c.aI(_,i.u_scale_a),u_scale_b:new c.aI(_,i.u_scale_b),u_pixel_coord_upper:new c.aM(_,i.u_pixel_coord_upper),u_pixel_coord_lower:new c.aM(_,i.u_pixel_coord_lower),u_tile_units_to_pixels:new c.aI(_,i.u_tile_units_to_pixels)}),terrain:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_texture:new c.aH(_,i.u_texture),u_ele_delta:new c.aI(_,i.u_ele_delta)}),terrainDepth:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_ele_delta:new c.aI(_,i.u_ele_delta)}),terrainCoords:(_,i)=>({u_matrix:new c.aJ(_,i.u_matrix),u_texture:new c.aH(_,i.u_texture),u_terrain_coords_id:new c.aI(_,i.u_terrain_coords_id),u_ele_delta:new c.aI(_,i.u_ele_delta)})};class Lc{constructor(i,a,d){this.context=i;const p=i.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const a=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),a.bufferSubData(a.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ul={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Pc{constructor(i,a,d,p){this.length=a.length,this.attributes=d,this.itemSize=a.bytesPerElement,this.dynamicDraw=p,this.context=i;const v=i.gl;this.buffer=v.createBuffer(),i.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,a.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete a.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const a=this.context.gl;this.bind(),a.bufferSubData(a.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,a){for(let d=0;d<this.attributes.length;d++){const p=a.attributes[this.attributes[d].name];p!==void 0&&i.enableVertexAttribArray(p)}}setVertexAttribPointers(i,a,d){for(let p=0;p<this.attributes.length;p++){const v=this.attributes[p],w=a.attributes[v.name];w!==void 0&&i.vertexAttribPointer(w,v.components,i[ul[v.type]],!1,this.itemSize,v.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ga=new WeakMap;function dn(_){var i;if(ga.has(_))return ga.get(_);{const a=(i=_.getParameter(_.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return ga.set(_,a),a}}class ui{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class zc extends ui{getDefault(){return c.aP.transparent}set(i){const a=this.current;(i.r!==a.r||i.g!==a.g||i.b!==a.b||i.a!==a.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ya extends ui{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class _a extends ui{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class np extends ui{getDefault(){return[!0,!0,!0,!0]}set(i){const a=this.current;(i[0]!==a[0]||i[1]!==a[1]||i[2]!==a[2]||i[3]!==a[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class hl extends ui{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class op extends ui{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class ws extends ui{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const a=this.current;(i.func!==a.func||i.ref!==a.ref||i.mask!==a.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class sp extends ui{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const a=this.current;(i[0]!==a[0]||i[1]!==a[1]||i[2]!==a[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Sh extends ui{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;i?a.enable(a.STENCIL_TEST):a.disable(a.STENCIL_TEST),this.current=i,this.dirty=!1}}class ap extends ui{getDefault(){return[0,1]}set(i){const a=this.current;(i[0]!==a[0]||i[1]!==a[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Th extends ui{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;i?a.enable(a.DEPTH_TEST):a.disable(a.DEPTH_TEST),this.current=i,this.dirty=!1}}class Dc extends ui{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Ih extends ui{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;i?a.enable(a.BLEND):a.disable(a.BLEND),this.current=i,this.dirty=!1}}class Ch extends ui{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const a=this.current;(i[0]!==a[0]||i[1]!==a[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class Ah extends ui{getDefault(){return c.aP.transparent}set(i){const a=this.current;(i.r!==a.r||i.g!==a.g||i.b!==a.b||i.a!==a.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class kh extends ui{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Go extends ui{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;i?a.enable(a.CULL_FACE):a.disable(a.CULL_FACE),this.current=i,this.dirty=!1}}class Mh extends ui{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class lp extends ui{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class cp extends ui{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Lh extends ui{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class va extends ui{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const a=this.current;(i[0]!==a[0]||i[1]!==a[1]||i[2]!==a[2]||i[3]!==a[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class up extends ui{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class dl extends ui{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;a.bindRenderbuffer(a.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class hp extends ui{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;a.bindTexture(a.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class dp extends ui{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;a.bindBuffer(a.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Ph extends ui{getDefault(){return null}set(i){const a=this.gl;a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class zh extends ui{getDefault(){return null}set(i){var a;if(i===this.current&&!this.dirty)return;const d=this.gl;dn(d)?d.bindVertexArray(i):(a=d.getExtension("OES_vertex_array_object"))===null||a===void 0||a.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class Dh extends ui{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class Rc extends ui{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Rh extends ui{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const a=this.gl;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Es extends ui{constructor(i,a){super(i),this.context=i,this.parent=a}getDefault(){return null}}class so extends Es{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class Oc extends Es{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Bc extends Es{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const a=this.gl;a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Fc{constructor(i,a,d,p,v){this.context=i,this.width=a,this.height=d;const w=i.gl,S=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new so(i,S),p)this.depthAttachment=v?new Bc(i,S):new Oc(i,S);else if(v)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,a=this.colorAttachment.get();if(a&&i.deleteTexture(a),this.depthAttachment){const d=this.depthAttachment.get();d&&i.deleteRenderbuffer(d)}i.deleteFramebuffer(this.framebuffer)}}class Ki{constructor(i,a,d){this.blendFunction=i,this.blendColor=a,this.mask=d}}Ki.Replace=[1,0],Ki.disabled=new Ki(Ki.Replace,c.aP.transparent,[!1,!1,!1,!1]),Ki.unblended=new Ki(Ki.Replace,c.aP.transparent,[!0,!0,!0,!0]),Ki.alphaBlended=new Ki([1,771],c.aP.transparent,[!0,!0,!0,!0]);class Vc{constructor(i){var a,d;if(this.gl=i,this.clearColor=new zc(this),this.clearDepth=new ya(this),this.clearStencil=new _a(this),this.colorMask=new np(this),this.depthMask=new hl(this),this.stencilMask=new op(this),this.stencilFunc=new ws(this),this.stencilOp=new sp(this),this.stencilTest=new Sh(this),this.depthRange=new ap(this),this.depthTest=new Th(this),this.depthFunc=new Dc(this),this.blend=new Ih(this),this.blendFunc=new Ch(this),this.blendColor=new Ah(this),this.blendEquation=new kh(this),this.cullFace=new Go(this),this.cullFaceSide=new Mh(this),this.frontFace=new lp(this),this.program=new cp(this),this.activeTexture=new Lh(this),this.viewport=new va(this),this.bindFramebuffer=new up(this),this.bindRenderbuffer=new dl(this),this.bindTexture=new hp(this),this.bindVertexBuffer=new dp(this),this.bindElementBuffer=new Ph(this),this.bindVertexArray=new zh(this),this.pixelStoreUnpack=new Dh(this),this.pixelStoreUnpackPremultiplyAlpha=new Rc(this),this.pixelStoreUnpackFlipY=new Rh(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),dn(i)){this.HALF_FLOAT=i.HALF_FLOAT;const p=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(a=i.RGBA16F)!==null&&a!==void 0?a:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(d=i.RGB16F)!==null&&d!==void 0?d:p==null?void 0:p.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const p=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,a){return new Lc(this,i,a)}createVertexBuffer(i,a,d){return new Pc(this,i,a,d)}createRenderbuffer(i,a,d){const p=this.gl,v=p.createRenderbuffer();return this.bindRenderbuffer.set(v),p.renderbufferStorage(p.RENDERBUFFER,i,a,d),this.bindRenderbuffer.set(null),v}createFramebuffer(i,a,d,p){return new Fc(this,i,a,d,p)}clear({color:i,depth:a,stencil:d}){const p=this.gl;let v=0;i&&(v|=p.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),a!==void 0&&(v|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(a),this.depthMask.set(!0)),d!==void 0&&(v|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),p.clear(v)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){c.aE(i.blendFunction,Ki.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return dn(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var a;return dn(this.gl)?this.gl.deleteVertexArray(i):(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Kt{constructor(i,a,d){this.func=i,this.mask=a,this.range=d}}Kt.ReadOnly=!1,Kt.ReadWrite=!0,Kt.disabled=new Kt(519,Kt.ReadOnly,[0,1]);const xa=7680;class Vi{constructor(i,a,d,p,v,w){this.test=i,this.ref=a,this.mask=d,this.fail=p,this.depthFail=v,this.pass=w}}Vi.disabled=new Vi({func:519,mask:0},0,0,xa,xa,xa);class zi{constructor(i,a,d){this.enable=i,this.mode=a,this.frontFace=d}}let fl;function Oh(_,i,a,d,p){const v=_.context,w=v.gl,S=_.useProgram("collisionBox"),I=[];let z=0,O=0;for(let ce=0;ce<d.length;ce++){const me=d[ce],te=i.getTile(me).getBucket(a);if(!te)continue;const ve=p?te.textCollisionBox:te.iconCollisionBox,Se=te.collisionCircleArray;if(Se.length>0){const Pe=c.F();c.aQ(Pe,te.placementInvProjMatrix,_.transform.glCoordMatrix),c.aQ(Pe,Pe,te.placementViewportMatrix),I.push({circleArray:Se,circleOffset:O,transform:me.posMatrix,invTransform:Pe,coord:me}),z+=Se.length/4,O=z}ve&&S.draw(v,w.LINES,Kt.disabled,Vi.disabled,_.colorModeForRenderPass(),zi.disabled,{u_matrix:me.posMatrix,u_pixel_extrude_scale:[1/(R=_.transform).width,1/R.height]},_.style.map.terrain&&_.style.map.terrain.getTerrainData(me),a.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,null,_.transform.zoom,null,null,ve.collisionVertexBuffer)}var R;if(!p||!I.length)return;const $=_.useProgram("collisionCircle"),G=new c.aR;G.resize(4*z),G._trim();let K=0;for(const ce of I)for(let me=0;me<ce.circleArray.length/4;me++){const te=4*me,ve=ce.circleArray[te+0],Se=ce.circleArray[te+1],Pe=ce.circleArray[te+2],Ne=ce.circleArray[te+3];G.emplace(K++,ve,Se,Pe,Ne,0),G.emplace(K++,ve,Se,Pe,Ne,1),G.emplace(K++,ve,Se,Pe,Ne,2),G.emplace(K++,ve,Se,Pe,Ne,3)}(!fl||fl.length<2*z)&&(fl=function(ce){const me=2*ce,te=new c.aT;te.resize(me),te._trim();for(let ve=0;ve<me;ve++){const Se=6*ve;te.uint16[Se+0]=4*ve+0,te.uint16[Se+1]=4*ve+1,te.uint16[Se+2]=4*ve+2,te.uint16[Se+3]=4*ve+2,te.uint16[Se+4]=4*ve+3,te.uint16[Se+5]=4*ve+0}return te}(z));const re=v.createIndexBuffer(fl,!0),J=v.createVertexBuffer(G,c.aS.members,!0);for(const ce of I){const me=Qf(ce.transform,ce.invTransform,_.transform);$.draw(v,w.TRIANGLES,Kt.disabled,Vi.disabled,_.colorModeForRenderPass(),zi.disabled,me,_.style.map.terrain&&_.style.map.terrain.getTerrainData(ce.coord),a.id,J,re,c.$.simpleSegment(0,2*ce.circleOffset,ce.circleArray.length,ce.circleArray.length/2),null,_.transform.zoom,null,null,null)}J.destroy(),re.destroy()}zi.disabled=new zi(!1,1029,2305),zi.backCCW=new zi(!0,1029,2305);const Nc=c.an(new Float32Array(16));function fp(_,i,a,d,p,v){const{horizontalAlign:w,verticalAlign:S}=c.au(_);return new c.P((-(w-.5)*i/p+d[0])*v,(-(S-.5)*a/p+d[1])*v)}function Bh(_,i,a,d,p,v){const w=i.tileAnchorPoint.add(new c.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let S=d.mult(v);return a||(S=S.rotate(-p)),gr(w.add(S),i.labelPlaneMatrix,i.getElevation).point}if(a){const S=he(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(_),I=Math.atan(S.y/S.x)+(S.x<0?Math.PI:0);return _.add(d.rotate(I))}return _.add(d)}function pl(_,i,a,d,p,v,w,S,I,z,O,R,$,G){const K=_.text.placedSymbolArray,re=_.text.dynamicLayoutVertexArray,J=_.icon.dynamicLayoutVertexArray,ce={};re.clear();for(let me=0;me<K.length;me++){const te=K.get(me),ve=te.hidden||!te.crossTileID||_.allowVerticalPlacement&&!te.placedOrientation?null:d[te.crossTileID];if(ve){const Se=new c.P(te.anchorX,te.anchorY),Pe={getElevation:G,width:p.width,height:p.height,labelPlaneMatrix:v,lineVertexArray:null,pitchWithMap:a,projection:O,projectionCache:null,tileAnchorPoint:Se,translation:R,unwrappedTileID:$},Ne=a?gr(Se,w,G):he(Se.x,Se.y,Pe),Xe=Q(p.cameraToCenterDistance,Ne.signedDistanceFromCamera);let ut=c.ai(_.textSizeData,I,te)*Xe/c.ap;a&&(ut*=_.tilePixelRatio/S);const{width:ht,height:Je,anchor:et,textOffset:yt,textBoxScale:Ot}=ve,it=fp(et,ht,Je,yt,Ot,ut),at=O.getPitchedTextCorrection(p,Se.add(new c.P(R[0],R[1])),$),Pt=Bh(Ne.point,Pe,i,it,p.angle,at),Ci=_.allowVerticalPlacement&&te.placedOrientation===c.ah.vertical?Math.PI/2:0;for(let Wt=0;Wt<te.numGlyphs;Wt++)c.aj(re,Pt,Ci);z&&te.associatedIconIndex>=0&&(ce[te.associatedIconIndex]={shiftedAnchor:Pt,angle:Ci})}else It(te.numGlyphs,re)}if(z){J.clear();const me=_.icon.placedSymbolArray;for(let te=0;te<me.length;te++){const ve=me.get(te);if(ve.hidden)It(ve.numGlyphs,J);else{const Se=ce[te];if(Se)for(let Pe=0;Pe<ve.numGlyphs;Pe++)c.aj(J,Se.shiftedAnchor,Se.angle);else It(ve.numGlyphs,J)}}_.icon.dynamicLayoutVertexBuffer.updateData(J)}_.text.dynamicLayoutVertexBuffer.updateData(re)}function ml(_,i,a){return a.iconsInText&&i?"symbolTextAndIcon":_?"symbolSDF":"symbolIcon"}function ba(_,i,a,d,p,v,w,S,I,z,O,R){const $=_.context,G=$.gl,K=_.transform,re=Yr(),J=S==="map",ce=I==="map",me=S!=="viewport"&&a.layout.get("symbol-placement")!=="point",te=J&&!ce&&!me,ve=!ce&&me,Se=!a.layout.get("symbol-sort-key").isConstant();let Pe=!1;const Ne=_.depthModeForSublayer(0,Kt.ReadOnly),Xe=a._unevaluatedLayout.hasValue("text-variable-anchor")||a._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ut=[],ht=re.getCircleRadiusCorrection(K);for(const Je of d){const et=i.getTile(Je),yt=et.getBucket(a);if(!yt)continue;const Ot=p?yt.text:yt.icon;if(!Ot||!Ot.segments.get().length||!Ot.hasVisibleVertices)continue;const it=Ot.programConfigurations.get(a.id),at=p||yt.sdfIcons,Pt=p?yt.textSizeData:yt.iconSizeData,Ci=ce||K.pitch!==0,Wt=_.useProgram(ml(at,p,yt),it),Yt=c.ag(Pt,K.zoom),Ai=_.style.map.terrain&&_.style.map.terrain.getTerrainData(Je);let Ar,In,ki,en,Nr=[0,0],kr=null;if(p)In=et.glyphAtlasTexture,ki=G.LINEAR,Ar=et.glyphAtlasTexture.size,yt.iconsInText&&(Nr=et.imageAtlasTexture.size,kr=et.imageAtlasTexture,en=Ci||_.options.rotating||_.options.zooming||Pt.kind==="composite"||Pt.kind==="camera"?G.LINEAR:G.NEAREST);else{const Ni=a.layout.get("icon-size").constantOr(0)!==1||yt.iconsNeedLinear;In=et.imageAtlasTexture,ki=at||_.options.rotating||_.options.zooming||Ni||Ci?G.LINEAR:G.NEAREST,Ar=et.imageAtlasTexture.size}const Mr=Rt(et,1,_.transform.zoom),Cn=ve?Je.posMatrix:Nc,Qo=ro(Cn,ce,J,_.transform,Mr),Dl=no(Cn,ce,J,_.transform,Mr),Ls=no(Je.posMatrix,ce,J,_.transform,Mr),es=re.translatePosition(_.transform,et,v,w),Rl=Xe&&yt.hasTextData(),cu=a.layout.get("icon-text-fit")!=="none"&&Rl&&yt.hasIconData();if(me){const Ni=_.style.map.terrain?(uu,hr)=>_.style.map.terrain.getElevation(Je,uu,hr):null,zs=a.layout.get("text-rotation-alignment")==="map";N(yt,Je.posMatrix,_,p,Qo,Ls,ce,z,zs,re,Je.toUnwrapped(),K.width,K.height,es,Ni)}const Er=Je.posMatrix,An=p&&Xe||cu,To=me||An?Nc:Qo,Ps=Dl,Lr=at&&a.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Pr;Pr=at?yt.iconsInText?tp(Pt.kind,Yt,te,ce,me,An,_,Er,To,Ps,es,Ar,Nr,ht):Eh(Pt.kind,Yt,te,ce,me,An,_,Er,To,Ps,es,p,Ar,!0,ht):wh(Pt.kind,Yt,te,ce,me,An,_,Er,To,Ps,es,p,Ar,ht);const yr={program:Wt,buffers:Ot,uniformValues:Pr,atlasTexture:In,atlasTextureIcon:kr,atlasInterpolation:ki,atlasInterpolationIcon:en,isSDF:at,hasHalo:Lr};if(Se&&yt.canOverlap){Pe=!0;const Ni=Ot.segments.get();for(const zs of Ni)ut.push({segments:new c.$([zs]),sortKey:zs.sortKey,state:yr,terrainData:Ai})}else ut.push({segments:Ot.segments,sortKey:0,state:yr,terrainData:Ai})}Pe&&ut.sort((Je,et)=>Je.sortKey-et.sortKey);for(const Je of ut){const et=Je.state;if($.activeTexture.set(G.TEXTURE0),et.atlasTexture.bind(et.atlasInterpolation,G.CLAMP_TO_EDGE),et.atlasTextureIcon&&($.activeTexture.set(G.TEXTURE1),et.atlasTextureIcon&&et.atlasTextureIcon.bind(et.atlasInterpolationIcon,G.CLAMP_TO_EDGE)),et.isSDF){const yt=et.uniformValues;et.hasHalo&&(yt.u_is_halo=1,gl(et.buffers,Je.segments,a,_,et.program,Ne,O,R,yt,Je.terrainData)),yt.u_is_halo=0}gl(et.buffers,Je.segments,a,_,et.program,Ne,O,R,et.uniformValues,Je.terrainData)}}function gl(_,i,a,d,p,v,w,S,I,z){const O=d.context;p.draw(O,O.gl.TRIANGLES,v,w,S,zi.disabled,I,z,a.id,_.layoutVertexBuffer,_.indexBuffer,i,a.paint,d.transform.zoom,_.programConfigurations.get(a.id),_.dynamicLayoutVertexBuffer,_.opacityVertexBuffer)}function xo(_,i,a,d,p){if(!a||!d||!d.imageAtlas)return;const v=d.imageAtlas.patternPositions;let w=v[a.to.toString()],S=v[a.from.toString()];if(!w&&S&&(w=S),!S&&w&&(S=w),!w||!S){const I=p.getPaintProperty(i);w=v[I],S=v[I]}w&&S&&_.setConstantPatternPositions(w,S)}function Zo(_,i,a,d,p,v,w){const S=_.context.gl,I="fill-pattern",z=a.paint.get(I),O=z&&z.constantOr(1),R=a.getCrossfadeParameters();let $,G,K,re,J;w?(G=O&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$=S.LINES):(G=O?"fillPattern":"fill",$=S.TRIANGLES);const ce=z.constantOr(null);for(const me of d){const te=i.getTile(me);if(O&&!te.patternsLoaded())continue;const ve=te.getBucket(a);if(!ve)continue;const Se=ve.programConfigurations.get(a.id),Pe=_.useProgram(G,Se),Ne=_.style.map.terrain&&_.style.map.terrain.getTerrainData(me);O&&(_.context.activeTexture.set(S.TEXTURE0),te.imageAtlasTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),Se.updatePaintBuffers(R)),xo(Se,I,ce,te,a);const Xe=Ne?me:null,ut=_.translatePosMatrix(Xe?Xe.posMatrix:me.posMatrix,te,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(w){re=ve.indexBuffer2,J=ve.segments2;const ht=[S.drawingBufferWidth,S.drawingBufferHeight];K=G==="fillOutlinePattern"&&O?ma(ut,_,R,te,ht):sl(ut,ht)}else re=ve.indexBuffer,J=ve.segments,K=O?pa(ut,_,R,te):ol(ut);Pe.draw(_.context,$,p,_.stencilModeForClipping(me),v,zi.disabled,K,Ne,a.id,ve.layoutVertexBuffer,re,J,a.paint,_.transform.zoom,Se)}}function Qr(_,i,a,d,p,v,w){const S=_.context,I=S.gl,z="fill-extrusion-pattern",O=a.paint.get(z),R=O.constantOr(1),$=a.getCrossfadeParameters(),G=a.paint.get("fill-extrusion-opacity"),K=O.constantOr(null);for(const re of d){const J=i.getTile(re),ce=J.getBucket(a);if(!ce)continue;const me=_.style.map.terrain&&_.style.map.terrain.getTerrainData(re),te=ce.programConfigurations.get(a.id),ve=_.useProgram(R?"fillExtrusionPattern":"fillExtrusion",te);R&&(_.context.activeTexture.set(I.TEXTURE0),J.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),te.updatePaintBuffers($)),xo(te,z,K,J,a);const Se=_.translatePosMatrix(re.posMatrix,J,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),Pe=a.paint.get("fill-extrusion-vertical-gradient"),Ne=R?Ic(Se,_,Pe,G,re,$,J):fa(Se,_,Pe,G);ve.draw(S,S.gl.TRIANGLES,p,v,w,zi.backCCW,Ne,me,a.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,a.paint,_.transform.zoom,te,_.style.map.terrain&&ce.centroidVertexBuffer)}}function Fh(_,i,a,d,p,v,w){const S=_.context,I=S.gl,z=a.fbo;if(!z)return;const O=_.useProgram("hillshade"),R=_.style.map.terrain&&_.style.map.terrain.getTerrainData(i);S.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,z.colorAttachment.get()),O.draw(S,I.TRIANGLES,p,v,w,zi.disabled,(($,G,K,re)=>{const J=K.paint.get("hillshade-shadow-color"),ce=K.paint.get("hillshade-highlight-color"),me=K.paint.get("hillshade-accent-color");let te=K.paint.get("hillshade-illumination-direction")*(Math.PI/180);K.paint.get("hillshade-illumination-anchor")==="viewport"&&(te-=$.transform.angle);const ve=!$.options.moving;return{u_matrix:re?re.posMatrix:$.transform.calculatePosMatrix(G.tileID.toUnwrapped(),ve),u_image:0,u_latrange:al(0,G.tileID),u_light:[K.paint.get("hillshade-exaggeration"),te],u_shadow:J,u_highlight:ce,u_accent:me}})(_,a,d,R?i:null),R,d.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments)}function Vh(_,i,a,d,p,v){const w=_.context,S=w.gl,I=i.dem;if(I&&I.data){const z=I.dim,O=I.stride,R=I.getPixels();if(w.activeTexture.set(S.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||_.getTileTexture(O),i.demTexture){const G=i.demTexture;G.update(R,{premultiply:!1}),G.bind(S.NEAREST,S.CLAMP_TO_EDGE)}else i.demTexture=new Ae(w,R,S.RGBA,{premultiply:!1}),i.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE);w.activeTexture.set(S.TEXTURE0);let $=i.fbo;if(!$){const G=new Ae(w,{width:z,height:z,data:null},S.RGBA);G.bind(S.LINEAR,S.CLAMP_TO_EDGE),$=i.fbo=w.createFramebuffer(z,z,!0,!1),$.colorAttachment.set(G.texture)}w.bindFramebuffer.set($.framebuffer),w.viewport.set([0,0,z,z]),_.useProgram("hillshadePrepare").draw(w,S.TRIANGLES,d,p,v,zi.disabled,((G,K)=>{const re=K.stride,J=c.F();return c.aO(J,0,c.W,-c.W,0,0,1),c.H(J,J,[0,-c.W,0]),{u_matrix:J,u_image:1,u_dimension:[re,re],u_zoom:G.overscaledZ,u_unpack:K.getUnpackVector()}})(i.tileID,I),null,a.id,_.rasterBoundsBuffer,_.quadTriangleIndexBuffer,_.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function $c(_,i,a,d,p,v){const w=d.paint.get("raster-fade-duration");if(!v&&w>0){const S=A.now(),I=(S-_.timeAdded)/w,z=i?(S-i.timeAdded)/w:-1,O=a.getSource(),R=p.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),$=!i||Math.abs(i.tileID.overscaledZ-R)>Math.abs(_.tileID.overscaledZ-R),G=$&&_.refreshedUponExpiration?1:c.ac($?I:1-z,0,1);return _.refreshedUponExpiration&&I>=1&&(_.refreshedUponExpiration=!1),i?{opacity:1,mix:1-G}:{opacity:G,mix:0}}return{opacity:1,mix:0}}const Wo=new c.aP(1,0,0,1),yl=new c.aP(0,1,0,1),_l=new c.aP(0,0,1,1),wa=new c.aP(1,0,1,1),vl=new c.aP(0,1,1,1);function jc(_,i,a,d){ao(_,0,i+a/2,_.transform.width,a,d)}function Ko(_,i,a,d){ao(_,i-a/2,0,a,_.transform.height,d)}function ao(_,i,a,d,p,v){const w=_.context,S=w.gl;S.enable(S.SCISSOR_TEST),S.scissor(i*_.pixelRatio,a*_.pixelRatio,d*_.pixelRatio,p*_.pixelRatio),w.clear({color:v}),S.disable(S.SCISSOR_TEST)}function Nh(_,i,a){const d=_.context,p=d.gl,v=a.posMatrix,w=_.useProgram("debug"),S=Kt.disabled,I=Vi.disabled,z=_.colorModeForRenderPass(),O="$debug",R=_.style.map.terrain&&_.style.map.terrain.getTerrainData(a);d.activeTexture.set(p.TEXTURE0);const $=i.getTileByID(a.key).latestRawTileData,G=Math.floor(($&&$.byteLength||0)/1024),K=i.getTile(a).tileSize,re=512/Math.min(K,512)*(a.overscaledZ/_.transform.zoom)*.5;let J=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(J+=` => ${a.overscaledZ}`),function(ce,me){ce.initDebugOverlayCanvas();const te=ce.debugOverlayCanvas,ve=ce.context.gl,Se=ce.debugOverlayCanvas.getContext("2d");Se.clearRect(0,0,te.width,te.height),Se.shadowColor="white",Se.shadowBlur=2,Se.lineWidth=1.5,Se.strokeStyle="white",Se.textBaseline="top",Se.font="bold 36px Open Sans, sans-serif",Se.fillText(me,5,5),Se.strokeText(me,5,5),ce.debugOverlayTexture.update(te),ce.debugOverlayTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE)}(_,`${J} ${G}kB`),w.draw(d,p.TRIANGLES,S,I,Ki.alphaBlended,zi.disabled,Cc(v,c.aP.transparent,re),null,O,_.debugBuffer,_.quadTriangleIndexBuffer,_.debugSegments),w.draw(d,p.LINE_STRIP,S,I,z,zi.disabled,Cc(v,c.aP.red),R,O,_.debugBuffer,_.tileBorderIndexBuffer,_.debugSegments)}function xl(_,i,a){const d=_.context,p=d.gl,v=_.colorModeForRenderPass(),w=new Kt(p.LEQUAL,Kt.ReadWrite,_.depthRangeFor3D),S=_.useProgram("terrain"),I=i.getTerrainMesh();d.bindFramebuffer.set(null),d.viewport.set([0,0,_.width,_.height]);for(const z of a){const O=_.renderToTexture.getTexture(z),R=i.getTerrainData(z.tileID);d.activeTexture.set(p.TEXTURE0),p.bindTexture(p.TEXTURE_2D,O.texture);const $={u_matrix:_.transform.calculatePosMatrix(z.tileID.toUnwrapped()),u_texture:0,u_ele_delta:i.getMeshFrameDelta(_.transform.zoom)};S.draw(d,p.TRIANGLES,w,Vi.disabled,v,zi.backCCW,$,R,"terrain",I.vertexBuffer,I.indexBuffer,I.segments)}}class oi{constructor(i,a){this.context=new Vc(i),this.transform=a,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:c.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ye.maxUnderzooming+Ye.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Wi}resize(i,a,d){if(this.width=Math.floor(i*d),this.height=Math.floor(a*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const i=this.context,a=new c.aW;a.emplaceBack(0,0),a.emplaceBack(c.W,0),a.emplaceBack(0,c.W),a.emplaceBack(c.W,c.W),this.tileExtentBuffer=i.createVertexBuffer(a,Un.members),this.tileExtentSegments=c.$.simpleSegment(0,0,4,2);const d=new c.aW;d.emplaceBack(0,0),d.emplaceBack(c.W,0),d.emplaceBack(0,c.W),d.emplaceBack(c.W,c.W),this.debugBuffer=i.createVertexBuffer(d,Un.members),this.debugSegments=c.$.simpleSegment(0,0,4,5);const p=new c.Z;p.emplaceBack(0,0,0,0),p.emplaceBack(c.W,0,c.W,0),p.emplaceBack(0,c.W,0,c.W),p.emplaceBack(c.W,c.W,c.W,c.W),this.rasterBoundsBuffer=i.createVertexBuffer(p,je.members),this.rasterBoundsSegments=c.$.simpleSegment(0,0,4,2);const v=new c.aW;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,Un.members),this.viewportSegments=c.$.simpleSegment(0,0,4,2);const w=new c.aX;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(w);const S=new c.aY;S.emplaceBack(0,1,2),S.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(S);const I=this.context.gl;this.stencilClearMode=new Vi({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)}clearStencil(){const i=this.context,a=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const d=c.F();c.aO(d,0,this.width,this.height,0,0,1),c.J(d,d,[a.drawingBufferWidth,a.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,a.TRIANGLES,Kt.disabled,this.stencilClearMode,Ki.disabled,zi.disabled,bh(d),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,a){if(this.currentStencilSource===i.source||!i.isTileClipped()||!a||!a.length)return;this.currentStencilSource=i.source;const d=this.context,p=d.gl;this.nextStencilID+a.length>256&&this.clearStencil(),d.setColorMode(Ki.disabled),d.setDepthMode(Kt.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const w of a){const S=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,I=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);v.draw(d,p.TRIANGLES,Kt.disabled,new Vi({func:p.ALWAYS,mask:0},S,255,p.KEEP,p.KEEP,p.REPLACE),Ki.disabled,zi.disabled,bh(w.posMatrix),I,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,a=this.context.gl;return new Vi({func:a.NOTEQUAL,mask:255},i,255,a.KEEP,a.KEEP,a.REPLACE)}stencilModeForClipping(i){const a=this.context.gl;return new Vi({func:a.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,a.KEEP,a.KEEP,a.REPLACE)}stencilConfigForOverlap(i){const a=this.context.gl,d=i.sort((w,S)=>S.overscaledZ-w.overscaledZ),p=d[d.length-1].overscaledZ,v=d[0].overscaledZ-p+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const w={};for(let S=0;S<v;S++)w[S+p]=new Vi({func:a.GEQUAL,mask:255},S+this.nextStencilID,255,a.KEEP,a.KEEP,a.REPLACE);return this.nextStencilID+=v,[w,d]}return[{[p]:Vi.disabled},d]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Ki([i.CONSTANT_COLOR,i.ONE],new c.aP(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Ki.unblended:Ki.alphaBlended}depthModeForSublayer(i,a,d){if(!this.opaquePassEnabledForLayer())return Kt.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Kt(d||this.context.gl.LEQUAL,a,[p,p])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,a){this.style=i,this.options=a,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(A.now()),this.imageManager.beginFrame();const d=this.style._order,p=this.style.sourceCaches,v={},w={},S={};for(const I in p){const z=p[I];z.used&&z.prepare(this.context),v[I]=z.getVisibleCoordinates(),w[I]=v[I].slice().reverse(),S[I]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let I=0;I<d.length;I++)if(this.style._layers[d[I]].is3D()){this.opaquePassCutoff=I;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const I of d){const z=this.style._layers[I];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const O=w[z.source];(z.type==="custom"||O.length)&&this.renderLayer(this,p[z.source],z,O)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:a.showOverdrawInspector?c.aP.black:c.aP.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=a.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){const I=this.style._layers[d[this.currentLayer]],z=p[I.source],O=v[I.source];this._renderTileClippingMasks(I,O),this.renderLayer(this,z,I,O)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){const I=this.style._layers[d[this.currentLayer]],z=p[I.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(I))continue;const O=(I.type==="symbol"?S:w)[I.source];this._renderTileClippingMasks(I,v[I.source]),this.renderLayer(this,z,I,O)}if(this.options.showTileBoundaries){const I=function(z,O){let R=null;const $=Object.values(z._layers).flatMap(J=>J.source&&!J.isHidden(O)?[z.sourceCaches[J.source]]:[]),G=$.filter(J=>J.getSource().type==="vector"),K=$.filter(J=>J.getSource().type!=="vector"),re=J=>{(!R||R.getSource().maxzoom<J.getSource().maxzoom)&&(R=J)};return G.forEach(J=>re(J)),R||K.forEach(J=>re(J)),R}(this.style,this.transform.zoom);I&&function(z,O,R){for(let $=0;$<R.length;$++)Nh(z,O,R[$])}(this,I,I.getVisibleCoordinates())}this.options.showPadding&&function(I){const z=I.transform.padding;jc(I,I.transform.height-(z.top||0),3,Wo),jc(I,z.bottom||0,3,yl),Ko(I,z.left||0,3,_l),Ko(I,I.transform.width-(z.right||0),3,wa);const O=I.transform.centerPoint;(function(R,$,G,K){ao(R,$-1,G-10,2,20,K),ao(R,$-10,G-1,20,2,K)})(I,O.x,I.transform.height-O.y,vl)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const a=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=i?!c.aZ(a,d):!c.a_(a,d)),p||(p=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),p&&(c.a$(a,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,w){const S=v.context,I=S.gl,z=Ki.unblended,O=new Kt(I.LEQUAL,Kt.ReadWrite,[0,1]),R=w.getTerrainMesh(),$=w.sourceCache.getRenderableTiles(),G=v.useProgram("terrainDepth");S.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),S.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),S.clear({color:c.aP.transparent,depth:1});for(const K of $){const re=w.getTerrainData(K.tileID),J={u_matrix:v.transform.calculatePosMatrix(K.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(v.transform.zoom)};G.draw(S,I.TRIANGLES,O,Vi.disabled,z,zi.backCCW,J,re,"terrain",R.vertexBuffer,R.indexBuffer,R.segments)}S.bindFramebuffer.set(null),S.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,w){const S=v.context,I=S.gl,z=Ki.unblended,O=new Kt(I.LEQUAL,Kt.ReadWrite,[0,1]),R=w.getTerrainMesh(),$=w.getCoordsTexture(),G=w.sourceCache.getRenderableTiles(),K=v.useProgram("terrainCoords");S.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),S.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),S.clear({color:c.aP.transparent,depth:1}),w.coordsIndex=[];for(const re of G){const J=w.getTerrainData(re.tileID);S.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,$.texture);const ce={u_matrix:v.transform.calculatePosMatrix(re.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(v.transform.zoom)};K.draw(S,I.TRIANGLES,O,Vi.disabled,z,zi.backCCW,ce,J,"terrain",R.vertexBuffer,R.indexBuffer,R.segments),w.coordsIndex.push(re.tileID.key)}S.bindFramebuffer.set(null),S.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(i,a,d,p){if(!d.isHidden(this.transform.zoom)&&(d.type==="background"||d.type==="custom"||(p||[]).length))switch(this.id=d.id,d.type){case"symbol":(function(v,w,S,I,z){if(v.renderPass!=="translucent")return;const O=Vi.disabled,R=v.colorModeForRenderPass();(S._unevaluatedLayout.hasValue("text-variable-anchor")||S._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function($,G,K,re,J,ce,me,te,ve){const Se=G.transform,Pe=Yr(),Ne=J==="map",Xe=ce==="map";for(const ut of $){const ht=re.getTile(ut),Je=ht.getBucket(K);if(!Je||!Je.text||!Je.text.segments.get().length)continue;const et=c.ag(Je.textSizeData,Se.zoom),yt=Rt(ht,1,G.transform.zoom),Ot=ro(ut.posMatrix,Xe,Ne,G.transform,yt),it=K.layout.get("icon-text-fit")!=="none"&&Je.hasIconData();if(et){const at=Math.pow(2,Se.zoom-ht.tileID.overscaledZ),Pt=G.style.map.terrain?(Wt,Yt)=>G.style.map.terrain.getElevation(ut,Wt,Yt):null,Ci=Pe.translatePosition(Se,ht,me,te);pl(Je,Ne,Xe,ve,Se,Ot,ut.posMatrix,at,et,it,Pe,Ci,ut.toUnwrapped(),Pt)}}}(I,v,S,w,S.layout.get("text-rotation-alignment"),S.layout.get("text-pitch-alignment"),S.paint.get("text-translate"),S.paint.get("text-translate-anchor"),z),S.paint.get("icon-opacity").constantOr(1)!==0&&ba(v,w,S,I,!1,S.paint.get("icon-translate"),S.paint.get("icon-translate-anchor"),S.layout.get("icon-rotation-alignment"),S.layout.get("icon-pitch-alignment"),S.layout.get("icon-keep-upright"),O,R),S.paint.get("text-opacity").constantOr(1)!==0&&ba(v,w,S,I,!0,S.paint.get("text-translate"),S.paint.get("text-translate-anchor"),S.layout.get("text-rotation-alignment"),S.layout.get("text-pitch-alignment"),S.layout.get("text-keep-upright"),O,R),w.map.showCollisionBoxes&&(Oh(v,w,S,I,!0),Oh(v,w,S,I,!1))})(i,a,d,p,this.style.placement.variableOffsets);break;case"circle":(function(v,w,S,I){if(v.renderPass!=="translucent")return;const z=S.paint.get("circle-opacity"),O=S.paint.get("circle-stroke-width"),R=S.paint.get("circle-stroke-opacity"),$=!S.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(O.constantOr(1)===0||R.constantOr(1)===0))return;const G=v.context,K=G.gl,re=v.depthModeForSublayer(0,Kt.ReadOnly),J=Vi.disabled,ce=v.colorModeForRenderPass(),me=[];for(let te=0;te<I.length;te++){const ve=I[te],Se=w.getTile(ve),Pe=Se.getBucket(S);if(!Pe)continue;const Ne=Pe.programConfigurations.get(S.id),Xe=v.useProgram("circle",Ne),ut=Pe.layoutVertexBuffer,ht=Pe.indexBuffer,Je=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ve),et={programConfiguration:Ne,program:Xe,layoutVertexBuffer:ut,indexBuffer:ht,uniformValues:Yf(v,ve,Se,S),terrainData:Je};if($){const yt=Pe.segments.get();for(const Ot of yt)me.push({segments:new c.$([Ot]),sortKey:Ot.sortKey,state:et})}else me.push({segments:Pe.segments,sortKey:0,state:et})}$&&me.sort((te,ve)=>te.sortKey-ve.sortKey);for(const te of me){const{programConfiguration:ve,program:Se,layoutVertexBuffer:Pe,indexBuffer:Ne,uniformValues:Xe,terrainData:ut}=te.state;Se.draw(G,K.TRIANGLES,re,J,ce,zi.disabled,Xe,ut,S.id,Pe,Ne,te.segments,S.paint,v.transform.zoom,ve)}})(i,a,d,p);break;case"heatmap":(function(v,w,S,I){if(S.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const z=v.context,O=z.gl,R=Vi.disabled,$=new Ki([O.ONE,O.ONE],c.aP.transparent,[!0,!0,!0,!0]);(function(G,K,re){const J=G.gl;G.activeTexture.set(J.TEXTURE1),G.viewport.set([0,0,K.width/4,K.height/4]);let ce=re.heatmapFbo;if(ce)J.bindTexture(J.TEXTURE_2D,ce.colorAttachment.get()),G.bindFramebuffer.set(ce.framebuffer);else{const me=J.createTexture();J.bindTexture(J.TEXTURE_2D,me),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),ce=re.heatmapFbo=G.createFramebuffer(K.width/4,K.height/4,!1,!1),function(te,ve,Se,Pe){var Ne,Xe;const ut=te.gl,ht=(Ne=te.HALF_FLOAT)!==null&&Ne!==void 0?Ne:ut.UNSIGNED_BYTE,Je=(Xe=te.RGBA16F)!==null&&Xe!==void 0?Xe:ut.RGBA;ut.texImage2D(ut.TEXTURE_2D,0,Je,ve.width/4,ve.height/4,0,ut.RGBA,ht,null),Pe.colorAttachment.set(Se)}(G,K,me,ce)}})(z,v,S),z.clear({color:c.aP.transparent});for(let G=0;G<I.length;G++){const K=I[G];if(w.hasRenderableParent(K))continue;const re=w.getTile(K),J=re.getBucket(S);if(!J)continue;const ce=J.programConfigurations.get(S.id),me=v.useProgram("heatmap",ce),{zoom:te}=v.transform;me.draw(z,O.TRIANGLES,Kt.disabled,R,$,zi.disabled,Ho(K.posMatrix,re,te,S.paint.get("heatmap-intensity")),null,S.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,S.paint,v.transform.zoom,ce)}z.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(z,O){const R=z.context,$=R.gl,G=O.heatmapFbo;if(!G)return;R.activeTexture.set($.TEXTURE0),$.bindTexture($.TEXTURE_2D,G.colorAttachment.get()),R.activeTexture.set($.TEXTURE1);let K=O.colorRampTexture;K||(K=O.colorRampTexture=new Ae(R,O.colorRamp,$.RGBA)),K.bind($.LINEAR,$.CLAMP_TO_EDGE),z.useProgram("heatmapTexture").draw(R,$.TRIANGLES,Kt.disabled,Vi.disabled,z.colorModeForRenderPass(),zi.disabled,((re,J,ce,me)=>{const te=c.F();c.aO(te,0,re.width,re.height,0,0,1);const ve=re.context.gl;return{u_matrix:te,u_world:[ve.drawingBufferWidth,ve.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:J.paint.get("heatmap-opacity")}})(z,O),null,O.id,z.viewportBuffer,z.quadTriangleIndexBuffer,z.viewportSegments,O.paint,z.transform.zoom)}(v,S))})(i,a,d,p);break;case"line":(function(v,w,S,I){if(v.renderPass!=="translucent")return;const z=S.paint.get("line-opacity"),O=S.paint.get("line-width");if(z.constantOr(1)===0||O.constantOr(1)===0)return;const R=v.depthModeForSublayer(0,Kt.ReadOnly),$=v.colorModeForRenderPass(),G=S.paint.get("line-dasharray"),K=S.paint.get("line-pattern"),re=K.constantOr(1),J=S.paint.get("line-gradient"),ce=S.getCrossfadeParameters(),me=re?"linePattern":G?"lineSDF":J?"lineGradient":"line",te=v.context,ve=te.gl;let Se=!0;for(const Pe of I){const Ne=w.getTile(Pe);if(re&&!Ne.patternsLoaded())continue;const Xe=Ne.getBucket(S);if(!Xe)continue;const ut=Xe.programConfigurations.get(S.id),ht=v.context.program.get(),Je=v.useProgram(me,ut),et=Se||Je.program!==ht,yt=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Pe),Ot=K.constantOr(null);if(Ot&&Ne.imageAtlas){const Pt=Ne.imageAtlas,Ci=Pt.patternPositions[Ot.to.toString()],Wt=Pt.patternPositions[Ot.from.toString()];Ci&&Wt&&ut.setConstantPatternPositions(Ci,Wt)}const it=yt?Pe:null,at=re?Ac(v,Ne,S,ce,it):G?ll(v,Ne,S,G,ce,it):J?hn(v,Ne,S,Xe.lineClipsArray.length,it):Vr(v,Ne,S,it);if(re)te.activeTexture.set(ve.TEXTURE0),Ne.imageAtlasTexture.bind(ve.LINEAR,ve.CLAMP_TO_EDGE),ut.updatePaintBuffers(ce);else if(G&&(et||v.lineAtlas.dirty))te.activeTexture.set(ve.TEXTURE0),v.lineAtlas.bind(te);else if(J){const Pt=Xe.gradients[S.id];let Ci=Pt.texture;if(S.gradientVersion!==Pt.version){let Wt=256;if(S.stepInterpolant){const Yt=w.getSource().maxzoom,Ai=Pe.canonical.z===Yt?Math.ceil(1<<v.transform.maxZoom-Pe.canonical.z):1;Wt=c.ac(c.aU(Xe.maxLineLength/c.W*1024*Ai),256,te.maxTextureSize)}Pt.gradient=c.aV({expression:S.gradientExpression(),evaluationKey:"lineProgress",resolution:Wt,image:Pt.gradient||void 0,clips:Xe.lineClipsArray}),Pt.texture?Pt.texture.update(Pt.gradient):Pt.texture=new Ae(te,Pt.gradient,ve.RGBA),Pt.version=S.gradientVersion,Ci=Pt.texture}te.activeTexture.set(ve.TEXTURE0),Ci.bind(S.stepInterpolant?ve.NEAREST:ve.LINEAR,ve.CLAMP_TO_EDGE)}Je.draw(te,ve.TRIANGLES,R,v.stencilModeForClipping(Pe),$,zi.disabled,at,yt,S.id,Xe.layoutVertexBuffer,Xe.indexBuffer,Xe.segments,S.paint,v.transform.zoom,ut,Xe.layoutVertexBuffer2),Se=!1}})(i,a,d,p);break;case"fill":(function(v,w,S,I){const z=S.paint.get("fill-color"),O=S.paint.get("fill-opacity");if(O.constantOr(1)===0)return;const R=v.colorModeForRenderPass(),$=S.paint.get("fill-pattern"),G=v.opaquePassEnabledForLayer()&&!$.constantOr(1)&&z.constantOr(c.aP.transparent).a===1&&O.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===G){const K=v.depthModeForSublayer(1,v.renderPass==="opaque"?Kt.ReadWrite:Kt.ReadOnly);Zo(v,w,S,I,K,R,!1)}if(v.renderPass==="translucent"&&S.paint.get("fill-antialias")){const K=v.depthModeForSublayer(S.getPaintProperty("fill-outline-color")?2:0,Kt.ReadOnly);Zo(v,w,S,I,K,R,!0)}})(i,a,d,p);break;case"fill-extrusion":(function(v,w,S,I){const z=S.paint.get("fill-extrusion-opacity");if(z!==0&&v.renderPass==="translucent"){const O=new Kt(v.context.gl.LEQUAL,Kt.ReadWrite,v.depthRangeFor3D);if(z!==1||S.paint.get("fill-extrusion-pattern").constantOr(1))Qr(v,w,S,I,O,Vi.disabled,Ki.disabled),Qr(v,w,S,I,O,v.stencilModeFor3D(),v.colorModeForRenderPass());else{const R=v.colorModeForRenderPass();Qr(v,w,S,I,O,Vi.disabled,R)}}})(i,a,d,p);break;case"hillshade":(function(v,w,S,I){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent")return;const z=v.context,O=v.depthModeForSublayer(0,Kt.ReadOnly),R=v.colorModeForRenderPass(),[$,G]=v.renderPass==="translucent"?v.stencilConfigForOverlap(I):[{},I];for(const K of G){const re=w.getTile(K);re.needsHillshadePrepare!==void 0&&re.needsHillshadePrepare&&v.renderPass==="offscreen"?Vh(v,re,S,O,Vi.disabled,R):v.renderPass==="translucent"&&Fh(v,K,re,S,O,$[K.overscaledZ],R)}z.viewport.set([0,0,v.width,v.height])})(i,a,d,p);break;case"raster":(function(v,w,S,I){if(v.renderPass!=="translucent"||S.paint.get("raster-opacity")===0||!I.length)return;const z=v.context,O=z.gl,R=w.getSource(),$=v.useProgram("raster"),G=v.colorModeForRenderPass(),[K,re]=R instanceof Qe?[{},I]:v.stencilConfigForOverlap(I),J=re[re.length-1].overscaledZ,ce=!v.options.moving;for(const me of re){const te=v.depthModeForSublayer(me.overscaledZ-J,S.paint.get("raster-opacity")===1?Kt.ReadWrite:Kt.ReadOnly,O.LESS),ve=w.getTile(me);ve.registerFadeDuration(S.paint.get("raster-fade-duration"));const Se=w.findLoadedParent(me,0),Pe=w.findLoadedSibling(me),Ne=$c(ve,Se||Pe||null,w,S,v.transform,v.style.map.terrain);let Xe,ut;const ht=S.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;z.activeTexture.set(O.TEXTURE0),ve.texture.bind(ht,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(O.TEXTURE1),Se?(Se.texture.bind(ht,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),Xe=Math.pow(2,Se.tileID.overscaledZ-ve.tileID.overscaledZ),ut=[ve.tileID.canonical.x*Xe%1,ve.tileID.canonical.y*Xe%1]):ve.texture.bind(ht,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST);const Je=v.style.map.terrain&&v.style.map.terrain.getTerrainData(me),et=Je?me:null,yt=et?et.posMatrix:v.transform.calculatePosMatrix(me.toUnwrapped(),ce),Ot=bs(yt,ut||[0,0],Xe||1,Ne,S);R instanceof Qe?$.draw(z,O.TRIANGLES,te,Vi.disabled,G,zi.disabled,Ot,Je,S.id,R.boundsBuffer,v.quadTriangleIndexBuffer,R.boundsSegments):$.draw(z,O.TRIANGLES,te,K[me.overscaledZ],G,zi.disabled,Ot,Je,S.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}})(i,a,d,p);break;case"background":(function(v,w,S,I){const z=S.paint.get("background-color"),O=S.paint.get("background-opacity");if(O===0)return;const R=v.context,$=R.gl,G=v.transform,K=G.tileSize,re=S.paint.get("background-pattern");if(v.isPatternMissing(re))return;const J=!re&&z.a===1&&O===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==J)return;const ce=Vi.disabled,me=v.depthModeForSublayer(0,J==="opaque"?Kt.ReadWrite:Kt.ReadOnly),te=v.colorModeForRenderPass(),ve=v.useProgram(re?"backgroundPattern":"background"),Se=I||G.coveringTiles({tileSize:K,terrain:v.style.map.terrain});re&&(R.activeTexture.set($.TEXTURE0),v.imageManager.bind(v.context));const Pe=S.getCrossfadeParameters();for(const Ne of Se){const Xe=I?Ne.posMatrix:v.transform.calculatePosMatrix(Ne.toUnwrapped()),ut=re?rp(Xe,O,v,re,{tileID:Ne,tileSize:K},Pe):ip(Xe,O,z),ht=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Ne);ve.draw(R,$.TRIANGLES,me,ce,te,zi.disabled,ut,ht,S.id,v.tileExtentBuffer,v.quadTriangleIndexBuffer,v.tileExtentSegments)}})(i,0,d,p);break;case"custom":(function(v,w,S){const I=v.context,z=S.implementation;if(v.renderPass==="offscreen"){const O=z.prerender;O&&(v.setCustomLayerDefaults(),I.setColorMode(v.colorModeForRenderPass()),O.call(z,I.gl,v.transform.customLayerMatrix()),I.setDirty(),v.setBaseState())}else if(v.renderPass==="translucent"){v.setCustomLayerDefaults(),I.setColorMode(v.colorModeForRenderPass()),I.setStencilMode(Vi.disabled);const O=z.renderingMode==="3d"?new Kt(v.context.gl.LEQUAL,Kt.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,Kt.ReadOnly);I.setDepthMode(O),z.render(I.gl,v.transform.customLayerMatrix()),I.setDirty(),v.setBaseState(),I.bindFramebuffer.set(null)}})(i,0,d)}}translatePosMatrix(i,a,d,p,v){if(!d[0]&&!d[1])return i;const w=v?p==="map"?this.transform.angle:0:p==="viewport"?-this.transform.angle:0;if(w){const z=Math.sin(w),O=Math.cos(w);d=[d[0]*O-d[1]*z,d[0]*z+d[1]*O]}const S=[v?d[0]:Rt(a,d[0],this.transform.zoom),v?d[1]:Rt(a,d[1],this.transform.zoom),0],I=new Float32Array(16);return c.H(I,i,S),I}saveTileTexture(i){const a=this._tileTextures[i.size[0]];a?a.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const a=this._tileTextures[i];return a&&a.length>0?a.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const a=this.imageManager.getPattern(i.from.toString()),d=this.imageManager.getPattern(i.to.toString());return!a||!d}useProgram(i,a){this.cache=this.cache||{};const d=i+(a?a.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[d]||(this.cache[d]=new Tc(this.context,vs[i],a,cl[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[d]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ae(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:a}=this.context.gl;return this.width!==i||this.height!==a}}class Ss{constructor(i,a){this.points=i,this.planes=a}static fromInvProjectionMatrix(i,a,d){const p=Math.pow(2,d),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(S=>{const I=1/(S=c.af([],S,i))[3]/a*p;return c.b0(S,S,[I,I,1/S[3],I])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(S=>{const I=function($,G){var K=G[0],re=G[1],J=G[2],ce=K*K+re*re+J*J;return ce>0&&(ce=1/Math.sqrt(ce)),$[0]=G[0]*ce,$[1]=G[1]*ce,$[2]=G[2]*ce,$}([],function($,G,K){var re=G[0],J=G[1],ce=G[2],me=K[0],te=K[1],ve=K[2];return $[0]=J*ve-ce*te,$[1]=ce*me-re*ve,$[2]=re*te-J*me,$}([],Ie([],v[S[0]],v[S[1]]),Ie([],v[S[2]],v[S[1]]))),z=-((O=I)[0]*(R=v[S[1]])[0]+O[1]*R[1]+O[2]*R[2]);var O,R;return I.concat(z)});return new Ss(v,w)}}class bl{constructor(i,a){this.min=i,this.max=a,this.center=function(d,p,v){return d[0]=.5*p[0],d[1]=.5*p[1],d[2]=.5*p[2],d}([],function(d,p,v){return d[0]=p[0]+v[0],d[1]=p[1]+v[1],d[2]=p[2]+v[2],d}([],this.min,this.max))}quadrant(i){const a=[i%2==0,i<2],d=ee(this.min),p=ee(this.max);for(let v=0;v<a.length;v++)d[v]=a[v]?this.min[v]:this.center[v],p[v]=a[v]?this.center[v]:this.max[v];return p[2]=this.max[2],new bl(d,p)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const a=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let d=!0;for(let p=0;p<i.planes.length;p++){const v=i.planes[p];let w=0;for(let S=0;S<a.length;S++)c.b1(v,a[S])>=0&&w++;if(w===0)return 0;w!==a.length&&(d=!1)}if(d)return 2;for(let p=0;p<3;p++){let v=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let S=0;S<i.points.length;S++){const I=i.points[S][p]-this.min[p];v=Math.min(v,I),w=Math.max(w,I)}if(w<0||v>this.max[p]-this.min[p])return 0}return 1}}class Ea{constructor(i=0,a=0,d=0,p=0){if(isNaN(i)||i<0||isNaN(a)||a<0||isNaN(d)||d<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=a,this.left=d,this.right=p}interpolate(i,a,d){return a.top!=null&&i.top!=null&&(this.top=c.z.number(i.top,a.top,d)),a.bottom!=null&&i.bottom!=null&&(this.bottom=c.z.number(i.bottom,a.bottom,d)),a.left!=null&&i.left!=null&&(this.left=c.z.number(i.left,a.left,d)),a.right!=null&&i.right!=null&&(this.right=c.z.number(i.right,a.right,d)),this}getCenter(i,a){const d=c.ac((this.left+i-this.right)/2,0,i),p=c.ac((this.top+a-this.bottom)/2,0,a);return new c.P(d,p)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Ea(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Ts=85.051129;class Uc{constructor(i,a,d,p,v){this.tileSize=512,this._renderWorldCopies=v===void 0||!!v,this._minZoom=i||0,this._maxZoom=a||22,this._minPitch=d??0,this._maxPitch=p??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new c.M(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Ea,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const i=new Uc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new c.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const a=-c.b2(i,-180,180)*Math.PI/180;this.angle!==a&&(this._unmodified=!1,this.angle=a,this._calcMatrices(),this.rotationMatrix=function(){var d=new c.A(4);return c.A!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}(),function(d,p,v){var w=p[0],S=p[1],I=p[2],z=p[3],O=Math.sin(v),R=Math.cos(v);d[0]=w*R+I*O,d[1]=S*R+z*O,d[2]=w*-O+I*R,d[3]=S*-O+z*R}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const a=c.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==a&&(this._unmodified=!1,this._pitch=a,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const a=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==a&&(this._unmodified=!1,this._zoom=a,this.tileZoom=Math.max(0,Math.floor(a)),this.scale=this.zoomScale(a),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,a,d){this._unmodified=!1,this._edgeInsets.interpolate(i,a,d),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const a=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,a)}getVisibleUnwrappedCoordinates(i){const a=[new c.b3(0,i)];if(this._renderWorldCopies){const d=this.pointCoordinate(new c.P(0,0)),p=this.pointCoordinate(new c.P(this.width,0)),v=this.pointCoordinate(new c.P(this.width,this.height)),w=this.pointCoordinate(new c.P(0,this.height)),S=Math.floor(Math.min(d.x,p.x,v.x,w.x)),I=Math.floor(Math.max(d.x,p.x,v.x,w.x)),z=1;for(let O=S-z;O<=I+z;O++)O!==0&&a.push(new c.b3(O,i))}return a}coveringTiles(i){var a,d;let p=this.coveringZoomLevel(i);const v=p;if(i.minzoom!==void 0&&p<i.minzoom)return[];i.maxzoom!==void 0&&p>i.maxzoom&&(p=i.maxzoom);const w=this.pointCoordinate(this.getCameraPoint()),S=c.Y.fromLngLat(this.center),I=Math.pow(2,p),z=[I*w.x,I*w.y,0],O=[I*S.x,I*S.y,0],R=Ss.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,p);let $=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&($=p);const G=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,K=te=>({aabb:new bl([te*I,0,0],[(te+1)*I,I,0]),zoom:0,x:0,y:0,wrap:te,fullyVisible:!1}),re=[],J=[],ce=p,me=i.reparseOverscaled?v:p;if(this._renderWorldCopies)for(let te=1;te<=3;te++)re.push(K(-te)),re.push(K(te));for(re.push(K(0));re.length>0;){const te=re.pop(),ve=te.x,Se=te.y;let Pe=te.fullyVisible;if(!Pe){const Je=te.aabb.intersects(R);if(Je===0)continue;Pe=Je===2}const Ne=i.terrain?z:O,Xe=te.aabb.distanceX(Ne),ut=te.aabb.distanceY(Ne),ht=Math.max(Math.abs(Xe),Math.abs(ut));if(te.zoom===ce||ht>G+(1<<ce-te.zoom)-2&&te.zoom>=$){const Je=ce-te.zoom,et=z[0]-.5-(ve<<Je),yt=z[1]-.5-(Se<<Je);J.push({tileID:new c.Q(te.zoom===ce?me:te.zoom,te.wrap,te.zoom,ve,Se),distanceSq:Ee([O[0]-.5-ve,O[1]-.5-Se]),tileDistanceToCamera:Math.sqrt(et*et+yt*yt)})}else for(let Je=0;Je<4;Je++){const et=(ve<<1)+Je%2,yt=(Se<<1)+(Je>>1),Ot=te.zoom+1;let it=te.aabb.quadrant(Je);if(i.terrain){const at=new c.Q(Ot,te.wrap,Ot,et,yt),Pt=i.terrain.getMinMaxElevation(at),Ci=(a=Pt.minElevation)!==null&&a!==void 0?a:this.elevation,Wt=(d=Pt.maxElevation)!==null&&d!==void 0?d:this.elevation;it=new bl([it.min[0],it.min[1],Ci],[it.max[0],it.max[1],Wt])}re.push({aabb:it,zoom:Ot,x:et,y:yt,wrap:te.wrap,fullyVisible:Pe})}}return J.sort((te,ve)=>te.distanceSq-ve.distanceSq).map(te=>te.tileID)}resize(i,a){this.width=i,this.height=a,this.pixelsToGLUnits=[2/i,-2/a],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const a=c.ac(i.lat,-85.051129,Ts);return new c.P(c.N(i.lng)*this.worldSize,c.O(a)*this.worldSize)}unproject(i){return new c.Y(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const a=this.elevation,d=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,p=this.pointLocation(this.centerPoint,i),v=i.getElevationForLngLatZoom(p,this.tileZoom);if(!(this.elevation-v))return;const w=d+a-v,S=Math.cos(this._pitch)*this.cameraToCenterDistance/w/c.b4(1,p.lat),I=this.scaleZoom(S/this.tileSize);this._elevation=v,this._center=p,this.zoom=I}setLocationAtPoint(i,a){const d=this.pointCoordinate(a),p=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(i),w=new c.Y(v.x-(d.x-p.x),v.y-(d.y-p.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,a){return a?this.coordinatePoint(this.locationCoordinate(i),a.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,a){return this.coordinateLocation(this.pointCoordinate(i,a))}locationCoordinate(i){return c.Y.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,a){if(a){const $=a.pointCoordinate(i);if($!=null)return $}const d=[i.x,i.y,0,1],p=[i.x,i.y,1,1];c.af(d,d,this.pixelMatrixInverse),c.af(p,p,this.pixelMatrixInverse);const v=d[3],w=p[3],S=d[1]/v,I=p[1]/w,z=d[2]/v,O=p[2]/w,R=z===O?0:(0-z)/(O-z);return new c.Y(c.z.number(d[0]/v,p[0]/w,R)/this.worldSize,c.z.number(S,I,R)/this.worldSize)}coordinatePoint(i,a=0,d=this.pixelMatrix){const p=[i.x*this.worldSize,i.y*this.worldSize,a,1];return c.af(p,p,d),new c.P(p[0]/p[3],p[1]/p[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new ge().extend(this.pointLocation(new c.P(0,i))).extend(this.pointLocation(new c.P(this.width,i))).extend(this.pointLocation(new c.P(this.width,this.height))).extend(this.pointLocation(new c.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new ge([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Ts])}calculatePosMatrix(i,a=!1){const d=i.key,p=a?this._alignedPosMatrixCache:this._posMatrixCache;if(p[d])return p[d];const v=i.canonical,w=this.worldSize/this.zoomScale(v.z),S=v.x+Math.pow(2,v.z)*i.wrap,I=c.an(new Float64Array(16));return c.H(I,I,[S*w,v.y*w,0]),c.J(I,I,[w/c.W,w/c.W,1]),c.K(I,a?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,I),p[d]=new Float32Array(I),p[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,a){a=c.ac(+a,this.minZoom,this.maxZoom);const d={center:new c.M(i.lng,i.lat),zoom:a};let p=this.lngRange;if(!this._renderWorldCopies&&p===null){const te=179.9999999999;p=[-te,te]}const v=this.tileSize*this.zoomScale(d.zoom);let w=0,S=v,I=0,z=v,O=0,R=0;const{x:$,y:G}=this.size;if(this.latRange){const te=this.latRange;w=c.O(te[1])*v,S=c.O(te[0])*v,S-w<G&&(O=G/(S-w))}p&&(I=c.b2(c.N(p[0])*v,0,v),z=c.b2(c.N(p[1])*v,0,v),z<I&&(z+=v),z-I<$&&(R=$/(z-I)));const{x:K,y:re}=this.project.call({worldSize:v},i);let J,ce;const me=Math.max(R||0,O||0);if(me){const te=new c.P(R?(z+I)/2:K,O?(S+w)/2:re);return d.center=this.unproject.call({worldSize:v},te).wrap(),d.zoom+=this.scaleZoom(me),d}if(this.latRange){const te=G/2;re-te<w&&(ce=w+te),re+te>S&&(ce=S-te)}if(p){const te=(I+z)/2;let ve=K;this._renderWorldCopies&&(ve=c.b2(K,te-v/2,te+v/2));const Se=$/2;ve-Se<I&&(J=I+Se),ve+Se>z&&(J=z-Se)}if(J!==void 0||ce!==void 0){const te=new c.P(J??K,ce??re);d.center=this.unproject.call({worldSize:v},te).wrap()}return d}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:a,zoom:d}=this.getConstrained(this.center,this.zoom);this.center=a,this.zoom=d,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,a=this.point.x,d=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=c.b4(1,this.center.lat)*this.worldSize;let p=c.an(new Float64Array(16));c.J(p,p,[this.width/2,-this.height/2,1]),c.H(p,p,[1,-1,0]),this.labelPlaneMatrix=p,p=c.an(new Float64Array(16)),c.J(p,p,[1,-1,1]),c.H(p,p,[-1,-1,0]),c.J(p,p,[2/this.width,2/this.height,1]),this.glCoordMatrix=p;const v=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),S=v-w*this._pixelPerMeter/Math.cos(this._pitch),I=w<0?S:v,z=Math.PI/2+this._pitch,O=this._fov*(.5+i.y/this.height),R=Math.sin(O)*I/Math.sin(c.ac(Math.PI-z-O,.01,Math.PI-.01)),$=this.getHorizon(),G=2*Math.atan($/this.cameraToCenterDistance)*(.5+i.y/(2*$)),K=Math.sin(G)*I/Math.sin(c.ac(Math.PI-z-G,.01,Math.PI-.01)),re=Math.min(R,K),J=1.01*(Math.cos(Math.PI/2-this._pitch)*re+I),ce=this.height/50;p=new Float64Array(16),c.b5(p,this._fov,this.width/this.height,ce,J),p[8]=2*-i.x/this.width,p[9]=2*i.y/this.height,c.J(p,p,[1,-1,1]),c.H(p,p,[0,0,-this.cameraToCenterDistance]),c.b6(p,p,this._pitch),c.ad(p,p,this.angle),c.H(p,p,[-a,-d,0]),this.mercatorMatrix=c.J([],p,[this.worldSize,this.worldSize,this.worldSize]),c.J(p,p,[1,1,this._pixelPerMeter]),this.pixelMatrix=c.K(new Float64Array(16),this.labelPlaneMatrix,p),c.H(p,p,[0,0,-this.elevation]),this.modelViewProjectionMatrix=p,this.invModelViewProjectionMatrix=c.as([],p),this.pixelMatrix3D=c.K(new Float64Array(16),this.labelPlaneMatrix,p);const me=this.width%2/2,te=this.height%2/2,ve=Math.cos(this.angle),Se=Math.sin(this.angle),Pe=a-Math.round(a)+ve*me+Se*te,Ne=d-Math.round(d)+ve*te+Se*me,Xe=new Float64Array(p);if(c.H(Xe,Xe,[Pe>.5?Pe-1:Pe,Ne>.5?Ne-1:Ne,0]),this.alignedModelViewProjectionMatrix=Xe,p=c.as(new Float64Array(16),this.pixelMatrix),!p)throw new Error("failed to invert matrix");this.pixelMatrixInverse=p,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new c.P(0,0)),a=[i.x*this.worldSize,i.y*this.worldSize,0,1];return c.af(a,a,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new c.P(0,i))}getCameraQueryGeometry(i){const a=this.getCameraPoint();if(i.length===1)return[i[0],a];{let d=a.x,p=a.y,v=a.x,w=a.y;for(const S of i)d=Math.min(d,S.x),p=Math.min(p,S.y),v=Math.max(v,S.x),w=Math.max(w,S.y);return[new c.P(d,p),new c.P(v,p),new c.P(v,w),new c.P(d,w),new c.P(d,p)]}}lngLatToCameraDepth(i,a){const d=this.locationCoordinate(i),p=[d.x*this.worldSize,d.y*this.worldSize,a,1];return c.af(p,p,this.modelViewProjectionMatrix),p[2]/p[3]}}function $h(_,i){let a,d=!1,p=null,v=null;const w=()=>{p=null,d&&(_.apply(v,a),p=setTimeout(w,i),d=!1)};return(...S)=>(d=!0,v=this,a=S,p||w(),p)}class qc{constructor(i){this._getCurrentHash=()=>{const a=window.location.hash.replace("#","");if(this._hashName){let d;return a.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(d=p)}),(d&&d[1]||"").split("/")}return a.split("/")},this._onHashChange=()=>{const a=this._getCurrentHash();if(a.length>=3&&!a.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(a[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+a[2],+a[1]],zoom:+a[0],bearing:d,pitch:+(a[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const a=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,a)}catch{}},this._updateHash=$h(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const a=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,p=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,p),w=Math.round(a.lng*v)/v,S=Math.round(a.lat*v)/v,I=this._map.getBearing(),z=this._map.getPitch();let O="";if(O+=i?`/${w}/${S}/${d}`:`${d}/${S}/${w}`,(I||z)&&(O+="/"+Math.round(10*I)/10),z&&(O+=`/${Math.round(z)}`),this._hashName){const R=this._hashName;let $=!1;const G=window.location.hash.slice(1).split("&").map(K=>{const re=K.split("=")[0];return re===R?($=!0,`${re}=${O}`):K}).filter(K=>K);return $||G.push(`${R}=${O}`),`#${G.join("&")}`}return`#${O}`}}const wl={linearity:.3,easing:c.b7(0,0,.3,1)},Hc=c.e({deceleration:2500,maxSpeed:1400},wl),El=c.e({deceleration:20,maxSpeed:1400},wl),Sl=c.e({deceleration:1e3,maxSpeed:360},wl),Gc=c.e({deceleration:1e3,maxSpeed:90},wl);class Zc{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:A.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,a=A.now();for(;i.length>0&&a-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const a={zoom:0,bearing:0,pitch:0,pan:new c.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)a.zoom+=v.zoomDelta||0,a.bearing+=v.bearingDelta||0,a.pitch+=v.pitchDelta||0,v.panDelta&&a.pan._add(v.panDelta),v.around&&(a.around=v.around),v.pinchAround&&(a.pinchAround=v.pinchAround);const d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(a.pan.mag()){const v=Xo(a.pan.mag(),d,c.e({},Hc,i||{}));p.offset=a.pan.mult(v.amount/a.pan.mag()),p.center=this._map.transform.center,Sa(p,v)}if(a.zoom){const v=Xo(a.zoom,d,El);p.zoom=this._map.transform.zoom+v.amount,Sa(p,v)}if(a.bearing){const v=Xo(a.bearing,d,Sl);p.bearing=this._map.transform.bearing+c.ac(v.amount,-179,179),Sa(p,v)}if(a.pitch){const v=Xo(a.pitch,d,Gc);p.pitch=this._map.transform.pitch+v.amount,Sa(p,v)}if(p.zoom||p.bearing){const v=a.pinchAround===void 0?a.around:a.pinchAround;p.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),c.e(p,{noMoveStart:!0})}}function Sa(_,i){(!_.duration||_.duration<i.duration)&&(_.duration=i.duration,_.easing=i.easing)}function Xo(_,i,a){const{maxSpeed:d,linearity:p,deceleration:v}=a,w=c.ac(_*p/(i/1e3),-d,d),S=Math.abs(w)/(v*p);return{easing:a.easing,duration:1e3*S,amount:w*(S/2)}}class Cr extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,a,d,p={}){const v=L.mousePos(a.getCanvas(),d),w=a.unproject(v);super(i,c.e({point:v,lngLat:w,originalEvent:d},p)),this._defaultPrevented=!1,this.target=a}}class Jo extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,a,d){const p=i==="touchend"?d.changedTouches:d.touches,v=L.touchPos(a.getCanvasContainer(),p),w=v.map(I=>a.unproject(I)),S=v.reduce((I,z,O,R)=>I.add(z.div(R.length)),new c.P(0,0));super(i,{points:v,point:S,lngLats:w,lngLat:a.unproject(S),originalEvent:d}),this._defaultPrevented=!1}}class jh extends c.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,a,d){super(i,{originalEvent:d}),this._defaultPrevented=!1}}class Wc{constructor(i,a){this._map=i,this._clickTolerance=a.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new jh(i.type,this._map,i))}mousedown(i,a){return this._mousedownPos=a,this._firePreventable(new Cr(i.type,this._map,i))}mouseup(i){this._map.fire(new Cr(i.type,this._map,i))}click(i,a){this._mousedownPos&&this._mousedownPos.dist(a)>=this._clickTolerance||this._map.fire(new Cr(i.type,this._map,i))}dblclick(i){return this._firePreventable(new Cr(i.type,this._map,i))}mouseover(i){this._map.fire(new Cr(i.type,this._map,i))}mouseout(i){this._map.fire(new Cr(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Jo(i.type,this._map,i))}touchmove(i){this._map.fire(new Jo(i.type,this._map,i))}touchend(i){this._map.fire(new Jo(i.type,this._map,i))}touchcancel(i){this._map.fire(new Jo(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pp{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new Cr(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Cr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new Cr(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Is{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(c.P.convert(i),this._map.terrain)}}class Ta{constructor(i,a){this._map=i,this._tr=new Is(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=a.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,a){this.isEnabled()&&i.shiftKey&&i.button===0&&(L.disableDrag(),this._startPos=this._lastPos=a,this._active=!0)}mousemoveWindow(i,a){if(!this._active)return;const d=a;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=d,this._box||(this._box=L.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const v=Math.min(p.x,d.x),w=Math.max(p.x,d.x),S=Math.min(p.y,d.y),I=Math.max(p.y,d.y);L.setTransform(this._box,`translate(${v}px,${S}px)`),this._box.style.width=w-v+"px",this._box.style.height=I-S+"px"}mouseupWindow(i,a){if(!this._active||i.button!==0)return;const d=this._startPos,p=a;if(this.reset(),L.suppressClick(),d.x!==p.x||d.y!==p.y)return this._map.fire(new c.k("boxzoomend",{originalEvent:i})),{cameraAnimation:v=>v.fitScreenCoordinates(d,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(L.remove(this._box),this._box=null),L.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,a){return this._map.fire(new c.k(i,{originalEvent:a}))}}function Ia(_,i){if(_.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${_.length}, points ${i.length}`);const a={};for(let d=0;d<_.length;d++)a[_[d].identifier]=i[d];return a}class Uh{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,a,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),d.length===this.numTouches&&(this.centroid=function(p){const v=new c.P(0,0);for(const w of p)v._add(w);return v.div(p.length)}(a),this.touches=Ia(d,a)))}touchmove(i,a,d){if(this.aborted||!this.centroid)return;const p=Ia(d,a);for(const v in this.touches){const w=p[v];(!w||w.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(i,a,d){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class Tl{constructor(i){this.singleTap=new Uh(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,a,d){this.singleTap.touchstart(i,a,d)}touchmove(i,a,d){this.singleTap.touchmove(i,a,d)}touchend(i,a,d){const p=this.singleTap.touchend(i,a,d);if(p){const v=i.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(p)<30;if(v&&w||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class Il{constructor(i){this._tr=new Is(i),this._zoomIn=new Tl({numTouches:1,numTaps:2}),this._zoomOut=new Tl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,a,d){this._zoomIn.touchstart(i,a,d),this._zoomOut.touchstart(i,a,d)}touchmove(i,a,d){this._zoomIn.touchmove(i,a,d),this._zoomOut.touchmove(i,a,d)}touchend(i,a,d){const p=this._zoomIn.touchend(i,a,d),v=this._zoomOut.touchend(i,a,d),w=this._tr;return p?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(p)},{originalEvent:i})}):v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(v)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yo{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const a=this._moveFunction(...i);if(a.bearingDelta||a.pitchDelta||a.around||a.panDelta)return this._active=!0,a}dragStart(i,a){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=a.length?a[0]:a,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,a){if(!this.isEnabled())return;const d=this._lastPoint;if(!d)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const p=a.length?a[0]:a;return!this._moved&&p.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(d,p))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&L.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const mp={0:1,2:2};class Cl{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const a=L.mouseButton(i);this._eventButton=a}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(a,d){const p=mp[d];return a.buttons===void 0||(a.buttons&p)!==p}(i,this._eventButton)}isValidEndEvent(i){return L.mouseButton(i)===this._eventButton}}class Ui{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const lo=_=>{_.mousedown=_.dragStart,_.mousemoveWindow=_.dragMove,_.mouseup=_.dragEnd,_.contextmenu=i=>{i.preventDefault()}},fn=({enable:_,clickTolerance:i,bearingDegreesPerPixelMoved:a=.8})=>{const d=new Cl({checkCorrectEvent:p=>L.mouseButton(p)===0&&p.ctrlKey||L.mouseButton(p)===2});return new Yo({clickTolerance:i,move:(p,v)=>({bearingDelta:(v.x-p.x)*a}),moveStateManager:d,enable:_,assignEvents:lo})},Al=({enable:_,clickTolerance:i,pitchDegreesPerPixelMoved:a=-.5})=>{const d=new Cl({checkCorrectEvent:p=>L.mouseButton(p)===0&&p.ctrlKey||L.mouseButton(p)===2});return new Yo({clickTolerance:i,move:(p,v)=>({pitchDelta:(v.y-p.y)*a}),moveStateManager:d,enable:_,assignEvents:lo})};class Kc{constructor(i,a){this._clickTolerance=i.clickTolerance||1,this._map=a,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new c.P(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(i,a,d){return this._calculateTransform(i,a,d)}touchmove(i,a,d){if(this._active&&!(d.length<this.minTouchs()))return i.preventDefault(),this._calculateTransform(i,a,d)}touchend(i,a,d){this._calculateTransform(i,a,d),this._active&&d.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,a,d){d.length>0&&(this._active=!0);const p=Ia(d,a),v=new c.P(0,0),w=new c.P(0,0);let S=0;for(const z in p){const O=p[z],R=this._touches[z];R&&(v._add(O),w._add(O.sub(R)),S++,p[z]=O)}if(this._touches=p,S<this.minTouchs()||!w.mag())return;const I=w.div(S);return this._sum._add(I),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(S),panDelta:I}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class kl{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,a,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([a[0],a[1]]))}touchmove(i,a,d){if(!this._firstTwoTouches)return;i.preventDefault();const[p,v]=this._firstTwoTouches,w=co(d,a,p),S=co(d,a,v);if(!w||!S)return;const I=this._aroundCenter?null:w.add(S).div(2);return this._move([w,S],I,i)}touchend(i,a,d){if(!this._firstTwoTouches)return;const[p,v]=this._firstTwoTouches,w=co(d,a,p),S=co(d,a,v);w&&S||(this._active&&L.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function co(_,i,a){for(let d=0;d<_.length;d++)if(_[d].identifier===a)return i[d]}function Cs(_,i){return Math.log(_/i)/Math.LN2}class Ml extends kl{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,a){const d=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Cs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Cs(this._distance,d),pinchAround:a}}}function Xc(_,i){return 180*_.angleWith(i)/Math.PI}class Jc extends kl{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,a,d){const p=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Xc(this._vector,p),pinchAround:a}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const a=25/(Math.PI*this._minDiameter)*360,d=Xc(i,this._startVector);return Math.abs(d)<a}}function Ll(_){return Math.abs(_.y)>Math.abs(_.x)}class Yc extends kl{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,a,d){super.touchstart(i,a,d),this._currentTouchCount=d.length}_start(i){this._lastPoints=i,Ll(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,a,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=i[0].sub(this._lastPoints[0]),v=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,v,d.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(p.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(i,a,d){if(this._valid!==void 0)return this._valid;const p=i.mag()>=2,v=a.mag()>=2;if(!p&&!v)return;if(!p||!v)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;const w=i.y>0==a.y>0;return Ll(i)&&Ll(a)&&w}}const qh={panStep:100,bearingStep:15,pitchStep:10};class bo{constructor(i){this._tr=new Is(i);const a=qh;this._panStep=a.panStep,this._bearingStep=a.bearingStep,this._pitchStep=a.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let a=0,d=0,p=0,v=0,w=0;switch(i.keyCode){case 61:case 107:case 171:case 187:a=1;break;case 189:case 109:case 173:a=-1;break;case 37:i.shiftKey?d=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?d=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?p=1:(i.preventDefault(),w=-1);break;case 40:i.shiftKey?p=-1:(i.preventDefault(),w=1);break;default:return}return this._rotationDisabled&&(d=0,p=0),{cameraAnimation:S=>{const I=this._tr;S.easeTo({duration:300,easeId:"keyboardHandler",easing:Hh,zoom:a?Math.round(I.zoom)+a*(i.shiftKey?2:1):I.zoom,bearing:I.bearing+d*this._bearingStep,pitch:I.pitch+p*this._pitchStep,offset:[-v*this._panStep,-w*this._panStep],center:I.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Hh(_){return _*(2-_)}const Qc=4.000244140625;class eu{constructor(i,a){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=i,this._tr=new Is(i),this._triggerRenderFrame=a,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!i[this._map.cooperativeGestures._bypassKey])return;let a=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const d=A.now(),p=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,a!==0&&a%Qc==0?this._type="wheel":a!==0&&Math.abs(a)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=a,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(p*a)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,a+=this._lastValue)),i.shiftKey&&a&&(a/=4),this._type&&(this._lastWheelEvent=i,this._delta-=a,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const a=L.mousePos(this._map.getCanvas(),i),d=this._tr;this._around=a.y>d.transform.height/2-d.transform.getHorizon()?c.M.convert(this._aroundCenter?d.center:d.unproject(a)):c.M.convert(d.center),this._aroundPoint=d.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const S=this._type==="wheel"&&Math.abs(this._delta)>Qc?this._wheelZoomRate:this._defaultZoomRate;let I=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&I!==0&&(I=1/I);const z=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(z*I))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const a=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,d=this._startZoom,p=this._easing;let v,w=!1;if(this._type==="wheel"&&d&&p){const S=Math.min((A.now()-this._lastWheelEventTime)/200,1),I=p(S);v=c.z.number(d,a,I),S<1?this._frameId||(this._frameId=!0):w=!0}else v=a,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:v-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let a=c.b8;if(this._prevEase){const d=this._prevEase,p=(A.now()-d.start)/d.duration,v=d.easing(p+.01)-d.easing(p),w=.27/Math.sqrt(v*v+1e-4)*.01,S=Math.sqrt(.0729-w*w);a=c.b7(w,S,.25,1)}return this._prevEase={start:A.now(),duration:i,easing:a},a}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class tu{constructor(i,a){this._clickZoom=i,this._tapZoom=a}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Gh{constructor(i){this._tr=new Is(i),this.reset()}reset(){this._active=!1}dblclick(i,a){return i.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(a)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zh{constructor(){this._tap=new Tl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,a,d){if(!this._swipePoint)if(this._tapTime){const p=a[0],v=i.timeStamp-this._tapTime<500,w=this._tapPoint.dist(p)<30;v&&w?d.length>0&&(this._swipePoint=p,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(i,a,d)}touchmove(i,a,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;const p=a[0],v=p.y-this._swipePoint.y;return this._swipePoint=p,i.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(i,a,d)}touchend(i,a,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{const p=this._tap.touchend(i,a,d);p&&(this._tapTime=i.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class iu{constructor(i,a,d){this._el=i,this._mousePan=a,this._touchPan=d}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class As{constructor(i,a,d){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=a,this._mousePitch=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ru{constructor(i,a,d,p){this._el=i,this._touchZoom=a,this._touchRotate=d,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class xn{constructor(i,a){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=a,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=L.create("div","maplibregl-cooperative-gesture-screen",i);let a=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(a=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=a,this._container.appendChild(p);const v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=d,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(L.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(i){this._onCooperativeGesture(i.touches.length===1)}wheel(i){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!i[this._bypassKey])}_onCooperativeGesture(i){this._enabled&&i&&(this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const pn=_=>_.zoom||_.drag||_.pitch||_.rotate;class Wh extends c.k{}function bn(_){return _.panDelta&&_.panDelta.mag()||_.zoomDelta||_.bearingDelta||_.pitchDelta}class Ca{constructor(i,a){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,v)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const w=p.type==="renderFrame"?void 0:p,S={needsRenderFrame:!1},I={},z={},O=p.touches,R=O?this._getMapTouches(O):void 0,$=R?L.touchPos(this._map.getCanvas(),R):L.mousePos(this._map.getCanvas(),p);for(const{handlerName:re,handler:J,allowed:ce}of this._handlers){if(!J.isEnabled())continue;let me;this._blockedByActive(z,ce,re)?J.reset():J[v||p.type]&&(me=J[v||p.type](p,$,R),this.mergeHandlerResult(S,I,me,re,w),me&&me.needsRenderFrame&&this._triggerRenderFrame()),(me||J.isActive())&&(z[re]=J)}const G={};for(const re in this._previousActiveHandlers)z[re]||(G[re]=w);this._previousActiveHandlers=z,(Object.keys(G).length||bn(S))&&(this._changes.push([S,I,G]),this._triggerRenderFrame()),(Object.keys(z).length||bn(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:K}=S;K&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],K(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zc(i),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(a);const d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,v,w]of this._listeners)L.addEventListener(p,v,p===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(const[i,a,d]of this._listeners)L.removeEventListener(i,a,i===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(i){const a=this._map,d=a.getCanvasContainer();this._add("mapEvent",new Wc(a,i));const p=a.boxZoom=new Ta(a,i);this._add("boxZoom",p),i.interactive&&i.boxZoom&&p.enable();const v=a.cooperativeGestures=new xn(a,i.cooperativeGestures);this._add("cooperativeGestures",v),i.cooperativeGestures&&v.enable();const w=new Il(a),S=new Gh(a);a.doubleClickZoom=new tu(S,w),this._add("tapZoom",w),this._add("clickZoom",S),i.interactive&&i.doubleClickZoom&&a.doubleClickZoom.enable();const I=new Zh;this._add("tapDragZoom",I);const z=a.touchPitch=new Yc(a);this._add("touchPitch",z),i.interactive&&i.touchPitch&&a.touchPitch.enable(i.touchPitch);const O=fn(i),R=Al(i);a.dragRotate=new As(i,O,R),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",R,["mouseRotate"]),i.interactive&&i.dragRotate&&a.dragRotate.enable();const $=(({enable:me,clickTolerance:te})=>{const ve=new Cl({checkCorrectEvent:Se=>L.mouseButton(Se)===0&&!Se.ctrlKey});return new Yo({clickTolerance:te,move:(Se,Pe)=>({around:Pe,panDelta:Pe.sub(Se)}),activateOnStart:!0,moveStateManager:ve,enable:me,assignEvents:lo})})(i),G=new Kc(i,a);a.dragPan=new iu(d,$,G),this._add("mousePan",$),this._add("touchPan",G,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&a.dragPan.enable(i.dragPan);const K=new Jc,re=new Ml;a.touchZoomRotate=new ru(d,re,K,I),this._add("touchRotate",K,["touchPan","touchZoom"]),this._add("touchZoom",re,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&a.touchZoomRotate.enable(i.touchZoomRotate);const J=a.scrollZoom=new eu(a,()=>this._triggerRenderFrame());this._add("scrollZoom",J,["mousePan"]),i.interactive&&i.scrollZoom&&a.scrollZoom.enable(i.scrollZoom);const ce=a.keyboard=new bo(a);this._add("keyboard",ce),i.interactive&&i.keyboard&&a.keyboard.enable(),this._add("blockableMapEvent",new pp(a))}_add(i,a,d){this._handlers.push({handlerName:i,handler:a,allowed:d}),this._handlersById[i]=a}stop(i){if(!this._updatingCamera){for(const{handler:a}of this._handlers)a.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!pn(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,a,d){for(const p in i)if(p!==d&&(!a||a.indexOf(p)<0))return!0;return!1}_getMapTouches(i){const a=[];for(const d of i)this._el.contains(d.target)&&a.push(d);return a}mergeHandlerResult(i,a,d,p,v){if(!d)return;c.e(i,d);const w={handlerName:p,originalEvent:d.originalEvent||v};d.zoomDelta!==void 0&&(a.zoom=w),d.panDelta!==void 0&&(a.drag=w),d.pitchDelta!==void 0&&(a.pitch=w),d.bearingDelta!==void 0&&(a.rotate=w)}_applyChanges(){const i={},a={},d={};for(const[p,v,w]of this._changes)p.panDelta&&(i.panDelta=(i.panDelta||new c.P(0,0))._add(p.panDelta)),p.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+p.pitchDelta),p.around!==void 0&&(i.around=p.around),p.pinchAround!==void 0&&(i.pinchAround=p.pinchAround),p.noInertia&&(i.noInertia=p.noInertia),c.e(a,v),c.e(d,w);this._updateMapTransform(i,a,d),this._changes=[]}_updateMapTransform(i,a,d){const p=this._map,v=p._getTransformForUpdate(),w=p.terrain;if(!(bn(i)||w&&this._terrainMovement))return this._fireEvents(a,d,!0);let{panDelta:S,zoomDelta:I,bearingDelta:z,pitchDelta:O,around:R,pinchAround:$}=i;$!==void 0&&(R=$),p._stop(!0),R=R||p.transform.centerPoint;const G=v.pointLocation(S?R.sub(S):R);z&&(v.bearing+=z),O&&(v.pitch+=O),I&&(v.zoom+=I),w?this._terrainMovement||!a.drag&&!a.zoom?a.drag&&this._terrainMovement?v.center=v.pointLocation(v.centerPoint.sub(S)):v.setLocationAtPoint(G,R):(this._terrainMovement=!0,this._map._elevationFreeze=!0,v.setLocationAtPoint(G,R)):v.setLocationAtPoint(G,R),p._applyUpdatedTransform(v),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(a,d,!0)}_fireEvents(i,a,d){const p=pn(this._eventsInProgress),v=pn(i),w={};for(const R in i){const{originalEvent:$}=i[R];this._eventsInProgress[R]||(w[`${R}start`]=$),this._eventsInProgress[R]=i[R]}!p&&v&&this._fireEvent("movestart",v.originalEvent);for(const R in w)this._fireEvent(R,w[R]);v&&this._fireEvent("move",v.originalEvent);for(const R in i){const{originalEvent:$}=i[R];this._fireEvent(R,$)}const S={};let I;for(const R in this._eventsInProgress){const{handlerName:$,originalEvent:G}=this._eventsInProgress[R];this._handlersById[$].isActive()||(delete this._eventsInProgress[R],I=a[$]||G,S[`${R}end`]=I)}for(const R in S)this._fireEvent(R,S[R]);const z=pn(this._eventsInProgress),O=(p||v)&&!z;if(O&&this._terrainMovement&&(this._map._elevationFreeze=!1,this._terrainMovement=!1,this._map.transform.recalculateZoom(this._map.terrain)),d&&O){this._updatingCamera=!0;const R=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=G=>G!==0&&-this._bearingSnap<G&&G<this._bearingSnap;!R||!R.essential&&A.prefersReducedMotion?(this._map.fire(new c.k("moveend",{originalEvent:I})),$(this._map.getBearing())&&this._map.resetNorth()):($(R.bearing||this._map.getBearing())&&(R.bearing=0),R.freezeElevation=!0,this._map.easeTo(R,{originalEvent:I})),this._updatingCamera=!1}}_fireEvent(i,a){this._map.fire(new c.k(i,a?{originalEvent:a}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Wh("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class gp extends c.E{constructor(i,a){super(),this._renderFrameCallback=()=>{const d=Math.min((A.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=a.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new c.M(this.transform.center.lng,this.transform.center.lat)}setCenter(i,a){return this.jumpTo({center:i},a)}panBy(i,a,d){return i=c.P.convert(i).mult(-1),this.panTo(this.transform.center,c.e({offset:i},a),d)}panTo(i,a,d){return this.easeTo(c.e({center:i},a),d)}getZoom(){return this.transform.zoom}setZoom(i,a){return this.jumpTo({zoom:i},a),this}zoomTo(i,a,d){return this.easeTo(c.e({zoom:i},a),d)}zoomIn(i,a){return this.zoomTo(this.getZoom()+1,i,a),this}zoomOut(i,a){return this.zoomTo(this.getZoom()-1,i,a),this}getBearing(){return this.transform.bearing}setBearing(i,a){return this.jumpTo({bearing:i},a),this}getPadding(){return this.transform.padding}setPadding(i,a){return this.jumpTo({padding:i},a),this}rotateTo(i,a,d){return this.easeTo(c.e({bearing:i},a),d)}resetNorth(i,a){return this.rotateTo(0,c.e({duration:1e3},i),a),this}resetNorthPitch(i,a){return this.easeTo(c.e({bearing:0,pitch:0,duration:1e3},i),a),this}snapToNorth(i,a){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,a):this}getPitch(){return this.transform.pitch}setPitch(i,a){return this.jumpTo({pitch:i},a),this}cameraForBounds(i,a){i=ge.convert(i);const d=a&&a.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),d,a)}_cameraForBoxAndBearing(i,a,d,p){const v={top:0,bottom:0,right:0,left:0};if(typeof(p=c.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const Je=p.padding;p.padding={top:Je,bottom:Je,right:Je,left:Je}}p.padding=c.e(v,p.padding);const w=this.transform,S=w.padding,I=new ge(i,a),z=w.project(I.getNorthWest()),O=w.project(I.getNorthEast()),R=w.project(I.getSouthEast()),$=w.project(I.getSouthWest()),G=c.b9(-d),K=z.rotate(G),re=O.rotate(G),J=R.rotate(G),ce=$.rotate(G),me=new c.P(Math.max(K.x,re.x,ce.x,J.x),Math.max(K.y,re.y,ce.y,J.y)),te=new c.P(Math.min(K.x,re.x,ce.x,J.x),Math.min(K.y,re.y,ce.y,J.y)),ve=me.sub(te),Se=(w.width-(S.left+S.right+p.padding.left+p.padding.right))/ve.x,Pe=(w.height-(S.top+S.bottom+p.padding.top+p.padding.bottom))/ve.y;if(Pe<0||Se<0)return void c.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ne=Math.min(w.scaleZoom(w.scale*Math.min(Se,Pe)),p.maxZoom),Xe=c.P.convert(p.offset),ut=new c.P((p.padding.left-p.padding.right)/2,(p.padding.top-p.padding.bottom)/2).rotate(c.b9(d)),ht=Xe.add(ut).mult(w.scale/w.zoomScale(Ne));return{center:w.unproject(z.add(R).div(2).sub(ht)),zoom:Ne,bearing:d}}fitBounds(i,a,d){return this._fitInternal(this.cameraForBounds(i,a),a,d)}fitScreenCoordinates(i,a,d,p,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(c.P.convert(i)),this.transform.pointLocation(c.P.convert(a)),d,p),p,v)}_fitInternal(i,a,d){return i?(delete(a=c.e(i,a)).padding,a.linear?this.easeTo(a,d):this.flyTo(a,d)):this}jumpTo(i,a){this.stop();const d=this._getTransformForUpdate();let p=!1,v=!1,w=!1;return"zoom"in i&&d.zoom!==+i.zoom&&(p=!0,d.zoom=+i.zoom),i.center!==void 0&&(d.center=c.M.convert(i.center)),"bearing"in i&&d.bearing!==+i.bearing&&(v=!0,d.bearing=+i.bearing),"pitch"in i&&d.pitch!==+i.pitch&&(w=!0,d.pitch=+i.pitch),i.padding==null||d.isPaddingEqual(i.padding)||(d.padding=i.padding),this._applyUpdatedTransform(d),this.fire(new c.k("movestart",a)).fire(new c.k("move",a)),p&&this.fire(new c.k("zoomstart",a)).fire(new c.k("zoom",a)).fire(new c.k("zoomend",a)),v&&this.fire(new c.k("rotatestart",a)).fire(new c.k("rotate",a)).fire(new c.k("rotateend",a)),w&&this.fire(new c.k("pitchstart",a)).fire(new c.k("pitch",a)).fire(new c.k("pitchend",a)),this.fire(new c.k("moveend",a))}calculateCameraOptionsFromTo(i,a,d,p=0){const v=c.Y.fromLngLat(i,a),w=c.Y.fromLngLat(d,p),S=w.x-v.x,I=w.y-v.y,z=w.z-v.z,O=Math.hypot(S,I,z);if(O===0)throw new Error("Can't calculate camera options with same From and To");const R=Math.hypot(S,I),$=this.transform.scaleZoom(this.transform.cameraToCenterDistance/O/this.transform.tileSize),G=180*Math.atan2(S,-I)/Math.PI;let K=180*Math.acos(R/O)/Math.PI;return K=z<0?90-K:90+K,{center:w.toLngLat(),zoom:$,pitch:K,bearing:G}}easeTo(i,a){var d;this._stop(!1,i.easeId),((i=c.e({offset:[0,0],duration:500,easing:c.b8},i)).animate===!1||!i.essential&&A.prefersReducedMotion)&&(i.duration=0);const p=this._getTransformForUpdate(),v=this.getZoom(),w=this.getBearing(),S=this.getPitch(),I=this.getPadding(),z="bearing"in i?this._normalizeBearing(i.bearing,w):w,O="pitch"in i?+i.pitch:S,R="padding"in i?i.padding:p.padding,$=c.P.convert(i.offset);let G=p.centerPoint.add($);const K=p.pointLocation(G),{center:re,zoom:J}=p.getConstrained(c.M.convert(i.center||K),(d=i.zoom)!==null&&d!==void 0?d:v);this._normalizeCenter(re);const ce=p.project(K),me=p.project(re).sub(ce),te=p.zoomScale(J-v);let ve,Se;i.around&&(ve=c.M.convert(i.around),Se=p.locationPoint(ve));const Pe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||J!==v,this._rotating=this._rotating||w!==z,this._pitching=this._pitching||O!==S,this._padding=!p.isPaddingEqual(R),this._easeId=i.easeId,this._prepareEase(a,i.noMoveStart,Pe),this.terrain&&this._prepareElevation(re),this._ease(Ne=>{if(this._zooming&&(p.zoom=c.z.number(v,J,Ne)),this._rotating&&(p.bearing=c.z.number(w,z,Ne)),this._pitching&&(p.pitch=c.z.number(S,O,Ne)),this._padding&&(p.interpolatePadding(I,R,Ne),G=p.centerPoint.add($)),this.terrain&&!i.freezeElevation&&this._updateElevation(Ne),ve)p.setLocationAtPoint(ve,Se);else{const Xe=p.zoomScale(p.zoom-v),ut=J>v?Math.min(2,te):Math.max(.5,te),ht=Math.pow(ut,1-Ne),Je=p.unproject(ce.add(me.mult(Ne*ht)).mult(Xe));p.setLocationAtPoint(p.renderWorldCopies?Je.wrap():Je,G)}this._applyUpdatedTransform(p),this._fireMoveEvents(a)},Ne=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(a,Ne)},i),this}_prepareEase(i,a,d={}){this._moving=!0,a||d.moving||this.fire(new c.k("movestart",i)),this._zooming&&!d.zooming&&this.fire(new c.k("zoomstart",i)),this._rotating&&!d.rotating&&this.fire(new c.k("rotatestart",i)),this._pitching&&!d.pitching&&this.fire(new c.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const a=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&a!==this._elevationTarget){const d=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(d-(a-(d*i+this._elevationStart))/(1-i)),this._elevationTarget=a}this.transform.elevation=c.z.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(i){if(!this.transformCameraUpdate)return;const a=i.clone(),{center:d,zoom:p,pitch:v,bearing:w,elevation:S}=this.transformCameraUpdate(a);d&&(a.center=d),p!==void 0&&(a.zoom=p),v!==void 0&&(a.pitch=v),w!==void 0&&(a.bearing=w),S!==void 0&&(a.elevation=S),this.transform.apply(a)}_fireMoveEvents(i){this.fire(new c.k("move",i)),this._zooming&&this.fire(new c.k("zoom",i)),this._rotating&&this.fire(new c.k("rotate",i)),this._pitching&&this.fire(new c.k("pitch",i))}_afterEase(i,a){if(this._easeId&&a&&this._easeId===a)return;delete this._easeId;const d=this._zooming,p=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,d&&this.fire(new c.k("zoomend",i)),p&&this.fire(new c.k("rotateend",i)),v&&this.fire(new c.k("pitchend",i)),this.fire(new c.k("moveend",i))}flyTo(i,a){var d;if(!i.essential&&A.prefersReducedMotion){const at=c.L(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(at,a)}this.stop(),i=c.e({offset:[0,0],speed:1.2,curve:1.42,easing:c.b8},i);const p=this._getTransformForUpdate(),v=this.getZoom(),w=this.getBearing(),S=this.getPitch(),I=this.getPadding(),z="bearing"in i?this._normalizeBearing(i.bearing,w):w,O="pitch"in i?+i.pitch:S,R="padding"in i?i.padding:p.padding,$=c.P.convert(i.offset);let G=p.centerPoint.add($);const K=p.pointLocation(G),{center:re,zoom:J}=p.getConstrained(c.M.convert(i.center||K),(d=i.zoom)!==null&&d!==void 0?d:v);this._normalizeCenter(re);const ce=p.zoomScale(J-v),me=p.project(K),te=p.project(re).sub(me);let ve=i.curve;const Se=Math.max(p.width,p.height),Pe=Se/ce,Ne=te.mag();if("minZoom"in i){const at=c.ac(Math.min(i.minZoom,v,J),p.minZoom,p.maxZoom),Pt=Se/p.zoomScale(at-v);ve=Math.sqrt(Pt/Ne*2)}const Xe=ve*ve;function ut(at){const Pt=(Pe*Pe-Se*Se+(at?-1:1)*Xe*Xe*Ne*Ne)/(2*(at?Pe:Se)*Xe*Ne);return Math.log(Math.sqrt(Pt*Pt+1)-Pt)}function ht(at){return(Math.exp(at)-Math.exp(-at))/2}function Je(at){return(Math.exp(at)+Math.exp(-at))/2}const et=ut(!1);let yt=function(at){return Je(et)/Je(et+ve*at)},Ot=function(at){return Se*((Je(et)*(ht(Pt=et+ve*at)/Je(Pt))-ht(et))/Xe)/Ne;var Pt},it=(ut(!0)-et)/ve;if(Math.abs(Ne)<1e-6||!isFinite(it)){if(Math.abs(Se-Pe)<1e-6)return this.easeTo(i,a);const at=Pe<Se?-1:1;it=Math.abs(Math.log(Pe/Se))/ve,Ot=()=>0,yt=Pt=>Math.exp(at*ve*Pt)}return i.duration="duration"in i?+i.duration:1e3*it/("screenSpeed"in i?+i.screenSpeed/ve:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=w!==z,this._pitching=O!==S,this._padding=!p.isPaddingEqual(R),this._prepareEase(a,!1),this.terrain&&this._prepareElevation(re),this._ease(at=>{const Pt=at*it,Ci=1/yt(Pt);p.zoom=at===1?J:v+p.scaleZoom(Ci),this._rotating&&(p.bearing=c.z.number(w,z,at)),this._pitching&&(p.pitch=c.z.number(S,O,at)),this._padding&&(p.interpolatePadding(I,R,at),G=p.centerPoint.add($)),this.terrain&&!i.freezeElevation&&this._updateElevation(at);const Wt=at===1?re:p.unproject(me.add(te.mult(Ot(Pt))).mult(Ci));p.setLocationAtPoint(p.renderWorldCopies?Wt.wrap():Wt,G),this._applyUpdatedTransform(p),this._fireMoveEvents(a)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(a)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,a){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,a)}return i||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(i,a,d){d.animate===!1||d.duration===0?(i(1),a()):(this._easeStart=A.now(),this._easeOptions=d,this._onEaseFrame=i,this._onEaseEnd=a,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,a){i=c.b2(i,-180,180);const d=Math.abs(i-a);return Math.abs(i-360-a)<d&&(i-=360),Math.abs(i+360-a)<d&&(i+=360),i}_normalizeCenter(i){const a=this.transform;if(!a.renderWorldCopies||a.lngRange)return;const d=i.lng-a.center.lng;i.lng+=d>180?-360:d<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(c.M.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}const Kh={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Xh{constructor(i=Kh){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=a=>{!a||a.sourceDataType!=="metadata"&&a.sourceDataType!=="visibility"&&a.dataType!=="style"&&a.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=L.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=L.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=L.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){L.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,a){const d=this._map._getUIString(`AttributionControl.${a}`);i.title=d,i.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const a=this._map.style.sourceCaches;for(const p in a){const v=a[p];if(v.used||v.usedForTerrain){const w=v.getSource();w.attribution&&i.indexOf(w.attribution)<0&&i.push(w.attribution)}}i=i.filter(p=>String(p).trim()),i.sort((p,v)=>p.length-v.length),i=i.filter((p,v)=>{for(let w=v+1;w<i.length;w++)if(i[w].indexOf(p)>=0)return!1;return!0});const d=i.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,i.length?(this._innerContainer.innerHTML=d,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class nu{constructor(i={}){this._updateCompact=()=>{const a=this._container.children;if(a.length){const d=a[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=L.create("div","maplibregl-ctrl");const a=L.create("a","maplibregl-ctrl-logo");return a.target="_blank",a.rel="noopener nofollow",a.href="https://maplibre.org/",a.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),a.setAttribute("rel","noopener nofollow"),this._container.appendChild(a),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){L.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Aa{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const a=++this._id;return this._queue.push({callback:i,id:a,cancelled:!1}),a}remove(i){const a=this._currentlyRunning,d=a?this._queue.concat(a):this._queue;for(const p of d)if(p.id===i)return void(p.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const a=this._currentlyRunning=this._queue;this._queue=[];for(const d of a)if(!d.cancelled&&(d.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var wo=c.X([{name:"a_pos3d",type:"Int16",components:3}]);class mt extends c.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,a){this.sourceCache.update(i,a),this._renderableTilesKeys=[];const d={};for(const p of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:a}))d[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.posMatrix=new Float64Array(16),c.aO(p.posMatrix,0,c.W,0,c.W,0,1),this._tiles[p.key]=new ai(p,this.tileSize));for(const p in this._tiles)d[p]||delete this._tiles[p]}freeRtt(i){for(const a in this._tiles){const d=this._tiles[a];(!i||d.tileID.equals(i)||d.tileID.isChildOf(i)||i.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const a={};for(const d of this._renderableTilesKeys){const p=this._tiles[d].tileID;if(p.canonical.equals(i.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16),c.aO(v.posMatrix,0,c.W,0,c.W,0,1),a[d]=v}else if(p.canonical.isChildOf(i.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16);const w=p.canonical.z-i.canonical.z,S=p.canonical.x-(p.canonical.x>>w<<w),I=p.canonical.y-(p.canonical.y>>w<<w),z=c.W>>w;c.aO(v.posMatrix,0,z,0,z,0,1),c.H(v.posMatrix,v.posMatrix,[-S*z,-I*z,0]),a[d]=v}else if(i.canonical.isChildOf(p.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16);const w=i.canonical.z-p.canonical.z,S=i.canonical.x-(i.canonical.x>>w<<w),I=i.canonical.y-(i.canonical.y>>w<<w),z=c.W>>w;c.aO(v.posMatrix,0,c.W,0,c.W,0,1),c.H(v.posMatrix,v.posMatrix,[S*z,I*z,0]),c.J(v.posMatrix,v.posMatrix,[1/2**w,1/2**w,0]),a[d]=v}}return a}getSourceTile(i,a){const d=this.sourceCache._source;let p=i.overscaledZ-this.deltaZoom;if(p>d.maxzoom&&(p=d.maxzoom),p<d.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(p).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!v||!v.dem)&&a)for(;p>=d.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(i.scaledTo(p--).key);return v}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(a=>a.timeAdded>=i)}}class Jh{constructor(i,a,d){this.painter=i,this.sourceCache=new mt(a),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,a,d,p=c.W){var v;if(!(a>=0&&a<p&&d>=0&&d<p))return 0;const w=this.getTerrainData(i),S=(v=w.tile)===null||v===void 0?void 0:v.dem;if(!S)return 0;const I=function(K,re,J){var ce=re[0],me=re[1];return K[0]=J[0]*ce+J[4]*me+J[12],K[1]=J[1]*ce+J[5]*me+J[13],K}([],[a/p*c.W,d/p*c.W],w.u_terrain_matrix),z=[I[0]*S.dim,I[1]*S.dim],O=Math.floor(z[0]),R=Math.floor(z[1]),$=z[0]-O,G=z[1]-R;return S.get(O,R)*(1-$)*(1-G)+S.get(O+1,R)*$*(1-G)+S.get(O,R+1)*(1-$)*G+S.get(O+1,R+1)*$*G}getElevationForLngLatZoom(i,a){const{tileID:d,mercatorX:p,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(i,a);return this.getElevation(d,p%c.W,v%c.W,c.W)}getElevation(i,a,d,p=c.W){return this.getDEMElevation(i,a,d,p)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const p=this.painter.context,v=new c.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ae(p,v,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ae(p,new c.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=c.an([])}const a=this.sourceCache.getSourceTile(i,!0);if(a&&a.dem&&(!a.demTexture||a.needsTerrainPrepare)){const p=this.painter.context;a.demTexture=this.painter.getTileTexture(a.dem.stride),a.demTexture?a.demTexture.update(a.dem.getPixels(),{premultiply:!1}):a.demTexture=new Ae(p,a.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),a.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),a.needsTerrainPrepare=!1}const d=a&&a+a.tileID.key+i.key;if(d&&!this._demMatrixCache[d]){const p=this.sourceCache.sourceCache._source.maxzoom;let v=i.canonical.z-a.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=p?v=i.canonical.z-p:c.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const w=i.canonical.x-(i.canonical.x>>v<<v),S=i.canonical.y-(i.canonical.y>>v<<v),I=c.ba(new Float64Array(16),[1/(c.W<<v),1/(c.W<<v),0]);c.H(I,I,[w*c.W,S*c.W,0]),this._demMatrixCache[i.key]={matrix:I,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:a&&a.dem&&a.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:a&&a.dem&&a.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(a&&a.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:a}}getFramebuffer(i){const a=this.painter,d=a.width/devicePixelRatio,p=a.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ae(a.context,{width:d,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ae(a.context,{width:d,height:p,data:null},a.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(a.context.gl.NEAREST,a.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=a.context.createFramebuffer(d,p,!0,!1),this._fbo.depthAttachment.set(a.context.createRenderbuffer(a.context.gl.DEPTH_COMPONENT16,d,p))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const a=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,w=0;v<this._coordsTextureSize;v++)for(let S=0;S<this._coordsTextureSize;S++,w+=4)a[w+0]=255&S,a[w+1]=255&v,a[w+2]=S>>8<<4|v>>8,a[w+3]=0;const d=new c.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(a.buffer)),p=new Ae(i,d,i.gl.RGBA,{premultiply:!1});return p.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const a=new Uint8Array(4),d=this.painter.context,p=d.gl,v=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),S=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(v,S-w-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),d.bindFramebuffer.set(null);const I=a[0]+(a[2]>>4<<8),z=a[1]+((15&a[2])<<8),O=this.coordsIndex[255-a[3]],R=O&&this.sourceCache.getTileByID(O);if(!R)return null;const $=this._coordsTextureSize,G=(1<<R.tileID.canonical.z)*$;return new c.Y((R.tileID.canonical.x*$+I)/G+R.tileID.wrap,(R.tileID.canonical.y*$+z)/G,this.getElevation(R.tileID,I,z,$))}depthAtPoint(i){const a=new Uint8Array(4),d=this.painter.context,p=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,a),d.bindFramebuffer.set(null),(a[0]/16777216+a[1]/65536+a[2]/256+a[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,a=new c.bb,d=new c.aY,p=this.meshSize,v=c.W/p,w=p*p;for(let R=0;R<=p;R++)for(let $=0;$<=p;$++)a.emplaceBack($*v,R*v,0);for(let R=0;R<w;R+=p+1)for(let $=0;$<p;$++)d.emplaceBack($+R,p+$+R+1,p+$+R+2),d.emplaceBack($+R,p+$+R+2,$+R+1);const S=a.length,I=S+2*(p+1);for(const R of[0,1])for(let $=0;$<=p;$++)for(const G of[0,1])a.emplaceBack($*v,R*c.W,G);for(let R=0;R<2*p;R+=2)d.emplaceBack(I+R,I+R+1,I+R+3),d.emplaceBack(I+R,I+R+3,I+R+2),d.emplaceBack(S+R,S+R+3,S+R+1),d.emplaceBack(S+R,S+R+2,S+R+3);const z=a.length,O=z+2*(p+1);for(const R of[0,1])for(let $=0;$<=p;$++)for(const G of[0,1])a.emplaceBack(R*c.W,$*v,G);for(let R=0;R<2*p;R+=2)d.emplaceBack(z+R,z+R+1,z+R+3),d.emplaceBack(z+R,z+R+3,z+R+2),d.emplaceBack(O+R,O+R+3,O+R+1),d.emplaceBack(O+R,O+R+2,O+R+3);return this._mesh={indexBuffer:i.createIndexBuffer(d),vertexBuffer:i.createVertexBuffer(a,wo.members),segments:c.$.simpleSegment(0,0,a.length,d.length)},this._mesh}getMeshFrameDelta(i){return 2*Math.PI*c.bc/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,a){var d;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(i,a);return(d=this.getMinMaxElevation(p).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(i){const a=this.getTerrainData(i).tile,d={minElevation:null,maxElevation:null};return a&&a.dem&&(d.minElevation=a.dem.min*this.exaggeration,d.maxElevation=a.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(i,a){const d=c.Y.fromLngLat(i.wrap()),p=(1<<a)*c.W,v=d.x*p,w=d.y*p,S=Math.floor(v/c.W),I=Math.floor(w/c.W);return{tileID:new c.Q(a,0,a,S,I),mercatorX:v,mercatorY:w}}}class ka{constructor(i,a,d){this._context=i,this._size=a,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const a=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new Ae(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),a.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),a.colorAttachment.set(d.texture),{id:i,fbo:a,texture:d,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(a=>i.id!==a),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const a of this._recentlyUsed)if(!this._objects[a].inUse)return this._objects[a];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const qn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Yh{constructor(i,a){this.painter=i,this.terrain=a,this.pool=new ka(i.context,30,a.sourceCache.tileSize*a.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,a){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(d=>!i._layers[d].isHidden(a)),this._coordsDescendingInv={};for(const d in i.sourceCaches){this._coordsDescendingInv[d]={};const p=i.sourceCaches[d].getVisibleCoordinates();for(const v of p){const w=this.terrain.sourceCache.getTerrainCoords(v);for(const S in w)this._coordsDescendingInv[d][S]||(this._coordsDescendingInv[d][S]=[]),this._coordsDescendingInv[d][S].push(w[S])}}this._coordsDescendingInvStr={};for(const d of i._order){const p=i._layers[d],v=p.source;if(qn[p.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const w in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][w]=this._coordsDescendingInv[v][w].map(S=>S.key).sort().join()}}for(const d of this._renderableTiles)for(const p in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[p][d.tileID.key];v&&v!==d.rttCoords[p]&&(d.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const a=i.type,d=this.painter,p=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(qn[a]&&(this._prevType&&qn[this._prevType]||this._stacks.push([]),this._prevType=a,this._stacks[this._stacks.length-1].push(i.id),!p))return!0;if(qn[this._prevType]||qn[a]&&p){this._prevType=a;const v=this._stacks.length-1,w=this._stacks[v]||[];for(const S of this._renderableTiles){if(this.pool.isFull()&&(xl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(S),S.rtt[v]){const z=this.pool.getObjectForId(S.rtt[v].id);if(z.stamp===S.rtt[v].stamp){this.pool.useObject(z);continue}}const I=this.pool.getOrCreateFreeObject();this.pool.useObject(I),this.pool.stampObject(I),S.rtt[v]={id:I.id,stamp:I.stamp},d.context.bindFramebuffer.set(I.fbo.framebuffer),d.context.clear({color:c.aP.transparent,stencil:0}),d.currentStencilSource=void 0;for(let z=0;z<w.length;z++){const O=d.style._layers[w[z]],R=O.source?this._coordsDescendingInv[O.source][S.tileID.key]:[S.tileID];d.context.viewport.set([0,0,I.fbo.width,I.fbo.height]),d._renderTileClippingMasks(O,R),d.renderLayer(d,d.style.sourceCaches[O.source],O,R),O.source&&(S.rttCoords[O.source]=this._coordsDescendingInvStr[O.source][S.tileID.key])}}return xl(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),qn[a]}return!1}}const ct={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ou=T,yp={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Kh,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:c.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Qh=_=>{_.touchstart=_.dragStart,_.touchmoveWindow=_.dragMove,_.touchend=_.dragEnd},su={showCompass:!0,showZoom:!0,visualizePitch:!1};class ed{constructor(i,a,d=!1){this.mousedown=w=>{this.startMouse(c.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),L.mousePos(this.element,w)),L.addEventListener(window,"mousemove",this.mousemove),L.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,L.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=L.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),L.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=L.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const p=i.dragRotate._mouseRotate.getClickTolerance(),v=i.dragRotate._mousePitch.getClickTolerance();this.element=a,this.mouseRotate=fn({clickTolerance:p,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:S,bearingDegreesPerPixelMoved:I=.8})=>{const z=new Ui;return new Yo({clickTolerance:S,move:(O,R)=>({bearingDelta:(R.x-O.x)*I}),moveStateManager:z,enable:w,assignEvents:Qh})})({clickTolerance:p,enable:!0}),this.map=i,d&&(this.mousePitch=Al({clickTolerance:v,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:S,pitchDegreesPerPixelMoved:I=-.5})=>{const z=new Ui;return new Yo({clickTolerance:S,move:(O,R)=>({pitchDelta:(R.y-O.y)*I}),moveStateManager:z,enable:w,assignEvents:Qh})})({clickTolerance:v,enable:!0})),L.addEventListener(a,"mousedown",this.mousedown),L.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),L.addEventListener(a,"touchcancel",this.reset)}startMouse(i,a){this.mouseRotate.dragStart(i,a),this.mousePitch&&this.mousePitch.dragStart(i,a),L.disableDrag()}startTouch(i,a){this.touchRotate.dragStart(i,a),this.touchPitch&&this.touchPitch.dragStart(i,a),L.disableDrag()}moveMouse(i,a){const d=this.map,{bearingDelta:p}=this.mouseRotate.dragMove(i,a)||{};if(p&&d.setBearing(d.getBearing()+p),this.mousePitch){const{pitchDelta:v}=this.mousePitch.dragMove(i,a)||{};v&&d.setPitch(d.getPitch()+v)}}moveTouch(i,a){const d=this.map,{bearingDelta:p}=this.touchRotate.dragMove(i,a)||{};if(p&&d.setBearing(d.getBearing()+p),this.touchPitch){const{pitchDelta:v}=this.touchPitch.dragMove(i,a)||{};v&&d.setPitch(d.getPitch()+v)}}off(){const i=this.element;L.removeEventListener(i,"mousedown",this.mousedown),L.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),L.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.removeEventListener(window,"touchend",this.touchend),L.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){L.enableDrag(),L.removeEventListener(window,"mousemove",this.mousemove),L.removeEventListener(window,"mouseup",this.mouseup),L.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.removeEventListener(window,"touchend",this.touchend)}}let Eo;function td(_,i,a){const d=new c.M(_.lng,_.lat);if(_=new c.M(_.lng,_.lat),i){const p=new c.M(_.lng-360,_.lat),v=new c.M(_.lng+360,_.lat),w=a.locationPoint(_).distSqr(i);a.locationPoint(p).distSqr(i)<w?_=p:a.locationPoint(v).distSqr(i)<w&&(_=v)}for(;Math.abs(_.lng-a.center.lng)>180;){const p=a.locationPoint(_);if(p.x>=0&&p.y>=0&&p.x<=a.width&&p.y<=a.height)break;_.lng>a.center.lng?_.lng-=360:_.lng+=360}return _.lng!==d.lng&&a.locationPoint(_).y>a.height/2-a.getHorizon()?_:d}const au={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function So(_,i,a){const d=_.classList;for(const p in au)d.remove(`maplibregl-${a}-anchor-${p}`);d.add(`maplibregl-${a}-anchor-${i}`)}class wi extends c.E{constructor(i){if(super(),this._onKeyPress=a=>{const d=a.code,p=a.charCode||a.keyCode;d!=="Space"&&d!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=a=>{const d=a.originalEvent.target,p=this._element;this._popup&&(d===p||p.contains(d))&&this.togglePopup()},this._update=a=>{var d;if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((a==null?void 0:a.type)==="terrain"||(a==null?void 0:a.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?td(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let v="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?v=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(v=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),a&&a.type!=="moveend"||(this._pos=this._pos.round()),L.setTransform(this._element,`${au[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${v}`),A.frameAsync(new AbortController).then(()=>{this._updateOpacity(a&&a.type==="moveend")}).catch(()=>{})},this._onMove=a=>{if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=a.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=a.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new c.k("dragstart"))),this.fire(new c.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new c.k("dragend")),this._state="inactive"},this._addDragHandler=a=>{this._element.contains(a.originalEvent.target)&&(a.preventDefault(),this._positionDelta=a.point.sub(this._pos).add(this._offset),this._pointerdownPos=a.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=c.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=L.create("div");const a=L.createNS("http://www.w3.org/2000/svg","svg"),d=41,p=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",`${d}px`),a.setAttributeNS(null,"width",`${p}px`),a.setAttributeNS(null,"viewBox",`0 0 ${p} ${d}`);const v=L.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");const w=L.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");const S=L.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");const I=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ce of I){const me=L.createNS("http://www.w3.org/2000/svg","ellipse");me.setAttributeNS(null,"opacity","0.04"),me.setAttributeNS(null,"cx","10.5"),me.setAttributeNS(null,"cy","5.80029008"),me.setAttributeNS(null,"rx",ce.rx),me.setAttributeNS(null,"ry",ce.ry),S.appendChild(me)}const z=L.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const O=L.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(O);const R=L.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"opacity","0.25"),R.setAttributeNS(null,"fill","#000000");const $=L.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),R.appendChild($);const G=L.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"transform","translate(6.0, 7.0)"),G.setAttributeNS(null,"fill","#FFFFFF");const K=L.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"transform","translate(8.0, 8.0)");const re=L.createNS("http://www.w3.org/2000/svg","circle");re.setAttributeNS(null,"fill","#000000"),re.setAttributeNS(null,"opacity","0.25"),re.setAttributeNS(null,"cx","5.5"),re.setAttributeNS(null,"cy","5.5"),re.setAttributeNS(null,"r","5.4999962");const J=L.createNS("http://www.w3.org/2000/svg","circle");J.setAttributeNS(null,"fill","#FFFFFF"),J.setAttributeNS(null,"cx","5.5"),J.setAttributeNS(null,"cy","5.5"),J.setAttributeNS(null,"r","5.4999962"),K.appendChild(re),K.appendChild(J),w.appendChild(S),w.appendChild(z),w.appendChild(R),w.appendChild(G),w.appendChild(K),a.appendChild(w),a.setAttributeNS(null,"height",d*this._scale+"px"),a.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(a),this._offset=c.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",a=>{a.preventDefault()}),this._element.addEventListener("mousedown",a=>{a.preventDefault()}),So(this._element,this._anchor,"marker"),i&&i.className)for(const a of i.className.split(" "))this._element.classList.add(a);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),L.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=c.M.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const p=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var a,d;if(!(!((a=this._map)===null||a===void 0)&&a.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const p=this._map,v=p.terrain.depthAtPoint(this._pos),w=p.terrain.getElevationForLngLatZoom(this._lngLat,p.transform.tileZoom);if(p.transform.lngLatToCameraDepth(this._lngLat,w)-v<.006)return void(this._element.style.opacity=this._opacity);const S=-this._offset.y/p.transform._pixelPerMeter,I=Math.sin(p.getPitch()*Math.PI/180)*S,z=p.terrain.depthAtPoint(new c.P(this._pos.x,this._pos.y-this._offset.y)),O=p.transform.lngLatToCameraDepth(this._lngLat,w+I)-z>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&O&&this._popup.remove(),this._element.style.opacity=O?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=c.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,a){return i===void 0&&a===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),a!==void 0&&(this._opacityWhenCovered=a),this._map&&this._updateOpacity(!0),this}}const Pl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ks=0,Ms=!1;const id={maxWidth:100,unit:"metric"};function lu(_,i,a){const d=a&&a.maxWidth||100,p=_._container.clientHeight/2,v=_.unproject([0,p]),w=_.unproject([d,p]),S=v.distanceTo(w);if(a&&a.unit==="imperial"){const I=3.2808*S;I>5280?Ma(i,d,I/5280,_._getUIString("ScaleControl.Miles")):Ma(i,d,I,_._getUIString("ScaleControl.Feet"))}else a&&a.unit==="nautical"?Ma(i,d,S/1852,_._getUIString("ScaleControl.NauticalMiles")):S>=1e3?Ma(i,d,S/1e3,_._getUIString("ScaleControl.Kilometers")):Ma(i,d,S,_._getUIString("ScaleControl.Meters"))}function Ma(_,i,a,d){const p=function(v){const w=Math.pow(10,`${Math.floor(v)}`.length-1);let S=v/w;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(I){const z=Math.pow(10,Math.ceil(-Math.log(I)/Math.LN10));return Math.round(I*z)/z}(S),w*S}(a);_.style.width=i*(p/a)+"px",_.innerHTML=`${p}&nbsp;${d}`}const Hn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},zl=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function wt(_){if(_){if(typeof _=="number"){const i=Math.round(Math.abs(_)/Math.SQRT2);return{center:new c.P(0,0),top:new c.P(0,_),"top-left":new c.P(i,i),"top-right":new c.P(-i,i),bottom:new c.P(0,-_),"bottom-left":new c.P(i,-i),"bottom-right":new c.P(-i,-i),left:new c.P(_,0),right:new c.P(-_,0)}}if(_ instanceof c.P||Array.isArray(_)){const i=c.P.convert(_);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:c.P.convert(_.center||[0,0]),top:c.P.convert(_.top||[0,0]),"top-left":c.P.convert(_["top-left"]||[0,0]),"top-right":c.P.convert(_["top-right"]||[0,0]),bottom:c.P.convert(_.bottom||[0,0]),"bottom-left":c.P.convert(_["bottom-left"]||[0,0]),"bottom-right":c.P.convert(_["bottom-right"]||[0,0]),left:c.P.convert(_.left||[0,0]),right:c.P.convert(_.right||[0,0])}}return wt(new c.P(0,0))}const At=T;m.AJAXError=c.bf,m.Evented=c.E,m.LngLat=c.M,m.MercatorCoordinate=c.Y,m.Point=c.P,m.addProtocol=c.bg,m.config=c.a,m.removeProtocol=c.bh,m.AttributionControl=Xh,m.BoxZoomHandler=Ta,m.CanvasSource=pt,m.CooperativeGesturesHandler=xn,m.DoubleClickZoomHandler=tu,m.DragPanHandler=iu,m.DragRotateHandler=As,m.EdgeInsets=Ea,m.FullscreenControl=class extends c.E{constructor(_={}){super(),this._onFullscreenChange=()=>{var i;let a=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=a==null?void 0:a.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)a=a.shadowRoot.fullscreenElement;a===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,_&&_.container&&(_.container instanceof HTMLElement?this._container=_.container:c.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(_){return this._map=_,this._container||(this._container=this._map.getContainer()),this._controlContainer=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){L.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const _=this._fullscreenButton=L.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);L.create("span","maplibregl-ctrl-icon",_).setAttribute("aria-hidden","true"),_.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const _=this._getTitle();this._fullscreenButton.setAttribute("aria-label",_),this._fullscreenButton.title=_}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new c.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new c.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=Ze,m.GeolocateControl=class extends c.E{constructor(_){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new c.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new c.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const a=new c.M(i.coords.longitude,i.coords.latitude),d=i.coords.accuracy,p=this._map.getBearing(),v=c.e({bearing:p},this.options.fitBoundsOptions),w=ge.fromLngLat(a,d);this._map.fitBounds(w,v,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const a=new c.M(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(a).addTo(this._map),this._userLocationDotMarker.setLngLat(a).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&Ms)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new c.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=i=>{if(this._map){if(this._container.addEventListener("contextmenu",a=>a.preventDefault()),this._geolocateButton=L.create("button","maplibregl-ctrl-geolocate",this._container),L.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",i===!1){c.w("Geolocation support is not available so the GeolocateControl will be disabled.");const a=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}else{const a=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=a,this._geolocateButton.setAttribute("aria-label",a)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=L.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new wi({element:this._dotElement}),this._circleElement=L.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new wi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",a=>{a.geolocateSource||this._watchState!=="ACTIVE_LOCK"||a.originalEvent&&a.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new c.k("trackuserlocationend")),this.fire(new c.k("userlocationlostfocus")))})}},this.options=c.e({},Pl,_)}onAdd(_){return this._map=_,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),function(){return c._(this,arguments,void 0,function*(i=!1){if(Eo!==void 0&&!i)return Eo;if(window.navigator.permissions===void 0)return Eo=!!window.navigator.geolocation,Eo;try{Eo=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Eo=!!window.navigator.geolocation}return Eo})}().then(i=>this._setupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),L.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ks=0,Ms=!1}_isOutOfMapMaxBounds(_){const i=this._map.getMaxBounds(),a=_.coords;return i&&(a.longitude<i.getWest()||a.longitude>i.getEast()||a.latitude<i.getSouth()||a.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const _=this._map.getBounds(),i=_.getSouthEast(),a=_.getNorthEast(),d=i.distanceTo(a),p=Math.ceil(this._accuracy/(d/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return c.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new c.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ks--,Ms=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new c.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new c.k("trackuserlocationstart")),this.fire(new c.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let _;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ks++,ks>1?(_={maximumAge:6e5,timeout:0},Ms=!0):(_=this.options.positionOptions,Ms=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,_)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.Hash=qc,m.ImageSource=Qe,m.KeyboardHandler=bo,m.LngLatBounds=ge,m.LogoControl=nu,m.Map=class extends gp{constructor(_){c.bd.mark(c.be.create);const i=Object.assign(Object.assign({},yp),_);if(i.minZoom!=null&&i.maxZoom!=null&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(i.minPitch!=null&&i.maxPitch!=null&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(i.minPitch!=null&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(i.maxPitch!=null&&i.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Uc(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Aa,this._controls=[],this._mapId=c.a3(),this._contextLost=a=>{a.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new c.k("webglcontextlost",{originalEvent:a}))},this._contextRestored=a=>{this._setupPainter(),this.resize(),this._update(),this.fire(new c.k("webglcontextrestored",{originalEvent:a}))},this._onMapScroll=a=>{if(a.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=i.preserveDrawingBuffer===!0,this._antialias=i.antialias===!0,this._trackResize=i.trackResize===!0,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles===!0,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=i.crossSourceCollisions===!0,this._collectResourceTiming=i.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},ct),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=i.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=j.addThrottleControl(()=>this.isMoving()),this._requestManager=new oe(i.transformRequest),typeof i.container=="string"){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let a=!1;const d=$h(p=>{this._trackResize&&!this._removed&&this.resize(p)._update()},50);this._resizeObserver=new ResizeObserver(p=>{a?d(p):a=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Ca(this,i),this._hash=i.hash&&new qc(typeof i.hash=="string"&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,c.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new Xh(typeof i.attributionControl=="boolean"?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new nu,i.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",a=>{this._update(a.dataType==="style"),this.fire(new c.k(`${a.dataType}data`,a))}),this.on("dataloading",a=>{this.fire(new c.k(`${a.dataType}dataloading`,a))}),this.on("dataabort",a=>{this.fire(new c.k("sourcedataabort",a))})}_getMapId(){return this._mapId}addControl(_,i){if(i===void 0&&(i=_.getDefaultPosition?_.getDefaultPosition():"top-right"),!_||!_.onAdd)return this.fire(new c.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=_.onAdd(this);this._controls.push(_);const d=this._controlPositions[i];return i.indexOf("bottom")!==-1?d.insertBefore(a,d.firstChild):d.appendChild(a),this}removeControl(_){if(!_||!_.onRemove)return this.fire(new c.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(_);return i>-1&&this._controls.splice(i,1),_.onRemove(this),this}hasControl(_){return this._controls.indexOf(_)>-1}calculateCameraOptionsFromTo(_,i,a,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(_,i,a,d)}resize(_){var i;const a=this._containerDimensions(),d=a[0],p=a[1],v=this._getClampedPixelRatio(d,p);if(this._resizeCanvas(d,p,v),this.painter.resize(d,p,v),this.painter.overLimit()){const S=this.painter.context.gl;this._maxCanvasSize=[S.drawingBufferWidth,S.drawingBufferHeight];const I=this._getClampedPixelRatio(d,p);this._resizeCanvas(d,p,I),this.painter.resize(d,p,I)}this.transform.resize(d,p),(i=this._requestedCameraState)===null||i===void 0||i.resize(d,p);const w=!this._moving;return w&&(this.stop(),this.fire(new c.k("movestart",_)).fire(new c.k("move",_))),this.fire(new c.k("resize",_)),w&&this.fire(new c.k("moveend",_)),this}_getClampedPixelRatio(_,i){const{0:a,1:d}=this._maxCanvasSize,p=this.getPixelRatio(),v=_*p,w=i*p;return Math.min(v>a?a/v:1,w>d?d/w:1)*p}getPixelRatio(){var _;return(_=this._overridePixelRatio)!==null&&_!==void 0?_:devicePixelRatio}setPixelRatio(_){this._overridePixelRatio=_,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(_){return this.transform.setMaxBounds(ge.convert(_)),this._update()}setMinZoom(_){if((_=_??-2)>=-2&&_<=this.transform.maxZoom)return this.transform.minZoom=_,this._update(),this.getZoom()<_&&this.setZoom(_),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(_){if((_=_??22)>=this.transform.minZoom)return this.transform.maxZoom=_,this._update(),this.getZoom()>_&&this.setZoom(_),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(_){if((_=_??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(_>=0&&_<=this.transform.maxPitch)return this.transform.minPitch=_,this._update(),this.getPitch()<_&&this.setPitch(_),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(_){if((_=_??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(_>=this.transform.minPitch)return this.transform.maxPitch=_,this._update(),this.getPitch()>_&&this.setPitch(_),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(_){return this.transform.renderWorldCopies=_,this._update()}project(_){return this.transform.locationPoint(c.M.convert(_),this.style&&this.terrain)}unproject(_){return this.transform.pointLocation(c.P.convert(_),this.terrain)}isMoving(){var _;return this._moving||((_=this.handlers)===null||_===void 0?void 0:_.isMoving())}isZooming(){var _;return this._zooming||((_=this.handlers)===null||_===void 0?void 0:_.isZooming())}isRotating(){var _;return this._rotating||((_=this.handlers)===null||_===void 0?void 0:_.isRotating())}_createDelegatedListener(_,i,a){if(_==="mouseenter"||_==="mouseover"){let d=!1;return{layer:i,listener:a,delegates:{mousemove:v=>{const w=this.getLayer(i)?this.queryRenderedFeatures(v.point,{layers:[i]}):[];w.length?d||(d=!0,a.call(this,new Cr(_,this,v.originalEvent,{features:w}))):d=!1},mouseout:()=>{d=!1}}}}if(_==="mouseleave"||_==="mouseout"){let d=!1;return{layer:i,listener:a,delegates:{mousemove:w=>{(this.getLayer(i)?this.queryRenderedFeatures(w.point,{layers:[i]}):[]).length?d=!0:d&&(d=!1,a.call(this,new Cr(_,this,w.originalEvent)))},mouseout:w=>{d&&(d=!1,a.call(this,new Cr(_,this,w.originalEvent)))}}}}{const d=p=>{const v=this.getLayer(i)?this.queryRenderedFeatures(p.point,{layers:[i]}):[];v.length&&(p.features=v,a.call(this,p),delete p.features)};return{layer:i,listener:a,delegates:{[_]:d}}}}on(_,i,a){if(a===void 0)return super.on(_,i);const d=this._createDelegatedListener(_,i,a);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[_]=this._delegatedListeners[_]||[],this._delegatedListeners[_].push(d);for(const p in d.delegates)this.on(p,d.delegates[p]);return this}once(_,i,a){if(a===void 0)return super.once(_,i);const d=this._createDelegatedListener(_,i,a);for(const p in d.delegates)this.once(p,d.delegates[p]);return this}off(_,i,a){return a===void 0?super.off(_,i):(this._delegatedListeners&&this._delegatedListeners[_]&&(d=>{const p=this._delegatedListeners[_];for(let v=0;v<p.length;v++){const w=p[v];if(w.layer===i&&w.listener===a){for(const S in w.delegates)this.off(S,w.delegates[S]);return p.splice(v,1),this}}})(),this)}queryRenderedFeatures(_,i){if(!this.style)return[];let a;const d=_ instanceof c.P||Array.isArray(_),p=d?_:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(d?{}:_)||{},p instanceof c.P||typeof p[0]=="number")a=[c.P.convert(p)];else{const v=c.P.convert(p[0]),w=c.P.convert(p[1]);a=[v,new c.P(w.x,v.y),w,new c.P(v.x,w.y),v]}return this.style.queryRenderedFeatures(a,i,this.transform)}querySourceFeatures(_,i){return this.style.querySourceFeatures(_,i)}setStyle(_,i){return(i=c.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&_?(this._diffStyle(_,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(_,i))}setTransformRequest(_){return this._requestManager.setTransformRequest(_),this}_getUIString(_){const i=this._locale[_];if(i==null)throw new Error(`Missing UI string '${_}'`);return i}_updateStyle(_,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(_,i));const a=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!_)),_?(this.style=new il(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof _=="string"?this.style.loadURL(_,i,a):this.style.loadJSON(_,i,a),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new il(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(_,i){if(typeof _=="string"){const a=this._requestManager.transformRequest(_,"Style");c.h(a,new AbortController).then(d=>{this._updateDiff(d.data,i)}).catch(d=>{d&&this.fire(new c.j(d))})}else typeof _=="object"&&this._updateDiff(_,i)}_updateDiff(_,i){try{this.style.setState(_,i)&&this._update(!0)}catch(a){c.w(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(_,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():c.w("There is no style added to the map.")}addSource(_,i){return this._lazyInitEmptyStyle(),this.style.addSource(_,i),this._update(!0)}isSourceLoaded(_){const i=this.style&&this.style.sourceCaches[_];if(i!==void 0)return i.loaded();this.fire(new c.j(new Error(`There is no source with ID '${_}'`)))}setTerrain(_){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),_){const i=this.style.sourceCaches[_.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${_.source}`);this.terrain===null&&i.reload();for(const a in this.style._layers){const d=this.style._layers[a];d.type==="hillshade"&&d.source===_.source&&c.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Jh(this.painter,i,_),this.painter.renderToTexture=new Yh(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=a=>{a.dataType==="style"?this.terrain.sourceCache.freeRtt():a.dataType==="source"&&a.tile&&(a.sourceId!==_.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(a.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new c.k("terrain",{terrain:_})),this}getTerrain(){var _,i;return(i=(_=this.terrain)===null||_===void 0?void 0:_.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const _=this.style&&this.style.sourceCaches;for(const i in _){const a=_[i]._tiles;for(const d in a){const p=a[d];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(_){return this.style.removeSource(_),this._update(!0)}getSource(_){return this.style.getSource(_)}addImage(_,i,a={}){const{pixelRatio:d=1,sdf:p=!1,stretchX:v,stretchY:w,content:S,textFitWidth:I,textFitHeight:z}=a;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||c.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:R,data:$}=i,G=i;return this.style.addImage(_,{data:new c.R({width:O,height:R},new Uint8Array($)),pixelRatio:d,stretchX:v,stretchY:w,content:S,textFitWidth:I,textFitHeight:z,sdf:p,version:0,userImage:G}),G.onAdd&&G.onAdd(this,_),this}}{const{width:O,height:R,data:$}=A.getImageData(i);this.style.addImage(_,{data:new c.R({width:O,height:R},$),pixelRatio:d,stretchX:v,stretchY:w,content:S,textFitWidth:I,textFitHeight:z,sdf:p,version:0})}}updateImage(_,i){const a=this.style.getImage(_);if(!a)return this.fire(new c.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const d=i instanceof HTMLImageElement||c.b(i)?A.getImageData(i):i,{width:p,height:v,data:w}=d;if(p===void 0||v===void 0)return this.fire(new c.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==a.data.width||v!==a.data.height)return this.fire(new c.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const S=!(i instanceof HTMLImageElement||c.b(i));return a.data.replace(w,S),this.style.updateImage(_,a),this}getImage(_){return this.style.getImage(_)}hasImage(_){return _?!!this.style.getImage(_):(this.fire(new c.j(new Error("Missing required image id"))),!1)}removeImage(_){this.style.removeImage(_)}loadImage(_){return j.getImage(this._requestManager.transformRequest(_,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(_,i){return this._lazyInitEmptyStyle(),this.style.addLayer(_,i),this._update(!0)}moveLayer(_,i){return this.style.moveLayer(_,i),this._update(!0)}removeLayer(_){return this.style.removeLayer(_),this._update(!0)}getLayer(_){return this.style.getLayer(_)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(_,i,a){return this.style.setLayerZoomRange(_,i,a),this._update(!0)}setFilter(_,i,a={}){return this.style.setFilter(_,i,a),this._update(!0)}getFilter(_){return this.style.getFilter(_)}setPaintProperty(_,i,a,d={}){return this.style.setPaintProperty(_,i,a,d),this._update(!0)}getPaintProperty(_,i){return this.style.getPaintProperty(_,i)}setLayoutProperty(_,i,a,d={}){return this.style.setLayoutProperty(_,i,a,d),this._update(!0)}getLayoutProperty(_,i){return this.style.getLayoutProperty(_,i)}setGlyphs(_,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(_,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(_,i,a={}){return this._lazyInitEmptyStyle(),this.style.addSprite(_,i,a,d=>{d||this._update(!0)}),this}removeSprite(_){return this._lazyInitEmptyStyle(),this.style.removeSprite(_),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(_,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(_,i,a=>{a||this._update(!0)}),this}setLight(_,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(_,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(_,i){return this.style.setFeatureState(_,i),this._update()}removeFeatureState(_,i){return this.style.removeFeatureState(_,i),this._update()}getFeatureState(_){return this.style.getFeatureState(_)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let _=0,i=0;return this._container&&(_=this._container.clientWidth||400,i=this._container.clientHeight||300),[_,i]}_setupContainer(){const _=this._container;_.classList.add("maplibregl-map");const i=this._canvasContainer=L.create("div","maplibregl-canvas-container",_);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=L.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const a=this._containerDimensions(),d=this._getClampedPixelRatio(a[0],a[1]);this._resizeCanvas(a[0],a[1],d);const p=this._controlContainer=L.create("div","maplibregl-control-container",_),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{v[w]=L.create("div",`maplibregl-ctrl-${w} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(_,i,a){this._canvas.width=Math.floor(a*_),this._canvas.height=Math.floor(a*i),this._canvas.style.width=`${_}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const _={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{i={requestedAttributes:_},d&&(i.statusMessage=d.statusMessage,i.type=d.type)},{once:!0});const a=this._canvas.getContext("webgl2",_)||this._canvas.getContext("webgl",_);if(!a){const d="Failed to initialize WebGL";throw i?(i.message=d,new Error(JSON.stringify(i))):new Error(d)}this.painter=new oi(a,this.transform),H.testSupport(a)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(_){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||_,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(_){return this._update(),this._renderTaskQueue.add(_)}_cancelRenderFrame(_){this._renderTaskQueue.remove(_)}_render(_){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(_),this._removed)return;let a=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const p=this.transform.zoom,v=A.now();this.style.zoomHistory.update(p,v);const w=new c.a8(p,{now:v,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),S=w.crossFadingFactor();S===1&&S===this._crossFadingFactor||(a=!0,this._crossFadingFactor=S),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new c.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,c.bd.mark(c.be.load),this.fire(new c.k("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const d=this._sourcesDirty||this._styleDirty||this._placementDirty;return d||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new c.k("idle")),!this._loaded||this._fullyLoaded||d||(this._fullyLoaded=!0,c.bd.mark(c.be.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var _;this._hash&&this._hash.remove();for(const a of this._controls)a.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),j.removeThrottleControl(this._imageQueueHandle),(_=this._resizeObserver)===null||_===void 0||_.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),L.remove(this._canvasContainer),L.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),c.bd.clearMetrics(),this._removed=!0,this.fire(new c.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,A.frameAsync(this._frameRequest).then(_=>{c.bd.frame(_),this._frameRequest=null,this._render(_)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(_){this._showTileBoundaries!==_&&(this._showTileBoundaries=_,this._update())}get showPadding(){return!!this._showPadding}set showPadding(_){this._showPadding!==_&&(this._showPadding=_,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(_){this._showCollisionBoxes!==_&&(this._showCollisionBoxes=_,_?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(_){this._showOverdrawInspector!==_&&(this._showOverdrawInspector=_,this._update())}get repaint(){return!!this._repaint}set repaint(_){this._repaint!==_&&(this._repaint=_,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(_){this._vertices=_,this._update()}get version(){return ou}getCameraTargetElevation(){return this.transform.elevation}},m.MapMouseEvent=Cr,m.MapTouchEvent=Jo,m.MapWheelEvent=jh,m.Marker=wi,m.NavigationControl=class{constructor(_){this._updateZoomButtons=()=>{const i=this._map.getZoom(),a=i===this._map.getMaxZoom(),d=i===this._map.getMinZoom();this._zoomInButton.disabled=a,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",a.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,a)=>{const d=this._map._getUIString(`NavigationControl.${a}`);i.title=d,i.setAttribute("aria-label",d)},this.options=c.e({},su,_),this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),L.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),L.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=L.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(_){return this._map=_,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ed(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){L.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(_,i){const a=L.create("button",_,this._container);return a.type="button",a.addEventListener("click",i),a}},m.Popup=class extends c.E{constructor(_){super(),this.remove=()=>(this._content&&L.remove(this._content),this._container&&(L.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new c.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var a;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=L.create("div","maplibregl-popup",this._map.getContainer()),this._tip=L.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?td(this._lngLat,this._flatPos,this._map.transform):(a=this._lngLat)===null||a===void 0?void 0:a.wrap(),this._trackPointer&&!i)return;const d=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let p=this.options.anchor;const v=wt(this.options.offset);if(!p){const S=this._container.offsetWidth,I=this._container.offsetHeight;let z;z=d.y+v.bottom.y<I?["top"]:d.y>this._map.transform.height-I?["bottom"]:[],d.x<S/2?z.push("left"):d.x>this._map.transform.width-S/2&&z.push("right"),p=z.length===0?"bottom":z.join("-")}let w=d.add(v[p]);this.options.subpixelPositioning||(w=w.round()),L.setTransform(this._container,`${au[p]} translate(${w.x}px,${w.y}px)`),So(this._container,p,"popup")},this._onClose=()=>{this.remove()},this.options=c.e(Object.create(Hn),_)}addTo(_){return this._map&&this.remove(),this._map=_,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new c.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(_){return this._lngLat=c.M.convert(_),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(_){return this.setDOMContent(document.createTextNode(_))}setHTML(_){const i=document.createDocumentFragment(),a=document.createElement("body");let d;for(a.innerHTML=_;d=a.firstChild,d;)i.appendChild(d);return this.setDOMContent(i)}getMaxWidth(){var _;return(_=this._container)===null||_===void 0?void 0:_.style.maxWidth}setMaxWidth(_){return this.options.maxWidth=_,this._update(),this}setDOMContent(_){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=L.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(_),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(_){return this._container&&this._container.classList.add(_),this}removeClassName(_){return this._container&&this._container.classList.remove(_),this}setOffset(_){return this.options.offset=_,this._update(),this}toggleClassName(_){if(this._container)return this._container.classList.toggle(_)}setSubpixelPositioning(_){this.options.subpixelPositioning=_}_createCloseButton(){this.options.closeButton&&(this._closeButton=L.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const _=this._container.querySelector(zl);_&&_.focus()}},m.RasterDEMTileSource=tt,m.RasterTileSource=He,m.ScaleControl=class{constructor(_){this._onMove=()=>{lu(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,lu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},id),_)}getDefaultPosition(){return"bottom-left"}onAdd(_){return this._map=_,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-scale",_.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){L.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=eu,m.Style=il,m.TerrainControl=class{constructor(_){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=_}onAdd(_){return this._map=_,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=L.create("button","maplibregl-ctrl-terrain",this._container),L.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){L.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=Yc,m.TwoFingersTouchRotateHandler=Jc,m.TwoFingersTouchZoomHandler=Ml,m.TwoFingersTouchZoomRotateHandler=ru,m.VectorTileSource=le,m.VideoSource=We,m.addSourceType=(_,i)=>c._(void 0,void 0,void 0,function*(){if(xt(_))throw new Error(`A source type called "${_}" already exists.`);((a,d)=>{Tt[a]=d})(_,i)}),m.clearPrewarmedResources=function(){const _=Oi;_&&(_.isPreloaded()&&_.numActive()===1?(_.release(jt),Oi=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.getMaxParallelImageRequests=function(){return c.a.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return Gt().getRTLTextPluginStatus()},m.getVersion=function(){return At},m.getWorkerCount=function(){return Si.workerCount},m.getWorkerUrl=function(){return c.a.WORKER_URL},m.importScriptInWorkers=function(_){return Br().broadcast("IS",_)},m.prewarm=function(){Pi().acquire(jt)},m.setMaxParallelImageRequests=function(_){c.a.MAX_PARALLEL_IMAGE_REQUESTS=_},m.setRTLTextPlugin=function(_,i){return Gt().setRTLTextPlugin(_,i)},m.setWorkerCount=function(_){Si.workerCount=_},m.setWorkerUrl=function(_){c.a.WORKER_URL=_}});var g=s;return g})})(Sw);var Iw=Sw.exports;const N5=V5(Iw),ax=["3036","3622","3623","3624","3631","3641","3653","3724","3725","3741","3823","3824","3831","3841","3926","3927","3928","3942","4027","4028","4040","4042","4128","4129","4142","4229","4230","4328","4329","4429","4440","4529","4530","4531","4540","4629","4630","4631","4728","4729","4730","4731","4739","4740","4828","4829","4830","4831","4839","4928","4929","4930","4931","4932","4933","4934","4939","5029","5030","5031","5032","5033","5034","5035","5036","5038","5039","5129","5130","5131","5132","5133","5134","5135","5136","5137","5138","5139","5229","5231","5232","5233","5234","5235","5236","5237","5238","5239","5240","5332","5333","5334","5335","5336","5337","5338","5339","5340","5432","5433","5435","5436","5437","5438","5439","5440","5531","5536","5537","5538","5539","5540","5541","5636","5637","5638","5639","5640","5641","5738","5739","5740","5741","5839","5840","5841","5939","5940","5941","5942","6039","6040","6041","6139","6140","6141","6239","6240","6241","6243","6339","6340","6341","6342","6343","6439","6440","6441","6442","6443","6444","6445","6540","6541","6542","6543","6544","6545","6546","6641","6642","6643","6644","6645","6646","6647","6740","6741","6742","6747","6748","6840","6841","6842","6847","6848"],Ce={LEVEL_80000:{LEVEL:8e4,DIGIT:4,DISTANCE:{LAT:40/60,LNG:1},SECTION:{X:{MIN:22,MAX:53},Y:{MIN:30,MAX:68},LAT:{MIN:20},LNG:{MIN:122}}},LEVEL_10000:{LEVEL:1e4,DIGIT:6,RANGE:{MIN:0,MAX:7},DISTANCE:{LAT:5/60,LNG:7/60+30/60/60}},LEVEL_5000:{LEVEL:5e3,DIGIT:7,RANGE:{MIN:1,MAX:4},DISTANCE:{LAT:150/60/60,LNG:225/60/60}},LEVEL_2000:{LEVEL:2e3,DIGIT:9,RANGE:{MIN:0,MAX:8},DISTANCE:{LAT:60/60/60,LNG:90/60/60}},LEVEL_1000:{LEVEL:1e3,DIGIT:8,RANGE:{MIN:0,MAX:9},DISTANCE:{LAT:30/60/60,LNG:45/60/60}},LEVEL_500:{LEVEL:500,DIGIT:9,RANGE:{MIN:1,MAX:4},DISTANCE:{LAT:15/60/60,LNG:22.5/60/60}},LEVEL_250:{LEVEL:250,DIGIT:10,RANGE:{MIN:1,MAX:4},DISTANCE:{LAT:7.5/60/60,LNG:11.25/60/60}},LEVEL_125:{LEVEL:125,DIGIT:11,RANGE:{MIN:1,MAX:4},DISTANCE:{LAT:3.75/60/60,LNG:5.625/60/60}}},Yl=Object.values(Ce).map(e=>e.LEVEL),$5=[Ce.LEVEL_10000.LEVEL,Ce.LEVEL_5000.LEVEL,Ce.LEVEL_2000.LEVEL];class Fu{constructor(n,s){Fa(this,"lat");Fa(this,"lng");this.lat=n,this.lng=s}}class Cw{constructor(n,s,u,h){Fa(this,"northLat");Fa(this,"eastLng");Fa(this,"southLat");Fa(this,"westLng");this.northLat=n,this.eastLng=s,this.southLat=u,this.westLng=h}getCenter(){const n=(this.northLat+this.southLat)/2,s=(this.eastLng+this.westLng)/2;return new Fu(n,s)}getNorthEast(){return new Fu(this.northLat,this.eastLng)}getNorthWest(){return new Fu(this.northLat,this.westLng)}getSouthWest(){return new Fu(this.southLat,this.westLng)}getSouthEast(){return new Fu(this.southLat,this.eastLng)}contains(n){const s=n.lat,u=n.lng;return this.southLat<=s&&s<=this.northLat&&this.westLng<=u&&u<=this.eastLng}}class _n{static toCode(n,s,u=Ce.LEVEL_125.LEVEL){if(Yl.includes(u)===!1)throw new Error(`invalid level. available : ${Yl.join(", ")}`);const h=Math.floor(n*60/40),g=n*60%40,m=Math.floor(g/5),c=g%5,T=Math.floor(c*60/30),M=c*60%30,k=Math.floor(M/15),A=M%15,L=Math.floor(A/7.5),H=A%7.5,X=Math.floor(H/3.75),W=Math.floor(s-100),se=s-100-W,Te=Math.floor(se*60/7.5),ye=se*60%7.5,j=Math.floor(ye*60/45),oe=ye*60%45,ee=Math.floor(oe/22.5),ne=oe%22.5,Ie=Math.floor(ne/11.25),Ee=ne%11.25,Me=Math.floor(Ee/5.625),pe=k*2+(ee+1),Ae=L*2+(Ie+1),Le=X*2+(Me+1),Oe=`${h}${W}${m}${Te}${T}${j}${pe}${Ae}${Le}`;if(_n.isValidCode(Oe)===!1)throw new Error(`lat: ${n} and lng: ${s} are invalid location.`);const Ge=Oe.slice(0,Ce.LEVEL_10000.DIGIT);switch(u){case Ce.LEVEL_80000.LEVEL:return Oe.slice(0,Ce.LEVEL_80000.DIGIT);case Ce.LEVEL_10000.LEVEL:return Ge;case Ce.LEVEL_5000.LEVEL:return lx(Ge,n,s,u);case Ce.LEVEL_2000.LEVEL:return lx(Ge,n,s,u);case Ce.LEVEL_1000.LEVEL:return Oe.slice(0,Ce.LEVEL_1000.DIGIT);case Ce.LEVEL_500.LEVEL:return Oe.slice(0,Ce.LEVEL_500.DIGIT);case Ce.LEVEL_250.LEVEL:return Oe.slice(0,Ce.LEVEL_250.DIGIT);default:return Oe}}static toLatLngBounds(n){const s=cx(n),u=s[0],h=s[2];return new Cw(u[1],u[0],h[1],h[0])}static toGeoJSON(n,s={}){const u=cx(n);return j5(u,s)}static getLevel(n){if(_n.isValidCode(n)===!1)throw new Error(`'${n}' is invalid mesh code.`);const s=n.length;return s===Ce.LEVEL_80000.DIGIT?Ce.LEVEL_80000.LEVEL:s===Ce.LEVEL_10000.DIGIT?Ce.LEVEL_10000.LEVEL:s===Ce.LEVEL_5000.DIGIT?Ce.LEVEL_5000.LEVEL:s===Ce.LEVEL_2000.DIGIT&&n[n.length-1]==="5"?Ce.LEVEL_2000.LEVEL:s===Ce.LEVEL_1000.DIGIT?Ce.LEVEL_1000.LEVEL:s===Ce.LEVEL_500.DIGIT?Ce.LEVEL_500.LEVEL:s===Ce.LEVEL_250.DIGIT?Ce.LEVEL_250.LEVEL:Ce.LEVEL_125.LEVEL}static getCodes(n=null,s=null){if(n===null&&s===null)return ax;if(n===null)throw new Error("code is required.");if(s===null)throw new Error("level is required.");if(_n.isValidCode(n)===!1)throw new Error(`'${n}' is invalid mesh code.`);if(Yl.includes(s)===!1)throw new Error(`${s} is invalid level. available : ${Yl.join(", ")}`);const u=_n.getLevel(n);if(u<=s)throw new Error("code level is lower than the specified level.");const h=[];if(u>Ce.LEVEL_10000.LEVEL){for(let g=Ce.LEVEL_10000.RANGE.MIN;g<=Ce.LEVEL_10000.RANGE.MAX;g++)for(let m=Ce.LEVEL_10000.RANGE.MIN;m<=Ce.LEVEL_10000.RANGE.MAX;m++)h.push(`${n}${g}${m}`);if(s===Ce.LEVEL_10000.LEVEL)return h}else h.push(n.slice(0,Ce.LEVEL_10000.DIGIT));if($5.includes(s)){if(s===Ce.LEVEL_5000.LEVEL){const g=[];return h.forEach(m=>{for(let c=Ce.LEVEL_5000.RANGE.MIN;c<=Ce.LEVEL_5000.RANGE.MAX;c++)g.push(`${m}${c}`)}),g}else if(s===Ce.LEVEL_2000.LEVEL){const g=[];return h.forEach(m=>{let c=[0,2,4,6,8],T=[0,2,4,6,8];if(u===Ce.LEVEL_5000.LEVEL){const M=Number(n[6]);M===1?(c=[0,2,4],T=[0,2,4]):M===2?(c=[0,2,4],T=[4,6,8]):M===3?(c=[4,6,8],T=[0,2,4]):M===4&&(c=[4,6,8],T=[4,6,8])}c.forEach(M=>{T.forEach(k=>{g.push(`${m}${M}${k}5`)})})}),g}}else{const g=[];if(u>Ce.LEVEL_1000.LEVEL){let M=Ce.LEVEL_1000.RANGE.MIN,k=Ce.LEVEL_1000.RANGE.MAX,A=Ce.LEVEL_1000.RANGE.MIN,L=Ce.LEVEL_1000.RANGE.MAX;if(u===Ce.LEVEL_5000.LEVEL){const H=Number(n[6]);H===1?(k=(Ce.LEVEL_1000.RANGE.MAX+1)/2,L=(Ce.LEVEL_1000.RANGE.MAX+1)/2):H===2?(k=(Ce.LEVEL_1000.RANGE.MAX+1)/2,A=(Ce.LEVEL_1000.RANGE.MAX+1)/2):H===3?(M=(Ce.LEVEL_1000.RANGE.MAX+1)/2,L=(Ce.LEVEL_1000.RANGE.MAX+1)/2):H===4&&(M=(Ce.LEVEL_1000.RANGE.MAX+1)/2,A=(Ce.LEVEL_1000.RANGE.MAX+1)/2)}else if(u===Ce.LEVEL_2000.LEVEL){const H=Number(n[7]),X=Number(n[6]);M=X,k=X+1,A=H,L=H+1}if(h.forEach(H=>{for(let X=M;X<=k;X++)for(let W=A;W<=L;W++)g.push(`${H}${X}${W}`)}),s===Ce.LEVEL_1000.LEVEL)return g}else g.push(n.slice(0,Ce.LEVEL_1000.DIGIT));const m=[];if(u>Ce.LEVEL_500.LEVEL){if(g.forEach(M=>{for(let k=Ce.LEVEL_500.RANGE.MIN;k<=Ce.LEVEL_500.RANGE.MAX;k++)m.push(`${M}${k}`)}),s===Ce.LEVEL_500.LEVEL)return m}else m.push(n.slice(0,Ce.LEVEL_500.DIGIT));const c=[];if(u>Ce.LEVEL_250.LEVEL){if(m.forEach(M=>{for(let k=Ce.LEVEL_250.RANGE.MIN;k<=Ce.LEVEL_250.RANGE.MAX;k++)c.push(`${M}${k}`)}),s===Ce.LEVEL_250.LEVEL)return c}else c.push(n.slice(0,Ce.LEVEL_250.DIGIT));const T=[];if(u>Ce.LEVEL_125.LEVEL&&(c.forEach(M=>{for(let k=Ce.LEVEL_125.RANGE.MIN;k<=Ce.LEVEL_125.RANGE.MAX;k++)T.push(`${M}${k}`)}),s===Ce.LEVEL_125.LEVEL))return T}}static getCodesWithinBounds(n,s=Ce.LEVEL_80000.LEVEL){if(Yl.includes(s)===!1)throw new Error(`${s} is invalid level. available : ${Yl.join(", ")}`);const u=n.getNorthEast(),h=n.getSouthWest(),g=u.lat-h.lat,m=u.lng-h.lng,c=U5(s),T=c.LAT,M=c.LNG,k=Math.ceil(g/T)+1,A=Math.ceil(m/M)+1,L=[],H=1e-8;for(let X=0;X<=k;X++)for(let W=0;W<=A;W++){const se=Math.min(Math.max(h.lat+T*X-T/2,h.lat+H),u.lat-H),Te=Math.min(Math.max(h.lng+M*W-M/2,h.lng+H),u.lng-H);try{const ye=_n.toCode(se,Te,s);L.includes(ye)||L.push(ye)}catch{}}return L}static isValidCode(n){if(n.length!==Ce.LEVEL_80000.DIGIT&&n.length!==Ce.LEVEL_10000.DIGIT&&n.length!==Ce.LEVEL_5000.DIGIT&&n.length!==Ce.LEVEL_2000.DIGIT&&n.length!==Ce.LEVEL_1000.DIGIT&&n.length!==Ce.LEVEL_500.DIGIT&&n.length!==Ce.LEVEL_250.DIGIT&&n.length!==Ce.LEVEL_125.DIGIT||!ax.includes(n.slice(0,Ce.LEVEL_80000.DIGIT)))return!1;if(n.length>=Ce.LEVEL_10000.DIGIT){const s=Number(n[4]),u=Number(n[5]);if(s<Ce.LEVEL_10000.RANGE.MIN||s>Ce.LEVEL_10000.RANGE.MAX||u<Ce.LEVEL_10000.RANGE.MIN||u>Ce.LEVEL_10000.RANGE.MAX)return!1}if(Aw(n)){if(n.length===Ce.LEVEL_5000.DIGIT){const s=Number(n[6]);if(s<Ce.LEVEL_5000.RANGE.MIN||s>Ce.LEVEL_5000.RANGE.MAX)return!1}else if(n.length===Ce.LEVEL_2000.DIGIT){const s=Number(n[6]),u=Number(n[7]),h=[0,2,4,6,8];if(!h.includes(s)||!h.includes(u))return!1}}else{if(n.length>=Ce.LEVEL_1000.DIGIT){const s=Number(n[6]),u=Number(n[7]);if(s<Ce.LEVEL_1000.RANGE.MIN||s>Ce.LEVEL_1000.RANGE.MAX||u<Ce.LEVEL_1000.RANGE.MIN||u>Ce.LEVEL_1000.RANGE.MAX)return!1}if(n.length>=Ce.LEVEL_500.DIGIT){const s=Number(n[8]);if(s<Ce.LEVEL_500.RANGE.MIN||s>Ce.LEVEL_500.RANGE.MAX)return!1}if(n.length>=Ce.LEVEL_250.DIGIT){const s=Number(n[9]);if(s<Ce.LEVEL_250.RANGE.MIN||s>Ce.LEVEL_250.RANGE.MAX)return!1}if(n.length>=Ce.LEVEL_125.DIGIT){const s=Number(n[10]);if(s<Ce.LEVEL_125.RANGE.MIN||s>Ce.LEVEL_125.RANGE.MAX)return!1}}return!0}}function lx(e,n,s,u){let h=e;const m=_n.toLatLngBounds(e).getSouthWest();if(u===Ce.LEVEL_5000.LEVEL){const c=Math.floor((n-m.lat)/Ce.LEVEL_5000.DISTANCE.LAT),T=Math.floor((s-m.lng)/Ce.LEVEL_5000.DISTANCE.LNG);T===0&&c===0?h+="1":T===1&&c===0?h+="2":T===0&&c===1?h+="3":h+="4"}else if(u===Ce.LEVEL_2000.LEVEL){const c=Math.floor((n-m.lat)/Ce.LEVEL_2000.DISTANCE.LAT)*2,T=Math.floor((s-m.lng)/Ce.LEVEL_2000.DISTANCE.LNG)*2;h+=`${c}${T}5`}return h}function cx(e){if(_n.isValidCode(e)===!1)throw new Error(`'${e}' is invalid mesh code.`);const n=Number(e.slice(2,4)),s=Number(e.slice(0,2));let u=0,h=0,g=0,m=0;if(e.length>=Ce.LEVEL_80000.DIGIT&&(u=Ce.LEVEL_80000.SECTION.LNG.MIN+(n-Ce.LEVEL_80000.SECTION.X.MIN)*Ce.LEVEL_80000.DISTANCE.LNG,h=u+Ce.LEVEL_80000.DISTANCE.LNG,g=Ce.LEVEL_80000.SECTION.LAT.MIN+(s-Ce.LEVEL_80000.SECTION.Y.MIN)*Ce.LEVEL_80000.DISTANCE.LAT,m=g+Ce.LEVEL_80000.DISTANCE.LAT),e.length>=Ce.LEVEL_10000.DIGIT){const A=Number(e[5]),L=Number(e[4]);u+=A*Ce.LEVEL_10000.DISTANCE.LNG,h=u+Ce.LEVEL_10000.DISTANCE.LNG,g+=L*Ce.LEVEL_10000.DISTANCE.LAT,m=g+Ce.LEVEL_10000.DISTANCE.LAT}if(Aw(e)){if(e.length===Ce.LEVEL_5000.DIGIT){const A=Number(e[6]),L=A===1||A===3?0:1,H=A===1||A===2?0:1;u+=L*Ce.LEVEL_5000.DISTANCE.LNG,h=u+Ce.LEVEL_5000.DISTANCE.LNG,g+=H*Ce.LEVEL_5000.DISTANCE.LAT,m=g+Ce.LEVEL_5000.DISTANCE.LAT}else if(e.length===Ce.LEVEL_2000.DIGIT){const A=Number(e[7]),L=Number(e[6]);u+=A/2*Ce.LEVEL_2000.DISTANCE.LNG,h=u+Ce.LEVEL_2000.DISTANCE.LNG,g+=L/2*Ce.LEVEL_2000.DISTANCE.LAT,m=g+Ce.LEVEL_2000.DISTANCE.LAT}}else{if(e.length>=Ce.LEVEL_1000.DIGIT){const A=Number(e[7]),L=Number(e[6]);u+=A*Ce.LEVEL_1000.DISTANCE.LNG,h=u+Ce.LEVEL_1000.DISTANCE.LNG,g+=L*Ce.LEVEL_1000.DISTANCE.LAT,m=g+Ce.LEVEL_1000.DISTANCE.LAT}if(e.length>=Ce.LEVEL_500.DIGIT){const A=Number(e[8]),L=A===1||A===3?0:1,H=A===1||A===2?0:1;u+=L*Ce.LEVEL_500.DISTANCE.LNG,h=u+Ce.LEVEL_500.DISTANCE.LNG,g+=H*Ce.LEVEL_500.DISTANCE.LAT,m=g+Ce.LEVEL_500.DISTANCE.LAT}if(e.length>=Ce.LEVEL_250.DIGIT){const A=Number(e[9]),L=A===1||A===3?0:1,H=A===1||A===2?0:1;u+=L*Ce.LEVEL_250.DISTANCE.LNG,h=u+Ce.LEVEL_250.DISTANCE.LNG,g+=H*Ce.LEVEL_250.DISTANCE.LAT,m=g+Ce.LEVEL_250.DISTANCE.LAT}if(e.length>=Ce.LEVEL_125.DIGIT){const A=Number(e[10]),L=A===1||A===3?0:1,H=A===1||A===2?0:1;u+=L*Ce.LEVEL_125.DISTANCE.LNG,h=u+Ce.LEVEL_125.DISTANCE.LNG,g+=H*Ce.LEVEL_125.DISTANCE.LAT,m=g+Ce.LEVEL_125.DISTANCE.LAT}}return[[h,m],[u,m],[u,g],[h,g]]}function j5(e,n={}){return e.push(e[0]),{type:"Feature",properties:n,geometry:{type:"Polygon",coordinates:[e]}}}function Aw(e){return e.length===Ce.LEVEL_10000.DIGIT||e.length===Ce.LEVEL_5000.DIGIT||e.length===Ce.LEVEL_2000.DIGIT&&e[e.length-1]==="5"}function U5(e){switch(e){case Ce.LEVEL_10000.LEVEL:return Ce.LEVEL_10000.DISTANCE;case Ce.LEVEL_5000.LEVEL:return Ce.LEVEL_5000.DISTANCE;case Ce.LEVEL_2000.LEVEL:return Ce.LEVEL_2000.DISTANCE;case Ce.LEVEL_1000.LEVEL:return Ce.LEVEL_1000.DISTANCE;case Ce.LEVEL_500.LEVEL:return Ce.LEVEL_500.DISTANCE;case Ce.LEVEL_250.LEVEL:return Ce.LEVEL_250.DISTANCE;case Ce.LEVEL_125.LEVEL:return Ce.LEVEL_125.DISTANCE;default:return Ce.LEVEL_80000.DISTANCE}}const Kn={toCode:_n.toCode,toLatLngBounds:_n.toLatLngBounds,toGeoJSON:_n.toGeoJSON,getLevel:_n.getLevel,getCodes:_n.getCodes,getCodesWithinBounds:_n.getCodesWithinBounds,isValidCode:_n.isValidCode};var lc=Math.pow,ln=(e,n,s)=>new Promise((u,h)=>{var g=T=>{try{c(s.next(T))}catch(M){h(M)}},m=T=>{try{c(s.throw(T))}catch(M){h(M)}},c=T=>T.done?u(T.value):Promise.resolve(T.value).then(g,m);c((s=s.apply(e,n)).next())}),On=Uint8Array,Qu=Uint16Array,q5=Int32Array,kw=new On([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mw=new On([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),H5=new On([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lw=function(e,n){for(var s=new Qu(31),u=0;u<31;++u)s[u]=n+=1<<e[u-1];for(var h=new q5(s[30]),u=1;u<30;++u)for(var g=s[u];g<s[u+1];++g)h[g]=g-s[u]<<5|u;return{b:s,r:h}},Pw=Lw(kw,2),zw=Pw.b,G5=Pw.r;zw[28]=258,G5[258]=28;var Z5=Lw(Mw,0),W5=Z5.b,Dw=new Qu(32768);for(vi=0;vi<32768;++vi)cs=(vi&43690)>>1|(vi&21845)<<1,cs=(cs&52428)>>2|(cs&13107)<<2,cs=(cs&61680)>>4|(cs&3855)<<4,Dw[vi]=((cs&65280)>>8|(cs&255)<<8)>>1;var cs,vi,eh=function(e,n,s){for(var u=e.length,h=0,g=new Qu(n);h<u;++h)e[h]&&++g[e[h]-1];var m=new Qu(n);for(h=1;h<n;++h)m[h]=m[h-1]+g[h-1]<<1;var c;{c=new Qu(1<<n);var T=15-n;for(h=0;h<u;++h)if(e[h])for(var M=h<<4|e[h],k=n-e[h],A=m[e[h]-1]++<<k,L=A|(1<<k)-1;A<=L;++A)c[Dw[A]>>T]=M}return c},vh=new On(288);for(vi=0;vi<144;++vi)vh[vi]=8;var vi;for(vi=144;vi<256;++vi)vh[vi]=9;var vi;for(vi=256;vi<280;++vi)vh[vi]=7;var vi;for(vi=280;vi<288;++vi)vh[vi]=8;var vi,Rw=new On(32);for(vi=0;vi<32;++vi)Rw[vi]=5;var vi,K5=eh(vh,9),X5=eh(Rw,5),Mm=function(e){for(var n=e[0],s=1;s<e.length;++s)e[s]>n&&(n=e[s]);return n},po=function(e,n,s){var u=n/8|0;return(e[u]|e[u+1]<<8)>>(n&7)&s},Lm=function(e,n){var s=n/8|0;return(e[s]|e[s+1]<<8|e[s+2]<<16)>>(n&7)},J5=function(e){return(e+7)/8|0},Y5=function(e,n,s){(s==null||s>e.length)&&(s=e.length);var u=new On(s-n);return u.set(e.subarray(n,s)),u},Q5=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Rn=function(e,n,s){var u=new Error(n||Q5[e]);if(u.code=e,Error.captureStackTrace&&Error.captureStackTrace(u,Rn),!s)throw u;return u},My=function(e,n,s,u){var h=e.length,g=0;if(!h||n.f&&!n.l)return s||new On(0);var m=!s||n.i!=2,c=n.i;s||(s=new On(h*3));var T=function(pr){var Fr=s.length;if(pr>Fr){var lr=new On(Math.max(Fr*2,pr));lr.set(s),s=lr}},M=n.f||0,k=n.p||0,A=n.b||0,L=n.l,H=n.d,X=n.m,W=n.n,se=h*8;do{if(!L){M=po(e,k,1);var Te=po(e,k+1,3);if(k+=3,Te)if(Te==1)L=K5,H=X5,X=9,W=5;else if(Te==2){var ee=po(e,k,31)+257,ne=po(e,k+10,15)+4,Ie=ee+po(e,k+5,31)+1;k+=14;for(var Ee=new On(Ie),Me=new On(19),pe=0;pe<ne;++pe)Me[H5[pe]]=po(e,k+pe*3,7);k+=ne*3;for(var Ae=Mm(Me),Le=(1<<Ae)-1,Oe=eh(Me,Ae),pe=0;pe<Ie;){var Ge=Oe[po(e,k,Le)];k+=Ge&15;var ye=Ge>>4;if(ye<16)Ee[pe++]=ye;else{var rt=0,Ke=0;for(ye==16?(Ke=3+po(e,k,3),k+=2,rt=Ee[pe-1]):ye==17?(Ke=3+po(e,k,7),k+=3):ye==18&&(Ke=11+po(e,k,127),k+=7);Ke--;)Ee[pe++]=rt}}var dt=Ee.subarray(0,ee),nt=Ee.subarray(ee);X=Mm(dt),W=Mm(nt),L=eh(dt,X),H=eh(nt,W)}else Rn(1);else{var ye=J5(k)+4,j=e[ye-4]|e[ye-3]<<8,oe=ye+j;if(oe>h){c&&Rn(0);break}m&&T(A+j),s.set(e.subarray(ye,oe),A),n.b=A+=j,n.p=k=oe*8,n.f=M;continue}if(k>se){c&&Rn(0);break}}m&&T(A+131072);for(var ti=(1<<X)-1,Ut=(1<<W)-1,Nt=k;;Nt=k){var rt=L[Lm(e,k)&ti],jt=rt>>4;if(k+=rt&15,k>se){c&&Rn(0);break}if(rt||Rn(2),jt<256)s[A++]=jt;else if(jt==256){Nt=k,L=null;break}else{var Si=jt-254;if(jt>264){var pe=jt-257,Qi=kw[pe];Si=po(e,k,(1<<Qi)-1)+zw[pe],k+=Qi}var Oi=H[Lm(e,k)&Ut],fi=Oi>>4;Oi||Rn(3),k+=Oi&15;var nt=W5[fi];if(fi>3){var Qi=Mw[fi];nt+=Lm(e,k)&(1<<Qi)-1,k+=Qi}if(k>se){c&&Rn(0);break}m&&T(A+131072);var Pi=A+Si;if(A<nt){var Bi=g-nt,Br=Math.min(nt,Pi);for(Bi+A<0&&Rn(3);A<Br;++A)s[A]=u[Bi+A]}for(;A<Pi;A+=4)s[A]=s[A-nt],s[A+1]=s[A+1-nt],s[A+2]=s[A+2-nt],s[A+3]=s[A+3-nt];A=Pi}}n.l=L,n.p=Nt,n.b=A,n.f=M,L&&(M=1,n.m=X,n.d=H,n.n=W)}while(!M);return A==s.length?s:Y5(s,0,A)},eD=new On(0),tD=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&Rn(6,"invalid gzip data");var n=e[3],s=10;n&4&&(s+=(e[10]|e[11]<<8)+2);for(var u=(n>>3&1)+(n>>4&1);u>0;u-=!e[s++]);return s+(n&2)},iD=function(e){var n=e.length;return(e[n-4]|e[n-3]<<8|e[n-2]<<16|e[n-1]<<24)>>>0},rD=function(e,n){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Rn(6,"invalid zlib data"),(e[1]>>5&1)==+!n&&Rn(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function nD(e,n){return My(e,{i:2},n,n)}function oD(e,n){var s=tD(e);return s+8>e.length&&Rn(6,"invalid gzip data"),My(e.subarray(s,-8),{i:2},new On(iD(e)),n)}function sD(e,n){return My(e.subarray(rD(e,n),-4),{i:2},n,n)}function Tg(e,n){return e[0]==31&&e[1]==139&&e[2]==8?oD(e,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?nD(e,n):sD(e,n)}var aD=typeof TextDecoder<"u"&&new TextDecoder,lD=0;try{aD.decode(eD,{stream:!0}),lD=1}catch{}var Ow=(e,n)=>e*lc(2,n),Vu=(e,n)=>Math.floor(e/lc(2,n)),Cf=(e,n)=>Ow(e.getUint16(n+1,!0),8)+e.getUint8(n),Bw=(e,n)=>Ow(e.getUint32(n+2,!0),16)+e.getUint16(n,!0),cD=(e,n,s,u,h)=>{if(e!==u.getUint8(h))return e-u.getUint8(h);const g=Cf(u,h+1);if(n!==g)return n-g;const m=Cf(u,h+4);return s!==m?s-m:0},uD=(e,n,s,u)=>{const h=Fw(e,n|128,s,u);return h?{z:n,x:s,y:u,offset:h[0],length:h[1],isDir:!0}:null},ux=(e,n,s,u)=>{const h=Fw(e,n,s,u);return h?{z:n,x:s,y:u,offset:h[0],length:h[1],isDir:!1}:null},Fw=(e,n,s,u)=>{let h=0,g=e.byteLength/17-1;for(;h<=g;){const m=g+h>>1,c=cD(n,s,u,e,m*17);if(c>0)h=m+1;else if(c<0)g=m-1;else return[Bw(e,m*17+7),e.getUint32(m*17+13,!0)]}return null},hD=(e,n)=>e.isDir&&!n.isDir?1:!e.isDir&&n.isDir?-1:e.z!==n.z?e.z-n.z:e.x!==n.x?e.x-n.x:e.y-n.y,Vw=(e,n)=>{const s=e.getUint8(n*17);return{z:s&127,x:Cf(e,n*17+1),y:Cf(e,n*17+4),offset:Bw(e,n*17+7),length:e.getUint32(n*17+13,!0),isDir:s>>7===1}},hx=e=>{const n=[],s=new DataView(e);for(let u=0;u<s.byteLength/17;u++)n.push(Vw(s,u));return dD(n)},dD=e=>{e.sort(hD);const n=new ArrayBuffer(17*e.length),s=new Uint8Array(n);for(let u=0;u<e.length;u++){const h=e[u];let g=h.z;h.isDir&&(g=g|128),s[u*17]=g,s[u*17+1]=h.x&255,s[u*17+2]=h.x>>8&255,s[u*17+3]=h.x>>16&255,s[u*17+4]=h.y&255,s[u*17+5]=h.y>>8&255,s[u*17+6]=h.y>>16&255,s[u*17+7]=h.offset&255,s[u*17+8]=Vu(h.offset,8)&255,s[u*17+9]=Vu(h.offset,16)&255,s[u*17+10]=Vu(h.offset,24)&255,s[u*17+11]=Vu(h.offset,32)&255,s[u*17+12]=Vu(h.offset,48)&255,s[u*17+13]=h.length&255,s[u*17+14]=h.length>>8&255,s[u*17+15]=h.length>>16&255,s[u*17+16]=h.length>>24&255}return n},fD=(e,n)=>{if(e.byteLength<17)return null;const s=e.byteLength/17,u=Vw(e,s-1);if(u.isDir){const h=u.z,g=n.z-h,m=Math.trunc(n.x/(1<<g)),c=Math.trunc(n.y/(1<<g));return{z:h,x:m,y:c}}return null};function pD(e){return ln(this,null,function*(){const n=yield e.getBytes(0,512e3),s=new DataView(n.data),u=s.getUint32(4,!0),h=s.getUint16(8,!0),g=new TextDecoder("utf-8"),m=JSON.parse(g.decode(new DataView(n.data,10,u)));let c=0;m.compression==="gzip"&&(c=2);let T=0;"minzoom"in m&&(T=+m.minzoom);let M=0;"maxzoom"in m&&(M=+m.maxzoom);let k=0,A=0,L=0,H=-180,X=-85,W=180,se=85;if(m.bounds){const ye=m.bounds.split(",");H=+ye[0],X=+ye[1],W=+ye[2],se=+ye[3]}if(m.center){const ye=m.center.split(",");k=+ye[0],A=+ye[1],L=+ye[2]}return{specVersion:s.getUint16(2,!0),rootDirectoryOffset:10+u,rootDirectoryLength:h*17,jsonMetadataOffset:10,jsonMetadataLength:u,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:c,tileType:1,minZoom:T,maxZoom:M,minLon:H,minLat:X,maxLon:W,maxLat:se,centerZoom:L,centerLon:k,centerLat:A,etag:n.etag}})}function mD(e,n,s,u,h,g,m){return ln(this,null,function*(){let c=yield s.getArrayBuffer(n,e.rootDirectoryOffset,e.rootDirectoryLength,e);e.specVersion===1&&(c=hx(c));const T=ux(new DataView(c),u,h,g);if(T){let A=(yield n.getBytes(T.offset,T.length,m)).data;const L=new DataView(A);return L.getUint8(0)===31&&L.getUint8(1)===139&&(A=Tg(new Uint8Array(A))),{data:A}}const M=fD(new DataView(c),{z:u,x:h,y:g});if(M){const k=uD(new DataView(c),M.z,M.x,M.y);if(k){let A=yield s.getArrayBuffer(n,k.offset,k.length,e);e.specVersion===1&&(A=hx(A));const L=ux(new DataView(A),u,h,g);if(L){let X=(yield n.getBytes(L.offset,L.length,m)).data;const W=new DataView(X);return W.getUint8(0)===31&&W.getUint8(1)===139&&(X=Tg(new Uint8Array(X))),{data:X}}}}})}var Nw={getHeader:pD,getZxy:mD},gD=e=>(n,s)=>{if(s instanceof AbortController)return e(n,s);const u=new AbortController;return e(n,u).then(h=>s(void 0,h.data,h.cacheControl||"",h.expires||""),h=>s(h)).catch(h=>s(h)),{cancel:()=>u.abort()}},yD=class{constructor(){this.tilev4=(e,n)=>ln(this,null,function*(){if(e.type==="json"){const A=e.url.substr(10);let L=this.tiles.get(A);L||(L=new dx(A),this.tiles.set(A,L));const H=yield L.getHeader();return{data:{tiles:[`${e.url}/{z}/{x}/{y}`],minzoom:H.minZoom,maxzoom:H.maxZoom,bounds:[H.minLon,H.minLat,H.maxLon,H.maxLat]}}}const s=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),u=e.url.match(s);if(!u)throw new Error("Invalid PMTiles protocol URL");const h=u[1];let g=this.tiles.get(h);g||(g=new dx(h),this.tiles.set(h,g));const m=u[2],c=u[3],T=u[4],M=yield g.getHeader(),k=yield g==null?void 0:g.getZxy(+m,+c,+T,n.signal);return k?{data:new Uint8Array(k.data),cacheControl:k.cacheControl,expires:k.expires}:M.tileType===1?{data:new Uint8Array}:{data:null}}),this.tile=gD(this.tilev4),this.tiles=new Map}add(e){this.tiles.set(e.source.getKey(),e)}get(e){return this.tiles.get(e)}};function Ql(e,n){return(n>>>0)*4294967296+(e>>>0)}function _D(e,n){const s=n.buf;let u=s[n.pos++],h=(u&112)>>4;if(u<128||(u=s[n.pos++],h|=(u&127)<<3,u<128)||(u=s[n.pos++],h|=(u&127)<<10,u<128)||(u=s[n.pos++],h|=(u&127)<<17,u<128)||(u=s[n.pos++],h|=(u&127)<<24,u<128)||(u=s[n.pos++],h|=(u&1)<<31,u<128))return Ql(e,h);throw new Error("Expected varint not more than 10 bytes")}function Nu(e){const n=e.buf;let s=n[e.pos++],u=s&127;return s<128||(s=n[e.pos++],u|=(s&127)<<7,s<128)||(s=n[e.pos++],u|=(s&127)<<14,s<128)||(s=n[e.pos++],u|=(s&127)<<21,s<128)?u:(s=n[e.pos],u|=(s&15)<<28,_D(u,e))}function vD(e,n,s,u){if(u===0){s===1&&(n[0]=e-1-n[0],n[1]=e-1-n[1]);const h=n[0];n[0]=n[1],n[1]=h}}var xD=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function bD(e,n,s){if(e>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(n>lc(2,e)-1||s>lc(2,e)-1)throw Error("tile x/y outside zoom level bounds");const u=xD[e],h=lc(2,e);let g=0,m=0,c=0;const T=[n,s];let M=h/2;for(;M>0;)g=(T[0]&M)>0?1:0,m=(T[1]&M)>0?1:0,c+=M*M*(3*g^m),vD(M,T,g,m),M=M/2;return u+c}function $w(e,n){return ln(this,null,function*(){if(n===1||n===0)return e;if(n===2){if(typeof globalThis.DecompressionStream>"u")return Tg(new Uint8Array(e));const s=new Response(e).body;if(!s)throw Error("Failed to read response stream");const u=s.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(u).arrayBuffer()}throw Error("Compression method not supported")})}var wD=127;function ED(e,n){let s=0,u=e.length-1;for(;s<=u;){const h=u+s>>1,g=n-e[h].tileId;if(g>0)s=h+1;else if(g<0)u=h-1;else return e[h]}return u>=0&&(e[u].runLength===0||n-e[u].tileId<e[u].runLength)?e[u]:null}var SD=class{constructor(e,n=new Headers){this.url=e,this.customHeaders=n,this.mustReload=!1}getKey(){return this.url}setHeaders(e){this.customHeaders=e}getBytes(e,n,s,u){return ln(this,null,function*(){let h,g;s?g=s:(h=new AbortController,g=h.signal);const m=new Headers(this.customHeaders);m.set("range",`bytes=${e}-${e+n-1}`);let c;this.mustReload&&(c="reload");let T=yield fetch(this.url,{signal:g,cache:c,headers:m});if(e===0&&T.status===416){const L=T.headers.get("Content-Range");if(!L||!L.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const H=+L.substr(8);T=yield fetch(this.url,{signal:g,cache:"reload",headers:{range:`bytes=0-${H-1}`}})}let M=T.headers.get("Etag");if(M!=null&&M.startsWith("W/")&&(M=null),T.status===416||u&&M&&M!==u)throw this.mustReload=!0,new Ig(u);if(T.status>=300)throw Error(`Bad response code: ${T.status}`);const k=T.headers.get("Content-Length");if(T.status===200&&(!k||+k>n))throw h&&h.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield T.arrayBuffer(),etag:M||void 0,cacheControl:T.headers.get("Cache-Control")||void 0,expires:T.headers.get("Expires")||void 0}})}};function mo(e,n){const s=e.getUint32(n+4,!0),u=e.getUint32(n+0,!0);return s*lc(2,32)+u}function TD(e,n){const s=new DataView(e),u=s.getUint8(7);if(u>3)throw Error(`Archive is spec version ${u} but this library supports up to spec version 3`);return{specVersion:u,rootDirectoryOffset:mo(s,8),rootDirectoryLength:mo(s,16),jsonMetadataOffset:mo(s,24),jsonMetadataLength:mo(s,32),leafDirectoryOffset:mo(s,40),leafDirectoryLength:mo(s,48),tileDataOffset:mo(s,56),tileDataLength:mo(s,64),numAddressedTiles:mo(s,72),numTileEntries:mo(s,80),numTileContents:mo(s,88),clustered:s.getUint8(96)===1,internalCompression:s.getUint8(97),tileCompression:s.getUint8(98),tileType:s.getUint8(99),minZoom:s.getUint8(100),maxZoom:s.getUint8(101),minLon:s.getInt32(102,!0)/1e7,minLat:s.getInt32(106,!0)/1e7,maxLon:s.getInt32(110,!0)/1e7,maxLat:s.getInt32(114,!0)/1e7,centerZoom:s.getUint8(118),centerLon:s.getInt32(119,!0)/1e7,centerLat:s.getInt32(123,!0)/1e7,etag:n}}function jw(e){const n={buf:new Uint8Array(e),pos:0},s=Nu(n),u=[];let h=0;for(let g=0;g<s;g++){const m=Nu(n);u.push({tileId:h+m,offset:0,length:0,runLength:1}),h+=m}for(let g=0;g<s;g++)u[g].runLength=Nu(n);for(let g=0;g<s;g++)u[g].length=Nu(n);for(let g=0;g<s;g++){const m=Nu(n);m===0&&g>0?u[g].offset=u[g-1].offset+u[g-1].length:u[g].offset=m-1}return u}function ID(e){const n=new DataView(e);return n.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):n.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Ig=class extends Error{};function CD(e,n){return ln(this,null,function*(){const s=yield e.getBytes(0,16384);if(new DataView(s.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(ID(s.data)<3)return[yield Nw.getHeader(e)];const h=s.data.slice(0,wD),g=TD(h,s.etag),m=s.data.slice(g.rootDirectoryOffset,g.rootDirectoryOffset+g.rootDirectoryLength),c=`${e.getKey()}|${g.etag||""}|${g.rootDirectoryOffset}|${g.rootDirectoryLength}`,T=jw(yield n(m,g.internalCompression));return[g,[c,T.length,T]]})}function AD(e,n,s,u,h){return ln(this,null,function*(){const g=yield e.getBytes(s,u,void 0,h.etag),m=yield n(g.data,h.internalCompression),c=jw(m);if(c.length===0)throw new Error("Empty directory is invalid");return c})}var kD=class{constructor(e=100,n=!0,s=$w){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=e,this.counter=1,this.decompress=s}getHeader(e){return ln(this,null,function*(){const n=e.getKey(),s=this.cache.get(n);if(s)return s.lastUsed=this.counter++,yield s.data;const u=new Promise((h,g)=>{CD(e,this.decompress).then(m=>{m[1]&&this.cache.set(m[1][0],{lastUsed:this.counter++,data:Promise.resolve(m[1][2])}),h(m[0]),this.prune()}).catch(m=>{g(m)})});return this.cache.set(n,{lastUsed:this.counter++,data:u}),u})}getDirectory(e,n,s,u){return ln(this,null,function*(){const h=`${e.getKey()}|${u.etag||""}|${n}|${s}`,g=this.cache.get(h);if(g)return g.lastUsed=this.counter++,yield g.data;const m=new Promise((c,T)=>{AD(e,this.decompress,n,s,u).then(M=>{c(M),this.prune()}).catch(M=>{T(M)})});return this.cache.set(h,{lastUsed:this.counter++,data:m}),m})}getArrayBuffer(e,n,s,u){return ln(this,null,function*(){const h=`${e.getKey()}|${u.etag||""}|${n}|${s}`,g=this.cache.get(h);if(g)return g.lastUsed=this.counter++,yield g.data;const m=new Promise((c,T)=>{e.getBytes(n,s,void 0,u.etag).then(M=>{c(M.data),this.cache.has(h),this.prune()}).catch(M=>{T(M)})});return this.cache.set(h,{lastUsed:this.counter++,data:m}),m})}prune(){if(this.cache.size>=this.maxCacheEntries){let e=1/0,n;this.cache.forEach((s,u)=>{s.lastUsed<e&&(e=s.lastUsed,n=u)}),n&&this.cache.delete(n)}}invalidate(e){return ln(this,null,function*(){const n=e.getKey();if(this.invalidations.get(n))return yield this.invalidations.get(n);this.cache.delete(e.getKey());const s=new Promise((u,h)=>{this.getHeader(e).then(g=>{u(),this.invalidations.delete(n)}).catch(g=>{h(g)})});this.invalidations.set(n,s)})}},dx=class{constructor(e,n,s){typeof e=="string"?this.source=new SD(e):this.source=e,s?this.decompress=s:this.decompress=$w,n?this.cache=n:this.cache=new kD}getHeader(){return ln(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(e,n,s,u){return ln(this,null,function*(){const h=bD(e,n,s),g=yield this.cache.getHeader(this.source);if(g.specVersion<3)return Nw.getZxy(g,this.source,this.cache,e,n,s,u);if(e<g.minZoom||e>g.maxZoom)return;let m=g.rootDirectoryOffset,c=g.rootDirectoryLength;for(let T=0;T<=3;T++){const M=yield this.cache.getDirectory(this.source,m,c,g),k=ED(M,h);if(k){if(k.runLength>0){const A=yield this.source.getBytes(g.tileDataOffset+k.offset,k.length,u,g.etag);return{data:yield this.decompress(A.data,g.tileCompression),cacheControl:A.cacheControl,expires:A.expires}}m=g.leafDirectoryOffset+k.offset,c=k.length}else return}throw Error("Maximum directory depth exceeded")})}getZxy(e,n,s,u){return ln(this,null,function*(){try{return yield this.getZxyAttempt(e,n,s,u)}catch(h){if(h instanceof Ig)return this.cache.invalidate(this.source),yield this.getZxyAttempt(e,n,s,u);throw h}})}getMetadataAttempt(){return ln(this,null,function*(){const e=yield this.cache.getHeader(this.source),n=yield this.source.getBytes(e.jsonMetadataOffset,e.jsonMetadataLength,void 0,e.etag),s=yield this.decompress(n.data,e.internalCompression),u=new TextDecoder("utf-8");return JSON.parse(u.decode(s))})}getMetadata(){return ln(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(e){if(e instanceof Ig)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw e}})}};const fx={LIGHT:"https://tiles.geodig.jp/styles/white.json",DARK:"https://tiles.geodig.jp/styles/black.json"},Pm=[{id:8e4,minZoom:4,maxZoom:8,level:"80km",name:"80(1)"},{id:1e4,minZoom:8,maxZoom:11,level:"10km",name:"10(2)"},{id:5e3,minZoom:11,maxZoom:12,level:"5km",name:"5"},{id:2e3,minZoom:12,maxZoom:13,level:"2km",name:"2"},{id:1e3,minZoom:13,maxZoom:14,level:"1km",name:"(3)"},{id:500,minZoom:14,maxZoom:15,level:"500m",name:"21"},{id:250,minZoom:15,maxZoom:16,level:"250m",name:"41"},{id:125,minZoom:16,maxZoom:18,level:"125m",name:"81"}],MD=e=>(Gx("data-v-888c547e"),e=e(),Zx(),e),LD={class:"relative"},PD={class:"absolute top-2 left-2 z-10 flex items-center"},zD={class:"absolute top-2 right-2 z-10 flex items-center"},DD={class:"truncate"},RD={class:"truncate"},OD=MD(()=>$i("div",{id:"map"},null,-1)),BD=Ri({__name:"MeshMap",setup(e){const n=ey(),s=Vo(),u=$1(),h=Ew(),g=kt(n.query.code||""),m=kt(Pm[0]),c=kt(!1);let T=null;const M=Ve(()=>u.preference==="light"?fx.LIGHT:fx.DARK),k=Ve(()=>Kn.isValidCode(g.value));Zi(u,()=>{if(!T)return;T.setStyle(M.value);const j=se(T.getZoom());setTimeout(()=>L(T,j),1e3)}),Zi(g,j=>{if(T)if(j){if(!Kn.isValidCode(j))return;A(j),s.push({query:{code:j}})}else{const oe=se(T.getZoom());L(T,oe),s.push({query:{}})}}),Zi(m,j=>{if(!T)return;c.value=!1;const oe=T.getZoom();(oe<=j.minZoom||oe>j.maxZoom)&&T.setZoom(j.maxZoom)}),Zi(c,j=>{T&&(j?(T.setMinZoom(m.value.minZoom),T.setMaxZoom(m.value.maxZoom)):(T.setMinZoom(4),T.setMaxZoom(18)))}),Wr(()=>{let j=[138.517821,34.380147],oe=4,ee=8e4;if(g.value){const Ee=Kn.toLatLngBounds(g.value).getCenter();j=[Ee.lng,Ee.lat],oe=Te(g.value),ee=Kn.getLevel(g.value)}T=new Iw.Map({container:"map",style:M.value,center:j,zoom:oe,minZoom:4,maxZoom:18});const ne=new yD;N5.addProtocol("pmtiles",ne.tile),T.on("load",()=>{T&&(L(T,ee),T.on("click","polygon-mesh-fill",Ie=>{const Ee=Ie.features;g.value=Ee[0].properties.code}))}),T.on("moveend",()=>{if(!T)return;const Ie=se(T.getZoom());L(T,Ie)})});function A(j){if(!T)return;const ee=Kn.toLatLngBounds(j).getCenter(),ne=Te(j);T.getZoom()===ne?T.panTo([ee.lng,ee.lat]):T.flyTo({center:[ee.lng,ee.lat],zoom:ne})}function L(j,oe){const ee=Pm.find(ne=>ne.id===oe);ee&&(m.value=ee),H(j),X(j,oe)}async function H(j,oe){const ee=j.getSource("polygon-selected-mesh");if(!(ee&&(await ee.getData()).properties.code===g.value)&&(j.getLayer("polygon-selected-mesh")&&j.removeLayer("polygon-selected-mesh"),j.getSource("polygon-selected-mesh")&&j.removeSource("polygon-selected-mesh"),g.value)){j.addSource("polygon-selected-mesh",{type:"geojson",data:Kn.toGeoJSON(g.value,{code:g.value})});const ne=j.getLayer("polygon-mesh-line")?"polygon-mesh-line":void 0;j.addLayer({id:"polygon-selected-mesh",type:"fill",source:"polygon-selected-mesh",paint:{"fill-color":"#f87171","fill-opacity":.5}},ne)}}async function X(j,oe){const ee=W(j,oe);if(!ee)return;const ne=j.getSource("polygon-mesh");if(ne){const pe=(await ne.getData()).features.map(Ae=>Ae.properties.code);if(ee.sort().toString()===pe.sort().toString())return}const Ie={type:"FeatureCollection",features:ee.map(Me=>Kn.toGeoJSON(Me,{code:Me}))},Ee={type:"FeatureCollection",features:ee.map(Me=>{const Ae=Kn.toLatLngBounds(Me).getCenter();return{type:"Feature",geometry:{type:"Point",coordinates:[Ae.lng,Ae.lat]},properties:{code:Me}}})};j.getLayer("polygon-mesh-line")&&j.removeLayer("polygon-mesh-line"),j.getLayer("polygon-mesh-fill")&&j.removeLayer("polygon-mesh-fill"),j.getLayer("polygon-mesh-symbol")&&j.removeLayer("polygon-mesh-symbol"),j.getSource("polygon-mesh")&&j.removeSource("polygon-mesh"),j.getSource("center-mesh")&&j.removeSource("center-mesh"),j.addSource("polygon-mesh",{type:"geojson",data:Ie}),j.addSource("center-mesh",{type:"geojson",data:Ee}),j.addLayer({id:"polygon-mesh-line",type:"line",source:"polygon-mesh",paint:{"line-color":"#f87171","line-width":1}}),j.addLayer({id:"polygon-mesh-fill",type:"fill",source:"polygon-mesh",paint:{"fill-opacity":0}}),j.addLayer({id:"polygon-mesh-symbol",type:"symbol",source:"center-mesh",layout:{"text-field":["get","code"],"text-font":["Open Sans Semibold","Arial Unicode MS Bold"],"text-size":["interpolate",["linear"],["zoom"],4,8,9,14],"text-anchor":"center","text-justify":"center","text-allow-overlap":!0},paint:{"text-halo-color":"#fff","text-halo-width":1}})}function W(j,oe){if(oe){const ee=j.getBounds().getNorthEast(),ne=j.getBounds().getSouthWest(),Ie=new Cw(ee.lat,ee.lng,ne.lat,ne.lng);return Kn.getCodesWithinBounds(Ie,oe)}return Kn.getCodes()}function se(j){let oe;return j<=9?oe=8e4:j>9&&j<=11?oe=1e4:j>11&&j<=12?oe=5e3:j>12&&j<=13?oe=2e3:j>13&&j<=14?oe=1e3:j>14&&j<=15?oe=500:j>15&&j<=16?oe=250:j>16?oe=125:oe=8e4,oe}function Te(j){switch(Kn.getLevel(j)){case 8e4:return 9;case 1e4:return 11;case 5e3:return 12;case 2e3:return 13;case 1e3:return 14;case 500:return 15;case 250:return 16;case 125:return 17;default:return 4}}async function ye(){const j=Kn.toGeoJSON(g.value,{code:g.value});await navigator.clipboard.writeText(JSON.stringify(j,null,2)),h.add({color:"gray",icon:"i-heroicons-check-circle",title:""})}return(j,oe)=>{const ee=Zf,ne=bP,Ie=b1,Ee=B5;return _t(),ri("div",LD,[$i("div",PD,[ei(ne,{modelValue:ni(g),"onUpdate:modelValue":oe[1]||(oe[1]=Me=>fr(g)?g.value=Me:null),name:"selectedCode",placeholder:"",icon:"i-heroicons-magnifying-glass-20-solid",autocomplete:"off",size:"md",ui:{icon:{trailing:{pointer:""}}}},{trailing:xr(()=>[KS(ei(ee,{color:"gray",variant:"link",icon:"i-heroicons-x-mark-20-solid",padded:!1,onClick:oe[0]||(oe[0]=Me=>g.value="")},null,512),[[KT,ni(g)!==""]])]),_:1},8,["modelValue"]),ni(k)?(_t(),li(ee,{key:0,icon:"i-heroicons-clipboard-document",color:"white",variant:"solid",size:"md",class:"ml-2",onClick:ye},{default:xr(()=>[go(" GeoJSON  ")]),_:1})):Li("",!0)]),$i("div",zD,[ei(Ee,{modelValue:ni(m),"onUpdate:modelValue":oe[2]||(oe[2]=Me=>fr(m)?m.value=Me:null),options:ni(Pm),class:"w-80",disabled:ni(c)},{label:xr(()=>[ei(Ie,{variant:"outline",class:"w-12 justify-center"},{default:xr(()=>[go(Ur(ni(m).level),1)]),_:1}),$i("span",DD,Ur(ni(m).name),1)]),option:xr(({option:Me})=>[ei(Ie,{variant:"outline",class:"w-12 justify-center"},{default:xr(()=>[go(Ur(Me.level),1)]),_:2},1024),$i("span",RD,Ur(Me.name),1)]),_:1},8,["modelValue","options","disabled"])]),OD])}}}),FD=jn(BD,[["__scopeId","data-v-888c547e"]]);function VD(e,n,s){let u=null;const{pause:h,resume:g,timestamp:m}=ak({controls:!0}),c=kt(null),T=Ve(()=>c.value?n-(m.value-c.value):0);function M(...W){u=setTimeout(()=>{u=null,c.value=null,e(...W)},T.value)}function k(){u&&(clearTimeout(u),u=null)}function A(){c.value=Date.now(),M()}function L(){k(),h()}function H(){k(),h()}function X(){M(),g(),c.value=(c.value||0)+(Date.now()-m.value)}return A(),{start:A,stop:L,pause:H,resume:X,remaining:T}}const $u=ys(Di.ui.strategy,Di.ui.notification,UM),ND=Ri({components:{UIcon:$o,UAvatar:Wf,UButton:Zf},inheritAttrs:!1,props:{id:{type:[String,Number],required:!0},title:{type:String,default:null},description:{type:String,default:null},icon:{type:String,default:()=>$u.default.icon},avatar:{type:Object,default:null},closeButton:{type:Object,default:()=>$u.default.closeButton},timeout:{type:Number,default:()=>$u.default.timeout},actions:{type:Array,default:()=>[]},callback:{type:Function,default:null},color:{type:String,default:()=>$u.default.color,validator(e){return["gray",...Di.ui.colors].includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["close"],setup(e,{emit:n}){const{ui:s,attrs:u}=ra("notification",eo(e,"ui"),$u);let h=null;const g=kt(e.timeout),m=Ve(()=>{var W,se;return fs(tr(s.value.wrapper,(W=s.value.background)==null?void 0:W.replaceAll("{color}",e.color),s.value.rounded,s.value.shadow,(se=s.value.ring)==null?void 0:se.replaceAll("{color}",e.color)),e.class)}),c=Ve(()=>{var W;return tr(s.value.progress.base,(W=s.value.progress.background)==null?void 0:W.replaceAll("{color}",e.color))}),T=Ve(()=>({width:`${g.value/e.timeout*100||0}%`})),M=Ve(()=>{var W;return tr(s.value.icon.base,(W=s.value.icon.color)==null?void 0:W.replaceAll("{color}",e.color))});function k(){h&&h.pause()}function A(){h&&h.resume()}function L(){h&&h.stop(),e.callback&&e.callback(),n("close")}function H(W){h&&h.stop(),W.click&&W.click(),n("close")}function X(){h&&h.stop(),e.timeout&&(h=VD(()=>{L()},e.timeout),Vn(()=>{g.value=h.remaining.value}))}return Zi(()=>e.timeout,X),Wr(X),sa(()=>{h&&h.stop()}),{ui:s,attrs:u,wrapperClass:m,progressClass:c,progressStyle:T,iconClass:M,onMouseover:k,onMouseleave:A,onClose:L,onAction:H,twMerge:fs}}});function $D(e,n,s,u,h,g){const m=$o,c=Wf,T=Zf;return _t(),li(Vf,br({appear:""},e.ui.transition),{default:xr(()=>[$i("div",br({class:e.wrapperClass,role:"status"},e.attrs,{onMouseover:n[0]||(n[0]=(...M)=>e.onMouseover&&e.onMouseover(...M)),onMouseleave:n[1]||(n[1]=(...M)=>e.onMouseleave&&e.onMouseleave(...M))}),[$i("div",{class:Mt([e.ui.container,e.ui.rounded,e.ui.ring])},[$i("div",{class:Mt(["flex",[e.ui.padding,e.ui.gap,{"items-start":e.description||e.$slots.description,"items-center":!e.description&&!e.$slots.description}]])},[e.icon?(_t(),li(m,{key:0,name:e.icon,class:Mt(e.iconClass)},null,8,["name","class"])):Li("",!0),e.avatar?(_t(),li(c,br({key:1},{size:e.ui.avatar.size,...e.avatar},{class:e.ui.avatar.base}),null,16,["class"])):Li("",!0),$i("div",{class:Mt(e.ui.inner)},[e.title||e.$slots.title?(_t(),ri("p",{key:0,class:Mt(e.ui.title)},[sr(e.$slots,"title",{title:e.title},()=>[go(Ur(e.title),1)])],2)):Li("",!0),e.description||e.$slots.description?(_t(),ri("div",{key:1,class:Mt(e.twMerge(e.ui.description,!(e.title&&e.$slots.title)&&"mt-0 leading-5"))},[sr(e.$slots,"description",{description:e.description},()=>[go(Ur(e.description),1)])],2)):Li("",!0),(e.description||e.$slots.description)&&e.actions.length?(_t(),ri("div",{key:2,class:Mt(e.ui.actions)},[(_t(!0),ri(ar,null,oh(e.actions,(M,k)=>(_t(),li(T,br({key:k,ref_for:!0},{...e.ui.default.actionButton||{},...M},{onClick:xm(A=>e.onAction(M),["stop"])}),null,16,["onClick"]))),128))],2)):Li("",!0)],2),e.closeButton||!e.description&&!e.$slots.description&&e.actions.length?(_t(),ri("div",{key:2,class:Mt(e.twMerge(e.ui.actions,"mt-0"))},[!e.description&&!e.$slots.description&&e.actions.length?(_t(!0),ri(ar,{key:0},oh(e.actions,(M,k)=>(_t(),li(T,br({key:k,ref_for:!0},{...e.ui.default.actionButton||{},...M},{onClick:xm(A=>e.onAction(M),["stop"])}),null,16,["onClick"]))),128)):Li("",!0),e.closeButton?(_t(),li(T,br({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{onClick:xm(e.onClose,["stop"])}),null,16,["onClick"])):Li("",!0)],2)):Li("",!0)],2),e.timeout?(_t(),ri("div",{key:0,class:Mt(e.progressClass),style:ia(e.progressStyle)},null,6)):Li("",!0)],2)],16)]),_:3},16)}const Uw=jn(ND,[["render",$D]]),jD=ys(Di.ui.strategy,Di.ui.notifications,qM),UD=Ri({components:{UNotification:Uw},inheritAttrs:!1,props:{class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:n,attrs:s}=ra("notifications",eo(e,"ui"),jD),u=Ew(),h=mh("notifications",()=>[]),g=Ve(()=>fs(tr(n.value.wrapper,n.value.position,n.value.width),e.class));return{ui:n,attrs:s,toast:u,notifications:h,wrapperClass:g}}});function qD(e,n,s,u,h,g){const m=Uw;return _t(),li(MT,{to:"body"},[$i("div",br({class:e.wrapperClass,role:"region"},e.attrs),[e.notifications.length?(_t(),ri("div",{key:0,class:Mt(e.ui.container)},[(_t(!0),ri(ar,null,oh(e.notifications,c=>(_t(),ri("div",{key:c.id},[ei(m,br({ref_for:!0},c,{class:c.click&&"cursor-pointer",onClick:T=>c.click&&c.click(c),onClose:T=>e.toast.remove(c.id)}),XS({_:2},[oh(e.$slots,(T,M)=>({name:M,fn:xr(k=>[sr(e.$slots,M,br({ref_for:!0},k))])}))]),1040,["class","onClick","onClose"])]))),128))],2)):Li("",!0)],16)])}const HD=jn(UD,[["render",qD]]),GD={};function ZD(e,n){const s=yP,u=FD,h=HD;return _t(),ri("div",null,[ei(s),$i("main",null,[ei(u)]),ei(h)])}const WD=jn(GD,[["render",ZD]]),KD={__name:"nuxt-error-page",props:{error:Object},setup(e){const s=e.error;s.stack&&s.stack.split(`
`).splice(1).map(A=>({text:A.replace("webpack:/","").replace(".vue",".js").trim(),internal:A.includes("node_modules")&&!A.includes(".cache")||A.includes("internal")||A.includes("new Promise")})).map(A=>`<span class="stack${A.internal?" internal":""}">${A.text}</span>`).join(`
`);const u=Number(s.statusCode||500),h=u===404,g=s.statusMessage??(h?"Page Not Found":"Internal Server Error"),m=s.message||s.toString(),c=void 0,k=h?lf(()=>wf(()=>import("./Bu0oJ3T-.js"),__vite__mapDeps([2,3]),import.meta.url).then(A=>A.default||A)):lf(()=>wf(()=>import("./Bs6Gzgir.js"),__vite__mapDeps([4,5]),import.meta.url).then(A=>A.default||A));return(A,L)=>(_t(),li(ni(k),zm(df({statusCode:ni(u),statusMessage:ni(g),description:ni(m),stack:ni(c)})),null,16))}},XD={key:0},px={__name:"nuxt-root",setup(e){const n=()=>null,s=Yi(),u=s.deferHydration();if(s.isHydrating){const T=s.hooks.hookOnce("app:error",u);Vo().beforeEach(T)}const h=!1;aa(Qb,ey()),s.hooks.callHookWith(T=>T.map(M=>M()),"vue:setup");const g=ty(),m=!1;Yx((T,M,k)=>{if(s.hooks.callHook("vue:error",T,M,k).catch(A=>console.error("[nuxt] Error in `vue:error` hook",A)),UC(T)&&(T.fatal||T.unhandled))return s.runWithContext(()=>$C(T)),!1});const c=!1;return(T,M)=>(_t(),li(BS,{onResolve:ni(u)},{default:xr(()=>[ni(m)?(_t(),ri("div",XD)):ni(g)?(_t(),li(ni(KD),{key:1,error:ni(g)},null,8,["error"])):ni(c)?(_t(),li(ni(n),{key:2,context:ni(c)},null,8,["context"])):ni(h)?(_t(),li(hs(ni(h)),{key:3})):(_t(),li(ni(WD),{key:4}))]),_:1},8,["onResolve"]))}};let mx;{let e;mx=async function(){var m,c;if(e)return e;const u=!!((m=window.__NUXT__)!=null&&m.serverRendered||((c=document.getElementById("__NUXT_DATA__"))==null?void 0:c.dataset.ssr)==="true")?mI(px):pI(px),h=EC({vueApp:u});async function g(T){await h.callHook("app:error",T),h.payload.error=h.payload.error||iy(T)}u.config.errorHandler=g;try{await IC(h,zM)}catch(T){g(T)}try{await h.hooks.callHook("app:created",u),await h.hooks.callHook("app:beforeMount",u),u.mount(bC),await h.hooks.callHook("app:mounted",u),await qr()}catch(T){g(T)}return u.config.errorHandler===g&&(u.config.errorHandler=void 0),u},e=mx().catch(n=>{throw console.error("Error while mounting app:",n),n})}export{jn as _,$i as a,ei as b,ri as c,go as d,v1 as e,Zx as f,Ri as g,YD as h,Uf as i,Ve as j,ia as n,_t as o,Gx as p,iP as r,Ur as t,PA as u,xr as w};
